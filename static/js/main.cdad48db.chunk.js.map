{"version":3,"sources":["librarys/lightcone_v3/lib/wallet/common/response.ts","colors.js","appLayout.js","components/my-orders/MyOrdersOverview.js","librarys/lightcone_v3/lib/wallet/common/request.ts","librarys/lightcone_v3/lib/wallet/common/validator.ts","librarys/lightcone_v3/lib/wallet/common/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/AbiFunction.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/Contract.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/Contracts.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/utils.ts","librarys/lightcone_v3/lib/wallet/ethereum/eth.ts","librarys/lightcone_v3/lib/wallet/ethereum/wallet.ts","librarys/lightcone_v3/lib/wallet/ethereum/index.ts","librarys/lightcone_v3/lib/wallet/config/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/transaction.ts","librarys/lightcone_v3/model/types.ts","librarys/lightcone_v3/sign/exchange.ts","config/appConfig.js","librarys/lightcone_v3/wallet/account.ts","components/my-orders/MyOrderTable.js","components/my-orders/MyDepositTable.js","components/my-orders/MyWithdrawalTable.js","components/my-orders/MyOrdersDetailView.js","components/my-orders/MyOrders.js","sagas/StartupSagas.js","api/wedexApi.js","utils/enum.js","api/index.js","sagas/index.js","store/models/appState.js","store/models/metaMask.js","store/models/dexAccount.js","store/models/depth.js","store/models/trade.js","store/models/candleStick.js","store/models/markets.js","store/models/tokens.js","store/models/placeOrder.js","store/models/balance.js","store/models/walletBalance.js","store/models/order.js","store/models/transfer.js","store/models/socket.js","store/models/rate.js","store/models/award.js","store/index.js","store/models/index.js","utils/index.js","api/LightconeAPI.js","redux/actions/ModalManager.js","components/my-balances/MyBalancesOverview.js","redux/actions/DexAccount.js","components/my-balances/MyBalanceTable.js","components/my-balances/MyBalancesDetailView.js","components/my-balances/MyBalances.js","components/referral/ReferralDetailView.js","components/referral/Referral.js","widgets/Common/TabNav.js","widgets/Common/CoinInput.js","widgets/Dialog/funcfyDialog.js","widgets/Dialog/BrowserInvalidModal.js","widgets/Dialog/SignInModal.js","widgets/Dialog/UpsertPasswordModal.js","widgets/Dialog/TransferModal.js","components/PromisefyConfirm.js","widgets/Common/BillPreCheck.js","widgets/Common/FormErrorInfo.js","widgets/TopNav.js","widgets/Pair.js","components/Pagination/index.js","components/Svg.js","components/Spin.js","widgets/Trade.js","widgets/TVChartContainer/api/index.js","widgets/TVChartContainer/index.js","widgets/DepthChartContainer/index.js","widgets/TVChart.js","widgets/PlaceOrder.js","widgets/MyOrder.js","widgets/Depth.js","widgets/EggAward.js","views/Home.js","views/mine/Balance.js","views/mine/Transfer.js","views/mine/Order.js","views/mine/Apikey.js","views/mine/Award.js","views/mine/Mine.js","routes/index.js","App.js","serviceWorker.js","theme.js","index.js","librarys/lightcone_v3/lib/wallet/common/formatter.ts","librarys/lightcone_v3/lib/wallet/common/utils.ts","librarys/lightcone_v3/lib/wallet/ethereum/metaMask.ts","librarys/lightcone_v3/lib/wallet/ethereum/keystore.ts","librarys/lightcone_v3/lib/sign/poseidon.ts","librarys/lightcone_v3/lib/wallet/ethereum/mnemonic.ts","librarys/lightcone_v3/lib/wallet/config/tokens.ts","librarys/lightcone_v3/lib/wallet/config/data.ts","icons.js","librarys/lightcone_v3/lib/wallet/ethereum/schemas.ts","librarys/lightcone_v3/lib/wallet/ethereum/validator.ts","librarys/lightcone_v3/lib/wallet/ethereum/walletAccount.ts","librarys/lightcone_v3/lib/sign/bitstream.ts","icons/switchSide.png","metamask.png","icons/wedexLogo.svg","charting_library/charting_library.min.js","icons/fullscreen.svg","icons/depthAll.svg","icons/depthSell.svg","icons/depthBuy.svg","icons/award.png","icons/wedexLogoVertical.png","librarys/lightcone_v3/lib/wallet/common/code.ts","librarys/lightcone_v3/lib/wallet/common/schemas.ts","librarys/lightcone_v3/lib/sign/babyjub.ts","librarys/lightcone_v3/lib/sign/eddsa.ts"],"names":["Response","errorCode","errorMsg","this","code","message","data","MyOrdersOverview","style","paddingTop","paddingLeft","paddingRight","paddingBottom","lineHeight","height","color","colors","fontWeight","fontSize","userSelect","marginTop","props","myOrders","length","React","Component","connect","state","layoutManager","dispatch","headers","checkStatus","response","status","error","Error","statusText","id","crypto","randomBytes","toString","request","host","options","timeOut","requestPromise","Promise","resolve","body","JSON","stringify","fetch","then","res","json","catch","e","timeoutPromise","reject","setTimeout","race","schemas","basic","basicSchemas","validate","payload","type","value","onError","onSuccess","source","schema","Schema","errors","fields","console","log","msgs","map","err","join","handleErrors","formatter","validator","utils","abi","require","AbiFunction","inputs","name","outputs","constant","inputTypes","outputTypes","methodAbiHash","toHex","methodID","abiInputs","parseInputs","clearHexPrefix","rawEncode","parseOutputs","rawDecode","toBuffer","encoded","addHexPrefix","undefined","output","BN","ethereumjs_abi","Contract","abiFunctions","funAbi","filter","reduce","acc","item","key","methodHash","method","abiFunction","encodeInputs","decodeOutputs","encode","methodId","slice","decodeEncodedInputs","WETH","wethAbi","ERC20Token","erc20Abi","AirdropContract","airdropAbi","ExchangeContract","exchangeAbi","Contracts","updateHost","newValue","getTransactionCount","address","tag","a","params","getGasPrice","estimateGas","tx","getAccountBalance","getTransactionByhash","hash","getTransactionRecipt","isValidEthAddress","getHash","sha3","Eth","PARAM_INVALID","msg","signedTx","sendRawTransaction","txHash","call","getWallet","wallets","localStorage","wallet","parse","find","toLowerCase","getNonce","toNumber","nonce","localNonce","Math","max","account","keystore","mnemonic","metamask","eth","setWallet","otherWallets","w","push","isInWhiteList","storeUnlockedAddress","unlockType","unlockedType","unlockedAddress","getUnlockedAddress","getUnlockedType","clearUnlockedAddress","fm","config","configs","fees","txs","whiteList","add","getTokenBySymbol","symbol","getTokens","token","tokens","getMarketBySymbol","baseToken","quoteToken","getMarkets","market","pricePrecision","getMarketsByTokenR","markets","getTokenByAddress","getMarketByPair","pair","pairArr","split","getGasLimitByType","getFeeByType","fee","isinWhiteList","getChainId","chainId","getExchangeId","exchangeId","getLabel","label","getMaxFeeBips","maxFeeBips","isSupportedMarket","m","toUpperCase","getTokenSupportedMarkets","leftMarket","getMarketsByTokenL","rightMarket","getWalletAddress","walletAddress","getExchangeAddress","exchangeAddress","getMaxAmountInWEI","maxAmount","getWallets","fromWEI","valueInWEI","precision","toBig","div","digits","toFixed","toWEI","times","Transaction","rawTx","raw","signed","EthTransaction","privateKey","walletType","path","complete","ethTx","sign","serialize","setChainId","setGasLimit","setGasPrice","KeyPair","publicKeyX","publicKeyY","secretKey","DexAccount","accountId","keyPair","WithdrawalRequest","tokenId","amount","amountInBN","tokenF","tokenFId","amountF","amountFInBN","signature","OrderRequest","owner","tokenS","tokenB","tokenSId","tokenBId","amountS","amountB","amountSInBN","amountBInBN","orderId","allOrNone","validSince","validUntil","buy","feeBips","rebateBips","signatureRx","signatureRy","signatureS","CancelRequest","orderToken","orderTokenId","GetAPIKeyRequest","SignAPIKeyRequest","FlexCancelRequest","orderHash","clientOrderId","SignFlexCancelRequest","assert","exchange","currentWalletAccount","seed","EdDSA","generateKeyPair","password","gasPrice","permission","getAddress","createAccountAndDeposit","publicX","publicY","ethereum","pubKeyX","pubKeyY","tokenAddress","to","feeInWEI","gasLimit","gasInWEI","plus","withdrawal","feeToken","startsWith","signWithdrawal","Poseidon","hasher","success","verify","order","Rx","Ry","s","tokenBuy","tokenSell","signOrder","floor","random","setupOrder","cancel","signCancel","sha256","relay","serverUrl","wsUrl","relayUrl","pollingIntervalRatio","wedex","ratioRecommendedGasPrice","txSendByMetaMask","Account","_spender","_value","appConfig","sendTransaction","signEthereumTx","verifyPassword","createOrUpdateAccountResposne","createOrUpdateAccount","signedEthereumTx","deposit","withdraw","submitWithdrawal","submitOrder","submitCancel","signGetApiKey","submitFlexCancel","MyOrderTable","tableTitleStyle","marginBottom","columns","title","dataIndex","width","i","size","filledFee","Number","side","price","date","Moment","timestamp","format","appLayout","borderWidth","borderStyle","dataSource","pagination","pageSize","scroll","y","BigNumber","MyDepositTable","transactions","transaction","txType","dividedBy","feeAmount","MyWithdrawalTable","ButtonGroup","Group","MyOrdersDetailView","selectedKey","tableComponent","unselectedButtonStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","backgroundColor","marginRight","selectedButtonStyle","borderRadius","className","onClick","setState","Sider","Content","MyOrders","hasSider","borderRightStyle","borderRightWidth","borderColor","display","position","borderLeftStyle","startup","api","action","placeOrder","checkChannel","fetchMarkets","fetchTokens","appState","put","dexAccount","loadAccount","setImmediateInterval","socket","checkHeartBeat","start","srvApi","axios","create","baseURL","setWalletAddr","addr","getUserBillEggPrizeList","restParams","get","postUserReadBillEggPrizeList","post","XEnumItem","text","meta","getValue","XEnum","enumDict","enumItems","Object","values","keys","forEach","itemValue","_","getText","exist","ele","excludeIndex","specKey","includes","ENUM_ACCOUNT_STATUS","UNSIGNED","UNCREATED","CREATED","LOGGED_IN","CREATING","LOCKED","ENUM_ORDER_STATUS","PROCESSING","PROCESSED","CANCELLING","CANCELLED","EXPIRED","ENUM_TX_STATUS","RECEIVED","FAILED","ENUM_INTERVAL_TYPE","MIN_1","MIN_5","MIN_15","MIN_30","HOUR_1","HOUR_2","HOUR_4","HOUR_12","DAY_1","WEEK_1","withoutThrow","func","notification","String","duration","parseResponse","resultInfo","errorData","errorMessage","104208","_parseResponse","description","relayApi","responseData","limit","level","depth","bids","updatedBids","bid","updatedBid","volume","count","sizeInNumber","asks","updatedAsks","ask","updatedAsk","offset","apiKey","statuses","end","orders","updatedOrders","formatOrders","totalNum","getCandlestick","interval","resolution","parseValueByText","promises","periodEnd","periodStart","ms","promise","all","resp","candles","flatten","skip","sendDeposit","minPrice","normalPrice","maxPrice","interceptors","use","getBalances","getOrders","cancelOrders","getEthBalance","getTokenBalance","sendWithdrawTransaction","getTrade","lightconeGetAccount","getDepth","getCandlestickCombine","getApiKey","getTickers","getPrice","getTransactions","sendApprove","getOrderId","submitOrderToLightcone","getRecommendedGasPrice","getAllowance","wedexApi","onLocationChange","root","safeWrap","args","info","pathname","location","select","waitFor","toText","takeLatest","ready","loading","awardInfo","visible","unit","createdAt","reducers","update","showEggAward","closeAward","detect","walletName","window","enable","accounts","fromMetaMask","web3","dkeyEnableSuccess","result","dkeyEnableFailure","fromDkey","startConnecting","isDesiredBrowser","isDesiredNetwork","installed","updateMetaMask","effects","connectToMetaMask","metaMask","browser","valid","isMetaMask","autoRefreshOnNetworkChange","desireNetwork","networkVersion","on","switchAccount","getAccount","isDkey","initAccountFromMetaMask","initState","passwordHash","rememberMeStartTime","rememberMeMinutes","canceledOrders","clearAccountInfo","updateAccount","checkAccountOvertime","moment","isAfter","relayAccount","isFreeze","balance","startFetchBalance","checkAccountCreated","setInterval","checkPassword","genApiKey","fetchOrders","clearInterval","scrollSellTableToBottom","tableDom","document","getElementsByClassName","tableBodyDom","scrollTop","scrollHeight","formatFromWEI","currentMarket","baseSymbol","quoteSymbol","amountPrecision","totalPrecision","calcSummationCurve","items","direction","orderBy","reverse","sumVolume","incrementalVersion","fetchDepth","marketPair","subscribe","setLevel","scrollSellTable","incrementalUpdate","depthState","startVersion","endVersion","expectVersion","newData","chain","unionBy","trades","trade","toUpper","list","latestPrice","lastPrice","variation","page","updateVariation","fetchTrade","currentPrice","tradeState","concat","modified","dayInfo","tvSubscribers","fetchDayInfo","candleStick","pick","subscribeBars","subscribeUID","onRealtimeCallback","symbolInfo","topic","newSub","lastBar","realtimeCb","unsubscribeBars","subscriberUID","sub","subscriber","newCancle","time","high","low","open","close","stars","tabs","currentTab","currentMarkets","cond","sort","sortDirection","updateFilterCond","updateMarketsTicker","tickers","formatTicker","ticker","marketName","size24h","baseTokenSymbol","latest","differ","currentMatched","router","match","matchPath","exact","strict","defaultBaseSymbol","defaultQuoteSymbol","quoteTokens","uniq","defaultTab","setCurrentTab","setCurrentMarket","tab","fetchCurrentMarkets","startFetchMarketInfo","initialize","ws","readyState","reload","onSocketReady","starMarket","xorBy","pairs","buyPrice","buyAmount","buyTotal","sellPrice","sellAmount","sellTotal","marketBuyTotal","marketSellAmount","channelName","placeAnOrder","isBuy","exchangeAccount","tradingPrivKey","tokenSConfig","Date","getTime","signedEtheruemTx","channelId","query","getUrlParams","search","channel","placeBuyOrder","withLoading","placeSellOrder","formatBalances","balances","totalAmount","frozenAmount","availAmount","decimalPlaces","fetchBalances","formatPageParams","equals","newBalance","b","appendBalance","blance","fetchBalance","tokenSymbol","fetchAllBalances","walletBalance","historyStatus","allMarket","orderState","o","cancelAnOrders","cancelAllOrders","orderStore","checkAllowance","depositAmout","allowance","txCount","types","fetchTransactions","transfer","realAmount","toTokenPrecision","approveTxCount","approveZero","approveMax","depositTo","onchainWithdrawal","lastPingTime","pollingIntervals","inverval","alert","WebSocket","onmessage","event","onMessage","onerror","onopen","polling","send","op","topicType","TopicMarket","upperCase","subInfo","intervals","rate","fetchRate","award","checkAward","now","clone","isBefore","CNY","USD","legal","CNYRates","usdt","USDRates","sagaMiddleware","latestAward","billSn","read","newAward","rows","money","markRead","ids","history","createHashHistory","middleware","createContext","loggerMiddleware","createLogger","collapsed","createSagaMiddleware","historyMiddleware","routerMiddleware","initMiddleware","enhancers","applyMiddleware","store","init","models","redux","connectRouter","plugins","persistPlugin","createRematchPersist","whitelist","storage","asyncLocalStorage","version","initPlugin","run","rootSaga","renderIf","predicate","elemOrThunk","isFunction","handler","getState","debounce","placement","warning","hashes","indexOf","val","decodeURIComponent","genPasswordHash","lightConeUtils","keccakHash","promisefy","asyncFunc","preArgs","callback","getPrecision","num","parts","asLegalMoney","from","updatedOrder","quoteTokenSymbol","filledSize","filledVolume","filledInNumber","filled","checkLogined","rootState","signinedStatus","getTradingViewLocale","locale","formatResolution","str","SHOW_DEPOSIT","SHOW_WITHDRAW","MyBalancesOverview","depositModalVisible","withdrawModalVisible","buttons","submitButtonStyle","submitBuyButtonStyle","submitSellButtonStyle","keyPairCipherText","block","showDepositModal","disabled","showWithdrawModal","show","MyBalanceTable","total","available","percentage","asset","quality","MyBalancesDetailView","iconStyle","verticalAlign","MyBalances","ReferralDetailView","margin","textAlign","maxWidth","Referral","Pair","activeTab","onChange","restProps","alignItems","justifyContent","sx","bg","cursor","setActive","children","InputGroup","min","approximate","useState","focused","setFocused","content","trigger","overlayStyle","compact","WebkitBoxShadow","onKeyPress","test","target","currentTarget","selectionStart","selectionEnd","valueAsNumber","isNumber","isNaN","preventDefault","onBlur","onFocus","minWidth","flex","padding","pointerEvents","border","funcfy","createElement","ReactDOM","render","onDestory","unmountComponentAtNode","parentNode","removeChild","errorInfos","Widget","checkInput","form","getFieldProps","getFieldsError","validateFields","remember","loginSunccess","onSucess","modalTitle","getFieldDecorator","getFieldsValue","noLabelLayout","wrapperCol","span","maskClosable","onOk","onCancel","onFail","footer","pt","pb","mx","onSubmit","submit","Item","labelCol","hasFeedback","rules","required","pattern","Password","mt","FormErrorInfo","UpsertPasswordModal","ml","htmlType","WrappedForm","connectedWidget","forwardRef","gasLimitInWEI","createAccountFee","recommendedGasEth","fetchWalletBalances","normal","minGas","normalGas","maxGas","confirmPassword","gasEth","ethAvail","getEthAvail","gasEthInWEI","gasPriceInWEI","common","toGWEI","ethBalance","ethAmount","gasEthForShow","formItemLayout","rule","getFieldValue","initialValue","marks","step","Option","buttonItemLayout","initialSymbol","initialType","balanceStore","walletBalanceStore","setVisible","setSymbol","setType","transferAmount","setTransferAmount","setRecommendedGasEth","setGasEth","useEffect","balancesSymbols","walletBalancesSymbols","symbolOptions","union","walletEthAvail","getWalletEthAvail","withdrawFee","getAvailable","ethAvailable","defaultValue","src","switchSideIcon","right","top","InnerModal","renderContent","otherProps","ref","signIn","checkBrowser","PromisefyConfirm","bodyStyle","px","checkNetwork","invalidText","checkAddress","loadMetamask","checkSignedIn","SignInModal","useImperativeHandle","check","line","TopNav","activitis","link","billPreCheck","menus","mine","changePassword","clearStore","activity","newWindow","genMenu","subMenus","index","menu","signined","accountCreating","overlay","overlayClassName","metamaskLogo","pl","take","takeRight","login","BillPreCheck","variant","wedexLogo","renderNav","as","withRouter","fuzzy","category","href","rel","filters","sorter","extra","field","align","unused","record","haveStar","theme","onCell","rowIndex","stopPropagation","numeral","overflowY","Search","placeholder","allowClear","rowKey","onRow","emptyText","QhPagination","handleSizeChange","fetchDataByPage","bind","handleCurrentChange","currentPage","initPageSize","autoload","pageParams","fetchData","onFetched","current","onShowSizeChange","pageSizeOptions","showQuickJumper","defaultProps","icon","aria-hidden","xlinkHref","antIcon","spin","indicator","wrapperClassName","Trade","onWindowResize","tableHeight","offsetHeight","addEventListener","removeEventListener","row","Spin","spinning","supportedResolutions","getOptions","option","onReady","cb","supported_resolutions","searchSymbols","userInput","symbolType","onResultReadyCallback","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","lightcone_v3_config","symbol_stub","session","timezone","minmov","pricescale","pow","has_intraday","intraday_multipliers","supported_resolution","volume_precision","data_status","getBars","onHistoryCallback","onErrorCallback","firstDataRequest","toLocaleString","noData","startTimestamp","endTimestamp","last","period","timestaps","range","parsedCandles","ts","candle","c","rightCandle","LeftCandle","findLast","onResetCacheNeededCallback","calculateHistoryDepth","resolutionBack","intervalBack","TVChartContainer","_candleDefault","tvWidget","chart","removeAllStudies","createStudy","_lineDefault","prevLocale","prevSymbol","prevLineType","lineType","prevTheme","prevInterval","TradingView","activeChart","setResolution","remove","loadStudies","applyOverrides","Intl","DateTimeFormat","resolvedOptions","timeZone","debug","datafeed","Datafeed","container_id","library_path","libraryPath","frameborder","toolbar_bg","custom_css_url","overrides","disabled_features","enabled_features","charts_storage_url","chartsStorageUrl","charts_storage_api_version","chartsStorageApiVersion","client_id","clientId","user_id","userId","fullscreen","autosize","timeframe","time_frames","symbols_types","studies_overrides","tvInterval","widgetOptions","generateTradingViewConfig","widget","onChartReady","onDataLoaded","containerId","fullScreen","datafeedUrl","studiesOverrides","DepthChartContainer","forceFit","scale","alias","tickCount","grid","showTitle","tooltip","units","views","DEPTH_VIEW","TRADING_VIEW","ViewTypeButton","styled","Text","background","active","left","borderLeftWidth","IntervalButton","TVChart","pairVisible","selectedView","invetvalMapping","itemInterval","borderRight","mr","fullscreenIcon","py","pr","onVisibleChange","flag","renderPairs","renderUnits","bottom","zIndex","renderTvOps","percentPositins","PlaceOrder","updatePlaceOrder","flexDirection","ceil","percent","currentPrecision","baseBalance","quoteBalance","availBase","availQuote","TabNav","TransferModal","renderLimitBuyArea","getMinTradeValue","renderLimitSaleArea","renderMarketBuyArea","renderMarketSaleArea","MyOrder","checked","onTabChange","onChangeShowAll","tableLayout","depthTypes","depthAllIcon","depthSellIcon","depthBuyIcon","Depth","activeType","precisions","depthType","maxBy","maxSize","col","opacity","onRowEvent","renderPrecisions","showHeader","Svg","maxLevel","backgroundImage","awardIcon","backgroundSize","backgroundPosition","wedexLogoVertical","borderTop","Home","windowHeight","clientHeight","windowWidth","clientWidth","largeScreen","bodyHeight","leftRemainHeight","rightRemainHeight","EggAward","TabPane","symbols","renderChart","memoize","overview","radius","innerRadius","marketOptions","balanceTotal","usd","walletBalanceTotal","mb","marketsStore","walletBalances","walletColumns","initialSide","dexColumns","quote","onMouseEnter","renderOverview","renderFilters","onChangeTab","RangePicker","transferColumns","onSymbolChanged","onSideChanged","marginLeft","onStatusChanged","startOf","toDate","valueOf","endOf","transfers","ethToken","minHeight","onDataFetched","reset","infos","startDate","billTime","Balance","Transfer","Order","Apikey","Award","Mine","newProps","oldTab","newTab","borderLeft","borderBottom","routes","component","startSocket","maxHeight","Boolean","hostname","topNavHeight","breakpoints","space","fonts","heading","monospace","fontSizes","fontWeights","bold","lineHeights","backgroundTint","primary","secondary","muted","hint","blue","failure","styles","fontFamily","h1","h2","h3","h4","h5","h6","p","pre","overflowX","table","borderCollapse","borderSpacing","th","borderBottomStyle","td","img","shadows","small","large","variants","divider","topNav","exchangeX","exchangeY","topNavDividerHeight","overflow","noScrollbar","flexCenter","clickable","getElementById","navigator","serviceWorker","registration","unregister","mixed","Buffer","ethUtil","RegExp","toBN","fromGWEI","formatKey","formatAddress","toChecksumAddress","input","padLeftEven","hex","getDisplaySymbol","settingsCurrency","number","rm","EXPONENTIAL_AT","RANGE","ROUNDING_MODE","trim","replace","trimAll","keccak","calculateGas","hashPersonalMessage","substring","r","v","signMessage","_chainId","assign","transactionHash","decryptKeystoreToPkey","parsed","determineKeystoreType","decryptPresaleToPrivKey","private","decryptMewV1ToPrivKey","privKey","decryptUtcKeystoreToPkey","pkeyToKeystore","fromPrivateKey","toV3","n","fromV3","getPrivateKey","encseed","Crypto","locked","publisher","fromEthSale","fromV1","isKeystorePassRequired","getFileName","toJSON","bn128","bigInt","blake2b","F","Fr","SEED","NROUNDSF","NROUNDSP","T","getPseudoRandom","h","digest","affine","leBuff2int","allDifferent","isZero","j","getMatrix","t","nRounds","cmatrix","M","Array","inverse","getConstants","ark","sigma","mul","square","mix","newState","zero","createHash","nRoundsF","nRoundsP","C","mnemonictoPrivatekey","dpath","validateMnemonic","mnemonicToSeed","fromMasterSeed","derive","isValidateMnemonic","phrase","tile","standSchemas","BASIC_TX","ADDRESS","ETH_DATA","TX","BASIC_TOKEN","website","minTradeValue","TOKEN","transactionSchmas","createWallet","Wallet","generate","privateKeytoAddress","privateToAddress","publicKeytoAddress","publicKey","sanitize","publicToAddress","getAddresses","chainCode","pageNum","addresses","hdk","HDKey","dkey","privateKeytoPublic","privateToPublic","fromMnemonic","PrivateKeyAccount","fromKeystore","MetaMaskAccount","createMnemonic","strength","generateMnemonic","WalletAccount","ethNode","ecsign","finalHash","MetaMask","Bitstream","initialData","equal","element","x","numBytes","formattedData","padString","insert","addHex","addBigNumber","parseInt","extractData","extractBytesX","targetLength","imul","charCodeAt","abs","module","exports","arguments","prototype","hasOwnProperty","isArray","mobile","widgetbar","details","watchlist","watchlist_settings","default_symbols","brokerConfig","configFlags","logo","favorites","chartTypes","_id","_ready","_readyHandlers","_onWindowResize","_autoResizeChart","_options","preset","warn","loading_screen","_create","headerReady","_innerWindowLoaded","_innerWindow","onGrayedObjectClicked","_innerAPI","onShortcut","createShortcutAction","unsubscribe","setLanguage","changeSymbol","splice","_iFrame","closePopupsAndDialogs","selectLineTool","selectedLineTool","save","saveChart","load","loadChart","extendedData","getSavedCharts","loadChartFromServer","saveChartToServer","removeChartFromServer","onContextMenu","createButton","showNoticeDialog","showConfirmDialog","showLoadChartDialog","showSaveAsChartDialog","symbolInterval","getSymbolInterval","mainSeriesPriceFormatter","getIntervals","getStudiesList","addCustomCSSFile","applyStudiesOverrides","watchList","chartsCount","layout","setLayout","layoutName","changeTheme","takeScreenshot","lockAllDrawingTools","hideAllDrawingTools","undoRedoState","tradingViewApi","contentWindow","innerHeight","_render","innerHTML","querySelector","widgetReady","initializationFinished","customFormatters","brokerFactory","disabledFeatures","enabledFeatures","restConfig","numeric_formatting","rss_news_feed","newsProvider","news_provider","loadLastChart","load_last_chart","saveLoadAdapter","save_load_adapter","settingsAdapter","settings_adapter","customIndicatorsUrl","indicators_file_name","saved_data","chartContent","encodeURIComponent","studies_access","drawings_access","auto_save_delay","snapshot_url","study_count_limit","symbol_search_request_delay","defineProperty","SUCC","STRING","OPTION_NUMBER","URL","HEX","QUANTITY","PRIVATE_KEY","len","TX_HASH","ABI_METHOD","enum","RPC_TAG","TIMESTAMP","PROJECT_ID","LOOPRING_TOKEN","PRIVATE_KEY_BUFFER","CURRENCY","DEFAULT_BLOCK","CANCEL_ORDER_TYPE","Base8","subOrder","shr","addPoint","q","cta","d","mulPointEscalar","base","rem","exp","isOdd","inSubgroup","P","inCurve","x2","y2","one","packPoint","buff","leInt2Buff","greater","unpackPoint","_buff","greaterOrEquals","sqrt","neg","createBlakeHash","babyJub","poseidon","randomNumber","hashCode","mod","strKey","prv","msgBuff","rBuff","A","R8","hm","S","sig","pubKey","R","Pleft","Pright"],"mappings":"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","file":"static/js/main.cdad48db.chunk.js","sourcesContent":["export default class Response {\n  constructor(errorCode, errorMsg) {\n    this[\"id\"] = \"1\";\n    this[\"result\"] = null;\n    this[\"error\"] = {\n      code: errorCode,\n      message: errorMsg,\n      data: null\n    };\n  }\n}\n\n// common/config/config.json index.js\n// loopring/ethereum/abi.js token.js transaction.js util.js\n","export default {\n  buyPrimary: '#388e3c', // green\n  buySecondary: '#4caf50bb', // muted green\n  buyBar: '#4caf50',\n\n  sellPrimary: '#d32f2f', // orange\n  sellSecondary: '#f44336bb', // muted orange\n  sellBar: '#f44336a0',\n\n  textHighContrast: '#eeeeee', // near white\n  textMedContrast: '#bbbbbb', // light grey. It was a0a0a0\n  textLowContrast: '#424242', // normal grey\n  darkGrey: '#222222', // dark grey\n\n  parentBackground: '#0d0d0d', // dark grey. Primary background color.\n  parentHoverBackground: '#010101', // darkest grey, used in clicked row\n\n  darkBlue: '#161616', // Header background color.\n\n  // Have issues to configure in javascript.\n  // Configure in App.less\n  darkBlueInput: '#25415a', // not used\n\n  border: '#303030', // '#2d2d2d', '#333333'\n\n  theme: '#1c60ff'\n};\n","export default {\n  innerBorderWidth: '1px',\n  borderWidth: '1px',\n  leftSideWidth: '290px',\n  orderBookWidth: '300px',\n  navBarTabWidth: '110px',\n  navBarLevel1Height: '52px',\n  navBarLevel2Height: '45px',\n  mainScreenHeight: 'calc(100vh - 52px - 45px - 1px - 1px - 1px)', // consider border width\n  myOrdersScreenHeight: 'calc(100vh - 52px - 1px - 1px - 1px)',\n  myBalanceTableScreenHeight: '600px',\n  myOrderTableScreenHeight: '470px',\n  // Wallet Balance Model\n  walletBalanceModalWidth: '260px',\n  walletBalanceModalHeight: '300px'\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport colors from 'colors';\n\nclass MyOrdersOverview extends React.Component {\n  render() {\n    return (\n      <div\n        style={{\n          paddingTop: '30px',\n          paddingLeft: '30px',\n          paddingRight: '30px',\n          paddingBottom: '30px'\n        }}\n      >\n        <div\n          style={{\n            lineHeight: '53px',\n            height: '53px',\n            color: colors.textMedContrast,\n            fontWeight: 700,\n            fontSize: '1.4rem',\n            userSelect: 'none'\n          }}\n        >\n          Order Overview\n        </div>\n        <div\n          style={{\n            marginTop: '30px',\n            color: colors.textLowContrast,\n            fontWeight: 400,\n            fontSize: '0.9rem',\n            userSelect: 'none'\n          }}\n        >\n          Number of Orders\n        </div>\n        <div\n          style={{\n            marginTop: '10px',\n            color: colors.textMedContrast,\n            fontWeight: 400,\n            fontSize: '1.4rem'\n          }}\n        >\n          {this.props.myOrders.myOrders.length}\n        </div>\n        <div\n          style={{\n            marginTop: '30px',\n            color: colors.textLowContrast,\n            fontWeight: 400,\n            fontSize: '0.9rem',\n            userSelect: 'none'\n          }}\n        >\n          Volume Past 30 Days\n        </div>\n        <div\n          style={{\n            marginTop: '10px',\n            color: colors.textMedContrast,\n            fontWeight: 400,\n            fontSize: '1.4rem'\n          }}\n        >\n          0.00\n        </div>\n        <div\n          style={{\n            marginTop: '30px',\n            color: colors.textLowContrast,\n            fontWeight: 400,\n            fontSize: '0.9rem',\n            userSelect: 'none'\n          }}\n        >\n          Fees Accrued Past 30 Days\n        </div>\n        <div\n          style={{\n            marginTop: '10px',\n            color: colors.textMedContrast,\n            fontWeight: 400,\n            fontSize: '1.4rem'\n          }}\n        >\n          0.00\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, myOrders } = state;\n  return { layoutManager, myOrders };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrdersOverview);\n","import \"isomorphic-fetch\";\nimport crypto from \"crypto\";\n\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\n\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error(response.statusText);\n    error[\"response\"] = response;\n    throw error;\n  }\n}\n\n/**\n * @description Supports single request and batch request;\n * @param host\n * @param options\n * @param timeOut\n * @returns {Promise}\n */\nfunction request(host: string, options: any, timeOut?: number) {\n  timeOut = timeOut || 15000;\n  const requestPromise = new Promise(resolve => {\n    if (options.body) {\n      options.headers = options.headers || headers;\n      options.body = JSON.stringify(options.body);\n    }\n    fetch(host, options)\n      .then(checkStatus)\n      .then(res => res.json())\n      .then(data => resolve(data))\n      .catch(e => {\n        resolve({ error: e });\n      });\n  });\n  const timeoutPromise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({ error: { message: \"request time out\" } });\n    }, timeOut);\n  });\n  return Promise.race([requestPromise, timeoutPromise]);\n}\n\n/**\n * @description Returns a random hex string\n */\nexport function id() {\n  return crypto.randomBytes(8).toString(\"hex\");\n}\n\nexport default request;\n","import Schema from \"async-validator\";\nimport basicSchemas from \"./schemas\";\n\nconst schemas = {\n  basic: {\n    ...basicSchemas\n  }\n};\n\nlet handleErrors = (errors, fields) => {\n  let msgs = errors.map(err => err.message).join();\n  throw new Error(`data type invalid: ${msgs} \\n`);\n};\n\nlet validate = payload => {\n  let { type, value, onError, onSuccess } = payload;\n  let source = {};\n  let schema = {};\n\n  // fix bug: if value undefined or null\n  if (typeof value === \"undefined\") {\n    throw new Error(`data type invalid: ${type} should not be undefined`);\n  }\n  if (value === null) {\n    throw new Error(`data type invalid: ${type} should not be null`);\n  }\n\n  if (schemas[\"basic\"][type]) {\n    // validate one field , schema & source must just has one field\n    schema[type] = schemas[\"basic\"][type];\n    source[type] = value;\n  }\n\n  // TODO: if schema empty\n  let validator = new Schema(schema);\n  validator.validate(source, (errors, fields) => {\n    if (errors) {\n      console.log(\"validate start source\", source);\n      console.log(\"validate start schema\", schema);\n      if (onError) {\n        onError(errors, fields);\n      } else {\n        handleErrors(errors, fields);\n      }\n    } else {\n      if (onSuccess) {\n        onSuccess();\n      }\n    }\n  });\n};\n\nexport default {\n  validate\n};\n","import request from \"./request\";\nimport * as formatter from \"./formatter\";\nimport validator from \"./validator\";\nimport code from \"./code\";\nimport response from \"./response\";\nimport * as utils from \"./utils\";\n\nexport default {\n  formatter,\n  request,\n  validator,\n  code,\n  response,\n  utils\n};\n","// Using import {*} from 'ethereumjs-abi'; failed to import ethereumjs-abi\nvar abi = require(\"ethereumjs-abi\");\nimport {\n  addHexPrefix,\n  clearHexPrefix,\n  toBuffer,\n  toHex\n} from \"../../common/formatter\";\nimport BN from \"bn.js\";\n\nexport default class AbiFunction {\n  name: string;\n  inputTypes: string[];\n  inputs: any[];\n  outputTypes: string[];\n  outputs: any[];\n  constant: string;\n  methodAbiHash: string;\n\n  constructor({ inputs, name, outputs, constant }) {\n    this.name = name;\n    this.inputTypes = inputs.map(({ type }) => type);\n    this.inputs = inputs;\n    this.outputTypes = outputs.map(({ type }) => type);\n    this.outputs = outputs;\n    this.constant = constant;\n    this.methodAbiHash = toHex(abi.methodID(name, this.inputTypes));\n  }\n\n  /**\n   * @description Returns encoded methodId and inputs\n   * @param inputs Object, examples {owner:\"0x000...}\n   * @returns {string}\n   */\n  encodeInputs(inputs) {\n    const abiInputs = this.parseInputs(inputs);\n    return (\n      this.methodAbiHash +\n      clearHexPrefix(toHex(abi.rawEncode(this.inputTypes, abiInputs)))\n    );\n  }\n\n  /**\n   * @description decode ethereum jsonrpc response result\n   * @param outputs\n   * @returns {*}\n   */\n  decodeOutputs(outputs) {\n    return this.parseOutputs(\n      abi.rawDecode(this.outputTypes, toBuffer(outputs))\n    );\n  }\n\n  /**\n   * @description decode encoded inputs\n   * @param encoded\n   * @returns {*}\n   */\n  decodeEncodedInputs(encoded) {\n    return this.parseOutputs(\n      abi.rawDecode(this.inputTypes, toBuffer(addHexPrefix(encoded)))\n    );\n  }\n\n  parseInputs(inputs = {}) {\n    return this.inputs.map(({ name, type }) => {\n      if (inputs[name] === undefined) {\n        throw new Error(`Parameter ${name} of type ${type} is required!`);\n      }\n      return inputs[name];\n    });\n  }\n\n  parseOutputs(outputs) {\n    return outputs.map(output => {\n      if (output instanceof BN) {\n        return toHex(output);\n      }\n      return output;\n    });\n  }\n}\n","import AbiFunction from \"./AbiFunction\";\nimport { toHex } from \"../../common/formatter\";\nvar ethereumjs_abi = require(\"ethereumjs-abi\");\n\nexport default class Contract {\n  abiFunctions: any;\n\n  constructor(abi) {\n    const funAbi = abi.filter(({ type }) => type === \"function\");\n    this.abiFunctions = funAbi.reduce((acc, item) => {\n      const inputTypes = item.inputs.map(({ type }) => type);\n      const key = `${item.name}(${inputTypes.toString()})`;\n      const methodHash = ethereumjs_abi.methodID(item.name, inputTypes);\n      return {\n        ...acc,\n        [item.name]: new AbiFunction(item),\n        [key]: new AbiFunction(item),\n        [methodHash]: new AbiFunction(item)\n      };\n    });\n  }\n\n  /**\n   * @description Encodes inputs data according to  ethereum abi\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param inputs array\n   * @returns {*|string}\n   */\n  encodeInputs(method, inputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.encodeInputs(inputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decodes outputs\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param outputs string\n   * @returns {*}\n   */\n  decodeOutputs(method, outputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.decodeOutputs(outputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decode encoded method and inputs\n   * @param encode string | Buffer\n   * @returns {*}\n   */\n  decodeEncodeInputs(encode) {\n    encode = toHex(encode);\n    const methodId = encode.slice(0, 10);\n    const abiFunction = this.abiFunctions[methodId];\n    if (abiFunction) {\n      return abiFunction.decodeEncodedInputs(encode.slice(10));\n    } else {\n      throw new Error(`No corresponding method according to abi `);\n    }\n  }\n}\n","import Contract from \"./Contract\";\n\nimport erc20Abi from \"../../config/abis/erc20.json\";\nimport wethAbi from \"../../config/abis/weth.json\";\nimport airdropAbi from \"../../config/abis/airdrop.json\";\nimport exchangeAbi from \"../../config/abis/exchange.json\";\n\nconst WETH = new Contract(wethAbi);\nconst ERC20Token = new Contract(erc20Abi);\nconst AirdropContract = new Contract(airdropAbi);\nconst ExchangeContract = new Contract(exchangeAbi);\n\nexport default {\n  ERC20Token,\n  WETH,\n  AirdropContract,\n  ExchangeContract\n};\n","import AbiFunction from \"./AbiFunction\";\nimport Contract from \"./Contract\";\nimport Contracts from \"./Contracts\";\n\nexport default {\n  AbiFunction,\n  Contract,\n  Contracts\n};\n","import validator from \"../common/validator\";\nimport request from \"../common/request\";\n\nimport { sha3 } from \"ethereumjs-util\";\n\nvar host = \"http://localhost:8545\";\n\nexport function updateHost(newValue) {\n  host = newValue;\n}\n\nexport async function getTransactionCount(address, tag) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n  } catch (e) {\n    throw new Error(\"Invalid Address\");\n  }\n  tag = tag || \"pending\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      throw new Error(\"Invalid tag, must be one of latest, pending, earliest\");\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionCount\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getGasPrice() {\n  const params = [];\n  const body = {};\n  body[\"method\"] = \"eth_gasPrice\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function estimateGas(tx) {\n  const body = {};\n  body[\"method\"] = \"eth_estimateGas\";\n  body[\"params\"] = [tx];\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getAccountBalance(address, tag?) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n  } catch (e) {\n    throw new Error(\"Invalid Address\");\n  }\n  tag = tag || \"pending\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      throw new Error(\"Invalid tag, must be one of latest, pending,earliest\");\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getBalance\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getTransactionByhash(hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    throw new Error(\"Invalid Transaction Hash\");\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionByHash\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getTransactionRecipt(hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    throw new Error(\"Invalid Transaction Hash\");\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionReceipt\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport function isValidEthAddress(address) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function getHash(message) {\n  return sha3(message);\n}\n","import validator from \"./validator\";\nimport request, { id } from \"../common/request\";\nimport Response from \"../common/response\";\nimport code from \"../common/code\";\n\nexport default class Eth {\n  host: string;\n\n  constructor(host) {\n    this.host = host;\n  }\n\n  getTransactionCount({ address, tag }) {\n    return getTransactionCount(this.host, { address, tag });\n  }\n\n  sendRawTransaction(signedTx) {\n    return sendRawTransaction(this.host, signedTx);\n  }\n\n  getGasPrice() {\n    return getGasPrice(this.host);\n  }\n\n  estimateGas(tx) {\n    return estimateGas(this.host, tx);\n  }\n\n  getAccountBalance({ address, tag }) {\n    return getAccountBalance(this.host, { address, tag });\n  }\n\n  getTransactionByhash(txHash) {\n    return getTransactionByhash(this.host, txHash);\n  }\n\n  call({ tx, tag }) {\n    return call(this.host, { tx, tag });\n  }\n}\n\n/**\n * @description Returns the number of transactions sent from an address.\n * @param host\n * @param address\n * @param tag\n * @returns {Promise}\n */\nexport function getTransactionCount(host, { address, tag }) {\n  tag = tag || \"pending\";\n  try {\n    validator.validate({ value: address, type: \"ETH_ADDRESS\" });\n    validator.validate({ value: tag, type: \"RPC_TAG\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionCount\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Sends signed ethereum tx\n * @param host\n * @param signedTx\n * @returns {Promise}\n */\nexport function sendRawTransaction(host, signedTx) {\n  const body = {};\n  body[\"method\"] = \"eth_sendRawTransaction\";\n  body[\"params\"] = [signedTx];\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the current price per gas in wei.\n * @param host\n * @returns {Promise}\n */\nexport function getGasPrice(host) {\n  const params = [];\n  const body = {};\n  body[\"method\"] = \"eth_gasPrice\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Generates and returns an estimate of how much gas is necessary to allow the transaction to complete.\n * @param host\n * @param tx\n * @returns {Promise}\n */\nexport function estimateGas(host, tx) {\n  const body = {};\n  body[\"method\"] = \"eth_estimateGas\";\n  body[\"params\"] = [tx];\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the ethereum balance of the account of given address.\n * @param host\n * @param address\n * @param tag\n * @returns {Promise}\n */\nexport function getAccountBalance(host, { address, tag }) {\n  tag = tag || \"latest\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n      validator.validate({ value: address, type: \"ETH_ADDRESS\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getBalance\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the information about a transaction requested by transaction hash.\n * @param host\n * @param hash ethereum tx hash\n * @returns {Promise}\n */\nexport function getTransactionByhash(host, hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionByHash\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Executes a new message call immediately without creating a transaction on the block chain.\n * @param host\n * @param tx\n * @param tag\n * @returns {Promise}\n */\nexport function call(host, { tx, tag }) {\n  tag = tag || \"latest\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n  }\n  const params = [tx, tag];\n  const body = {};\n  body[\"method\"] = \"eth_call\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n","import { getTransactionCount } from \"./utils\";\nimport { toNumber } from \"../common/formatter\";\nimport validator from \"./validator\";\n\nconst setWallet = wallet => {\n  const wallets =\n    typeof localStorage !== \"undefined\" && localStorage.wallet\n      ? JSON.parse(localStorage.wallet)\n      : [];\n  const otherWallets = wallets.filter(\n    w => w.address.toLowerCase() !== wallet.address.toLowerCase()\n  );\n  otherWallets.push({\n    address: wallet.address,\n    nonce: toNumber(wallet.nonce) + 1\n  });\n  if (typeof localStorage !== \"undefined\") {\n    localStorage.wallet = JSON.stringify(otherWallets);\n  }\n};\n\nconst getWallet = address => {\n  const wallets =\n    typeof localStorage !== \"undefined\" && localStorage.wallet\n      ? JSON.parse(localStorage.wallet)\n      : [];\n  console.log(\"get wallets\");\n  return wallets.find(\n    wallet => wallet.address.toLowerCase() === address.toLowerCase()\n  );\n};\n\nconst getNonce = async address => {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n    const nonce =\n      toNumber((await getTransactionCount(address, \"pending\"))[\"result\"]) || 0;\n    const localNonce =\n      getWallet(address) && getWallet(address).nonce\n        ? getWallet(address).nonce\n        : 0;\n    return Math.max(nonce, localNonce);\n  } catch (e) {\n    throw new Error(e.message);\n  }\n};\n\nconst storeUnlockedAddress = (unlockType, address) => {\n  localStorage.unlockedType = unlockType;\n  localStorage.unlockedAddress = address;\n};\n\nconst getUnlockedAddress = () => {\n  return localStorage.unlockedAddress || \"\";\n};\n\nconst getUnlockedType = () => {\n  return localStorage.unlockedType || \"\";\n};\n\nconst clearUnlockedAddress = () => {\n  localStorage.unlockedType = \"\";\n  localStorage.unlockedAddress = \"\";\n};\n\nconst isInWhiteList = address => {};\n\nexport default {\n  setWallet,\n  getWallet,\n  isInWhiteList,\n  getNonce,\n  storeUnlockedAddress,\n  getUnlockedAddress,\n  getUnlockedType,\n  clearUnlockedAddress\n};\n","import abi from \"./contracts\";\nimport * as account from \"./walletAccount\";\nimport * as keystore from \"./keystore\";\nimport * as metamask from \"./metaMask\";\nimport * as mnemonic from \"./mnemonic\";\nimport * as utils from \"./utils\";\nimport validator from \"./validator\";\nimport eth from \"./eth\";\nimport wallet from \"./wallet\";\n\nexport default {\n  abi,\n  account,\n  keystore,\n  mnemonic,\n  metamask,\n  eth,\n  wallet,\n  validator,\n  utils\n};\n","//const config = require('./config.json');\nconst data = require(\"./data\");\nconst fm = require(\"../common/formatter\");\nconst config = data.configs;\nconst fees = config.fees;\nconst txs = config.txs;\n\nfunction requestWhiteList() {\n  const url =\n    \"//raw.githubusercontent.com/Loopring/mock-relay-data/master/whiteList.json\";\n  return fetch(url, { method: \"GET\" }).then(res => res.json());\n}\n\nasync function isinWhiteList(address) {\n  return await requestWhiteList().then(whiteList => {\n    const result = whiteList.find(\n      add => add.toLowerCase() === address.toLowerCase()\n    );\n    return !!result;\n  });\n}\n\nfunction getChainId() {\n  return config.chainId;\n}\n\nfunction getExchangeId() {\n  return config.exchangeId;\n}\n\nfunction getLabel() {\n  return config.label;\n}\n\nfunction getMaxFeeBips() {\n  return config.maxFeeBips;\n}\n\nfunction getTokenBySymbol(symbol) {\n  if (!symbol) {\n    return {};\n  }\n  return (\n    getTokens().find(\n      token => token.symbol.toLowerCase() === symbol.toLowerCase()\n    ) || {}\n  );\n}\n\nfunction getTokenByAddress(address) {\n  if (!address) {\n    return {};\n  }\n  return getTokens().find(\n    token => token.address.toLowerCase() === address.toLowerCase()\n  );\n}\n\nfunction getCustomTokens() {\n  return getTokens().filter(token => token.custom);\n}\n\nfunction getTokens() {\n  return config.tokens;\n}\n\nfunction fromWEI(symbol, valueInWEI, precision = 4) {\n  const token = getTokenBySymbol(symbol);\n  if (!token) {\n    return 0;\n  }\n  const value = fm.toBig(valueInWEI).div(\"1e\" + token.digits);\n  return value.toNumber().toFixed(precision);\n}\n\nfunction toWEI(symbol, value) {\n  const token = getTokenBySymbol(symbol);\n  if (!token) {\n    return 0;\n  }\n  const valueInBN = fm.toBig(value).times(\"1e\" + token.digits);\n  return valueInBN.toString(10);\n}\n\nfunction getMarketByPair(pair) {\n  if (pair) {\n    const pairArr = pair.split(\"-\");\n    if (pairArr && pairArr.length === 2) {\n      return getMarketBySymbol(pairArr[0], pairArr[1]);\n    }\n  }\n}\n\nfunction isSupportedMarket(market) {\n  if (!market) {\n    return false;\n  }\n  const pair = market.split(\"-\");\n  if (pair.length !== 2) {\n    return false;\n  }\n  return getMarkets().find(m => {\n    return (\n      (m.baseToken === pair[0].toUpperCase() &&\n        m.quoteToken === pair[1].toUpperCase()) ||\n      (m.baseToken === pair[1].toUpperCase() &&\n        m.quoteToken === pair[0].toUpperCase())\n    );\n  });\n}\n\nfunction getMarketBySymbol(baseToken, quoteToken) {\n  if (baseToken && quoteToken) {\n    return (\n      getMarkets().find(market => {\n        return (\n          (market.baseToken === baseToken &&\n            market.quoteToken === quoteToken) ||\n          (market.baseToken === quoteToken && market.quoteToken === baseToken)\n        );\n      }) || {\n        pricePrecision: 8\n      }\n    );\n  } else {\n    return {\n      pricePrecision: 8\n    };\n  }\n}\n\nfunction getMarketsByTokenR(token) {\n  return getMarkets().filter(item => item.quoteToken === token);\n}\n\nfunction getMarketsByTokenL(token) {\n  return getMarkets().filter(item => item.baseToken === token);\n}\n\nfunction getTokenSupportedMarkets(token) {\n  const leftMarket = getMarketsByTokenL(token);\n  const rightMarket = getMarketsByTokenR(token);\n  return [...leftMarket, ...rightMarket];\n}\n\nfunction getMarkets() {\n  return config.markets;\n}\n\nfunction getGasLimitByType(type) {\n  if (type) {\n    return txs.find(tx => type === tx.type);\n  }\n}\n\nfunction getFeeByType(type) {\n  if (type) {\n    return fees.find(fee => type === fee.type);\n  }\n}\n\nfunction getWalletAddress() {\n  return config.walletAddress;\n}\n\nfunction getExchangeAddress() {\n  return config.exchangeAddress;\n}\n\nfunction getWallets() {\n  return data.wallets;\n}\n\nfunction getMaxAmountInWEI() {\n  return config.maxAmount;\n}\n\nexport default {\n  getTokenBySymbol,\n  getTokenByAddress,\n  getTokens,\n  getMarketBySymbol,\n  getMarketByPair,\n  getGasLimitByType,\n  getFeeByType,\n  isinWhiteList,\n  getChainId,\n  getExchangeId,\n  getLabel,\n  getMaxFeeBips,\n  isSupportedMarket,\n  getMarketsByTokenR,\n  getTokenSupportedMarkets,\n  getMarkets,\n  getWalletAddress,\n  getExchangeAddress,\n  getMaxAmountInWEI,\n  getWallets,\n  fromWEI,\n  toWEI\n};\n","import EthTransaction from \"ethereumjs-tx\";\nimport validator from \"./validator\";\nimport { addHexPrefix, toBuffer, toHex } from \"../common/formatter\";\nimport { getGasPrice, getTransactionCount } from \"./utils\";\nimport request from \"../common/request\";\nimport { configs } from \"../config/data\";\n\n// HACK: What is the host in wallet/ethereum?\nconst host = \"host\";\n\nexport default class Transaction {\n  raw: string;\n  signed: string;\n\n  constructor(rawTx) {\n    validator.validate({ value: rawTx, type: \"BASIC_TX\" });\n    this.raw = rawTx;\n  }\n\n  setGasLimit() {\n    this.raw[\"gasLimit\"] = this.raw[\"gasLimit\"] || configs[\"defaultGasLimit\"];\n  }\n\n  async setGasPrice() {\n    this.raw[\"gasPrice\"] =\n      this.raw[\"gasPrice\"] || (await getGasPrice())[\"result\"];\n  }\n\n  setChainId() {\n    this.raw[\"chainId\"] = this.raw[\"chainId\"] || configs[\"chainId\"] || 1;\n  }\n\n  async setNonce(address, tag) {\n    tag = tag || \"pending\";\n    this.raw[\"nonce\"] =\n      this.raw[\"nonce\"] || (await getTransactionCount(address, tag))[\"result\"];\n  }\n\n  hash() {\n    validator.validate({ value: this.raw, type: \"TX\" });\n    return new EthTransaction(this.raw).hash();\n  }\n\n  async sign({ privateKey, walletType, path }) {\n    try {\n      validator.validate({ value: this.raw, type: \"TX\" });\n    } catch (e) {\n      await this.complete();\n    }\n    const ethTx = new EthTransaction(this.raw);\n\n    let signed;\n    if (privateKey) {\n      try {\n        if (typeof privateKey === \"string\") {\n          validator.validate({ value: privateKey, type: \"PRIVATE_KEY\" });\n          privateKey = toBuffer(addHexPrefix(privateKey));\n        } else {\n          validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n        }\n      } catch (e) {\n        throw new Error(\"Invalid private key\");\n      }\n\n      ethTx.sign(privateKey);\n      signed = toHex(ethTx.serialize());\n    } else {\n      throw new Error(\"Invalid private key\");\n    }\n    this.signed = signed;\n    return signed;\n  }\n\n  async send({ privateKey, walletType, path }) {\n    if (!this.signed) {\n      await this.sign({ privateKey, walletType, path });\n    }\n    let body = {};\n    body[\"method\"] = \"eth_sendRawTransaction\";\n    body[\"params\"] = [this.signed];\n    return request(host, {\n      method: \"post\",\n      body\n    });\n  }\n\n  async sendRawTx(signedTx) {\n    let body = {};\n    body[\"method\"] = \"eth_sendRawTransaction\";\n    body[\"params\"] = [signedTx];\n    return request(host, {\n      method: \"post\",\n      body\n    });\n  }\n\n  async complete() {\n    this.setChainId();\n    this.setGasLimit();\n    await this.setGasPrice();\n  }\n}\n","import BN from \"bn.js\";\n\n/**\n * The keypair data for EdDSA.\n */\nexport class KeyPair {\n  publicKeyX: string;\n  publicKeyY: string;\n  secretKey: string;\n}\n\nexport class DexAccount {\n  accountId: number;\n  keyPair: KeyPair;\n  nonce?: number;\n}\n\n/**\n * The signature data for EdDSA.\n */\nexport interface Signature {\n  Rx: string;\n  Ry: string;\n  s: string;\n}\n\nexport class WithdrawalRequest {\n  account: DexAccount;\n  token: string;\n  tokenId?: number;\n  amount: string;\n  amountInBN?: BN;\n  tokenF: string;\n  tokenFId?: number;\n  amountF: string;\n  amountFInBN?: BN;\n  label?: number;\n  signature?: Signature;\n  hash?: string;\n}\n\nexport class OrderRequest {\n  owner: string;\n  accountId: number;\n  exchangeId: number;\n  keyPair: KeyPair;\n\n  tokenS: string;\n  tokenB: string;\n  tokenSId: number;\n  tokenBId: number;\n\n  amountS: string;\n  amountB: string;\n  amountSInBN: BN;\n  amountBInBN: BN;\n\n  orderId: number;\n\n  label: number;\n\n  allOrNone?: boolean;\n  validSince: number;\n  validUntil: number;\n  maxFeeBips: number;\n  buy?: boolean;\n\n  feeBips: number;\n  rebateBips?: number;\n\n  hash?: string;\n  signatureRx?: string;\n  signatureRy?: string;\n  signatureS?: string;\n\n  [key: string]: any;\n}\n\n// must be cost by circuit -- NOT recommend\nexport class CancelRequest {\n  account: DexAccount;\n  orderToken: string;\n  orderTokenId?: number;\n  orderId: number;\n  tokenF: string;\n  tokenFId?: number;\n  amountF: string;\n  amountFInBN?: BN;\n  label?: number;\n  signature?: Signature;\n}\n\nexport class GetAPIKeyRequest {\n  account: DexAccount;\n  signature?: Signature;\n}\n\nexport class SignAPIKeyRequest {\n  accountId: number;\n  publicKeyX: string;\n  publicKeyY: string;\n}\n\nexport class FlexCancelRequest {\n  account: DexAccount;\n  orderHash?: string;\n  clientOrderId?: string;\n  signature?: Signature;\n}\n\nexport class SignFlexCancelRequest {\n  accountId: number;\n  orderHash?: string;\n  clientOrderId?: string;\n}\n","import { EdDSA } from \"../lib/sign/eddsa\";\nimport { ethereum } from \"../lib/wallet\";\nimport * as fm from \"../lib/wallet/common/formatter\";\nimport config from \"../lib/wallet/config\";\nimport Transaction from \"../lib/wallet/ethereum/transaction\";\nimport { WalletAccount } from \"../lib/wallet/ethereum/walletAccount\";\nimport {\n  CancelRequest,\n  FlexCancelRequest,\n  GetAPIKeyRequest,\n  OrderRequest,\n  SignAPIKeyRequest,\n  SignFlexCancelRequest,\n  WithdrawalRequest\n} from \"../model/types\";\nimport * as Poseidon from \"../lib/sign/poseidon\";\nimport sha256 from \"crypto-js/sha256\";\n\nconst assert = require(\"assert\");\n\nexport class Exchange {\n  private currentWalletAccount: WalletAccount;\n\n  public generateKeyPair(seed: string) {\n    return EdDSA.generateKeyPair(seed);\n  }\n\n  public verifyPassword(publicKeyX: string, publicKeyY: string, seed: string) {\n    const keyPair = this.generateKeyPair(seed);\n    return (\n      keyPair.publicKeyX === publicKeyX && keyPair.publicKeyY === publicKeyY\n    );\n  }\n\n  public createOrUpdateAccount(\n    wallet: WalletAccount,\n    password: string,\n    nonce: number,\n    gasPrice: number,\n    permission: Buffer\n  ) {\n    try {\n      const keyPair = EdDSA.generateKeyPair(wallet.getAddress() + password);\n      this.currentWalletAccount = wallet;\n      const transaction = this.createAccountAndDeposit(\n        keyPair.publicKeyX,\n        keyPair.publicKeyY,\n        \"\",\n        \"0\",\n        permission,\n        nonce,\n        gasPrice\n      );\n      return {\n        rawTx: transaction,\n        keyPair: keyPair\n      };\n    } catch (err) {\n      console.error(\"Failed in method updateAccount. Error: \", err);\n      throw err;\n    }\n  }\n\n  private createAccountAndDeposit(\n    publicX: string,\n    publicY: string,\n    symbol: string,\n    amount: string,\n    permission: Buffer,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      let address, value: string;\n      const token = config.getTokenBySymbol(symbol);\n\n      if (JSON.stringify(token) === \"{}\") {\n        address = \"0x0\";\n        value = \"0\";\n      } else {\n        address = token.address;\n        value = fm.toHex(fm.toBig(amount).times(\"1e\" + token.digits));\n      }\n\n      const data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n        \"updateAccountAndDeposit\",\n        {\n          pubKeyX: fm.toHex(fm.toBN(publicX)),\n          pubKeyY: fm.toHex(fm.toBN(publicY)),\n          tokenAddress: address,\n          amount: value,\n          permission: permission\n        }\n      );\n\n      return new Transaction({\n        to: config.getExchangeAddress(),\n        value: fm.toHex(config.getFeeByType(\"create\").feeInWEI),\n        data: data,\n        chainId: config.getChainId(),\n        nonce: fm.toHex(nonce),\n        gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n        gasLimit: fm.toHex(config.getGasLimitByType(\"create\").gasInWEI)\n      });\n    } catch (err) {\n      console.error(\"Failed in method createOrUpdateAccount. Error: \", err);\n      throw err;\n    }\n  }\n\n  public deposit(\n    wallet: WalletAccount,\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    let to, value, data: string;\n    try {\n      const token = config.getTokenBySymbol(symbol);\n      const fee = config.getFeeByType(\"deposit\").feeInWEI;\n      value = fm.toBig(amount).times(\"1e\" + token.digits);\n\n      if (wallet.getAddress()) {\n        this.currentWalletAccount = wallet;\n        if (symbol === \"ETH\") {\n          to = \"0x0\";\n          data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n            \"deposit\",\n            {\n              tokenAddress: to,\n              amount: fm.toHex(value)\n            }\n          );\n          value = value.plus(fee);\n        } else {\n          to = token.address;\n          data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n            \"deposit\",\n            {\n              tokenAddress: to,\n              amount: fm.toHex(value)\n            }\n          );\n          value = fee;\n        }\n\n        return new Transaction({\n          to: config.getExchangeAddress(),\n          value: fm.toHex(value),\n          data: data,\n          chainId: config.getChainId(),\n          nonce: fm.toHex(nonce),\n          gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n          gasLimit: fm.toHex(config.getGasLimitByType(\"depositTo\").gasInWEI)\n        });\n      }\n    } catch (err) {\n      console.error(\"Failed in method deposit. Error: \", err);\n      throw err;\n    }\n  }\n\n  public withdraw(\n    wallet: WalletAccount,\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    let to, value, data: string;\n    try {\n      const token = config.getTokenBySymbol(symbol);\n      const fee = config.getFeeByType(\"withdraw\").feeInWEI;\n      value = fm.toBig(amount).times(\"1e\" + token.digits);\n\n      if (wallet.getAddress()) {\n        this.currentWalletAccount = wallet;\n        to = symbol === \"ETH\" ? \"0x0\" : token.address;\n        data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n          \"withdraw\",\n          {\n            tokenAddress: to,\n            amount: fm.toHex(value)\n          }\n        );\n        value = fee;\n        return new Transaction({\n          to: config.getExchangeAddress(),\n          value: fm.toHex(value),\n          data: data,\n          chainId: config.getChainId(),\n          nonce: fm.toHex(nonce),\n          gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n          gasLimit: fm.toHex(config.getGasLimitByType(\"withdrawFrom\").gasInWEI)\n        });\n      }\n    } catch (err) {\n      console.error(\"Failed in method withdraw. Error: \", err);\n      throw err;\n    }\n  }\n\n  public submitWithdrawal(withdrawal: WithdrawalRequest) {\n    let token, feeToken;\n    if (!withdrawal.token.startsWith(\"0x\")) {\n      token = config.getTokenBySymbol(withdrawal.token);\n    } else {\n      token = config.getTokenByAddress(withdrawal.token);\n    }\n    if (!withdrawal.tokenF.startsWith(\"0x\")) {\n      feeToken = config.getTokenBySymbol(withdrawal.tokenF);\n    } else {\n      feeToken = config.getTokenByAddress(withdrawal.tokenF);\n    }\n    withdrawal.tokenId = token.id;\n    withdrawal.token = token.address;\n    withdrawal.amountInBN = config.toWEI(token.symbol, withdrawal.amount);\n    withdrawal.amount = withdrawal.amountInBN.toString(10);\n\n    withdrawal.tokenFId = feeToken.id;\n    withdrawal.tokenF = feeToken.address;\n    withdrawal.amountFInBN = config.toWEI(feeToken.symbol, withdrawal.amountF);\n    withdrawal.amountF = withdrawal.amountFInBN.toString(10);\n\n    withdrawal.label =\n      withdrawal.label !== undefined ? withdrawal.label : config.getLabel();\n    return this.signWithdrawal(withdrawal);\n  }\n\n  public signWithdrawal(withdrawal: WithdrawalRequest) {\n    if (withdrawal.signature !== undefined) {\n      return;\n    }\n    const account = withdrawal.account;\n    const hasher = Poseidon.createHash(9, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      account.accountId,\n      withdrawal.tokenId,\n      withdrawal.amountInBN,\n      withdrawal.tokenFId,\n      withdrawal.amountFInBN,\n      withdrawal.label,\n      account.nonce\n    ];\n    const hash = hasher(inputs).toString(10);\n\n    // Create signature\n    withdrawal.hash = hash;\n    withdrawal.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, withdrawal.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return withdrawal;\n  }\n\n  public signOrder(order: OrderRequest) {\n    if (order.signature !== undefined) {\n      return;\n    }\n    const hasher = Poseidon.createHash(14, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      order.orderId,\n      order.accountId,\n      order.tokenSId,\n      order.tokenBId,\n      order.amountSInBN,\n      order.amountBInBN,\n      order.allOrNone ? 1 : 0,\n      order.validSince,\n      order.validUntil,\n      order.maxFeeBips,\n      order.buy ? 1 : 0,\n      order.label\n    ];\n    order.hash = hasher(inputs).toString(10);\n\n    // Create signature\n    const signature = EdDSA.sign(order.keyPair.secretKey, order.hash);\n    order.signature = signature;\n    order.signatureRx = signature.Rx;\n    order.signatureRy = signature.Ry;\n    order.signatureS = signature.s;\n\n    // Verify signature\n    const success = EdDSA.verify(order.hash, order.signature, [\n      order.keyPair.publicKeyX,\n      order.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return order;\n  }\n\n  public setupOrder(order: OrderRequest) {\n    let tokenBuy, tokenSell;\n    if (!order.tokenS.startsWith(\"0x\")) {\n      tokenSell = config.getTokenBySymbol(order.tokenS);\n    } else {\n      tokenSell = config.getTokenByAddress(order.tokenS);\n    }\n    if (!order.tokenB.startsWith(\"0x\")) {\n      tokenBuy = config.getTokenBySymbol(order.tokenB);\n    } else {\n      tokenBuy = config.getTokenByAddress(order.tokenB);\n    }\n    order.tokenS = tokenSell.address;\n    order.tokenB = tokenBuy.address;\n    order.tokenSId = tokenSell.id;\n    order.tokenBId = tokenBuy.id;\n\n    order.amountSInBN = config.toWEI(tokenSell.symbol, order.amountS);\n    order.amountS = order.amountSInBN.toString(10);\n\n    order.amountBInBN = config.toWEI(tokenBuy.symbol, order.amountB);\n    order.amountB = order.amountBInBN.toString(10);\n\n    order.exchangeId =\n      order.exchangeId !== undefined\n        ? order.exchangeId\n        : config.getExchangeId();\n    order.buy = order.buy !== undefined ? order.buy : false;\n\n    order.maxFeeBips =\n      order.maxFeeBips !== undefined\n        ? order.maxFeeBips\n        : config.getMaxFeeBips();\n    order.allOrNone = order.allOrNone !== undefined ? order.allOrNone : false;\n\n    order.feeBips =\n      order.feeBips !== undefined ? order.feeBips : order.maxFeeBips;\n    order.rebateBips = order.rebateBips !== undefined ? order.rebateBips : 0;\n    order.label = order.label !== undefined ? order.label : config.getLabel();\n\n    assert(order.maxFeeBips < 64, \"maxFeeBips >= 64\");\n    assert(order.feeBips < 64, \"feeBips >= 64\");\n    assert(order.rebateBips < 64, \"rebateBips >= 64\");\n    assert(order.label < 2 ** 16, \"order.label >= 2**16\");\n\n    // Sign the order\n    return this.signOrder(order);\n  }\n\n  public getRandomInt(max: number) {\n    return Math.floor(Math.random() * max);\n  }\n\n  public submitOrder(wallet: WalletAccount, request: OrderRequest) {\n    this.currentWalletAccount = wallet;\n    return this.setupOrder(request);\n  }\n\n  public signCancel(cancel: CancelRequest) {\n    if (cancel.signature !== undefined) {\n      return;\n    }\n    const account = cancel.account;\n    const hasher = Poseidon.createHash(9, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      account.accountId,\n      cancel.orderTokenId,\n      cancel.orderId,\n      cancel.tokenFId,\n      cancel.amountFInBN,\n      cancel.label,\n      account.nonce\n    ];\n    const hash = hasher(inputs).toString(10);\n\n    // Create signature\n    cancel.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, cancel.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return cancel;\n  }\n\n  public submitCancel(cancel: CancelRequest) {\n    let orderToken, feeToken;\n    if (!cancel.orderToken.startsWith(\"0x\")) {\n      orderToken = config.getTokenBySymbol(cancel.orderToken);\n    } else {\n      orderToken = config.getTokenByAddress(cancel.orderToken);\n    }\n    if (!cancel.tokenF.startsWith(\"0x\")) {\n      feeToken = config.getTokenBySymbol(cancel.tokenF);\n    } else {\n      feeToken = config.getTokenByAddress(cancel.tokenF);\n    }\n    cancel.tokenFId = feeToken.id;\n    cancel.tokenF = feeToken.symbol;\n    cancel.orderTokenId = orderToken.id;\n    cancel.orderToken = orderToken.symbol;\n\n    cancel.amountFInBN = config.toWEI(feeToken.symbol, cancel.amountF);\n    cancel.amountF = cancel.amountFInBN.toString(10);\n\n    cancel.label =\n      cancel.label !== undefined ? cancel.label : config.getLabel();\n    return this.signCancel(cancel);\n  }\n\n  public submitFlexCancel(request: FlexCancelRequest) {\n    if (request.signature !== undefined) {\n      return;\n    }\n    const account = request.account;\n    let sign = new SignFlexCancelRequest();\n    sign.accountId = account.accountId;\n    sign.orderHash = request.orderHash;\n    sign.clientOrderId = request.clientOrderId;\n    const hash = fm.addHexPrefix(sha256(JSON.stringify(sign)).toString());\n\n    // Create signature\n    request.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, request.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return request;\n  }\n\n  public signGetApiKey(request: GetAPIKeyRequest) {\n    if (request.signature !== undefined) {\n      return;\n    }\n    let account = request.account;\n    let sign = new SignAPIKeyRequest();\n    sign.accountId = account.accountId;\n    sign.publicKeyX = account.keyPair.publicKeyX;\n    sign.publicKeyY = account.keyPair.publicKeyY;\n    const hash = fm.addHexPrefix(sha256(JSON.stringify(sign)).toString());\n\n    // Create signature\n    request.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, request.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return request;\n  }\n}\n\nexport const exchange: Exchange = new Exchange();\n","const mainChain = true\nconst debug = false\nexport default {\n  relay: {\n    serverUrl: mainChain ? 'https://api.wedex.io/api/v1' : 'http://uat.loopring.io/api/v1',\n    wsUrl: mainChain ? 'wss://api.wedex.io/v1/ws' : 'ws://uat.loopring.io/v1/ws',\n    relayUrl: 'http://18.163.120.178:8080/lightcone_v3/',\n  },\n  pollingIntervalRatio: debug ? 10 : 1,\n  wedex: {\n    // 国内阿里云\n    // serverUrl: 'http://112.74.28.187:18081/api'\n    // 阿军亚马逊国际站美国服务器\n    // serverUrl: 'http://18.163.13.39:8080/api'\n    // 阿里云国际站香港服务器\n    serverUrl: 'https://hd.wedex.io/api'\n  },\n  ratioRecommendedGasPrice: mainChain ? 0.5 : 1,\n  txSendByMetaMask: true\n}\n","import { exchange } from \"..\";\nimport * as fm from \"../lib/wallet/common/formatter\";\nimport config from \"../lib/wallet/config\";\nimport Contracts from \"../lib/wallet/ethereum/contracts/Contracts\";\nimport Transaction from \"../lib/wallet/ethereum/transaction\";\nimport { WalletAccount } from \"../lib/wallet/ethereum/walletAccount\";\nimport {\n  CancelRequest,\n  DexAccount,\n  FlexCancelRequest,\n  GetAPIKeyRequest,\n  KeyPair,\n  OrderRequest,\n  WithdrawalRequest\n} from \"../model/types\";\nimport appConfig from 'config/appConfig'\n\nconst assert = require(\"assert\");\n\nexport class Account {\n  public account: WalletAccount;\n\n  public constructor(account) {\n    this.account = account;\n  }\n\n  /**\n   * Approve Zero\n   * @param symbol: approve token symbol to zero\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async approveZero(symbol: string, nonce: number, gasPrice: number) {\n    const token = config.getTokenBySymbol(symbol);\n    const rawTx = new Transaction({\n      to: token.address,\n      value: \"0x0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: config.getExchangeAddress(),\n        _value: \"0x0\"\n      }),\n      chainId: config.getChainId(),\n      nonce: fm.toHex(nonce),\n      gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n      gasLimit: fm.toHex(config.getGasLimitByType(\"approve\").gasInWEI)\n    });\n    // return this.account.signEthereumTx(rawTx.raw);\n\n    const response = appConfig.txSendByMetaMask\n      ? await this.account.sendTransaction(null, rawTx.raw)\n      : await this.account.signEthereumTx(rawTx.raw)\n    return response;\n  }\n\n  /**\n   * Approve Max\n   * @param symbol: approve token symbol to max\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async approveMax(symbol: string, nonce: number, gasPrice: number) {\n    const token = config.getTokenBySymbol(symbol);\n    const rawTx = new Transaction({\n      to: token.address,\n      value: \"0x0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: config.getExchangeAddress(),\n        _value: config.getMaxAmountInWEI()\n      }),\n      chainId: config.getChainId(),\n      nonce: fm.toHex(nonce),\n      gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n      gasLimit: fm.toHex(config.getGasLimitByType(\"approve\").gasInWEI)\n    });\n\n    const response = appConfig.txSendByMetaMask\n      ? await this.account.sendTransaction(null, rawTx.raw)\n      : await this.account.signEthereumTx(rawTx.raw)\n    return response;\n  }\n\n  /**\n   * generate key pair of account in DEX\n   * @param password: account specified password\n   */\n  public generateKeyPair(password: string) {\n    try {\n      assert(this.account !== null);\n      return exchange.generateKeyPair(this.account.getAddress() + password);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * verify password of account in DEX\n   * @param publicKeyX: publicKeyX of account's key pair\n   * @param publicKeyY: publicKeyY of account's key pair\n   * @param password: account specified password\n   */\n  public verifyPassword(\n    publicKeyX: string,\n    publicKeyY: string,\n    password: string\n  ) {\n    try {\n      assert(this.account !== null);\n      return exchange.verifyPassword(\n        publicKeyX,\n        publicKeyY,\n        this.account.getAddress() + password\n      );\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * create Or Update Account in DEX\n   * @param gasPrice: in gwei\n   * @param nonce: Ethereum nonce of this address\n   * @param permission: user permission\n   * @param password: user password\n   */\n  public async createOrUpdateAccount(\n    password: string,\n    nonce: number,\n    gasPrice: number,\n    permission?: string\n  ) {\n    try {\n      permission = permission !== undefined ? permission : \"\";\n      const createOrUpdateAccountResposne = exchange.createOrUpdateAccount(\n        this.account,\n        password,\n        nonce,\n        gasPrice,\n        fm.toBuffer(permission)\n      );\n      const rawTx = createOrUpdateAccountResposne[\"rawTx\"];\n      // const signedEthereumTx = await this.account.signEthereumTx(rawTx.raw);\n      const signedEthereumTx = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw);\n      return {\n        signedTx: signedEthereumTx,\n        keyPair: createOrUpdateAccountResposne[\"keyPair\"]\n      };\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Deposit to Dex\n   * @param symbol: string symbol of token to deposit\n   * @param amount: string number amount to deposit, e.g. '1.5'\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async depositTo(\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      const rawTx = exchange.deposit(\n        this.account,\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n      // return await this.account.signEthereumTx(rawTx.raw);\n      const response = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw)\n      return response;\n\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * On-chain Withdrawal from Dex\n   * @param symbol: string symbol of token to withdraw\n   * @param amount: string number amount to withdraw, e.g. '1.5'\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async onchainWithdrawal(\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      const rawTx = exchange.withdraw(\n        this.account,\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n\n      const response = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw);\n      return response;\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Off-chain Withdrawal from Dex\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param nonce: DEX nonce of account\n   * @param token: token symbol or address to withdraw\n   * @param amount: amount to withdraw, in decimal string. e.g. '15'\n   * @param tokenF: fee token symbol or address to withdraw\n   * @param amountF: withdrawal fee, in decimal string. e.g. '15'\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public offchainWithdrawal(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    nonce: number,\n    token: string,\n    amount: string,\n    tokenF: string,\n    amountF: string,\n    label?: number\n  ) {\n    try {\n      const withdraw = new WithdrawalRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      withdraw.account = account;\n      withdraw.account.accountId = accountId;\n      withdraw.account.keyPair.publicKeyX = publicKeyX;\n      withdraw.account.keyPair.publicKeyY = publicKeyY;\n      withdraw.account.keyPair.secretKey = privateKey;\n      withdraw.account.nonce = nonce;\n      withdraw.token = token;\n      withdraw.amount = amount;\n      withdraw.tokenF = tokenF;\n      withdraw.amountF = amountF;\n      withdraw.label = label;\n      return exchange.submitWithdrawal(withdraw);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get signed order, should be submitted by frontend itself TEMPORARY\n   * @param owner: Ethereum address of this order's owner\n   * @param accountId: account ID in exchange\n   * @param tokenS: symbol or hex address of token sell\n   * @param tokenB: symbol or hex address of token buy\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param amountS: amount of token sell, in string number\n   * @param amountB: amount of token buy, in string number\n   * @param orderId: next order ID, needed by order signature\n   * @param validSince: valid beginning period of this order, SECOND in timestamp\n   * @param validUntil: valid ending period of this order, SECOND in timestamp\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public submitOrder(\n    owner: string,\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    tokenS: string,\n    tokenB: string,\n    amountS: string,\n    amountB: string,\n    orderId: number,\n    validSince: number,\n    validUntil: number,\n    label?: number\n  ) {\n    try {\n      const order = new OrderRequest();\n      order.owner = owner;\n      order.accountId = accountId;\n      order.keyPair = new KeyPair();\n      order.keyPair.publicKeyX = publicKeyX;\n      order.keyPair.publicKeyY = publicKeyY;\n      order.keyPair.secretKey = privateKey;\n\n      order.tokenS = tokenS;\n      order.tokenB = tokenB;\n      order.amountS = amountS;\n      order.amountB = amountB;\n\n      order.orderId = orderId;\n      order.validSince = Math.floor(validSince);\n      order.validUntil = Math.floor(validUntil);\n      order.label = label;\n      return exchange.submitOrder(this.account, order);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Cancel order in Dex\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param nonce: DEX nonce of account\n   * @param orderToken: token symbol or address of cancel\n   * @param orderId: specified order id to cancel\n   * @param tokenF: amountF token symbol or address of cancel\n   * @param amountF: cancel amountF, e.g. '15'\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public submitCancel(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    nonce: number,\n    orderToken: string,\n    orderId: number,\n    tokenF: string,\n    amountF: string,\n    label?: number\n  ) {\n    try {\n      const cancel = new CancelRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      cancel.account = account;\n      cancel.account.accountId = accountId;\n      cancel.account.keyPair.publicKeyX = publicKeyX;\n      cancel.account.keyPair.publicKeyY = publicKeyY;\n      cancel.account.keyPair.secretKey = privateKey;\n      cancel.account.nonce = nonce;\n      cancel.orderToken = orderToken;\n      cancel.orderId = orderId;\n      cancel.tokenF = tokenF;\n      cancel.amountF = amountF;\n      cancel.label = label;\n      return exchange.submitCancel(cancel);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get Api Key signature\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   */\n  public getApiKey(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string\n  ) {\n    try {\n      const request = new GetAPIKeyRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      request.account = account;\n      request.account.accountId = accountId;\n      request.account.keyPair.publicKeyX = publicKeyX;\n      request.account.keyPair.publicKeyY = publicKeyY;\n      request.account.keyPair.secretKey = privateKey;\n      return exchange.signGetApiKey(request);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get Api Key signature\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param orderHash: [OPTIONAL] specified order hash to cancel\n   * @param clientOrderId: [OPTIONAL] specified client order ID to cancel\n   */\n  public submitFlexCancel(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    orderHash?: string,\n    clientOrderId?: string\n  ) {\n    try {\n      const request = new FlexCancelRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      request.account = account;\n      request.account.accountId = accountId;\n      request.account.keyPair.publicKeyX = publicKeyX;\n      request.account.keyPair.publicKeyY = publicKeyY;\n      request.account.keyPair.secretKey = privateKey;\n      request.orderHash = orderHash;\n      request.clientOrderId = clientOrderId;\n      return exchange.submitFlexCancel(request);\n    } catch (e) {\n      throw e;\n    }\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport appLayout from 'appLayout';\n\nimport { Table } from 'antd';\nimport Moment from 'moment';\nimport { config } from 'librarys/lightcone_v3';\nconst BigNumber = require('bignumber.js');\n\nclass MyOrderTable extends React.Component {\n  render() {\n    const tableTitleStyle = {\n      color: '#666666',\n      fontWeight: 400,\n      fontSize: '14px',\n      marginBottom: '0px'\n    };\n\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'padding',\n        width: 2\n      },\n      {\n        title: <div style={tableTitleStyle}>Side</div>,\n        dataIndex: 'side',\n        width: 100\n      },\n      {\n        title: <div style={tableTitleStyle}>Market</div>,\n        dataIndex: 'market',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Size</div>,\n        dataIndex: 'size',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Price</div>,\n        dataIndex: 'price',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Fee</div>,\n        dataIndex: 'fee',\n        width: 200\n      },\n      {\n        title: <div style={tableTitleStyle}>Date</div>,\n        dataIndex: 'date',\n        width: 300\n      },\n      {\n        title: <div style={tableTitleStyle}>Status</div>,\n        dataIndex: 'status',\n        width: 100\n      }\n    ];\n\n    const data = [];\n    for (let i = 0; i < this.props.myOrders.myOrders.length; i++) {\n      const order = this.props.myOrders.myOrders[i];\n      const market = order.market;\n      const tokens = market.split('-');\n      const baseToken = tokens[0];\n\n      console.log('OrderSize' + order.size);\n      const size = config.fromWEI(baseToken, order.size, 8);\n\n      var fee = config.fromWEI(baseToken, order.filledFee, 8);\n      if (Number(fee) === 0) {\n        fee = '-';\n      }\n      var status = '-';\n      if (order.status === 'ORDER_STATUS_PROCESSING') {\n        status = 'Open';\n      } else if (order.status === 'ORDER_STATUS_PROCESSED') {\n        status = 'Filled';\n      } else if (order.status === 'ORDER_STATUS_FAILED') {\n        status = 'Failed';\n      } else if (\n        order.status === 'ORDER_STATUS_CANCELLING' ||\n        order.status === 'ORDER_STATUS_CANCELLED'\n      ) {\n        status = 'Cancelled';\n      } else if (order.status === 'ORDER_STATUS_EXPIRED') {\n        status = 'Expired';\n      }\n      data.push({\n        key: i,\n        side: (\n          <div\n            style={{\n              height: '30px'\n            }}\n          >\n            {order.side === 'BUY' ? 'Buy' : 'Sell'}\n          </div>\n        ),\n        market: order.market,\n        size: size,\n        price: Number(order.price),\n        fee: fee,\n        date: Moment(order.timestamp).format('YYYY MM/DD HH:mm:ss'),\n        status: status\n      });\n    }\n\n    return (\n      <div\n        style={{\n          paddingLeft: '0px',\n          paddingTop: '0px',\n          marginTop: '0px',\n          height: appLayout.myOrderTableScreenHeight,\n          borderWidth: '0px'\n        }}\n      >\n        <Table\n          style={{\n            borderStyle: 'none',\n            borderWidth: '0px'\n          }}\n          columns={columns}\n          dataSource={data}\n          pagination={{ pageSize: 10 }}\n          scroll={{ y: appLayout.myOrderTableScreenHeight }}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, myOrders } = state;\n  return { layoutManager, myOrders };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrderTable);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport appLayout from 'appLayout';\n\nimport { Table } from 'antd';\nimport Moment from 'moment';\nconst BigNumber = require('bignumber.js');\n\nclass MyDepositTable extends React.Component {\n  render() {\n    const tableTitleStyle = {\n      color: '#666666',\n      fontWeight: 400,\n      fontSize: '14px',\n      marginBottom: '0px'\n    };\n\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'padding',\n        width: 2\n      },\n      {\n        title: <div style={tableTitleStyle}>Asset</div>,\n        dataIndex: 'symbol',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Amount</div>,\n        dataIndex: 'amount',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Fee</div>,\n        dataIndex: 'fee',\n        width: 200\n      },\n      {\n        title: <div style={tableTitleStyle}>Date</div>,\n        dataIndex: 'date',\n        width: 300\n      },\n      {\n        title: <div style={tableTitleStyle}>Status</div>,\n        dataIndex: 'status',\n        width: 100\n      }\n    ];\n\n    const data = [];\n    for (let i = 0; i < this.props.myOrders.transactions.length; i++) {\n      const transaction = this.props.myOrders.transactions[i];\n      if (transaction.txType !== 'DEPOSIT') {\n        continue;\n      }\n\n      const amount = new BigNumber(transaction.amount)\n        .dividedBy('1000000000000000000')\n        .toString();\n      var fee = new BigNumber(transaction.feeAmount)\n        .dividedBy('1000000000000000000')\n        .toString();\n      if (fee === '0') {\n        fee = '-';\n      }\n      var status = '-';\n      if (transaction.status === 'TX_STATUS_PROCESSING') {\n        status = 'Processing';\n      } else if (transaction.status === 'TX_STATUS_PROCESSED') {\n        status = 'Processed';\n      }\n      data.push({\n        key: i,\n        symbol: transaction.symbol,\n        amount: amount,\n        fee: fee,\n        date: Moment(transaction.timestamp).format('YYYY MM/DD HH:mm:ss'),\n        status: status\n      });\n    }\n\n    return (\n      <div\n        style={{\n          paddingLeft: '0px',\n          paddingTop: '0px',\n          marginTop: '0px',\n          height: appLayout.myOrderTableScreenHeight,\n          borderWidth: '0px'\n        }}\n      >\n        <Table\n          style={{\n            borderStyle: 'none',\n            borderWidth: '0px'\n          }}\n          columns={columns}\n          dataSource={data}\n          pagination={{ pageSize: 10 }}\n          scroll={{ y: appLayout.myOrderTableScreenHeight }}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, myOrders } = state;\n  return { layoutManager, myOrders };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyDepositTable);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport appLayout from 'appLayout';\n\nimport { Table } from 'antd';\nimport Moment from 'moment';\nconst BigNumber = require('bignumber.js');\n\nclass MyWithdrawalTable extends React.Component {\n  render() {\n    const tableTitleStyle = {\n      color: '#666666',\n      fontWeight: 400,\n      fontSize: '14px',\n      marginBottom: '0px',\n      userSelect: 'none'\n    };\n\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'padding',\n        width: 2\n      },\n      {\n        title: <div style={tableTitleStyle}>Asset</div>,\n        dataIndex: 'symbol',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Amount</div>,\n        dataIndex: 'amount',\n        width: 120\n      },\n      {\n        title: <div style={tableTitleStyle}>Fee</div>,\n        dataIndex: 'fee',\n        width: 200\n      },\n      {\n        title: <div style={tableTitleStyle}>Date</div>,\n        dataIndex: 'date',\n        width: 300\n      },\n      {\n        title: <div style={tableTitleStyle}>Status</div>,\n        dataIndex: 'status',\n        width: 100\n      }\n    ];\n\n    const data = [];\n    for (let i = 0; i < this.props.myOrders.transactions.length; i++) {\n      const transaction = this.props.myOrders.transactions[i];\n      if (transaction.txType !== 'ONCHAIN_WITHDRAWAL') {\n        continue;\n      }\n\n      const amount = new BigNumber(transaction.amount)\n        .dividedBy('1000000000000000000')\n        .toString();\n      var fee = new BigNumber(transaction.feeAmount)\n        .dividedBy('1000000000000000000')\n        .toString();\n      if (fee === '0') {\n        fee = '-';\n      }\n      var status = '-';\n      if (transaction.status === 'TX_STATUS_PROCESSING') {\n        status = 'Processing';\n      } else if (transaction.status === 'TX_STATUS_PROCESSED') {\n        status = 'Processed';\n      }\n      data.push({\n        key: i,\n        symbol: transaction.symbol,\n        amount: amount,\n        fee: fee,\n        date: Moment(transaction.timestamp).format('YYYY MM/DD HH:mm:ss'),\n        status: status\n      });\n    }\n\n    return (\n      <div\n        style={{\n          paddingLeft: '0px',\n          paddingTop: '0px',\n          marginTop: '0px',\n          height: appLayout.myOrderTableScreenHeight,\n          borderWidth: '0px'\n        }}\n      >\n        <Table\n          style={{\n            borderStyle: 'none',\n            borderWidth: '0px'\n          }}\n          columns={columns}\n          dataSource={data}\n          pagination={{ pageSize: 10 }}\n          scroll={{ y: appLayout.myOrderTableScreenHeight }}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, myOrders } = state;\n  return { layoutManager, myOrders };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyWithdrawalTable);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\n\nimport MyOrderTable from 'components/my-orders/MyOrderTable';\nimport MyDepositTable from 'components/my-orders/MyDepositTable';\nimport MyWithdrawalTable from 'components/my-orders/MyWithdrawalTable';\n\nimport './MyOrders.less';\n\nimport { Button, Icon } from 'antd';\nconst ButtonGroup = Button.Group;\n\nclass MyOrdersDetailView extends React.Component {\n  state = {\n    selectedKey: 'open'\n  };\n\n  render() {\n    const unselectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '120px',\n      backgroundColor: '#161616',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const selectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '120px',\n      backgroundColor: '#202020',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const iconStyle = {\n      fontSize: '14px',\n      color: colors.textLowContrast,\n      verticalAlign: 'middle'\n    };\n\n    var tableComponent;\n    if (this.state.selectedKey === 'open') {\n      tableComponent = <MyOrderTable />;\n    } else if (this.state.selectedKey === 'deposit') {\n      tableComponent = <MyDepositTable />;\n    } else if (this.state.selectedKey === 'withdrawal') {\n      tableComponent = <MyWithdrawalTable />;\n    }\n\n    return (\n      <div\n        style={{\n          paddingTop: '30px',\n          paddingLeft: '30px',\n          paddingRight: '30px',\n          paddingBottom: '30px'\n        }}\n      >\n        <div\n          style={{\n            paddingLeft: '0px',\n            paddingBottom: '0px',\n            borderWidth: '0px'\n          }}\n        >\n          <ButtonGroup\n            style={{\n              borderRadius: '0px',\n              borderWidth: '0px',\n              paddingBottom: '0px'\n            }}\n          >\n            <Button\n              className={\n                this.state.selectedKey === 'open'\n                  ? 'order-tab-button-active'\n                  : 'order-tab-button'\n              }\n              style={\n                this.state.selectedKey === 'open'\n                  ? selectedButtonStyle\n                  : unselectedButtonStyle\n              }\n              onClick={() => {\n                this.setState({\n                  selectedKey: 'open'\n                });\n              }}\n            >\n              Order\n            </Button>\n            <Button\n              className={\n                this.state.selectedKey === 'deposit'\n                  ? 'order-tab-button-active'\n                  : 'order-tab-button'\n              }\n              style={\n                this.state.selectedKey === 'deposit'\n                  ? selectedButtonStyle\n                  : unselectedButtonStyle\n              }\n              onClick={() => {\n                this.setState({\n                  selectedKey: 'deposit'\n                });\n              }}\n            >\n              Deposit\n            </Button>\n            <Button\n              className={\n                this.state.selectedKey === 'withdrawal'\n                  ? 'order-tab-button-active'\n                  : 'order-tab-button'\n              }\n              style={\n                this.state.selectedKey === 'withdrawal'\n                  ? selectedButtonStyle\n                  : unselectedButtonStyle\n              }\n              onClick={() => {\n                this.setState({\n                  selectedKey: 'withdrawal'\n                });\n              }}\n            >\n              Withdrawal\n            </Button>\n          </ButtonGroup>\n        </div>\n        {tableComponent}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrdersDetailView);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\nimport appLayout from 'appLayout';\nimport MyOrdersOverview from 'components/my-orders/MyOrdersOverview';\nimport MyOrdersDetailView from 'components/my-orders/MyOrdersDetailView';\n\nimport { Layout } from 'antd';\nconst { Sider, Content } = Layout;\n\nclass MyOrders extends React.Component {\n  render() {\n    return (\n      <div>\n        <div\n          style={{\n            height: appLayout.borderWidth,\n            backgroundColor: colors.border\n          }}\n        />\n        <Layout>\n          <Layout\n            hasSider={true}\n            style={{ height: appLayout.myOrdersScreenHeight }}\n          >\n            <Sider\n              width={appLayout.leftSideWidth}\n              style={{\n                paddingTop: '0px',\n                backgroundColor: colors.parentBackground,\n                borderRightStyle: 'solid',\n                borderRightWidth: appLayout.borderWidth,\n                borderColor: colors.border,\n                height: appLayout.myOrdersScreenHeight\n              }}\n            >\n              <div\n                style={{\n                  display: 'block',\n                  position: 'relative',\n                  height: appLayout.myOrdersScreenHeight\n                }}\n              >\n                <MyOrdersOverview />\n              </div>\n            </Sider>\n            <Content\n              width=\"100%\"\n              style={{\n                paddingTop: '0px',\n                backgroundColor: colors.parentBackground,\n                borderLeftStyle: 'none'\n              }}\n            >\n              <MyOrdersDetailView />\n            </Content>\n          </Layout>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrders);\n","import _ from 'lodash'\nimport { channel } from 'redux-saga'\nimport { put, call, all, select, take, fork } from 'redux-saga/effects'\nimport moment from 'moment'\nimport { dispatch } from 'store'\nimport utils from 'utils'\n\nexport function * startup (api, action) {\n  console.log('startup')\n\n  // 检查auth\n  // let needAuth = yield call(checkAuthToken, api)\n\n  // yield call(setHttpAuth, api)\n\n  // if (!needAuth) {\n  //   yield put(StartupActions.setReady(true))\n  // }\n\n  // yield put 需要这样写\n  // yield put({      // dispatch一个action到reducer， payload是请求返回的数据\n  //   type: actionTypes.GET_AGE_SUCCESS,\n  //   payload: res   \n  // })\n\n  dispatch.placeOrder.checkChannel()\n  dispatch.markets.fetchMarkets()\n  dispatch.tokens.fetchTokens()\n  dispatch.appState.startup()\n  // 必须 yield put connectToMetaMask。因为有可能导致地址已切换。\n  // dispatch.metaMask.connectToMetaMask()\n  // 重要：这里并没有用， connectToMetaMask 中又用了await，并不会等其执行完。\n  yield put({ type: 'metaMask/connectToMetaMask'})\n  dispatch.dexAccount.loadAccount()\n  // 此定时器永不关闭。\n  // utils.setImmediateInterval(async () => {\n  //   dispatch.dexAccount.checkAccountOvertime()\n  // }, 60 * 1000)\n  utils.setImmediateInterval(async () => {\n    dispatch.socket.checkHeartBeat()\n  }, 30 * 1000)\n  dispatch.socket.start()\n}\n\nexport function * process401 (api, action) {\n  console.log('开始处理401')\n  let logined = yield select((state) => state.auth.logined)\n  yield put(replace(logined ? '/UnauthScreen' : '/LoginScreen'))\n}\n","import axios from 'axios';\nimport { notification } from 'utils'\nimport appConfig from 'config/appConfig'\n\nlet walletAddr = null\nlet srvApi = axios.create({\n  // timeout: 10000,\n  baseURL: appConfig.wedex.serverUrl,\n})\n\n// srvApi.interceptors.request.use(function (config) {\n//   config.headers.common['x-user-wallet-addr'] = walletAddr\n//   return config\n// })\n\nfunction setWalletAddr (addr) {\n  walletAddr = addr\n}\n\nfunction getUserBillEggPrizeList (params) {\n  let {address, ...restParams} = params\n  const headers = {\n    'x-user-wallet-addr': address\n  };\n  return srvApi.get(`user/billEggPrizes`, {\n    params: restParams,\n    headers\n  })\n}\n\nfunction postUserReadBillEggPrizeList (params) {\n  let {address, ...restParams} = params\n  const headers = {\n    'x-user-wallet-addr': address\n  };\n  return srvApi.post(`user/billEggPrize/batchRead`, restParams, {\n    headers\n  })\n}\n\nexport default {\n  setWalletAddr,\n  getUserBillEggPrizeList,\n  postUserReadBillEggPrizeList\n}","/**\n * Created by zuozhuo on 2016/12/8.\n */\n'use strict'\n\nimport _ from 'lodash'\n\nclass XEnumItem {\n  constructor (value, text, meta = {}) {\n    this.value = value\n    this.text = text\n    this.meta = meta\n  }\n\n  getValue () {\n    return this.value\n  }\n\n  getText () {\n    return this.text\n  }\n\n  equals (value) {\n    if (value instanceof XEnumItem) {\n      value = value.getValue()\n    }\n    return this.value === value\n  }\n}\nclass XEnum {\n  constructor (enumDict) {\n    this.enumItems = Object.values(enumDict)\n    Object.keys(enumDict).forEach(key => {\n      this[key] = enumDict[key]\n    })\n  }\n\n  findItem (itemValue) {\n    if (itemValue instanceof XEnumItem) {\n      itemValue = itemValue.getValue()\n    }\n    return this.enumItems.find(e => e.getValue() === itemValue)\n  }\n\n  toText (value) {\n    let item = _.find(this.enumItems, ['value', value])\n    return item === undefined ? null : item.getText()\n  }\n\n  parseValueByText (text) {\n    let exist = _.find(this.enumItems, ele => {\n      return ele.getText() === text\n    })\n    if (exist === undefined) {\n      return null\n    } else {\n      return exist.getValue()\n    }\n  }\n\n  getOptions (excludeIndex) {\n    if (!this.options) {\n      return this.enumItems\n        .filter(e => excludeIndex !== e.getValue())\n        .map(e => {\n          return {\n            value: e.getValue(),\n            label: e.getText()\n          }\n        })\n    } else {\n      return []\n    }\n  }\n\n  getSpecOptions (specKey = []) {\n    if (!this.options) {\n      return this.enumItems\n        .filter(e => specKey.includes(e.getValue()))\n        .map(e => {\n          return {\n            value: e.getValue(),\n            label: e.getText()\n          }\n        })\n    } else {\n      return []\n    }\n  }\n}\n\nconst ENUM_ACCOUNT_STATUS = new XEnum({\n  UNSIGNED: new XEnumItem(0, '未登录'),\n  UNCREATED: new XEnumItem(1, '未注册'),\n  CREATED: new XEnumItem(2, '已注册'),\n  LOGGED_IN: new XEnumItem(3, '已登录'),\n  CREATING: new XEnumItem(4, '创建中'),\n  LOCKED: new XEnumItem(5, '锁定'),\n})\n\nconst ENUM_ORDER_STATUS = new XEnum({\n  PROCESSING: new XEnumItem('processing', '待成交'),\n  PROCESSED: new XEnumItem('processed', '已成交'),\n  CANCELLING: new XEnumItem('cancelling', '撤销中'),\n  CANCELLED: new XEnumItem('cancelled', '已撤销'),\n  EXPIRED: new XEnumItem('expired', '已超时'),\n  // WAITING: new XEnumItem('waiting', '等待中'),\n})\n\nconst ENUM_TX_STATUS = new XEnum({\n  RECEIVED: new XEnumItem('received', '待划转'),\n  PROCESSING: new XEnumItem('processing', '划转中'),\n  PROCESSED: new XEnumItem('processed', '已完成'),\n  FAILED: new XEnumItem('failed', '失败'),\n})\n\nconst ENUM_INTERVAL_TYPE = new XEnum({\n  MIN_1: new XEnumItem('1', '1min'),\n  MIN_5: new XEnumItem('5', '5min'),\n  MIN_15: new XEnumItem('15', '15min'),\n  MIN_30: new XEnumItem('30', '30min'),\n  HOUR_1: new XEnumItem('60', '1hr'),\n  HOUR_2: new XEnumItem('120', '2hr'),\n  HOUR_4: new XEnumItem('240', '4hr'),\n  HOUR_12: new XEnumItem('720', '12hr'),\n  DAY_1: new XEnumItem('D', '1d'),\n  WEEK_1: new XEnumItem('W', '1w'),\n})\n\nexport {\n  ENUM_ACCOUNT_STATUS,\n  ENUM_ORDER_STATUS,\n  ENUM_TX_STATUS,\n  ENUM_INTERVAL_TYPE\n}\n\n","import _ from 'lodash'\nimport axios from 'axios';\nimport wedexApi from './wedexApi'\nimport { config } from 'librarys/lightcone_v3';\nimport appConfig from 'config/appConfig'\nimport utils, { notification } from 'utils';\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport BigNumber from 'bignumber.js';\nlet { serverUrl } = appConfig.relay\n\nfunction withoutThrow(func) {\n  return async (...params) => {\n    try {\n      return await func(...params)\n    } catch (error) {\n      // debugger\n      notification['error']({\n        style: {\n          backgroundColor: 'white'\n        },\n        message: String(error),\n        duration: 10\n      })\n      return null\n    }\n  }\n}\n\nexport function _parseResponse(response) {\n  const data = response['data'];\n  const resultInfo = data['resultInfo'];\n  const errorData = data['error'];\n\n  // Some API endpoints in the old versions don't have resultInfo.\n  if (resultInfo) {\n    const code = resultInfo['code'];\n    if (code !== 0) {\n      const errorMessage = resultInfo['message'];\n      throw Error(errorMessage);\n    }\n    return data;\n  } else if (errorData) {\n    const { code, message } = errorData;\n    if (code !== 0) {\n      let errorCodeMapping = {\n        104208: '两次提交请保持一定时间间隔'\n      }\n      let errorMsgMapping = {\n        'nounce too low': '操作频繁，请稍后再试'\n      }\n      let errorMessage = errorCodeMapping[code] || errorMsgMapping[message] || `${code} ${message}`\n      throw Error(errorMessage);\n    }\n    return data;\n  } else {\n    return data;\n  }\n}\n\nexport function parseResponse(response) {\n  try {\n    return _parseResponse(response)\n  } catch (err) {\n    // debugger\n    notification['error']({\n      style: {\n        backgroundColor: 'white'\n      },\n      // message: 'Your deposit request failed. Please try again!',\n      description: String(err),\n      duration: 10\n    });\n  }\n}\n\nlet relayApi = axios.create({\n  // timeout: 10000,\n  baseURL: serverUrl,\n})\n\nrelayApi.interceptors.response.use(function (response) {\n  // Do something with response data\n  return response\n}, function (error) {\n  if (error.message === \"Network Error\") {\n    return Promise.reject('请检查网络')\n  }\n\n  if (error.response) {\n    return Promise.reject(error.response.data)\n  } else {\n    return Promise.reject({message: '系统维护中'})\n  }\n})\n\nasync function getTokenBalance(owner, symbol) {\n  let token = config.getTokenBySymbol(symbol);\n  let tokenAddress = token.address;\n  const data = {\n    owner,\n    token: tokenAddress\n  };\n\n  try {\n    const response = await relayApi.post('/tokenBalances', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function getEthBalance(address) {\n  const data = {\n    address\n  };\n\n  try {\n    const response = await relayApi.post('/ethBalances', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function lightconeGetAccount(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await relayApi.post('/account', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData.account;\n    } else if (responseData['error'].code === 101002) {\n      return null;\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    if (e.response.status === 404) {\n      return null\n    }\n    throw new Error(e);\n  }\n}\n\nasync function getTrade(market, limit) {\n  const data = {\n    market,\n    limit\n  };\n  try {\n    const response = await relayApi.post('/trade', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['trades'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getDepth(market, level, limit) {\n  const data = {\n    market,\n    level,\n    limit\n  };\n  const tokens = market.split('-');\n  const baseToken = tokens[0];\n\n  try {\n    const response = await relayApi.post('/depth', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      const depth = responseData['depth'];\n      const bids = depth['bids'];\n      var updatedBids = [];\n      for (var i = 0; i < bids.length; i = i + 1) {\n        const bid = bids[i];\n        var updatedBid = {\n          price: bid.price,\n          size: bid.size,\n          volume: bid.volume,\n          count: bid.count,\n          sizeInNumber: config.fromWEI(baseToken, bid.size, 4)\n        };\n        updatedBids.push(updatedBid);\n      }\n\n      const asks = depth['asks'];\n      var updatedAsks = [];\n      for (var i = 0; i < asks.length; i = i + 1) {\n        const ask = asks[i];\n        var updatedAsk = {\n          price: ask.price,\n          size: ask.size,\n          volume: ask.volume,\n          count: ask.count,\n          sizeInNumber: config.fromWEI(baseToken, ask.size, 4)\n        };\n        updatedAsks.push(updatedAsk);\n      }\n\n      return {\n        bids: updatedBids,\n        asks: updatedAsks\n      };\n    } else {\n      return {\n        bids: [],\n        asks: []\n      };\n    }\n  } catch (error) {\n    return {\n      bids: [],\n      asks: []\n    };\n  }\n}\n\nasync function getOrders({accountId, offset, limit, market, apiKey, statuses, side, start, end}) {\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  const data = {\n    accountId,\n    offset,\n    limit,\n    statuses,\n    side,\n    start,\n    end\n  };\n  if (typeof market !== 'undefined') {\n    data.market = market;\n  }\n\n  try {\n    const response = await relayApi.post('/orders', data, {\n      headers: headers,\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      const orders = responseData['orders'];\n      let updatedOrders = utils.formatOrders(orders)\n      return {\n        totalNum: responseData.totalNum,\n        orders: updatedOrders\n      }\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function cancelOrders(\n  accountId,\n  orderHash,\n  clientOrderId,\n  signed,\n  apiKey\n) {\n  try {\n    const data = {\n      accountId: accountId,\n      orderHash: orderHash,\n      clientOrderId: clientOrderId\n    };\n    const signature = signed.Rx + ',' + signed.Ry + ',' + signed.s;\n    const headers = {\n      'X-API-KEY': apiKey,\n      'X-API-SIG': signature\n    };\n    const response = await relayApi.post('/deleteOrders', data, {\n      headers: headers,\n    });\n\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getCandlestick(data) {\n  try {\n    const response = await relayApi.post('/candlestick', data)\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['candles'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    // throw error;\n    return []\n  }\n}\n\nasync function getCandlestickCombine(data) {\n  let { start, end, interval } = data\n  \n  let resolution = ENUM_INTERVAL_TYPE.parseValueByText(interval)\n  let ms = resolution * 200 * 60 * 1000\n\n  let promises = []\n  let periodEnd = end\n  let periodStart = end - ms\n  while (periodEnd > start) {\n    let promise = getCandlestick({\n      ...data,\n      start: _.max([periodStart, start]),\n      end: periodEnd\n    })\n    promises.push(promise)\n    \n    periodEnd -= ms\n    periodStart -= ms\n  }\n\n  let resp = await Promise.all(promises)\n  let candles = _.flatten(resp)\n  return candles\n}\n\nasync function getBalances(accountId, apiKey, skip, limit) {\n  try {\n    const data = {\n      accountId,\n      skip,\n      limit\n    };\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await relayApi.post('/user/balances', data, {\n      headers: headers,\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function sendWithdrawTransaction(signedEthereumTx) {\n  const data = {\n    data: signedEthereumTx\n  };\n  try {\n    const response = await relayApi.post('/onchainWithdrawal', data);\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getApiKey(data, signed) {\n  try {\n    const signature = signed.Rx + ',' + signed.Ry + ',' + signed.s;\n    const headers = {\n      'X-API-SIG': signature\n    };\n    const response = await relayApi.post('/getApiKey', data, {\n      headers: headers\n    })\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getTickers(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/ticker', data, {\n      headers: headers\n    })\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getPrice(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/price', data, {\n      headers: headers\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    return []\n  }\n}\n\nasync function getTransactions(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/user/deposits', data, {\n      headers: headers\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['transactions'];\n    } else {\n      // throw new Error(responseData['error']['message']);\n      return null\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getNonce(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await relayApi.post('/ethNonce', data)\n    if (response['data']['nonce'] !== undefined) {\n      return response['data']['nonce'];\n    } else {\n      throw new Error('Failed to get nonce');\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function sendApprove(signedEthereumTx) {\n  return sendDeposit(signedEthereumTx);\n}\n\nasync function sendDeposit(signedEthereumTx) {\n  const data = {\n    data: signedEthereumTx\n  };\n  try {\n    const response = await relayApi.post('/deposit', data)\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getOrderId(accountId, tokenSId, apiKey) {\n  const data = {\n    accountId: accountId,\n    tokenSId: tokenSId\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/orderId', data, {\n      headers: headers\n    })\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return response['data']['orderId'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function submitOrderToLightcone(data, apiKey) {\n  try {\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await relayApi.post('/order', data, {\n      headers: headers\n    })\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getRecommendedGasPrice() {\n  try {\n    const data = {};\n    const response = await relayApi.post('/recommendedGasPrice', data)\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      let price = responseData['price']\n      let minPrice = BigNumber(price)\n      let normalPrice = minPrice.times(3)\n      let maxPrice = minPrice.times(30)\n      return [minPrice, normalPrice, maxPrice]\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getAllowance(owner, symbol) {\n  let token = config.getTokenBySymbol(symbol);\n  let tokenAddress = token.address;\n  const data = {\n    owner,\n    token: tokenAddress\n  };\n\n  const response = await relayApi.post('/allowances', data)\n  return response['data']['allowances'];\n}\n\nexport default {\n  getBalances: withoutThrow(getBalances),\n  getOrders: withoutThrow(getOrders),\n  cancelOrders: withoutThrow(cancelOrders),\n  getEthBalance: withoutThrow(getEthBalance),\n  getTokenBalance: withoutThrow(getTokenBalance),\n  sendWithdrawTransaction: withoutThrow(sendWithdrawTransaction),\n  getTrade: withoutThrow(getTrade),\n  lightconeGetAccount: withoutThrow(lightconeGetAccount),\n  getDepth: withoutThrow(getDepth),\n  getCandlestick: withoutThrow(getCandlestick),\n  getCandlestickCombine: withoutThrow(getCandlestickCombine),\n  getApiKey: withoutThrow(getApiKey),\n  getTickers: withoutThrow(getTickers),\n  getPrice: withoutThrow(getPrice),\n  getTransactions: withoutThrow(getTransactions),\n  getNonce: withoutThrow(getNonce),\n  sendApprove: withoutThrow(sendApprove),\n  sendDeposit: withoutThrow(sendDeposit),\n  getOrderId: withoutThrow(getOrderId),\n  submitOrderToLightcone: withoutThrow(submitOrderToLightcone),\n  getRecommendedGasPrice: withoutThrow(getRecommendedGasPrice),\n  getAllowance: withoutThrow(getAllowance),\n  ...wedexApi\n}","import _ from 'lodash'\nimport { takeLatest, takeEvery, all, call, put, select } from 'redux-saga/effects'\nimport { startup } from './StartupSagas'\nimport api from 'api'\nimport { push, replace } from 'connected-react-router'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport utils, { notification } from 'utils'\n\n/* ------------- Types ------------- */\n\n/* ------------- Sagas ------------- */\n\n/* ------------- Connect Types To Sagas ------------- */\n\n\n// 所有使用saga异步调用的函数，必须处理所有异常，否则抛出异常后会导致整个saga事件机制崩溃，程序无法正常使用\nfunction safeWrap (func) {\n  if (!func) {\n    return () => {}\n  }\n\n  return function * (...args) {\n    // console.tron.log({safeWrap: 'safeWrap', args})\n    try {\n      yield call(func, ...args)\n    } catch (err) {\n      console.info('saga err!!!', err)\n      // console.tron.log(err)\n    }\n  }\n}\n\nfunction * onLocationChange (api, {payload}) {\n  let pathname = payload && payload.location && payload.location.pathname\n\n  if (_.includes(pathname, 'mine')) {\n    let status = yield select((state) => state.dexAccount.state)\n    if (status !== ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()) {\n      // 直接在地址栏输入受保护的路由，不waitFor的话，put(push('/'))会失效。\n      // 表现为地址栏已变化，但是页面并未正常刷新。\n      // 可能是 router 尚未加载（appstate.loading控制着app.js中的路由组件，尚未渲染）。也可能是 store/index.js中的 history 中间件未加载完。\n      // 优化点：在受保护组件内判断，就不会有一个短暂的切换。\n\n      yield call(utils.waitFor, 200)\n      console.info(`未登录，跳转主页, 状态：${ENUM_ACCOUNT_STATUS.toText(status)}`, )\n      notification.success({ message: '请先登录' })\n      yield put(push('/'))\n    }\n  }\n}\n\nexport default function * root () {\n  yield all([   \n    takeLatest('@@router/LOCATION_CHANGE', safeWrap(onLocationChange), api),\n    takeLatest('persist/REHYDRATE', safeWrap(startup), api)\n  ])\n}\n","import moment from 'moment'\nexport default {\n  state: {\n    ready: false,\n    loading: false,\n    awardInfo: {\n      visible: false,\n      id: null,\n      title: '恭喜您获得彩蛋',\n      amount: 500,\n      unit: 'LRC',\n      createdAt: undefined\n    }\n  },\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    startup: (state) => {\n      return { \n        ...state, \n        ready: true \n      }\n    },\n    showEggAward: (state, payload) => {\n      return { \n        ...state, \n        awardInfo: {\n          visible: true,\n          ...payload\n        }\n      }\n    },\n    closeAward: (state) => {\n      let {awardInfo} = state\n      awardInfo.visible = false\n      return { \n        ...state, \n        awardInfo\n      }\n    }\n  }\n}","import { ethereum, config } from 'librarys/lightcone_v3';\nvar detect = require('detect-browser').detect;\n\n// DKEY:\n// isDkey()  同步boolean  \n// enable(success: String, error: String)  异步\n// getBalance(success: String, error: String)  异步\n// sign(params: String, success: String, error: String)  异步\n// networkVersion() 同步 string\n\nconst initState = {\n  startConnecting: false,\n  isDesiredBrowser: false,\n  isDesiredNetwork: false,\n  installed: false,\n  walletName: 'metamask',\n  enable: false,\n}\n\nasync function getAddress (walletName) {\n  if (walletName === 'metamask') {\n    console.log('连接 metamask');\n    const accounts = await window.ethereum.enable();\n    let address = accounts[0]\n    if (!address) {\n      console.log(`metamask 获取不到地址`);\n      return Promise.reject('获取不到地址')\n    }\n    console.log(`metamask 获取到地址: ${address}`);\n\n    window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n    return address\n  } else if (walletName === 'dkey') {\n    console.log('连接 dkey');\n    let promise = new Promise((resolve, reject) => {\n      window.dkeyEnableSuccess = function (resp) {\n        resolve(resp.result)\n      }\n      window.dkeyEnableFailure = function (error) {\n        reject(error)\n      }\n      window.ethereum.enable('dkeyEnableSuccess', 'dkeyEnableFailure')\n    })\n    const address = await promise\n    if (!address) {\n      console.log(`dkey 获取不到地址`);\n      return Promise.reject('获取不到地址')\n    }\n    console.log(`dkey 获取到地址: ${address}`);\n\n    window.wallet = ethereum.account.fromDkey(window.web3, address, address)\n    return address\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    updateMetaMask: (state, payload) => ({ ...state, ...payload }),\n  },\n  effects: dispatch => ({\n    async connectToMetaMask (payload, { metaMask, dexAccount }) {\n      this.updateMetaMask({ startConnecting: true })\n\n      const browser = detect()\n      let valid = _.includes(['firefox', 'chrome', '360'], browser.name)\n      this.updateMetaMask({ isDesiredBrowser: valid })\n\n      if (typeof window.ethereum === 'undefined') {\n        this.updateMetaMask({\n          installed: false,\n          startConnecting: false\n        })\n        return\n      }\n\n      if (window.ethereum.isMetaMask) {\n        this.updateMetaMask({\n          installed: true,\n          walletName: 'metamask'\n        })\n\n        window.ethereum.autoRefreshOnNetworkChange = false;\n        // 刚进来时，检测不到window.ethereum.networkVersion，因此延迟 1s\n        setTimeout(() => {\n          const desireNetwork = config.getChainId();\n          this.updateMetaMask({\n            isDesiredNetwork:\n              desireNetwork === Number(window.ethereum.networkVersion)\n          })\n        }, 1000)\n\n        window.ethereum.on('networkChanged', networkVersion => {\n          console.info('### networkChanged')\n          const desireNetwork = config.getChainId();\n          this.updateMetaMask({\n            isDesiredNetwork: desireNetwork === Number(networkVersion)\n          });\n        });\n        window.ethereum.on('accountsChanged', accounts => {\n          console.info('### accountsChanged')\n          let address = accounts[0]\n          if (!address) return\n          window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n          dispatch.dexAccount.switchAccount(address);\n          dispatch.dexAccount.getAccount(address)\n        })\n      } else if (window.ethereum.isDkey) {\n        const desireNetwork = config.getChainId();\n        this.updateMetaMask({\n          isDesiredNetwork: desireNetwork === Number(window.ethereum.networkVersion()),\n          installed: true,\n          walletName: 'dkey'\n        })\n      } else {\n        this.updateMetaMask({\n          installed: false,\n          startConnecting: false\n        })\n        return\n      }\n\n      this.updateMetaMask({ startConnecting: false })\n      await dispatch.metaMask.initAccountFromMetaMask()\n    },\n    // 网站刚初始化的时候，不调用此函数。防止出现授权弹窗。只有在必须使用地址的流程，才进行获取。\n    // 但是对于 DKEY，进网站的时候，在外面改了地址。如果不加载时获取新的地址，则不知道改变了。而我们又保存了用户的登录信息，那么显示我的订单，就是以前的地址。\n    // 结论，必须改为一进来就获取地址。如果壳子需要授权（DKEY 可优化为不要授权），那就直接授权弹窗，体验依赖于壳子。\n    async initAccountFromMetaMask (payload, { metaMask }) {\n      // metaMask.enable 代表地址已经被获取到。\n      if (metaMask.enable) return\n\n      let address = await getAddress(metaMask.walletName)\n\n      if (!address) {\n        notification.info({ message: '请先登录metamask' })\n        return\n      }\n\n      window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n      // 维护dexAccount中的地址信息\n      await dispatch.dexAccount.getAccount(address);\n\n      this.updateMetaMask({ enable: true })\n    }\n  })\n}","import moment from 'moment'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport api from 'api'\nimport utils, { notification } from 'utils'\nimport { ethereum } from 'librarys/lightcone_v3';\n\nconst initState = {\n  address: '',\n  accountId: '',\n  passwordHash: '',\n  // 需要去服务端获取，因此不应该每次生成。\n  apiKey: '',\n  state: ENUM_ACCOUNT_STATUS.UNSIGNED.getValue(),\n  rememberMeStartTime: null,\n  rememberMeMinutes: null,\n  canceledOrders: [],\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    // 账户切换时，初始化当前账户，只保留地址。\n    // TODO: 缓存不同地址对应的账户。否则 creating 状态，会被丢弃。\n    switchAccount: (state, address) => {\n      if (state.address === address) {\n        return state\n      } else {\n        return {\n          ...initState,\n          address\n        }\n      }\n    },\n    clearAccountInfo ({ address }, payload) {\n      return {\n        ...initState,\n        address\n      }\n    },\n    updateAccount: (state, payload) => {\n      return {\n        ...state,\n        ...payload\n      }\n    },\n    checkAccountOvertime (state, payload) {\n      let { rememberMeStartTime, rememberMeMinutes } = state\n      if (rememberMeStartTime && rememberMeMinutes) {\n        let validUntil = moment(rememberMeStartTime).add(rememberMeMinutes, 'minutes')\n        if (moment().isAfter(validUntil)) {\n          notification['success']({\n            duration: 0,\n            message: '授权超时',\n            description: '请重新登录'\n          });\n          return {\n            ...initState,\n            address: state.address,\n            accountId: state.accountId,\n          }\n        }\n      }\n      return state\n    }\n  },\n  effects: dispatch => ({\n    // 获取中继的 account 基本信息。\n    async getAccount (address, { dexAccount }) {\n      // initAccountFromMetaMask 会调用此函数，那么应该判断下地址是否变化。\n      // 其实不管什么场景，只要调用此函数，都判断下地址变化也没关系。\n      if (dexAccount.address !== address) {\n        this.switchAccount(address)\n      }\n\n      const relayAccount = await api.lightconeGetAccount(address);\n      // 中继还没账号\n      if (!relayAccount) {\n        this.updateAccount({ state: ENUM_ACCOUNT_STATUS.UNCREATED.getValue()})\n        return\n      } else {\n        if (relayAccount.isFreeze) {\n          // 中继有账户，但是冻结的\n          this.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOCKED.getValue() })\n        } else {\n          // 如果本地是没创建（可能从缓存中恢复的），则改为没登录。\n          // 其他状态，则保持原状态。\n          if (dexAccount.state === ENUM_ACCOUNT_STATUS.UNCREATED.getValue()) {\n            this.updateAccount({ state: ENUM_ACCOUNT_STATUS.UNSIGNED.getValue() })\n          }\n        }\n      }\n\n      this.updateAccount({\n        accountId: relayAccount.accountId,\n      })\n      dispatch.balance.startFetchBalance()\n    },\n    async loadAccount (payload, { dexAccount }) {\n      // 若缓存中有地址，需要处理。\n      if (!dexAccount.address) return\n\n      // 启动时，缓存中有地址，直接初始化 window.wallet。\n      let { address } = dexAccount\n      window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n\n      // 启动时，如果账户状态仍然是创建中，说明上次没创建完就关闭了。继续开始检查。\n      if (dexAccount.state === ENUM_ACCOUNT_STATUS.CREATING.getValue()) {\n        dispatch.dexAccount.checkAccountCreated()\n      } else {\n        // 重新获取account 基本信息，并刷新本地。\n        // 重要: 必须放在 else 分支，因为中继没有 creating 态，会导致被更新为 uncreated 态。\n        await dispatch.dexAccount.getAccount(address)\n      }\n    },\n    async checkAccountCreated (payload, { dexAccount }) {\n      let interval = setInterval(async () => {\n        try {\n          const relayAccount = await api.lightconeGetAccount(window.wallet.account)\n          if (!relayAccount) return\n          this.updateAccount({ accountId: relayAccount.accountId })\n\n          let valid = utils.checkPassword(dexAccount.passwordHash, relayAccount)\n          if (!valid) {\n            this.updateAccount({\n              state: ENUM_ACCOUNT_STATUS.CREATED.getValue()\n            })\n            // 不能 return，否则改密码，永远无法执行到下面的流程。\n            // return\n          }\n          // 登录时，只验证密码，不更新account，直接在登录流程更新 apiKey。\n          // 而 upsert 流程，需要在此处定时检查更新\n          let apiKey = await utils.genApiKey(relayAccount.accountId, dexAccount.passwordHash)\n          this.updateAccount({\n            apiKey,\n            state: ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()\n          })\n          dispatch.balance.startFetchBalance()\n          dispatch.order.fetchOrders()\n\n          notification['success']({\n            duration: 5,\n            message: '新密码已生效。'\n          });\n\n          clearInterval(interval)\n        } catch (e) {}\n      }, 5000);\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api';\nimport { config } from 'librarys/lightcone_v3';\n\nconst initDeepthState = {\n  loading: false,\n  level: 0,\n  asks: [],\n  bids: [],\n  incrementalVersion: null\n}\n\nfunction scrollSellTableToBottom () {\n  let tableDom = document.getElementsByClassName('sell-table')[0]\n  if (!tableDom) return\n  let tableBodyDom = tableDom.getElementsByClassName('ant-table-body')[0]\n  if (!tableBodyDom) return\n  tableBodyDom.scrollTop = tableBodyDom.scrollHeight\n}\n\nfunction formatFromWEI (resp, currentMarket, level) {\n  let { asks, bids } = resp\n  let { baseToken: baseSymbol, quoteToken: quoteSymbol, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n\n  asks = asks.map(ask => ({\n    ...ask,\n    type: 'ask',\n    // 这里必须 toFixed 转为字符串，因为界面上要显示为精度带 0,比如 23.120000\n    // 所以排序的时候，需要转成 number 再排序\n    price: Number(ask.price).toFixed(pricePrecision - level),\n    size: config.fromWEI(baseSymbol, ask.size, amountPrecision),\n    volume: config.fromWEI(quoteSymbol, ask.volume, totalPrecision)\n  }))\n  bids = bids.map(bid => ({\n    ...bid,\n    type: 'bid',\n    price: Number(bid.price).toFixed(pricePrecision - level),\n    size: config.fromWEI(baseSymbol, bid.size, amountPrecision),\n    volume: config.fromWEI(quoteSymbol, bid.volume, totalPrecision)\n  }))\n\n  return { asks, bids }\n}\n\n// direction: 求合时的方向。按照此顺序排好序，再从左往右累加求和。\n// asks(卖方) 从小到大。bids(买) 从大到小\nfunction calcSummationCurve (items, direction, currentMarket) {\n  // 计算累计曲线时必须先排序。因此 depth 的排序统一在此处做。\n  items = _.orderBy(items, item => -Number(item.price))\n  // 只是为了计算累计值的时候循环方便。处理完后再重新转成倒序。\n  if (direction === 'asc') {\n    items = _.reverse(items)\n  }\n\n  let { totalPrecision } = currentMarket\n  let sumVolume = 0\n  for (let item of items) {\n    let { volume } = item\n    sumVolume += Number(volume)\n    item.sumVolume = Number(sumVolume.toFixed(totalPrecision))\n  }\n\n  if (direction === 'asc') {\n    items = _.reverse(items)\n  }\n  return items\n}\n\nexport default {\n  state: initDeepthState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchDepth (payload, { markets, depth }) {\n      if (!markets.currentMarket) return\n\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n      \n      this.update({\n        asks: [],\n        bids: [],\n        loading: true,\n      })\n\n      const resp = await api.getDepth(marketPair, depth.level, 50)\n      let { asks, bids } = formatFromWEI(resp, markets.currentMarket, depth.level)\n\n      this.update({\n        asks: calcSummationCurve(asks, 'asc', markets.currentMarket),\n        bids: calcSummationCurve(bids, 'desc', markets.currentMarket),\n        incrementalVersion: null,\n        loading: false,\n      })\n      \n      // 每次全量获取完 depth 后，重新订阅\n      dispatch.socket.subscribe([ `depth&${marketPair}&${depth.level}` ])\n\n      scrollSellTableToBottom()\n    },\n    async setLevel (level) {\n      this.update({level})\n      dispatch.depth.fetchDepth()\n    },\n    async scrollSellTable () {\n      scrollSellTableToBottom()\n    },\n    async incrementalUpdate (payload, { depth: depthState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      let { startVersion, endVersion, data } = payload\n      let { incrementalVersion, asks, bids, level } = depthState\n\n      if (incrementalVersion) {\n        // 2510, 2510 ---> 2511, 2511\n        let expectVersion = incrementalVersion + 1\n        if (startVersion < expectVersion) {\n          return\n        }\n        \n        if (startVersion > expectVersion) {\n          // 说明跳跃了，需要重新获取全量的。\n          dispatch.depth.fetchDepth()\n          return\n        }\n      }\n      \n      // 增量更新\n      let newData = formatFromWEI(data, markets.currentMarket, level)\n      asks = _.chain([...newData.asks, ...asks]).unionBy(a => a.price).reject(a => Number(a.size) === 0).value()\n      bids = _.chain([...newData.bids, ...bids]).unionBy(a => a.price).reject(a => Number(a.size) === 0).value()\n\n      this.update({\n        asks: calcSummationCurve(asks, 'asc', markets.currentMarket),\n        bids: calcSummationCurve(bids, 'desc', markets.currentMarket),\n        incrementalVersion: endVersion\n      })\n    },\n  })\n}","import _ from 'lodash'\nimport numeral from 'numeral'\nimport { config } from 'librarys/lightcone_v3'\nimport api from 'api'\n\nconst initState = {\n  loading: false,\n  list: [],\n  latestPrice: 0,\n  lastPrice: 0,\n  variation: 0,\n  page: 1,\n  pageSize: 10\n}\n\nfunction formatFromWEI (trades, currentMarket) {\n  let { baseToken: baseSymbol, quoteToken: quoteSymbol, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n\n  trades = trades.map(trade => {\n    trade.side = _.toUpper(trade.side)\n    trade.timestamp = Number(trade.timestamp)\n    trade.price = Number(trade.price).toFixed(pricePrecision)\n    trade.size = config.fromWEI(baseSymbol, Number(trade.size), amountPrecision)\n    return trade\n  })\n\n  return trades\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateVariation: (state, latestPrice) => {\n      let lastPrice = state.latestPrice\n      let variation = 0\n      if (lastPrice && latestPrice) {\n        variation = (latestPrice - lastPrice) / lastPrice\n      }\n      return {\n        ...state,\n        lastPrice,\n        latestPrice,\n        variation\n      }\n    }\n  },\n  effects: dispatch => ({\n    async fetchTrade (payload, { markets, trade: tradeStore }) {\n      if (!markets.currentMarket) return\n      let { market: marketPair } = markets.currentMarket\n\n      // 每次全量获取完 trade 后，重新订阅\n      dispatch.socket.subscribe([ `trade&${marketPair}` ])\n\n      this.update({\n        list: [],\n        loading: true,\n      })\n\n      var trades = await api.getTrade(marketPair, 50);\n      if (!trades || trades.length === 0) {\n        this.update({ loading: false })\n        return\n      }\n      trades = formatFromWEI(trades, markets.currentMarket)\n\n      this.update({\n        list: trades,\n        loading: false\n      })\n\n      let currentPrice = trades[0].price\n      this.updateVariation(currentPrice)\n      document.title = `${currentPrice}|${marketPair}|WeDEX`\n    },\n    async incrementalUpdate (trades, { trade: tradeState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      trades = formatFromWEI(trades, markets.currentMarket)\n\n      let { list } = tradeState\n      list = list.concat(trades)\n\n      // TODO 优化：根据 tradeid 合并。\n      // 顺序应该有规律。每次只把最新的添加到队列头部就行，没必要每次全部放在一起排序。\n      let modified = _.orderBy(list, ['timestamp'], ['desc'])\n      this.update({\n        list: modified,\n      })\n\n      let currentPrice = modified[0].price\n      this.updateVariation(currentPrice)\n      document.title = `${currentPrice}|${marketPair}|WeDEX`\n    },\n  })\n}","import _ from 'lodash'\nimport { config } from 'librarys/lightcone_v3'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport api from 'api'\n\nconst initState = {\n  dayInfo: {\n    \"high\": 0,\n    \"low\": 0,\n    \"size\": 0,\n    \"volume\": 0\n  },\n  tvSubscribers: []\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchDayInfo (payload, { markets, candleStick }) {\n      if (!markets.currentMarket) return\n\n      var candles = await api.getCandlestick({\n        market: markets.currentMarket.market,\n        interval: '1d',\n      })\n      if (!candles || candles.length === 0) return\n\n      let dayInfo = _.pick(candles[0], ['high', 'low', 'size', 'volume'])\n      let { baseToken: baseSymbol } = markets.currentMarket\n      let baseToken = config.getTokenBySymbol(baseSymbol)\n      dayInfo.size = config.fromWEI(baseToken.symbol, dayInfo.size, baseToken.precision)\n\n      this.update({\n        dayInfo: dayInfo,\n      })\n    },\n    async subscribeBars (payload, { candleStick: {tvSubscribers} }) {\n      let {subscribeUID, onRealtimeCallback, resolution, symbolInfo} = payload\n\n      let market = symbolInfo['name'];\n      resolution = ENUM_INTERVAL_TYPE.toText(resolution)\n      let topic = `candlestick&${market}&${resolution}`\n\n      let newSub = {\n        lastBar: null,\n        subscribeUID,\n        topic,\n        realtimeCb: onRealtimeCallback,\n        resolution: resolution,\n        symbolInfo: symbolInfo\n      }\n      tvSubscribers = _.unionBy(tvSubscribers, [newSub], subscribeUID)\n      this.update({tvSubscribers})\n\n      dispatch.socket.subscribe([ topic ])\n    },\n    async unsubscribeBars (subscriberUID, { candleStick: {tvSubscribers} }) {\n      tvSubscribers = _.reject(tvSubscribers, sub => sub.subscriberUID = subscriberUID)\n      this.update({tvSubscribers})\n    },\n    async incrementalUpdate(payload, { candleStick: {tvSubscribers} }) {\n      let { topic, data } = payload\n      let subscriber = tvSubscribers.find(sub => _.toUpper(sub.topic) === _.toUpper(topic))\n      if (!subscriber) return\n\n      // let lastBar = sub.lastBar\n\n      let quoteSymbol = subscriber.symbolInfo.name.split('-')[1]\n      let quoteToken = config.getTokenBySymbol(quoteSymbol)\n\n      let newCancle = {\n        time: data.start,\n        high: Number(data['high']),\n        low: Number(data['low']),\n        open: Number(data['open']),\n        close: Number(data['close']),\n        volume: config.fromWEI(quoteToken.symbol, data['volume'], quoteToken.precision)\n      }\n      console.info('蜡烛图推送', newCancle)\n      subscriber.realtimeCb(newCancle)\n      // sub.lastBar = lastBar\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport { config } from 'librarys/lightcone_v3';\nimport { notification } from 'utils'\nimport { matchPath } from \"react-router-dom\";\nimport { push } from 'connected-react-router'\n\nconst initState = {\n  markets: [],\n  stars: [],\n  tabs: [],\n  currentTab: null,\n  currentMarkets: [],\n  currentMarket: null,\n  cond: {\n    sort: 'market',\n    sortDirection: 'asc'\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let {cond, currentMarkets} = state\n      cond = { ...cond, ...payload }\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n      return {\n        ...state,\n        cond,\n        currentMarkets\n      }\n    },\n    updateMarketsTicker: (state, tickers) => {\n      let formatTicker = ticker => {\n        let { market: marketName, bid, ask, open, size: size24h, volume } = ticker\n\n        const [baseTokenSymbol, quoteTokenSymbol] = marketName.split('-')\n        let token = config.getTokenBySymbol(baseTokenSymbol)\n        size24h = config.fromWEI(baseTokenSymbol, size24h, token.precision)\n\n        let latest = (Number(bid) + Number(ask)) / 2\n        open = Number(open)\n        let differ = latest - open\n        let variation = open ? differ / open : 0\n        return { differ, latest, variation, size24h }\n      }\n\n      let { currentMarkets, currentMarket, cond } = state\n      // “当前交易对”可能不在“当前交易对列表”。交易对列表和交易对都需要更新。这样处理可以避免所有交易对一起更新。\n      // 更新当前交易对列表\n      currentMarkets = currentMarkets.map(item => {\n        let ticker = _.find(tickers, {market: item.market})\n        if (!ticker) {\n          return item\n        }\n\n        let { differ, latest, variation, size24h } = formatTicker(ticker)\n        let { pricePrecision } = item\n        item.differ = differ.toFixed(pricePrecision)\n        item.latest = latest.toFixed(pricePrecision)\n        item.variation = variation\n        item.size24h = size24h\n        return item\n      })\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n\n      // 更新当前交易对\n      if (currentMarket) {\n        let currentMatched = _.find(tickers, {market: currentMarket.market})\n        // 有可能响应回来的时候，current 已经改变了\n        if (currentMatched) {\n          let { latest, variation } = formatTicker(currentMatched)\n          let { pricePrecision } = currentMarket\n          currentMarket.latest = latest.toFixed(pricePrecision)\n          currentMarket.variation = variation\n        }\n      }\n\n      return {\n        ...state,\n        currentMarkets,\n        currentMarket,\n      }\n    }\n  },\n  effects: dispatch => ({\n    async fetchMarkets (payload, { router }) {\n      // 即使传了 'LRC-ETH'，获取到的仍是所有的列表。\n      let markets = await config.getMarkets()\n      if (!markets) return\n\n      // 解析路由，获取默认交易对。\n      const match = matchPath(router.location.pathname, {\n        path: \"/trade/:market\",\n        exact: true,\n        strict: true\n      })\n      let market = 'LRC-ETH'\n      if (match && match.params.market) {\n        market = match.params.market\n      }\n      let [ defaultBaseSymbol, defaultQuoteSymbol ] = market.split('-')\n      \n      let quoteTokens = _.chain(markets).map(market => market.quoteToken).uniq().value()\n      let defaultTab = defaultQuoteSymbol\n      let tabs = ['自选', ...quoteTokens]\n      this.update({\n        markets,\n        tabs,\n      })\n      \n      // 设置 tab\n      dispatch.markets.setCurrentTab(defaultTab)\n      \n      // 设置默认当前市场为第一个\n      let currentMarkets = _.filter(markets, {quoteToken: defaultTab})\n      let currentMarket = _.find(currentMarkets, { baseToken: defaultBaseSymbol })\n      if (currentMarket) {\n        dispatch.markets.setCurrentMarket(currentMarket)\n      }\n    },\n    async setCurrentTab (tab, { markets }) {\n      let { cond } = markets\n\n      let currentMarkets = []\n      if (tab === '自选') {\n        currentMarkets = markets.stars\n      } else {\n        currentMarkets = _.filter(markets.markets, {quoteToken: tab})\n      }\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n\n      this.update({\n        currentTab: tab,\n        currentMarkets,\n      })\n\n      dispatch.markets.fetchCurrentMarkets()\n\n      // 不再默认触发 setCurrentMarket。两个动作分离开，更灵活。\n      // let currentMarket = currentMarkets[0]\n      // if (currentMarket) {\n      //   dispatch.markets.setCurrentMarket(currentMarket)\n      // }\n    },\n\n    async startFetchMarketInfo (payload, { markets }) {\n      let { currentMarket: { market } } = markets\n      console.info(`======开始获取市场 ${market} 信息======`)\n\n      dispatch.depth.setLevel(0)\n      dispatch.trade.fetchTrade()\n      dispatch.order.fetchOrders()\n      // dispatch.socket.subscribe([\n      //   // `candlestick&${market}&1Hour`,\n      //   `depth&${market}&1`,\n      //   `trade&${market}`,\n      //   `ticker&${market}`\n      // ])\n    },\n    async setCurrentMarket (currentMarket, { markets, socket }) {\n      this.update({\n        currentMarket,\n      })\n      dispatch.placeOrder.initialize()\n\n      if (!socket.ws || socket.ws.readyState !== 1) {\n        if (socket.ws && socket.ws.readyState === 3) {\n          // 当(必须处理，不能直接返回。否则会导致整个切交易对的时候， depth,trade,orders 都不再变化。)\n          // 且仅当(必须是建立过，并断了才触发。否则首次加载就会触发。死循环。) \n          // socket 关闭后，刷新网页。\n\n          // TODO 优化: socket断了，这里可以尝试重连。\n          // notification['success']({\n          //   duration: 0,\n          //   message: 'socket 已断开，重新载入',\n          //   description: '网络错误'\n          // })\n          location.reload()\n        }\n        return\n      }\n      dispatch.markets.startFetchMarketInfo()\n    },\n    async onSocketReady (payload, { markets, depth }) {\n      if (!markets.currentMarket) return\n      dispatch.markets.startFetchMarketInfo()\n    },\n\n    async starMarket (currentMarket, { markets, depth }) {\n      let stars = _.xorBy([currentMarket], markets.stars, 'market')\n      this.update({\n        stars,\n      })\n      // 如果当前处于自选tab, 刷新自选的列表\n      if (markets.currentTab === '自选') {\n        dispatch.markets.setCurrentTab('自选')\n      }\n    },\n    async fetchCurrentMarkets (payload, { markets, dexAccount }) {\n      let { apiKey } = dexAccount\n      let { currentMarkets, currentMarket } = markets\n      if (!currentMarkets) return\n\n      let pairs = currentMarkets.map(item => item.market)\n      // 此处 currentMarket 可能不属于 currentMarkets，这里需要把 currentMarket 补在请求列表中。\n      if (currentMarket) {\n        pairs = _.uniq([...pairs, currentMarket.market])\n      }\n      if (!pairs.length) return\n\n      let tickers = await api.getTickers({\n        markets: pairs,\n        apiKey\n      })\n\n      // 必须在 reducer 中做，因为等拿到tickers的时候，可能currentMarkets已经切换了。\n      this.updateMarketsTicker(tickers)\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport { config } from 'librarys/lightcone_v3';\nimport { notification } from 'utils'\n\nconst initState = {\n  tokens: [],\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n  },\n  effects: dispatch => ({\n    async fetchTokens (payload, {  }) {\n      let tokens = config.getTokens()\n      this.update({ tokens })\n    }\n  })\n}","import _ from 'lodash'\nimport { Account, config, exchange } from 'librarys/lightcone_v3';\nimport utils, { notification } from 'utils'\nimport api from 'api'\nconst BigNumber = require('bignumber.js');\n\nconst initState = {\n  buyPrice: null,\n  buyAmount: null,\n  buyTotal: null,\n\n  sellPrice: null,\n  sellAmount: null,\n  sellTotal: null,\n\n  // 市价买入的”交易额“\n  marketBuyTotal: null,\n  // 市价卖出的”数量“\n  marketSellAmount: null,\n\n  channelName: null,\n}\n\nasync function placeAnOrder (isBuy, tokenS, tokenB, amountS, amountB, dexAccount, channelName) {\n  console.info({tokenS, tokenB, amountS, amountB, dexAccount})\n  let owner = window.wallet.account\n  let { accountId, passwordHash, apiKey } = dexAccount\n\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  let { publicKeyX, publicKeyY, secretKey: tradingPrivKey } = keyPair\n\n  const tokenSConfig = config.getTokenBySymbol(tokenS)\n  const orderId = await api.getOrderId(accountId, tokenSConfig.id, apiKey);\n  \n  // Timestamp in second\n  const validSince = new Date().getTime() / 1000 - 3600;\n  const validUntil = new Date().getTime() / 1000 + 3600 * 24 * 30;\n\n  console.info(`下单:`, {amountB, amountS})\n\n  const signedEtheruemTx = exchange.submitOrder(window.wallet, {\n    owner,\n    accountId,\n    keyPair: {\n      publicKeyX,\n      publicKeyY,\n      secretKey: tradingPrivKey,\n    },\n    tokenS,\n    tokenB,\n    amountS,\n    amountB,\n    orderId,\n    validSince: Math.floor(validSince),\n    validUntil: Math.floor(validUntil),\n    buy: isBuy\n  })\n\n  if (channelName) {\n    signedEtheruemTx.channelId = `wedex::subchannel::${channelName}`\n  }\n\n  console.log('Order signed tx: ', signedEtheruemTx);\n  const response = await api.submitOrderToLightcone(signedEtheruemTx, apiKey);\n  console.log('Response of submitOrder: ', response);\n\n  if (!response) return\n  notification['success']({\n    duration: 5,\n    message: '下单成功'\n  });\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    // channelName 不能清除\n    initialize: (state, payload) => ({ ...initState, channelName: state.channelName }),\n  },\n  effects: dispatch => ({\n    async checkChannel (payload, { router }) {\n      const query = utils.getUrlParams(router.location.search)\n      const { channel } = query\n      if (channel) {\n        this.update({ channelName: channel })\n      }\n    },\n    async placeBuyOrder (payload, { markets, dexAccount, placeOrder }) {\n      let { baseToken: tokenB, quoteToken: tokenS } = markets.currentMarket\n      let { buyAmount, buyPrice, channelName } = placeOrder\n      if (!buyAmount || !buyPrice) return\n\n      buyAmount = new BigNumber(buyAmount);\n      let amountS = buyAmount.times(buyPrice).toFixed();\n      let amountB = buyAmount.toFixed();\n\n      let result = utils.withLoading(() => placeAnOrder(true, tokenS, tokenB, amountS, amountB, dexAccount, channelName))\n      return result\n    },\n    async placeSellOrder (payload, { markets, dexAccount, placeOrder }) {\n      let { baseToken: tokenS, quoteToken: tokenB } = markets.currentMarket\n      let { sellAmount, sellPrice, channelName } = placeOrder\n      if (!sellAmount || !sellPrice) return\n\n      sellAmount = new BigNumber(sellAmount);\n      let amountB = sellAmount.times(sellPrice).toFixed();\n      let amountS = sellAmount.toFixed();\n\n      let result = utils.withLoading(() => placeAnOrder(false, tokenS, tokenB, amountS, amountB, dexAccount, channelName))\n      return result\n    },\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport { Account, common, config } from 'librarys/lightcone_v3';\nimport utils from 'utils'\nconst BigNumber = require('bignumber.js');\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nconst initState = {\n  loading: false,\n  list: [],\n  page: 1,\n  pageSize: 10\n}\n\nfunction formatBalances (balances) {\n  let tokens = config.getTokens()\n  return balances.map(balance => {\n    let { tokenId, totalAmount, frozenAmount } = balance\n    let token = _.find(tokens, { id: tokenId })\n    if (!token) return\n\n    balance.token = token\n    let availAmount = BigNumber(totalAmount) - BigNumber(frozenAmount)\n    // 不能用 fromWEI, 因为 fromWEI用了 toFixed,会导致四舍五入。全部划转会超。\n    // 优化，这里应该是原始数据，只是界面上四舍五入。否则全部划转会少一部分。\n    balance.availAmount = BigNumber(availAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    balance.totalAmount = BigNumber(totalAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    balance.frozenAmount = BigNumber(frozenAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    return balance\n  }).filter(balance => !!balance)\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchBalances (payload, { dexAccount }) {\n      let { accountId, apiKey } = dexAccount\n      if (!accountId || !apiKey) return\n      this.update({ loading: true })\n\n      let { skip, limit } = utils.formatPageParams(dexAccount)\n      let balances = await api.getBalances(accountId, apiKey, skip, limit)\n      if (!balances) {\n        this.update({ loading: false })\n        return\n      }\n\n      balances = formatBalances(balances)\n      this.update({\n        list: balances,\n        loading: false\n      })\n    },\n    // 账户发生变动时。登录，重置密码，需要重新订阅账户。\n    startFetchBalance (payload, { dexAccount }) {\n      let { accountId, state } = dexAccount\n      if (!accountId || !ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(state)) return\n      console.info(`======开始获取 账户 信息======`)\n\n      dispatch.balance.fetchBalances()\n      dispatch.socket.subscribe([\n        // `candlestick&${market}&1Hour`,\n        `account`,\n      ])\n    },\n    async onSocketReady (payload, { markets, depth }) {\n      dispatch.balance.startFetchBalance()\n    },\n    async incrementalUpdate (payload, { balance }) {\n      let balances = balance.list\n\n      let [newBalance] = formatBalances([payload])\n      let list = _.unionBy([newBalance], balances, b => b.tokenId)\n      this.update({ list })\n    },\n  })\n}","import _ from 'lodash'\nimport { config } from 'librarys/lightcone_v3';\nimport utils from 'utils'\nimport api from 'api';\nconst BigNumber = require('bignumber.js');\n\nconst initState = {\n  loading: false,\n  list: [],\n  page: 1,\n  pageSize: 10\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    appendBalance: (state, blance) => {\n      let list = _.unionBy([ blance ], state.list, 'symbol')\n      return {\n        ...state,\n        list: _.orderBy(list, 'symbol')\n      }\n    }\n  },\n  effects: dispatch => ({\n    async fetchBalance (tokenSymbol, {dexAccount}) {\n      this.update({ loading: true })\n\n      let token = config.getTokenBySymbol(tokenSymbol)\n      let amount = 0\n      if (tokenSymbol.toUpperCase() === 'ETH') {\n        amount = await api.getEthBalance(dexAccount.address)\n      } else {\n        amount = await api.getTokenBalance(dexAccount.address, tokenSymbol)\n      }\n      if (!amount) {\n        this.update({ loading: false })\n        return\n      }\n\n      // amount = Number(\n      //   config.fromWEI(\n      //     tokenSymbol,\n      //     amount,\n      //     token.precision\n      //   )\n      // );\n      // 不能用 fromWEI, 因为 fromWEI用了 toFixed,会导致四舍五入。全部划转会超。\n      amount = BigNumber(amount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n\n      let blance = {\n        symbol: token.symbol,\n        name: token.name,\n        amount: amount,\n      }\n      // 必须如此使用，因为 fetchAllBalances 中的多个 fetchBalance 会并发，此处拿到的rootState是旧的（await 之前的）。\n      // 而 reducers 没有此问题，reducers是可重入的。\n      this.appendBalance(blance)\n      this.update({ loading: false })\n\n      // let { list } = rootState.walletBalance\n      // list = _.unionBy([ blance ], list, 'symbol')\n\n      // this.update({\n      //   list\n      // })\n    },\n    async fetchAllBalances (payload, {  }) {\n      // 我的资产页面，进来时批量拉取\n      // 转入页面，每选一个币种，单独 fetchBalance 一次。 此页面的select下拉框用本地 store。\n      let tokens = config.getTokens()\n      tokens.forEach(token => {\n        // 暂时去掉 WETH\n        if (token.symbol === 'WETH') return\n        dispatch.walletBalance.fetchBalance(token.symbol)\n      })\n    },\n  })\n}","import _ from 'lodash'\nimport numeral from 'numeral'\nimport api from 'api';\nimport { Account, config, common } from 'librarys/lightcone_v3';\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nimport utils, { notification } from 'utils'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nconst initState = {\n  loading: false,\n  list: [],\n  cond: {\n    page: 1,\n    pageSize: 50,\n    // 当前委托，历史委托\n    type: 'current', // ['current', 'history']\n    // 历史委托条件下，[所有状态(ALL), 已成交(PROCESSED), 已取消(CANCELLED)]\n    historyStatus: 'ALL',\n    allMarket: false\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let cond = { ...state.cond, ...payload }\n      return {\n        ...state,\n        cond\n      }\n    },\n  },\n  effects: dispatch => ({\n    async fetchOrders (payload, { order, dexAccount, markets: { currentMarket } }) {\n      let { accountId, passwordHash, state, apiKey } = dexAccount\n      if (!accountId || !ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(state)) return\n\n      if (!currentMarket) return\n      let { market: marketPair, baseToken, quoteToken } = currentMarket\n      if (!marketPair) return\n\n      //  1. 每次全量获取完 order 后，重新订阅\n      dispatch.socket.subscribe([ `order&${marketPair}` ])\n\n      // 2. 更新列表\n      this.update({\n        list: [],\n        loading: true,\n      })\n\n      let { offset, limit } = utils.formatPageParams(order.cond)\n      let { type, allMarket, historyStatus } = order.cond\n\n      // 规整 market 参数\n      let market\n      if (allMarket) {\n        market = undefined\n      } else {\n        market = marketPair\n      }\n\n      // 规整 status 参数\n      let statuses\n      if (type === 'current') {\n        statuses = [ENUM_ORDER_STATUS.PROCESSING.getValue()]\n      } else {\n        if (historyStatus === 'ALL') {\n          statuses = [ENUM_ORDER_STATUS.CANCELLED.getValue(), ENUM_ORDER_STATUS.PROCESSED.getValue()]\n        } else if (historyStatus === 'CANCELLED') {\n          statuses = [ENUM_ORDER_STATUS.CANCELLED.getValue()]\n        } else {\n          statuses = [ENUM_ORDER_STATUS.PROCESSED.getValue()]\n        }\n      }\n\n      let resp = await api.getOrders({accountId, apiKey, offset, limit, market, statuses});\n      let { totalNum, orders } = resp || {}\n      if (!orders) {\n        this.update({ loading: false })\n        return\n      }\n\n      this.update({\n        list: orders,\n        loading: false,\n      })\n    },\n    async incrementalUpdate (order, { order: orderState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      let { list, cond } = orderState\n\n      // 1. 在“当前委托”，则做union处理。\n      // 2. 在历史委托，则丢弃。\n      if (cond.type === 'history') return\n\n      let updatedOrders = utils.formatOrders([order])\n      list = _.chain([...updatedOrders, ...list]).unionBy(o => o.hash).orderBy(['createdAt'], ['desc']).value()\n\n      this.update({\n        list,\n      })\n    },\n    async cancelAnOrders (order, { markets, dexAccount, placeOrder, order: orderStore }) {\n      let { accountId, passwordHash, apiKey } = dexAccount\n      let exchangeAccount = new Account(window.wallet);\n      const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n      let { publicKeyX, publicKeyY, secretKey } = keyPair\n\n      const signed = exchangeAccount.submitFlexCancel(\n        accountId,\n        publicKeyX,\n        publicKeyY,\n        secretKey,\n        order.hash,\n        order.clientOrderId\n      );\n      console.log('signed cancel order result: \\n', signed);\n\n      const response = await api.cancelOrders(\n        signed.account.accountId,\n        signed.hash,\n        signed.clientOrderId,\n        signed.signature,\n        apiKey\n      )\n      console.log('Response of submitOrder: ', response);\n\n      if (!response) return\n      // notification['success']({\n      //   duration: 5,\n      //   message: '取消成功'\n      // })\n\n      dispatch.order.fetchOrders()\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      return response\n    },\n    async cancelAllOrders (payload, { markets, dexAccount, placeOrder, order: orderStore }) {\n      let orders = _.chain(orderStore.list)\n                    .filter({ status: ENUM_ORDER_STATUS.PROCESSING.getValue() })\n                    .slice(0, 10)\n                    .value()\n      let promises = _.map(orders, order => dispatch.order.cancelAnOrders(order))\n      let resp = await Promise.all(promises)\n      notification['success']({\n        duration: 5,\n        message: '操作成功'\n      })\n\n      dispatch.order.fetchOrders()\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n    }\n  })\n}\n","import _ from 'lodash'\nimport api from 'api'\nimport { Account, config } from 'librarys/lightcone_v3';\nimport utils, { notification } from 'utils'\n\nconst initState = {\n  loading: false,\n  list: [],\n  cond: {\n    token: undefined,\n    page: 1,\n    pageSize: 100,\n    statuses: undefined,\n    types: undefined,\n    start: undefined,\n    end: undefined,\n  },\n}\n\nfunction formatTransfers (transfers) {\n  return transfers.map(transfer => {\n    let { realAmount, feeAmount, symbol } = transfer\n    transfer.realAmount = utils.toTokenPrecision(realAmount, symbol)\n    transfer.feeAmount = utils.toTokenPrecision(feeAmount, 'ETH')\n    return transfer\n  })\n}\n\nasync function checkAllowance (tokenSymbol, depositAmout) {\n  let owner = window.wallet.account\n  if (tokenSymbol.toUpperCase() === 'ETH') {\n    return 0\n  } else {\n    const allowance = await api.getAllowance(owner, tokenSymbol);\n    const amount = Number(\n      config.fromWEI(\n        tokenSymbol,\n        allowance,\n        config.getTokenBySymbol(tokenSymbol).precision\n      )\n    );\n    if (Number(depositAmout) > amount) {\n      const txCount = amount === 0 ? 1 : 2;\n      return txCount\n    }\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let cond = { ...state.cond, ...payload }\n      return {\n        ...state,\n        cond\n      }\n    },\n  },\n  effects: dispatch => ({\n    async fetchTransactions (payload, { dexAccount, transfer }) {\n      let { accountId, apiKey } = dexAccount\n      if (!accountId || !apiKey) return\n      this.update({ loading: true })\n\n      let { offset, limit } = utils.formatPageParams(transfer.cond)\n\n      let transactions = await api.getTransactions({\n        accountId,\n        apiKey,\n        offset,\n        limit,\n        statuses: transfer.cond.statuses,\n        types: transfer.cond.types,\n        start: transfer.cond.start,\n        end: transfer.cond.end,\n        symbol: transfer.cond.token\n      });\n      if (!transactions) {\n        this.update({ loading: false })\n        return\n      }\n\n      // console.info(\"########\", {transactions})\n      transactions = formatTransfers(transactions)\n      this.update({\n        list: transactions,\n        loading: false\n      })\n    },\n    // approveTxCount(只是枚举类型): 0 代表授权额充足 1 代表授权额不足但是当前授权额是0， 2 代表授权额不足，并且授权额不为零\n    // 这个是因为ERC20规范，授权额不能直接增加，必须先改成0\n    async deposit ({ symbol, amount, gasPrice }, { dexAccount }) {\n      const approveTxCount = await checkAllowance(symbol, amount)\n\n      // Gas price\n      let nonce = await api.getNonce(window.wallet.account);\n      let exchangeAccount = new Account(window.wallet);\n\n      if (approveTxCount === 2) {\n        const signedEthereumTx = await exchangeAccount.approveZero(\n          symbol,\n          nonce,\n          gasPrice\n        );\n        console.log('Received approve to  signEthereumTx');\n        console.log(signedEthereumTx);\n        // await api.sendApprove(signedEthereumTx);\n        nonce += 1;\n      }\n\n      // Approve\n      if (approveTxCount !== 0) {\n        const signedEthereumTx = await exchangeAccount.approveMax(\n          symbol,\n          nonce,\n          gasPrice\n        );\n        console.log('Received approve to  signEthereumTx');\n        console.log(signedEthereumTx);\n        // await api.sendApprove(signedEthereumTx);\n        nonce += 1;\n      }\n\n      const signedEthereumTx = await exchangeAccount.depositTo(\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n      // console.log('Received deposit signEthereumTx');\n      // console.log(signedEthereumTx);\n      // const response = await api.sendDeposit(signedEthereumTx);\n      // const data = response['result'];\n      // console.log('Response of deposit: ', data);\n\n      // await this.props.fetchMyBalances(\n      //   this.props.dexAccount.account.accountId,\n      //   this.props.dexAccount.account.apiKey\n      // );\n\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      if (signedEthereumTx) {\n        notification['success']({\n          duration: 5,\n          message: '提交成功，需要30个区块确认，大约需要10分钟，请耐心等待。'\n        })\n        return true\n      } else {\n        return false\n      }\n    },\n    async withdraw ({ symbol, amount, gasPrice }, { dexAccount }) {\n      const nonce = await api.getNonce(window.wallet.account);\n      let exchangeAccount = new Account(window.wallet);\n      const signedEthereumTx = await exchangeAccount.onchainWithdrawal(\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n\n      console.log('Received withdraw signEthereumTx');\n      console.log(signedEthereumTx);\n      // const response = await api.sendWithdrawTransaction(signedEthereumTx);\n      // const data = response['result'];\n      // console.log('Response of withdraw: ', data);\n\n      // await this.props.fetchMyBalances(\n      //   this.props.dexAccount.account.accountId,\n      //   this.props.dexAccount.account.apiKey\n      // );\n\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      if (signedEthereumTx) {\n        notification['success']({\n          duration: 5,\n          message: '提交成功，资产上链及零知识证明生成确认中，大约需要40-60分钟。'\n        })\n        return true\n      } else {\n        return false\n      }\n    }\n  })\n}","import _ from 'lodash'\nimport moment from 'moment'\nimport numeral from 'numeral'\nimport api from 'api';\nimport { config } from 'librarys/lightcone_v3';\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nimport appConfig from 'config/appConfig'\nimport utils, { notification } from 'utils'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nlet { pollingIntervalRatio, relay } = appConfig\n\nconst initState = {\n  ws: null,\n  lastPingTime: null,\n  pollingIntervals: []\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    initialize: (state, payload) => {\n      // 重要：清空 pollingIntervals 前，一定要清空此定时器列表。其他地方也要注意\n      _.forEach(state.pollingIntervals, inverval => clearInterval(inverval))\n      return initState\n    },\n  },\n  effects: dispatch => ({\n    async start (payload, { order, dexAccount, markets }) {\n      if (!(\"WebSocket\" in window)) {\n        // 浏览器不支持 WebSocket\n        alert(\"您的浏览器不支持 WebSocket!\");\n      }\n\n      var ws = new WebSocket(relay.wsUrl)\n      ws.onmessage = function(event) {\n        var data = event.data;\n        dispatch.socket.onMessage(data)\n      };\n      ws.onerror = () => {\n        console.info('web socket 异常')\n        ws.close();\n\n        this.initialize()\n        // 此处socket 异常，不用处理也行。因为心跳检查会兜底。此处只是为了及时处理。\n        dispatch.socket.start()\n      };\n      ws.onopen = () => {\n        console.info('web socket 建立成功')\n        this.update({\n          lastPingTime: moment()\n        })\n        // 暂时用轮询的方式\n        dispatch.markets.onSocketReady()\n        dispatch.balance.onSocketReady()\n      }\n      this.update({ws})\n\n      dispatch.socket.polling()\n    },\n    async onMessage (payload, { socket, markets }) {\n\n      if (payload === 'ping') {\n        socket.ws.send('pong')\n        this.update({\n          lastPingTime: moment()\n        })\n        return\n      }\n\n      payload = JSON.parse(payload)\n      if (payload.op === 'sub') {\n        let { args, result } = payload\n        if (_.toUpper(result.status) !== 'OK') {\n          console.info('######## 订阅失败')\n          notification['error']({\n            duration: 0,\n            message: `订阅失败，重新订阅`,\n            description: JSON.stringify(result.error),\n          })\n          // 重新订阅可能死循环。\n          dispatch.socket.subscribe(args)\n        }\n        return\n      }\n\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      let [topicType, TopicMarket] = _.split(payload.topic, '&')\n      if (topicType === 'account') {\n        dispatch.balance.incrementalUpdate(payload.data)\n      } else if (topicType === 'depth') {\n        // depth&lrc-eth&0\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.depth.incrementalUpdate(payload)\n      } else if (topicType === 'trade') {\n        // trade&lrc-eth\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.trade.incrementalUpdate(payload.data)\n      } else if (topicType === 'order') {\n        dispatch.order.incrementalUpdate(payload.data)\n      } else if (topicType === 'candlestick') {\n        // candlestick&LRC-ETH&1hr\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.candleStick.incrementalUpdate(payload)\n      }\n    },\n    // 优化：\n    // 切换账号后，换个apikey 订阅 account信息，就会报 apikey not match\n    // 这里应该不用重新建立一个 socket 吧，直接通过新的 apikey 解析出新的 account 即可。\n    // 亚东: 目前的设定是需要重新连接,之前认为直接更新订阅不是很安全,你们可以先close一下\n    async subscribe (payload, { socket, dexAccount }) {\n      if (!socket.ws || socket.ws.readyState !== 1) return\n\n      let subInfo = {\n        op: 'sub',\n        args: payload,\n        apiKey: ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(dexAccount.state) && dexAccount.apiKey || undefined\n      }\n      socket.ws.send(JSON.stringify(subInfo))\n    },\n    async polling (payload, { socket }) {\n      // utils.setImmediateInterval(() => {\n      //   dispatch.depth.fetchDepth()\n      //   dispatch.trade.fetchTrade()\n      //   dispatch.order.fetchOrders()\n      // }, pollingInterval);\n\n      // this.subscribe(['candlestick&LRC-BTC&1Hour'])\n      // utils.setImmediateInterval(() => dispatch.depth.fetchDepth(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.trade.fetchTrade(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.order.fetchOrders(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.balance.fetchBalances(), 3000 * pollingIntervalRatio);\n\n      let { pollingIntervals } = socket\n      _.forEach(pollingIntervals, inverval => clearInterval(inverval))\n      \n      let intervals = []\n      let interval = utils.setImmediateInterval(() => dispatch.candleStick.fetchDayInfo(), 1000 * pollingIntervalRatio);\n      intervals.push(interval)\n      interval = utils.setImmediateInterval(() => dispatch.rate.fetchRate(), 3000 * pollingIntervalRatio);\n      intervals.push(interval)\n      // interval = utils.setImmediateInterval(() => dispatch.markets.fetchCurrentMarkets(), 3000 * pollingIntervalRatio);\n      // intervals.push(interval)\n      interval = utils.setImmediateInterval(() => dispatch.award.checkAward(), 10 * 1000 * pollingIntervalRatio);\n      intervals.push(interval)\n      this.update({ pollingIntervals: intervals })\n    },\n    async checkHeartBeat (payload, { socket }) {\n      let { ws, lastPingTime } = socket\n\n      // 若socket还没创建，不检查。\n      if (!ws || !lastPingTime) return\n      // 距离上次心跳已经 3 分钟了，重新创建 socket。\n      let now = moment()\n      // 直接 lastPingTime.add 竟然会改掉 store !\n      let validUntil = lastPingTime.clone().add(3, 'minutes')\n      if (now.isBefore(validUntil)) return\n\n      this.initialize()\n      dispatch.socket.start()\n      notification['error']({\n        duration: 0,\n        message: `网络错误`,\n        description: `服务器连接中，请刷新`,\n      })\n    }\n  })\n}\n","import _ from 'lodash'\nimport numeral from 'numeral'\nimport { config } from 'librarys/lightcone_v3'\nimport api from 'api'\n\nconst initState = {\n  CNY: [],\n  USD: [],\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchRate (payload, { dexAccount }) {\n      let { apiKey } = dexAccount\n\n      var CNYRates = await api.getPrice({\n        legal: 'CNY',\n        apiKey\n      })\n      let usdt = _.find(CNYRates, {symbol: 'USD'})\n      CNYRates.push({\n        ...usdt,\n        symbol: 'USDT'\n      })\n\n      var USDRates = await api.getPrice({\n        legal: 'USD',\n        apiKey\n      })\n      usdt = _.find(USDRates, {symbol: 'USD'})\n      CNYRates.push({\n        ...usdt,\n        symbol: 'USDT'\n      })\n\n      this.update({\n        CNY: CNYRates,\n        USD: USDRates,\n      })\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport { Account, common, config } from 'librarys/lightcone_v3';\nimport utils from 'utils'\nconst BigNumber = require('bignumber.js');\n\nconst initState = {\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async checkAward (payload, { award, dexAccount, appState }) {\n      if (!dexAccount.address) return\n      if (appState.awardInfo.visible) return\n\n      let { latestAward } = award\n      let latestAwardBillSn = latestAward && latestAward.billSn\n\n      let resp = await api.getUserBillEggPrizeList({\n        // address: '0xa4ac2bb3885ff3bf82e99cc2b442a379e3627ef7',\n        address: dexAccount.address,\n        pageSize: 1,\n        page: 1,\n        sort: 'id',\n        sortDirection: 'asc',\n        read: false\n      })\n      let newAward = resp.data.rows[0]\n      if (!newAward) return\n      \n      let { id, billSn, money, unit, createdAt } = newAward\n\n      // TODO: 中奖\n      dispatch.appState.showEggAward({\n        id,\n        amount: money,\n        unit,\n        createdAt\n      })\n    },\n    async markRead (ids, { dexAccount }) {\n      if (!dexAccount.address) return\n\n      await api.postUserReadBillEggPrizeList({\n        // address: '0xa4ac2bb3885ff3bf82e99cc2b442a379e3627ef7',\n        address: dexAccount.address,\n        ids\n      })\n    }\n  })\n}","import React from 'react'\nimport { init } from '@rematch/core'\nimport createRematchPersist from '@rematch/persist'\nimport { asyncLocalStorage } from \"redux-persist/storages\"\nimport { applyMiddleware, compose } from 'redux'\nimport { createLogger } from 'redux-logger'\nimport createSagaMiddleware from 'redux-saga'\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\nimport { createHashHistory } from 'history'\nimport rootSaga from 'sagas'\nimport models from './models'\n\nexport { connect } from 'react-redux'\n\nexport const history = createHashHistory()\n\n// 将store提供给全局hook使用\nexport const StoreContext = React.createContext()\n\nconst initPlugin = () => {\n  const plugins = []\n\n  const persistPlugin = createRematchPersist({\n    whitelist: ['auth', 'dexAccount', 'markets', 'award'],\n    // throttle: 1000,\n    storage: asyncLocalStorage,\n    version: 1\n  })\n\n  plugins.push(persistPlugin)\n  return plugins\n}\n\nlet sagaMiddleware\nlet sagasManager\n\nconst initMiddleware = () => {\n  const middleware = []\n\n  const loggerMiddleware = createLogger({\n    level: 'info',\n    collapsed: true\n  })\n\n\n  sagaMiddleware = createSagaMiddleware({})\n  const historyMiddleware = routerMiddleware(history)\n\n  if (process.env.NODE_ENV !== 'test') {\n    middleware.push(loggerMiddleware)\n  }\n\n  middleware.push(sagaMiddleware)\n  middleware.push(historyMiddleware)\n  return middleware\n}\n\nconst middleware = initMiddleware()\nconst enhancers = []\nenhancers.push(applyMiddleware(...middleware))\n\nexport const reloadSaga = (newYieldedSagas) => {\n  sagasManager.cancel()\n  sagasManager.done.then(() => {\n    sagasManager = sagaMiddleware.run(newYieldedSagas)\n  })\n}\n\nexport const store = init({\n  models,\n  redux: {\n    reducers:{\n      router: connectRouter(history),\n    },\n    enhancers: enhancers\n  },\n  plugins: initPlugin()\n})\n\nexport const { dispatch } = store\n\nsagasManager = sagaMiddleware.run(rootSaga)","import appState from './appState'\nimport metaMask from './metaMask'\nimport dexAccount from './dexAccount'\nimport depth from './depth'\nimport trade from './trade'\nimport candleStick from './candleStick'\nimport markets from './markets'\nimport tokens from './tokens'\nimport placeOrder from './placeOrder'\nimport balance from './balance'\nimport walletBalance from './walletBalance'\nimport order from './order'\nimport transfer from './transfer'\nimport socket from './socket'\nimport rate from './rate'\nimport award from './award'\n\nexport default {\n  appState,\n  metaMask,\n  dexAccount,\n  depth,\n  trade,\n  candleStick,\n  markets,\n  tokens,\n  placeOrder,\n  balance,\n  walletBalance,\n  order,\n  transfer,\n  socket,\n  rate,\n  award\n}","import _ from 'lodash'\nimport { Account, config, Utils as lightConeUtils } from 'librarys/lightcone_v3'\nimport { dispatch, store } from 'store'\nimport api from 'api';\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport { notification as antdNotification } from 'antd';\nvar detect = require('detect-browser').detect;\n\nexport function getUrlParams(search) {\n  const hashes = search.slice(search.indexOf('?') + 1).split('&')\n  const params = {}\n  hashes.map(hash => {\n    const [key, val] = hash.split('=')\n    params[key] = decodeURIComponent(val)\n  })\n  return params\n}\n\nexport function makeCancelable (promise) {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then(\n      val => hasCanceled_ ? reject({isCanceled: true}) : resolve(val),\n      error => hasCanceled_ ? reject({isCanceled: true}) : reject(error)\n    );\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    },\n  };\n};\n\n// const isFunction = input => typeof input === 'function';\n// export default predicate => elemOrThunk =>\n//   predicate ? (isFunction(elemOrThunk) ? elemOrThunk() : elemOrThunk) : null;\nexport function renderIf (predicate) {\n  return elemOrThunk =>\n    predicate ? (_.isFunction(elemOrThunk) ? elemOrThunk() : elemOrThunk) : null;\n}\n\nexport function compareAppVersion(remoteVersion, localVersion){ \n  function toNum(a) {\n    a = a.toString();\n    //也可以这样写 var c=a.split(/\\./);\n    var c=a.split('.');\n    var num_place=[\"\",\"0\",\"00\",\"000\",\"0000\"],r=num_place.reverse();\n    for (var i=0;i<c.length;i++){ \n        var len=c[i].length;       \n        c[i]=r[len]+c[i];  \n    } \n    var res= c.join(''); \n    return res; \n  } \n\n  let rvNum = toNum(remoteVersion)\n  let lvNum = toNum(localVersion)\n  if (rvNum > lvNum) {\n    return 1\n  } else if (rvNum === lvNum) {\n    return 0\n  } else {\n    return -1\n  }\n}\n\n// 被 promisefy 的异步函数，需满足以下2点要求\n// 1. 最后一个参数是函数\n// 2. 回调函数的参数为 (err, result)，前面是可能的错误，后面是正常的结果\nfunction promisefy (asyncFunc) {\n  function promiseFunc (...args) {\n    // args 为实际调用时，传的前 n-1 个参数。\n    return new Promise((resolve, reject) => {\n      let preArgs = _.slice(args, 0, args.length)\n      asyncFunc(...preArgs, function (err, result) {\n        if (err) {\n          reject(new Error(err))\n        } else {\n          resolve(result)\n        }\n      })\n    })\n  }\n  return promiseFunc\n}\n\n// 回调函数的参数为 (result)\nfunction promisefyNoError (asyncFunc) {\n  function promiseFunc (...args) {\n    // args 为实际调用时，传的前 n-1 个参数。\n    return new Promise((resolve, reject) => {\n      let preArgs = _.slice(args, 0, args.length)\n      asyncFunc(...preArgs, function (result) {\n        resolve(result)\n      })\n    })\n  }\n  return promiseFunc\n}\n\nexport async function playVoice (audio, audioPath) {\n  return new Promise((resolve, reject) => {\n    audio.src = audioPath\n    audio.play()\n    console.info(audio.src, audio.duration)\n    audio.onended = function() {\n      resolve()\n    }\n  })\n}\n\nexport function parseUlrParams (name) {\n  let reg = new RegExp('(^|&|\\\\?|%3F)' + name + '(=|%3D)([^&]*)(&|$)')\n  let r = window.location.search.substr(1).match(reg)\n  return r && r[3]\n}\n\nexport function waitFor (ms) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve()\n    }, ms)\n  })\n}\n\nexport function shadeSn(sn) {\n  if (!sn) return\n  let chars = sn.split('')\n  chars = _.fill(chars, '*', 2, chars.length - 6)\n  return chars.join('')\n}\n\nexport function shadePhone(phone) {\n  if (!phone) return\n  let chars = phone.split('')\n  chars = _.fill(chars, '*', 3, chars.length - 4)\n  return chars.join('')\n}\n\nexport function checkBrowser () {\n  const browser = detect()\n  // TODO 360\n  return _.includes(['firefox', 'chrome', '360'], browser.name)\n}\n\nexport function checkPassword (passwordHash, relayAccount) {\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  console.info(passwordHash, keyPair.publicKeyX, relayAccount.publicKeyX)\n  return (\n    keyPair.secretKey &&\n    keyPair.publicKeyX === relayAccount.publicKeyX &&\n    keyPair.publicKeyY === relayAccount.publicKeyY\n  )\n}\n\nexport async function genApiKey (accountId, passwordHash) {\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  let { publicKeyX, publicKeyY, secretKey } = keyPair\n\n  const signed = exchangeAccount.getApiKey(\n    accountId,\n    publicKeyX,\n    publicKeyY,\n    secretKey\n  );\n  const data = {\n    accountId: accountId,\n    publicKeyX: publicKeyX,\n    publicKeyY: publicKeyY\n  };\n  // 服务端生成\n  let resp = await api.getApiKey(data, signed.signature);\n  return resp.account\n}\n\nexport function genPasswordHash (address, password) {\n  return lightConeUtils.keccakHash(\"LOOPRING\" + address.toLowerCase() + lightConeUtils.keccakHash(password))\n}\n\nexport function formatPageParams ({ page, pageSize }) {\n  return {\n    offset: (page - 1) * pageSize,\n    limit: pageSize\n  }\n}\n\nexport async function withLoading (handler) {\n  dispatch.appState.update({ loading: true })\n  try {\n    let result = await handler()\n    dispatch.appState.update({ loading: false })\n    return result\n  } catch (e) {\n    console.info(\"!!!!!!withLoading error\", e)\n    dispatch.appState.update({ loading: false })\n  }\n}\n\nexport function setImmediateInterval (callback, interval) {\n  callback()\n  return setInterval(() => callback(), interval)\n}\n\nexport function getPrecision (num) {\n  let parts = num.toString().split('.')\n  return parts[1] ? parts[1].length : 0\n}\n\nexport function asLegalMoney (value, from, to = 'USD') {\n  let rootState = store.getState()\n  let { rate } = rootState\n\n  let list = rate[to]\n  let item = _.find(list, {symbol: from})\n  if (!item) return 0\n\n  let amount = value * item.price || 0\n  return toTokenPrecision(amount, to)\n}\n\nexport function toTokenPrecision (value = 0, symbol = 'LRC') {\n  let rootState = store.getState()\n  let { tokens } = rootState.tokens\n  let token = _.find(tokens, { symbol })\n\n  let precision = token && token.precision || 2\n  // toFixed自带四舍五入\n  // _.round有缺陷。比如_.round(1.2, 2)为 1.2，而不是 1.20\n  return Number(value).toFixed(precision)\n}\n\nexport function formatOrders (orders) {\n  return orders.map(order => {\n    let updatedOrder = { ...order }\n    const [baseTokenSymbol, quoteTokenSymbol] = updatedOrder.market.split('-')\n    let market = config.getMarketBySymbol(baseTokenSymbol, quoteTokenSymbol)\n    let { pricePrecision, amountPrecision, totalPrecision } = market\n\n    let filledFee\n    let side = order['side'].toUpperCase()\n    if (side === 'BUY') {\n      let token = config.getTokenBySymbol(baseTokenSymbol)\n      filledFee = config.fromWEI(baseTokenSymbol, Number(order['filledFee']), token.precision);\n    } else {\n      let token = config.getTokenBySymbol(quoteTokenSymbol)\n      filledFee = config.fromWEI(quoteTokenSymbol, Number(order['filledFee']), token.precision);\n    }\n    \n    const price = Number(order['price']).toFixed(pricePrecision)\n    const size = config.fromWEI(baseTokenSymbol, Number(order['size']), amountPrecision);\n    const filledSize = config.fromWEI(baseTokenSymbol, Number(order['filledSize']), amountPrecision);\n    const volume = config.fromWEI(quoteTokenSymbol, Number(order['volume']), totalPrecision);\n    const filledVolume = config.fromWEI(quoteTokenSymbol, Number(order['filledVolume']), totalPrecision);\n  \n    // let filledInNumber = order['side'].toUpperCase() === 'SELL' ? filledSize / size : filledVolume / volume\n    let filledInNumber = filledSize / size\n    filledInNumber = Math.floor(filledInNumber * 100);\n    const filled = `${filledInNumber}%`;\n  \n    updatedOrder['price'] = price;\n    updatedOrder['filledFee'] = filledFee;\n    updatedOrder['size'] = size;\n    updatedOrder['filledSize'] = filledSize;\n    updatedOrder['volume'] = volume;\n    updatedOrder['filledVolume'] = filledVolume;\n    updatedOrder['filled'] = filled;\n    return updatedOrder\n  })\n}\n\nexport function checkLogined () {\n  let rootState = store.getState()\n  let { dexAccount: { address, state }, metaMask: { enable  } } = rootState\n\n  // 1. enable 才代表metamask已经获取到了地址，adderss 有可能是缓存的。\n  if (!enable ) return false\n\n  // 2. dexAccount中必须有地址。\n  if (!address) return false\n\n  // 3. 账号状态必须正常。\n  // 不仅仅是LOGGED_IN才算登录态。输入过密码并验证通过了，都不显示登录按钮。\n  let signinedStatus = [\n    ENUM_ACCOUNT_STATUS.CREATED,\n    ENUM_ACCOUNT_STATUS.LOGGED_IN,\n    ENUM_ACCOUNT_STATUS.CREATING,\n    ENUM_ACCOUNT_STATUS.LOCKED,\n  ].map(status => status.getValue())\n  let logined = _.includes(signinedStatus, state)\n  return logined\n}\n\nconst notifyDebounceTime = 5000\nexport const notification = {\n  success: _.debounce(params => antdNotification.success({\n    placement: 'bottomLeft',\n    ...params,\n  }), notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  info: _.debounce(params => antdNotification.info({\n    placement: 'bottomLeft',\n    ...params,\n  }), notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  warning: _.debounce(params => antdNotification.warning({\n    placement: 'bottomLeft',\n    ...params,\n  }), notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  error: _.debounce(params => antdNotification.error({\n    placement: 'bottomLeft',\n    ...params,\n  }), notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  })\n}\n\nexport function getTradingViewLocale (locale) {\n  // 把系统的语言包换成 tradingview 的格式。\n  return 'en'\n}\n\nexport function formatResolution (str) {\n  if (str === 'D') {\n    return 24 * 60\n  } else if (str === 'W') {\n    return 7 * 24 * 60\n  } else {\n    return Number(str)\n  }\n}\n\nexport default {\n  getUrlParams,\n  checkPassword,\n  genApiKey,\n  genPasswordHash,\n  formatPageParams,\n  waitFor,\n  renderIf,\n  promisefy,\n  withLoading,\n  setImmediateInterval,\n  getPrecision,\n  asLegalMoney,\n  toTokenPrecision,\n  formatOrders,\n  checkLogined,\n  notification,\n  getTradingViewLocale,\n  formatResolution\n}","import axios from 'axios';\nimport { notification } from 'utils'\nimport appConfig from 'config/appConfig'\n\nlet { serverUrl, relayUrl } = appConfig.relay\n\nexport const SERVER_URL = serverUrl\n\nexport function getProxyURL() {\n  // let proxyURL = '/lightcone_v3/';\n  // if (\n  //   window.location.hostname === 'localhost' ||\n  //   window.location.hostname === '127.0.0.1'\n  // ) {\n  //   proxyURL = 'http://52.196.115.12:8080/lightcone_v3/';\n  //   //  proxyURL = 'http://localhost:8080/lightcone_v3/';\n  // }\n  // return proxyURL;\n  // TODO: 部署时需要注意\n  return relayUrl\n}\n\nexport function getRefreshDurationInMillionSeconds() {\n  // FIXME: this doesn't work\n  if (\n    window.location.hostname === 'localhost' ||\n    window.location.hostname === '127.0.0.1'\n  ) {\n    // Every minute\n    return 20 * 1000;\n  } else {\n    return 1 * 1000;\n  }\n}\n\nexport function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport async function sendApprove(signedEthereumTx) {\n  return sendDeposit(signedEthereumTx);\n}\n\nexport async function sendDeposit(signedEthereumTx) {\n  const data = {\n    data: signedEthereumTx\n  };\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'POST',\n      baseURL: SERVER_URL,\n      url: '/api/v1/deposit',\n      data\n    });\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport function _parseResponse(response) {\n  const data = response['data'];\n  const resultInfo = data['resultInfo'];\n  const errorData = data['error'];\n\n  // Some API endpoints in the old versions don't have resultInfo.\n  if (resultInfo) {\n    const code = resultInfo['code'];\n    if (code !== 0) {\n      const errorMessage = resultInfo['message'];\n      throw Error(errorMessage);\n    }\n    return data;\n  } else if (errorData) {\n    const code = errorData['code'];\n    if (code !== 0) {\n      const errorMessage = `${errorData['code']} ${errorData['message']}`;\n      throw Error(errorMessage);\n    }\n    return data;\n  } else {\n    return data;\n  }\n}\n\nexport function parseResponse(response) {\n  try {\n    return _parseResponse(response)\n  } catch (err) {\n    // debugger\n    notification['error']({\n      style: {\n        backgroundColor: 'white'\n      },\n      // message: 'Your deposit request failed. Please try again!',\n      description: String(err),\n      duration: 10\n    });\n  }\n}\n\nexport async function getApiKey(data, signed) {\n  try {\n    const signature = signed.Rx + ',' + signed.Ry + ',' + signed.s;\n    const headers = {\n      'X-API-SIG': signature\n    };\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/apiKey',\n        data\n      },\n      { headers: headers }\n    );\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function getDeposits(\n  accountId,\n  statuses,\n  types,\n  start,\n  end,\n  fromHash,\n  limit,\n  apiKey\n) {\n  const data = {\n    accountId: accountId,\n    statuses: statuses,\n    types: types,\n    start: start,\n    end: end,\n    fromHash: fromHash,\n    limit: limit\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/user/deposits',\n        data\n      },\n      { headers: headers }\n    );\n    return parseResponse(response);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getWithdraws(\n  accountId,\n  statuses,\n  types,\n  start,\n  end,\n  fromHash,\n  limit,\n  apiKey\n) {\n  const data = {\n    accountId: accountId,\n    statuses: statuses,\n    types: types,\n    start: start,\n    end: end,\n    fromHash: fromHash,\n    limit: limit\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/user/onchainWithdrawal',\n        data\n      },\n      { headers: headers }\n    );\n    return parseResponse(response);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getNonce(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'GET',\n      baseURL: SERVER_URL,\n      url: '/api/v1/ethNonce',\n      data\n    });\n    if (response['data']['nonce'] !== undefined) {\n      return response['data']['nonce'];\n    } else {\n      throw new Error('Failed to get nonce');\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function getDexNonce(data) {\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'POST',\n      baseURL: SERVER_URL,\n      url: '/api/v1/dexNonce',\n      data\n    });\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function submitOffchainWithdrawal(data, apiKey) {\n  try {\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'POST',\n        baseURL: SERVER_URL,\n        url: '/api/v1/offchainWithdrawal',\n        data\n      },\n      { headers: headers }\n    );\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function submitOrderToLightcone(data, apiKey) {\n  try {\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'POST',\n        baseURL: SERVER_URL,\n        url: '/api/v1/order',\n        data\n      },\n      { headers: headers }\n    );\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\n// Return order id\nexport async function getOrderId(accountId, tokenSId, apiKey) {\n  const data = {\n    accountId: accountId,\n    tokenSId: tokenSId\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/orderId',\n        data\n      },\n      { headers: headers }\n    );\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return response['data']['orderId'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\n// Wait for 20 seconds\nexport async function lightconeGetAccountUntilSuccess(address) {\n  const data = {\n    address\n  };\n  try {\n    var i = 0;\n    // Wait for 20 seconds\n    while (i < 5) {\n      const response = await axios.post(getProxyURL(), {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/account',\n        data\n      });\n      const responseData = response['data'];\n      if (responseData['error'] === undefined) {\n        return responseData;\n      } else {\n        // account is not ready yet. sleep 1 seconds.\n        // throw new Error(responseData['error']['message']);\n        await sleep(1000);\n        i = i + 1;\n      }\n    }\n    return {};\n  } catch (e) {\n    throw e;\n  }\n}\n\nexport async function lightconeGetAccount(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'GET',\n      baseURL: SERVER_URL,\n      url: '/api/v1/account',\n      data\n    });\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData.account;\n    } else if (responseData['error'].code === 101002) {\n      return null;\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    if (e.response.status === 404) {\n      return null\n    }\n    throw new Error(e);\n  }\n}\n\nexport async function getTimestamp() {\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'GET',\n      baseURL: SERVER_URL,\n      url: '/api/v1/timestamp'\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData;\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getCandlestick(params) {\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'GET',\n      baseURL: SERVER_URL,\n      url: '/api/v1/candlestick',\n      data: params\n    });\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['candles'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getTrade(market, limit) {\n  const data = {\n    market,\n    limit\n  };\n  try {\n    const response = await axios.post(getProxyURL(), {\n      method: 'GET',\n      baseURL: SERVER_URL,\n      url: '/api/v1/trade',\n      data\n    });\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['trades'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\n// TODO: verify filter\nexport async function getTransactions(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/user/deposits',\n        data\n      },\n      { headers: headers }\n    );\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['transactions'];\n    } else {\n      // throw new Error(responseData['error']['message']);\n      return null\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getDepositHistory(accountId, limit, apiKey) {\n  const data = {\n    accountId,\n    types: 'DEPOSIT',\n    limit\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/user/deposits',\n        data\n      },\n      { headers: headers }\n    );\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['transactions'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getWithdrawalHistory(accountId, limit, apiKey) {\n  const data = {\n    accountId,\n    types: 'DEPOSIT',\n    limit\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/user/withdrawals',\n        data\n      },\n      { headers: headers }\n    );\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['transactions'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getPrice(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/price',\n        data\n      },\n      { headers: headers }\n    );\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getTickers(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await axios.post(\n      getProxyURL(),\n      {\n        method: 'GET',\n        baseURL: SERVER_URL,\n        url: '/api/v1/ticker',\n        data\n      },\n      { headers: headers }\n    )\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}","export const SHOW_SETTINGS = 'SHOW_SETTINGS';\nexport const CREATE_DEX_ACCOUNT = 'CREATE_DEX_ACCOUNT';\nexport const SHOW_DEPOSIT = 'SHOW_DEPOSIT';\nexport const SHOW_WITHDRAW = 'SHOW_WITHDRAW';\nexport const SHOW_CONFIRM_LOGOUT = 'SHOW_CONFIRM_LOGOUT';\nexport const SHOW_EXPORT_ACCOUNT = 'SHOW_EXPORT_ACCOUNT';\nexport const SHOW_ENTER_PASSWORD = 'SHOW_ENTER_PASSWORD';\nexport const SHOW_ACCOUNT_CREATION_IN_PROCESSING =\n  'SHOW_ACCOUNT_CREATION_IN_PROCESSING';\n\nexport const LOGIN_MODAL = 'LOGIN_MODAL';\nexport const UPDATE_PASSWORD_MODAL = 'UPDATE_PASSWORD_MODAL';\nexport const SHOW_NETWORK_WRONG_MODAL = 'SHOW_NETWORK_WRONG_MODAL';\n\nexport const SHOW_CONNECT_WALLET_MODAL = 'SHOW_CONNECT_WALLET_MODAL';\n\nexport function showNetworkWrongwModal(show) {\n  return {\n    type: SHOW_NETWORK_WRONG_MODAL,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showSettingsModal(show) {\n  return {\n    type: SHOW_SETTINGS,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function createDexAccountModal(show) {\n  return {\n    type: CREATE_DEX_ACCOUNT,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function loginModal(show) {\n  return {\n    type: LOGIN_MODAL,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function updatePasswordModal(show) {\n  return {\n    type: UPDATE_PASSWORD_MODAL,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showDepositModal(show) {\n  return {\n    type: SHOW_DEPOSIT,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showWithdrawModal(show) {\n  return {\n    type: SHOW_WITHDRAW,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showConfirmLogoutModal(show) {\n  return {\n    type: SHOW_CONFIRM_LOGOUT,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showExportAccountModal(show) {\n  return {\n    type: SHOW_EXPORT_ACCOUNT,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showEnterPasswordModal(show) {\n  return {\n    type: SHOW_ENTER_PASSWORD,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showAccountCreationInProcessingModal(show) {\n  return {\n    type: SHOW_ACCOUNT_CREATION_IN_PROCESSING,\n    payload: {\n      show\n    }\n  };\n}\n\nexport function showConnectWalletModal(show) {\n  return {\n    type: SHOW_CONNECT_WALLET_MODAL,\n    payload: {\n      show\n    }\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Row, Col, Button } from 'antd';\nimport colors from 'colors';\nimport { LOGGED_IN } from 'redux/actions/DexAccount';\n\nimport {\n  showDepositModal,\n  showWithdrawModal\n} from 'redux/actions/ModalManager';\n\nclass MyBalancesOverview extends React.Component {\n  setDepositModalVisible(depositModalVisible) {\n    this.setState({ depositModalVisible });\n  }\n\n  setWithdrawModalVisible(withdrawModalVisible) {\n    this.setState({ withdrawModalVisible });\n  }\n\n  render() {\n    const { dexAccount } = this.props;\n    const submitButtonStyle = {\n      color: colors.textHighContrast,\n      borderStyle: 'none',\n      height: '38px',\n      borderRadius: '0px',\n      fontWeight: '600'\n    };\n\n    const submitBuyButtonStyle = {\n      ...submitButtonStyle,\n      backgroundColor: colors.buyPrimary\n    };\n\n    const submitSellButtonStyle = {\n      ...submitButtonStyle,\n      backgroundColor: colors.sellPrimary\n    };\n\n    let buttons;\n    // TODO: needs refactor\n    if (\n      typeof window.wallet !== 'undefined' &&\n      !!dexAccount &&\n      !!dexAccount.account\n    ) {\n      if (\n        dexAccount.account.keyPairCipherText &&\n        dexAccount.account &&\n        dexAccount.account.accountId\n      ) {\n        buttons = (\n          <div>\n            <div\n              style={{\n                marginTop: '30px',\n                color: colors.textLowContrast,\n                fontWeight: 400,\n                fontSize: '0.9rem'\n              }}\n            >\n              <Button\n                className={'deposit-button'}\n                block\n                style={submitBuyButtonStyle}\n                onClick={() => {\n                  this.props.showDepositModal(true);\n                }}\n                disabled={!this.props.metaMask.isDesiredNetwork}\n              >\n                DEPOSIT\n              </Button>\n            </div>\n\n            <div\n              style={{\n                marginTop: '30px',\n                color: colors.textLowContrast,\n                fontWeight: 400,\n                fontSize: '0.9rem'\n              }}\n            >\n              <Button\n                className={'withdraw-button'}\n                block\n                style={submitSellButtonStyle}\n                onClick={() => {\n                  this.props.showWithdrawModal(true);\n                }}\n                disabled={\n                  this.props.dexAccount.account.state !== LOGGED_IN ||\n                  !this.props.metaMask.isDesiredNetwork\n                }\n              >\n                WITHDRAW\n              </Button>\n            </div>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div\n        style={{\n          paddingTop: '30px',\n          paddingLeft: '30px',\n          paddingRight: '30px',\n          paddingBottom: '30px'\n        }}\n      >\n        <div\n          style={{\n            lineHeight: '53px',\n            height: '53px',\n            color: colors.textMedContrast,\n            fontWeight: 700,\n            fontSize: '1.4rem',\n            userSelect: 'none'\n          }}\n        >\n          Balance Overview\n        </div>\n        <div\n          style={{\n            marginTop: '30px',\n            color: colors.textLowContrast,\n            fontWeight: 400,\n            fontSize: '0.9rem',\n            userSelect: 'none'\n          }}\n        >\n          Total\n        </div>\n        <div\n          style={{\n            marginTop: '10px',\n            color: colors.textMedContrast,\n            fontWeight: 400,\n            fontSize: '1.4rem'\n          }}\n        >\n          -\n        </div>\n        {buttons}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, balances, dexAccount, metaMask } = state;\n  return { layoutManager, balances, dexAccount, metaMask };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    showDepositModal: show => dispatch(showDepositModal(show)),\n    showWithdrawModal: show => dispatch(showWithdrawModal(show))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyBalancesOverview);\n","import { updateMyOrders } from 'redux/actions/MyOrders';\nimport { updateMyBalances } from 'redux/actions/MyBalances';\nimport { sleep } from 'api/LightconeAPI';\n\nexport const GET_DATA_FROM_LOCALSTORAGE = 'GET_DATA_FROM_LOCALSTORAGE';\nexport const GET_DATA_FROM_LOCALSTORAGE_SUCCEEDED =\n  'GET_DATA_FROM_LOCALSTORAGE_SUCCEEDED';\n\nexport const CREATE_ACCOUNT = 'CREATE_ACCOUNT';\nexport const SEND_CREATE_REQUEST = 'SEND_CREATE_REQUEST';\nexport const SEND_CREATE_REQUEST_SUCCEEDED = 'SEND_CREATE_REQUEST_SUCCEEDED';\nexport const SEND_CREATE_REQUEST_FAILED = 'SEND_CREATE_REQUEST_FAILED';\n\nexport const CREATE_ON_CHAIN_PENDING = 'CREATE_ON_CHAIN_PENDING';\nexport const CREATE_ON_CHAIN_SUCCEEDED = 'CREATE_ON_CHAIN_SUCCEEDED';\nexport const CREATE_ON_CHAIN_FAILED = 'CREATE_ON_CHAIN_FAILED';\n\nexport const ENABLE_TOKENS = 'ENABLE_TOKENS';\nexport const CANCELED_ORDERS = 'CANCELED_ORDERS';\nexport const REMOVE_CANCELED_ORDERS = 'REMOVE_CANCELED_ORDERS';\nexport const UPDATE_PASSWORD = 'UPDATE_PASSWORD';\n\nexport const LOGOUT = 'LOGOUT';\nexport const CHANGE_ACCOUNT = 'CHANGE_ACCOUNT';\n\nexport const UPDATE_ACCOUNT = 'UPDATE_ACCOUNT';\nexport const UPDATE_REMEMBER_ME = 'UPDATE_REMEMBER_ME';\n\nexport const WALLET_UNCONNECTED = 'WALLET_UNCONNECTED';\nexport const UNCREATED = 'UNCREATED';\nexport const CREATING = 'CREATING';\nexport const CREATED = 'CREATED';\nexport const LOCKED = 'LOCKED';\nexport const LOGGED_IN = 'LOGGED_IN';\n\nexport function updateRememberMe(rememberMe) {\n  return {\n    type: UPDATE_REMEMBER_ME,\n    payload: { rememberMe }\n  };\n}\n\nexport function updatePassword(password) {\n  return {\n    type: UPDATE_PASSWORD,\n    payload: { password: password }\n  };\n}\n\nexport function updateAccount(account) {\n  return {\n    type: UPDATE_ACCOUNT,\n    payload: { account: account }\n  };\n}\n\nexport function getDataFromLocalStorage(address) {\n  return {\n    type: GET_DATA_FROM_LOCALSTORAGE,\n    payload: { address }\n  };\n}\n\nexport function canceledOrders(hash) {\n  return {\n    type: CANCELED_ORDERS,\n    payload: {\n      hash\n    }\n  };\n}\n\nexport function removeCanceledOrders() {\n  return {\n    type: REMOVE_CANCELED_ORDERS,\n    payload: {}\n  };\n}\n\nexport function logout() {\n  return {\n    type: LOGOUT,\n    payload: {}\n  };\n}\n\nexport function changeAccount() {\n  return dispatch => {\n    dispatch({\n      type: CHANGE_ACCOUNT,\n      payload: {}\n    });\n  };\n}\n\nexport function logoutAll() {\n  return dispatch => {\n    (async () => {\n      try {\n        dispatch(logout());\n        await sleep(2000);\n\n        dispatch(updateMyOrders([]));\n        dispatch(updateMyBalances([]));\n      } catch (error) {}\n    })();\n  };\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\nimport appLayout from 'appLayout';\nimport { Line } from 'rc-progress';\nimport { Row, Table } from 'antd';\nimport BigNumber from 'bignumber.js';\n\nclass MyBalanceTable extends React.Component {\n  render() {\n    const tableTitleStyle = {\n      color: '#666666',\n      fontWeight: 400,\n      fontSize: '14px',\n      marginBottom: '0px'\n    };\n\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'padding',\n        width: 2\n      },\n      {\n        title: <div style={tableTitleStyle}>Asset</div>,\n        dataIndex: 'asset',\n        width: 90\n      },\n      {\n        title: <div style={tableTitleStyle}>Name</div>,\n        dataIndex: 'name',\n        width: 120\n      },\n      /*\n      {\n        title: <div style={tableTitleStyle}>Holdings</div>,\n        dataIndex: 'holdings',\n        width: 140\n      },\n      */\n      {\n        title: <div style={tableTitleStyle}>Balance</div>,\n        dataIndex: 'balance',\n        width: 260\n      },\n      {\n        title: <div style={tableTitleStyle}>Available Qty.</div>,\n        dataIndex: 'quality',\n        width: 260\n      }\n    ];\n\n    // Find ETH and LRC\n    var symbol = '';\n    var name = '';\n    var total = 0;\n    var available = 0;\n    var feeRate = 0.0;\n    var percentage = 0;\n\n    const data = [];\n    const { balances } = this.props.balances;\n\n    if (balances) {\n      for (let i = 0; i < balances.length; i++) {\n        const balance = balances[i];\n\n        symbol = balance['tokenId'] === 0 ? 'ETH' : 'LRC';\n        name = balance['tokenId'] === 0 ? 'Ethereum' : 'Loopring';\n        const totalAmount = new BigNumber(balance['totalAmount']);\n        total = totalAmount.dividedBy('1000000000000000000');\n        const frozenAmount = new BigNumber(balance['frozenAmount']);\n        percentage = 1 - frozenAmount.dividedBy(totalAmount).toNumber();\n        percentage = Math.floor(percentage * 100);\n        available = (total.toNumber() * percentage) / 100;\n        feeRate = balance['tokenId'] === 0 ? 178.44 : 0.0346;\n\n        data.push({\n          key: i,\n          asset: (\n            <div\n              style={{\n                paddingRight: '40px',\n                paddingTop: '4px',\n                paddingBottom: '10px'\n              }}\n            >\n              <Row>\n                <div\n                  style={{\n                    color: colors.textMedContrast,\n                    fontWeight: 400,\n                    fontSize: '14px',\n                    marginBottom: '0px'\n                  }}\n                >\n                  {symbol}\n                </div>\n              </Row>\n            </div>\n          ),\n          name: (\n            <div\n              style={{\n                paddingRight: '40px',\n                paddingTop: '4px',\n                paddingBottom: '10px'\n              }}\n            >\n              <Row>\n                <div\n                  style={{\n                    color: colors.textMedContrast,\n                    fontWeight: 400,\n                    fontSize: '14px',\n                    marginBottom: '0px'\n                  }}\n                >\n                  {name}\n                </div>\n              </Row>\n            </div>\n          ),\n          /*\n          holdings: (\n            <div\n              style={{\n                paddingRight: '80px',\n                paddingTop: '4px',\n                paddingBottom: '10px'\n              }}\n            >\n              <Row>\n                <div\n                  style={{\n                    color: colors.textMedContrast,\n                    fontWeight: 400,\n                    fontSize: '14px',\n                    marginBottom: '0px'\n                  }}\n                >\n                  {percentage}%\n                </div>\n              </Row>\n              <Row\n                style={{\n                  height: '8px',\n                  lineHeight: '8px'\n                }}\n              >\n                <Line\n                  strokeLinecap=\"square\"\n                  percent={percentage}\n                  strokeWidth=\"4\"\n                  strokeColor={colors.theme}\n                  trailWidth=\"4\"\n                  trailColor={colors.textLowContrast}\n                />\n              </Row>\n            </div>\n          ),\n          */\n          balance: (\n            <div\n              style={{\n                paddingRight: '40px',\n                paddingTop: '4px',\n                paddingBottom: '10px'\n              }}\n            >\n              <Row>\n                <div\n                  style={{\n                    color: colors.textMedContrast,\n                    fontWeight: 400,\n                    fontSize: '14px',\n                    marginBottom: '0px'\n                  }}\n                >\n                  {total.toString(10)}\n                </div>\n              </Row>\n            </div>\n          ),\n          quality: (\n            <div\n              style={{\n                paddingRight: '40px',\n                paddingTop: '4px',\n                paddingBottom: '10px'\n              }}\n            >\n              <Row>\n                <div\n                  style={{\n                    color: colors.textMedContrast,\n                    fontWeight: 400,\n                    fontSize: '14px',\n                    marginBottom: '0px'\n                  }}\n                >\n                  {available}\n                </div>\n              </Row>\n            </div>\n          )\n        });\n      }\n    }\n\n    return (\n      <div\n        style={{\n          paddingLeft: '0px',\n          height: appLayout.myBalanceTableScreenHeight\n        }}\n      >\n        <Table\n          style={{\n            borderStyle: 'none',\n            borderWidth: '0px'\n          }}\n          columns={columns}\n          dataSource={data}\n          pagination={false}\n          scroll={{ y: appLayout.myBalanceTableScreenHeight }}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager, balances } = state;\n  return { layoutManager, balances };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyBalanceTable);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport colors from 'colors';\n\nimport MyBalanceTable from 'components/my-balances/MyBalanceTable';\nimport './MyBalances.less';\n\nimport { Button, Icon } from 'antd';\nconst ButtonGroup = Button.Group;\n\nclass MyBalancesDetailView extends React.Component {\n  state = {\n    selectedKey: 'balances'\n  };\n\n  render() {\n    const unselectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '142px',\n      backgroundColor: '#161616',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const selectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '142px',\n      backgroundColor: '#202020',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const iconStyle = {\n      fontSize: '14px',\n      color: colors.textLowContrast,\n      verticalAlign: 'middle'\n    };\n\n    return (\n      <div\n        style={{\n          paddingTop: '30px',\n          paddingLeft: '30px',\n          paddingRight: '30px',\n          paddingBottom: '30px'\n        }}\n      >\n        <div\n          style={{\n            paddingLeft: '0px',\n            paddingBottom: '0px'\n          }}\n        >\n          <ButtonGroup\n            style={{\n              borderRadius: '0px'\n            }}\n          >\n            <Button\n              className={\n                this.state.selectedKey === 'balances'\n                  ? 'blance-tab-button-active'\n                  : 'blance-tab-button'\n              }\n              style={\n                this.state.selectedKey === 'balances'\n                  ? selectedButtonStyle\n                  : unselectedButtonStyle\n              }\n              onClick={() => {\n                this.setState({\n                  selectedKey: 'balances'\n                });\n              }}\n            >\n              <Icon type=\"credit-card\" style={iconStyle} />\n              Balances\n            </Button>\n            {/*<Button*/}\n            {/*  className={*/}\n            {/*    this.state.selectedKey === 'deposits'*/}\n            {/*      ? 'blance-tab-button-active'*/}\n            {/*      : 'blance-tab-button'*/}\n            {/*  }*/}\n            {/*  style={*/}\n            {/*    this.state.selectedKey === 'deposits'*/}\n            {/*      ? selectedButtonStyle*/}\n            {/*      : unselectedButtonStyle*/}\n            {/*  }*/}\n            {/*  onClick={() => {*/}\n            {/*    this.setState({*/}\n            {/*      selectedKey: 'deposits'*/}\n            {/*    });*/}\n            {/*  }}*/}\n            {/*>*/}\n            {/*  <Icon type=\"down-circle\" style={iconStyle} />*/}\n            {/*  Deposits*/}\n            {/*</Button>*/}\n            {/*<Button*/}\n            {/*  className={*/}\n            {/*    this.state.selectedKey === 'withdrawals'*/}\n            {/*      ? 'blance-tab-button-active'*/}\n            {/*      : 'blance-tab-button'*/}\n            {/*  }*/}\n            {/*  style={*/}\n            {/*    this.state.selectedKey === 'withdrawals'*/}\n            {/*      ? selectedButtonStyle*/}\n            {/*      : unselectedButtonStyle*/}\n            {/*  }*/}\n            {/*  onClick={() => {*/}\n            {/*    this.setState({*/}\n            {/*      selectedKey: 'withdrawals'*/}\n            {/*    });*/}\n            {/*  }}*/}\n            {/*>*/}\n            {/*  <Icon type=\"up-circle\" style={iconStyle} />*/}\n            {/*  Withdrawals*/}\n            {/*</Button>*/}\n          </ButtonGroup>\n        </div>\n        <MyBalanceTable />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyBalancesDetailView);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\nimport appLayout from 'appLayout';\nimport MyBalancesOverview from 'components/my-balances/MyBalancesOverview';\nimport MyBalancesDetailView from 'components/my-balances/MyBalancesDetailView';\n\nimport { Layout } from 'antd';\nconst { Sider, Content } = Layout;\n\nclass MyBalances extends React.Component {\n  render() {\n    return (\n      <div>\n        <div\n          style={{\n            height: appLayout.borderWidth,\n            backgroundColor: colors.border\n          }}\n        />\n        <Layout>\n          <Layout\n            hasSider={true}\n            style={{ height: appLayout.myOrdersScreenHeight }}\n          >\n            <Sider\n              width={appLayout.leftSideWidth}\n              style={{\n                paddingTop: '0px',\n                backgroundColor: colors.parentBackground,\n                borderRightStyle: 'solid',\n                borderRightWidth: appLayout.borderWidth,\n                borderColor: colors.border,\n                height: appLayout.myOrdersScreenHeight\n              }}\n            >\n              <div\n                style={{\n                  display: 'block',\n                  position: 'relative',\n                  height: appLayout.myOrdersScreenHeight\n                }}\n              >\n                <MyBalancesOverview />\n              </div>\n            </Sider>\n            <Content\n              width=\"100%\"\n              style={{\n                paddingTop: '0px',\n                backgroundColor: colors.parentBackground,\n                borderLeftStyle: 'none'\n              }}\n            >\n              <MyBalancesDetailView />\n            </Content>\n          </Layout>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyBalances);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\n\nimport MyOrderTable from 'components/my-orders/MyOrderTable';\nimport 'components/my-orders/MyOrders.less';\n\nimport { Button, Icon } from 'antd';\nconst ButtonGroup = Button.Group;\n\nclass ReferralDetailView extends React.Component {\n  state = {\n    selectedKey: 'open'\n  };\n\n  render() {\n    const unselectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '110px',\n      backgroundColor: '#161616',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const selectedButtonStyle = {\n      borderTopLeftRadius: '8px',\n      borderTopRightRadius: '8px',\n      borderBottomLeftRadius: '0px',\n      borderBottomRightRadius: '0px',\n      height: '46px',\n      width: '110px',\n      backgroundColor: '#202020',\n      color: colors.textMedContrast,\n      borderWidth: '0px',\n      marginRight: '6px',\n      borderStyle: 'none',\n      fontWeight: '14px',\n      fontSize: '0.9rem'\n    };\n\n    const iconStyle = {\n      fontSize: '14px',\n      color: colors.textLowContrast,\n      verticalAlign: 'middle'\n    };\n\n    return (\n      <div\n        style={{\n          paddingTop: '30px',\n          paddingLeft: '30px',\n          paddingRight: '30px',\n          paddingBottom: '30px'\n        }}\n      >\n        <div\n          style={{\n            paddingTop: '80px',\n            display: 'table',\n            margin: '0 auto',\n            color: colors.textHighContrast,\n            fontWeight: 700,\n            fontSize: '1.4rem'\n          }}\n        >\n          REFER FRIENDS AND GET LRC\n        </div>\n        <div\n          style={{\n            paddingTop: '20px',\n            display: 'table',\n            margin: '0 auto',\n            color: colors.textMedContrast,\n            textAlign: 'center',\n            width: '40%',\n            maxWidth: '600px'\n          }}\n        >\n          Trading is more fun with with friends. Invite some friends to WEDEX\n          and you will both get LRC when your friend buy or sell at least 0.5\n          ETH worth of tokens on WEDEX.\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ReferralDetailView);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport colors from 'colors';\nimport appLayout from 'appLayout';\nimport ReferralDetailView from 'components/referral/ReferralDetailView';\n\nimport { Layout } from 'antd';\nconst { Sider, Content } = Layout;\n\nclass Referral extends React.Component {\n  render() {\n    return (\n      <div>\n        <div\n          style={{\n            height: appLayout.borderWidth,\n            backgroundColor: colors.border\n          }}\n        />\n        <Layout>\n          <Layout\n            hasSider={true}\n            style={{ height: appLayout.myOrdersScreenHeight }}\n          >\n            <Content\n              width=\"100%\"\n              style={{\n                paddingTop: '0px',\n                backgroundColor: colors.parentBackground,\n                borderLeftStyle: 'none'\n              }}\n            >\n              <ReferralDetailView />\n            </Content>\n          </Layout>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { layoutManager } = state;\n  return { layoutManager };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Referral);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { Table, Input, Icon } from 'antd';\n\nclass Pair extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: null\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      activeTab: this.props.tabs[0]\n    })\n  }\n\n  async setActive (tab) {\n    await this.props.onChange(tab)\n    this.setState({\n      activeTab: tab\n    })\n  }\n\n  render() {\n    let { tabs, ...restProps } = this.props\n    return (\n      <Flex {...restProps} height={40} alignItems='center' justifyContent='flex-start' >\n        {\n          tabs.map(tab => (\n            <Flex key={tab.text} width={80} height={40} alignItems='center' justifyContent='center'\n              sx={{\n                bg: tab === this.state.activeTab ? 'backgroundTint': 'background',\n                cursor: 'pointer'\n              }} onClick={() => this.setActive(tab)}>\n              <Text fontSize={0} fontWeight={'bold'}>{tab.text}</Text>\n            </Flex>\n          ))\n        }\n        { this.props.children }\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Pair);","import _ from 'lodash'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, useRef } from 'react'\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport utils from 'utils';\nimport { Input, Popover, Icon, InputNumber } from 'antd';\nconst InputGroup = Input.Group;\n\nconst CoinInput = ({\n  disabled = false,\n  value,\n  min,\n  max,\n  precision,\n  error,\n  onChange,\n  approximate,\n  unit\n}) => {\n  const [focused, setFocused] = useState(false)\n\n  const content = (\n    <div>\n      <p>{error}</p>\n    </div>\n  )\n  return (\n    <Popover content={content} trigger={error ? \"hover\" : 'focus' } overlayStyle={{\n      display: error ? undefined : 'none'\n    }}>\n      <InputGroup compact style={{\n        display: 'flex',\n        borderRadius: '3px',\n        WebkitBoxShadow: (focused || error) ? `0 0 0 1px ${error ? '#F0505A' : 'rgba(24, 144, 255, 0.2)'}` : 'none'\n      }}>\n        <Input\n          disabled={disabled}\n          className=\"coin-input\"\n          precision={precision}\n          value={value}\n          onKeyPress={(e)=>{\n            // if (e.key === 'Backspace' || e.key === 'Delete') return\n            if (!/^[0-9a-zA-Z]+$/.test(e.key)) return\n\n            let value = e.target.value || ''\n            let { selectionStart, selectionEnd } = e.currentTarget\n            if (selectionStart !== selectionEnd) {\n              // 实际上不用 else 分支，如下操作包含selectionStart和selectionEnd相等的情况。此处只是便于阅读。\n              value = value.slice(0, selectionStart) + e.key + value.slice(selectionEnd)\n            } else {\n              // 需要查到光标位置。如果直接拼在最后面的话，会影响 precision 的判断.\n              value = value.slice(0, selectionStart) + e.key + value.slice(selectionStart)\n            }\n\n            let valueAsNumber = Number(value)\n            if (!_.isNumber(valueAsNumber) || isNaN(valueAsNumber)) {\n              e.preventDefault()\n              return\n            }\n\n            // fix: 这里必须直接拿字符串判断，不能转换成 Number 后判断。否则 0.0100000000，转成数字后，后面的 0 会被舍弃，用户就可以一直输入。\n            if (utils.getPrecision(value) > precision) {\n              e.preventDefault()\n              return\n            }\n          }}\n          onChange={onChange}\n          onBlur={() => setFocused(false)}\n          onFocus={() => setFocused(true)}\n          style={{minWidth: 30, flex: 1}}\n        />\n        {\n          utils.renderIf(approximate)(\n            <Input\n              value={`≈${approximate}`} style={{\n                padding: 0,\n                color: '#3c3c50',\n                textAlign: 'left',\n                pointerEvents: 'none',\n                backgroundColor: '#0A0F1E',\n                border: 0,\n                minWidth: 30,\n                flex: 1,\n                height: '32px'\n              }}\n              disabled\n            />\n          )\n        }\n        <Input value={unit} style={{\n            paddingLeft: 0,\n            width: 55,\n            border: 0,\n            color: '#646478',\n            pointerEvents: 'none',\n            backgroundColor: \"#0A0F1E\",\n            textAlign: 'right',\n            height: '32px'\n          }}\n          disabled\n        />\n      </InputGroup>\n    </Popover>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CoinInput);","import _ from 'lodash'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { store } from 'store'\nimport { Provider } from 'react-redux'\n\n/*\n * 这里创建的窗体是在App容器包裹之外的，无法使用redux，所以需要使用provider包裹\n*/\nexport default function funcfy (Component, props) {\n  var div = document.createElement('div')\n  \n  function destroy () {\n    var unmountResult = ReactDOM.unmountComponentAtNode(div)\n    if (unmountResult && div.parentNode) {\n        div.parentNode.removeChild(div)\n    }\n  }\n\n  function render () {\n    ReactDOM.render(\n      <Provider store={store}>\n        <Component {...props} onDestory={() => destroy()}>\n        </Component>\n      </Provider>\n    , div)\n  }\n\n  render()\n}\n","import React, { forwardRef, useEffect, useState, useImperativeHandle, useRef } from 'react'\nimport { Modal, message } from 'antd'\nimport funcfy from './funcfyDialog'\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\n\nconst Widget = ({\n  style,\n  onDestory,\n  onSubmit = () => {}\n}) => {\n  const [visible, setVisible] = useState(false)\n \n  useEffect(() => {\n    show()\n  }, [])\n\n  const show = async () => {\n    setVisible(true)\n  }\n\n  const cancel = async () => {\n    setVisible(false)\n    onDestory()\n  }\n\n  return (\n    <Modal \n      bodyStyle={{backgroundColor: '#363636', color: '#d0d0d0'}}\n      visible={visible}\n      maskClosable={true}\n      onOk={() => {\n        cancel()\n        onSubmit()\n      }}\n      onCancel={() => cancel()}\n      footer={null}\n      width={800}\n    >\n      <Box px={20}>\n        <Text>您当前的浏览器不支持MetaMask插件，为了不影响您的交易，请使用支持MetaMask的浏览器。</Text>\n        <Text>推荐使用：火狐浏览器、谷歌浏览器、360浏览器</Text>\n        <Text>查看教程</Text>\n      </Box>\n    </Modal>\n  )\n}\n\nexport default (props) => funcfy(Widget, props)\n// export default Widget\n","import moment from \"moment\"\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Modal, Input, Form, Button, Checkbox } from 'antd'\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport funcfy from './funcfyDialog'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport utils, { notification } from 'utils'\nimport { FormErrorInfo } from 'widgets/Common'\nimport { UpsertPasswordModal } from '../Dialog'\nimport api from 'api'\n\nconst errorInfos = [\n  '大写字母',\n  '小写字母',\n  '数字',\n  '至少8个字符',\n]\n\nclass Widget extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      visible: false\n    }\n  }\n\n  componentDidMount () {\n    this.setState({ visible: true })\n    this.checkInput()\n  }\n\n  async checkInput () {\n    // 必须稍微等下，因为被接管后的表单虽然可以继续使用onChange事件，但是onChange触发时，表单的校验结果可能还没做完。\n    await utils.waitFor(50)\n\n    // 修改表单校验的规则：如果没有输入任何东西，默认全部错误。而表单校验本身的规则是，不输入，则无错误。\n    let password = this.props.form.getFieldProps('password').value\n    if (!password) {\n      this.setState({errors: errorInfos})\n      return \n    }\n\n    let errors = this.props.form.getFieldsError()\n    errors = _.chain(errors)\n      .values()\n      .flatten()\n      .filter(error => error)\n      .value()\n    this.setState({errors})\n  }\n\n  async submit (e) {\n    let { dexAccount } = this.props\n\n    e.preventDefault();\n    let validateFields = utils.promisefy(this.props.form.validateFields)\n\n    let values\n    try {\n      values = await validateFields()\n    } catch(err) {\n      console.info(err)\n      return\n    }\n    let { password, remember } = values\n\n    const passwordHash = utils.genPasswordHash(dexAccount.address, password);\n    const relayAccount = await api.lightconeGetAccount(dexAccount.address);\n    console.info(password)\n    let valid = utils.checkPassword(passwordHash, relayAccount)\n    if (!valid) {\n      notification['success']({\n        duration: 5,\n        message: (\n          <div>\n            <p>密码错误</p>\n          </div>\n        )\n      });\n      return\n    }\n\n    let accountId = relayAccount.accountId\n    let apiKey = await utils.genApiKey(accountId, passwordHash)\n    await this.props.updateAccount({\n      accountId,\n      passwordHash,\n      apiKey,\n      rememberMeStartTime: moment().format('YYYY-MM-DD HH:mm:ss'),\n      rememberMeMinutes: (remember ? 24 : 1) * 60,\n    })\n\n    if (relayAccount.isFreeze) {\n      this.props.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOCKED.getValue()})\n      notification['success']({\n        duration: 5,\n        message: (\n          <div>\n            <p>已锁定.</p>\n          </div>\n        )\n      });\n    } else {\n      this.props.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()})\n      this.props.startFetchBalance()\n      this.props.fetchOrders()\n\n      notification['success']({\n        duration: 5,\n        message: '登录成功'\n      });\n    }\n    this.loginSunccess()\n  }\n\n  async loginSunccess () {\n    this.setState({visible: false})\n    this.props.onSucess()\n    this.props.onDestory()\n  }\n\n  render () {\n    let { state } = this.props.dexAccount\n    let modalTitle = ENUM_ACCOUNT_STATUS.UNCREATED.equals(state) ? '设置交易密码' : '验证交易密码'\n\n    const { getFieldDecorator, getFieldsValue } = this.props.form;\n    let { remember } = getFieldsValue()\n    \n    const formItemLayout = {\n      labelCol: { span: 4 },\n      wrapperCol: { span: 20 },\n    };\n    const noLabelLayout = {\n      wrapperCol: { span: 19, offset: 5 },\n    };\n    return (\n      <Modal \n        // bodyStyle={{backgroundColor: '#363636', color: '#d0d0d0'}}\n        title={modalTitle}\n        visible={this.state.visible}\n        maskClosable={true}\n        onOk={() => {\n\n        }}\n        onCancel={() => {\n          this.setState({visible: false})\n          this.props.onFail()\n          this.props.onDestory()\n        }}\n        footer={null}\n        width={660}\n        className=\"password-modal\"\n      >\n        <Box pt={60} pb={68} justifyContent=\"center\">\n          <Box width={480} mx=\"auto\">\n            <Form className=\"upsert-password-form\" onSubmit={(e) => {\n              utils.withLoading(() => this.submit(e))\n            }}>\n              <Box>\n                <Form.Item {...formItemLayout} label=\"密码\" hasFeedback={false}>\n                  {getFieldDecorator('password', {\n                    rules: [\n                      { required: true, message: '必填密码' },\n                      { pattern: /[A-Z]+/, message: '大写字母' },\n                      { pattern: /[a-z]+/, message: '小写字母' },\n                      { pattern: /[0-9]+/, message: '数字' },\n                      { min: 8, message: '至少8个字符' },\n                    ],\n                  })(\n                    <Input.Password size=\"large\" onChange={() => this.checkInput()} />\n                  )}\n                </Form.Item>\n              </Box>\n              <Box mt={26}>\n                <Form.Item {...noLabelLayout}>\n                  <FormErrorInfo errors={this.state.errors} items={errorInfos} />\n                </Form.Item>\n              </Box>\n              <Form.Item {...noLabelLayout}>\n                <Flex mt={20} justifyContent=\"space-between\">\n                  {getFieldDecorator('remember', {})(\n                    <Checkbox style={{color: '#1890ff', fontSize: '14px'}}>记住密码</Checkbox>\n                  )}\n                  <Text fontSize={14} mx={15} color=\"#1890ff\" onClick={() => {\n                    this.props.onSucess()\n                    this.props.onDestory()\n                    UpsertPasswordModal()\n                  }}\n                    sx={{ cursor: 'pointer' }}\n                  >\n                    忘记密码\n                  </Text>\n                </Flex>\n                { remember && (<Text lineHeight={'30px'} fontSize={14} color=\"#969696\" ml={'6px'}>24 小时内交易无需输入密码</Text>) }\n              </Form.Item>\n              <Box mt={26}>\n                <Form.Item {...noLabelLayout}>\n                  <Button size=\"large\" style={{width: '100%'}} type=\"primary\" htmlType=\"submit\" >确定</Button>\n                </Form.Item>\n              </Box>\n            </Form>\n          </Box>\n        </Box>\n      </Modal>\n    )\n  }\n}\n\nconst WrappedForm = Form.create({ name: 'upsert_password_form' })(Widget);\n\nconst mapStateToProps = ({ metaMask, dexAccount }) => {\n  return {\n    metaMask,\n    dexAccount\n  };\n};\nconst mapDispatchToProps = ({ dexAccount, balance, order }) => {\n  return {\n    updateAccount: dexAccount.updateAccount,\n    startFetchBalance: balance.startFetchBalance,\n    fetchOrders: order.fetchOrders,\n  };\n};\nlet connectedWidget = connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(WrappedForm)\n\nexport default function promisefy (props) {\n  return new Promise((resolve, reject) => {\n    funcfy(connectedWidget, {\n      ...props,\n      onSucess: resolve,\n      onFail: reject,\n    })\n  })\n}","import _ from 'lodash'\nimport moment from \"moment\"\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Modal, Input, Form, Button, Checkbox, Slider } from 'antd'\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport { Account, config, common, Utils } from 'librarys/lightcone_v3';\nimport funcfy from './funcfyDialog'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport utils, { notification, renderIf } from 'utils'\nimport api from 'api'\nimport { FormErrorInfo } from 'widgets/Common'\nimport BigNumber from \"bignumber.js\"\n\nconst errorInfos = [\n  '大写字母',\n  '小写字母',\n  '数字',\n  '至少8个字符',\n  '输入的密码一致'\n]\nconst gasLimitInWEI = BigNumber(config.getGasLimitByType(\"create\").gasInWEI)\nconst createAccountFee = BigNumber(config.fromWEI('ETH', config.getFeeByType('create').feeInWEI, 6))\n\nclass Widget extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      errors: [],\n      visible: false,\n      recommendedGasEth: [0, 0, 0],\n    }\n  }\n\n  componentDidMount () {\n    this.setState({ visible: true })\n    this.checkInput()\n    this.props.fetchWalletBalances()\n\n    api.getRecommendedGasPrice().then(resp => {\n      let [min, normal, max] = resp\n      let minGas = config.fromWEI('ETH', BigNumber(min).times(gasLimitInWEI), 6)\n      let normalGas = config.fromWEI('ETH', BigNumber(normal).times(gasLimitInWEI), 6)\n      let maxGas = config.fromWEI('ETH', BigNumber(max).times(gasLimitInWEI), 6)\n\n      this.setState({recommendedGasEth: [Number(minGas), Number(normalGas), Number(maxGas)]})\n    })\n  }\n\n  async checkInput () {\n    // 必须稍微等下，因为被接管后的表单虽然可以继续使用onChange事件，但是onChange触发时，表单的校验结果可能还没做完。\n    await utils.waitFor(50)\n\n    // 修改表单校验的规则：如果没有输入任何东西，默认全部错误。而表单校验本身的规则是，不输入，则无错误。\n    let password = this.props.form.getFieldProps('password').value\n    if (!password) {\n      this.setState({errors: errorInfos})\n      return \n    }\n    \n    let errors = this.props.form.getFieldsError()\n    console.info(errors)\n    errors = _.chain(errors)\n    .values()\n    .flatten()\n    .filter(error => error)\n    .value()\n    \n    let confirmPassword = this.props.form.getFieldProps('confirmPassword').value\n    if (password !== confirmPassword) errors.push('输入的密码一致')\n    this.setState({errors})\n  }\n\n  async submit (e) {\n    e.preventDefault();\n    let validateFields = utils.promisefy(this.props.form.validateFields)\n    let values\n    try {\n      values = await validateFields()\n    } catch(err) {\n      return\n    }\n    let { password, remember, gasEth } = values\n    let ethAvail = this.getEthAvail()\n    console.info({gasEth, ethAvail})\n    if (gasEth >= ethAvail) return\n  \n    let { type, dexAccount, updateAccount, checkAccountCreated } = this.props\n    const passwordHash = utils.genPasswordHash(dexAccount.address, password);\n    const nonce = await api.getNonce(window.wallet.account);\n    const exchangeAccount = new Account(window.wallet);\n\n    let gasEthInWEI = config.toWEI('ETH', gasEth)\n    let gasPriceInWEI = BigNumber(gasEthInWEI).dividedBy(gasLimitInWEI)\n    const resp = await exchangeAccount.createOrUpdateAccount(\n      passwordHash,\n      nonce,\n      common.formatter.toGWEI(gasPriceInWEI)\n    );\n    \n    const signedEthereumTx = resp['signedTx'];\n    const keyPair = resp['keyPair'];\n    \n    if (keyPair.secretKey === undefined) {\n      throw new Error(\n        'Failed to parse the response of account creation.'\n      );\n    }\n    \n    // console.log('signedEthereumTx: ', signedEthereumTx);\n    // const response = await api.sendDeposit(signedEthereumTx);\n    // if (!response) return\n    // const data = response['result'];\n    // // TODO: Remove response\n    // console.log('Response of createOrUpdateAccount: ', data);\n\n    notification['success']({\n      duration: 5,\n      message: type === 'modify' ? '新密码提交成功，生效需40分钟左右。新密码生效前，可以正常下单。' : '交易密码提交成功，生效需15秒左右。'\n    });\n\n    updateAccount({\n      // TODO: 直接换浏览器，重置密码。那accountId如何存入 store?\n      // accountId: relayAccount.accountId,\n      state: ENUM_ACCOUNT_STATUS.CREATING.getValue(),\n      passwordHash,\n      rememberMeStartTime: moment().format('YYYY-MM-DD HH:mm:ss'),\n      rememberMeMinutes: (remember ? 24 : 1) * 60,\n    })\n    checkAccountCreated()\n\n    this.loginSunccess()\n  }\n\n  async loginSunccess () {\n    this.setState({visible: false})\n    this.props.onSucess()\n    this.props.onDestory()\n  }\n\n  getEthAvail () {\n    let { type = 'modify', walletBalance } = this.props\n    let ethBalance = _.find(walletBalance.list, b => b.symbol === 'ETH')\n    let ethAmount = ethBalance ? ethBalance.amount : 0\n    if (type === 'create') {\n      return _.max(ethAmount - createAccountFee, 0)\n    } else {\n      return ethAmount\n    }\n  }\n\n  render () {\n    let { type = 'modify', rate } = this.props\n    const { getFieldDecorator, getFieldsValue } = this.props.form;\n    let { remember, gasEth } = getFieldsValue()\n    let { recommendedGasEth } = this.state\n    let gasEthForShow = gasEth || recommendedGasEth[1]\n    let ethAvail = this.getEthAvail()\n\n    const formItemLayout = {\n      labelCol: { span: 5 },\n      wrapperCol: { span: 19 },\n    };\n    const noLabelLayout = {\n      wrapperCol: { span: 19, offset: 5 },\n    };\n\n    return (\n      <Modal \n        // bodyStyle={{backgroundColor: '#363636', color: '#d0d0d0'}}\n        title={`${type === 'create' ? '设置' : '修改'}交易密码`}\n        visible={this.state.visible}\n        maskClosable={true}\n        onOk={() => {\n\n        }}\n        onCancel={() => {\n          this.setState({visible: false})\n          this.props.onFail()\n          this.props.onDestory()\n        }}\n        footer={null}\n        width={660}\n        className=\"password-modal\"\n      >\n        <Box pt={60} pb={68} justifyContent=\"center\">\n          <Box width={480} mx=\"auto\">\n            <Form className=\"upsert-password-form\" onSubmit={(e) => {\n              utils.withLoading(() => this.submit(e))\n            }}>\n              <Box>\n                <Form.Item {...formItemLayout} label={`${type === 'create' ? '密码' : '新密码'}`} hasFeedback={false}>\n                  {getFieldDecorator('password', {\n                    rules: [\n                      { required: true, message: '必填密码' },\n                      { pattern: /[A-Z]+/, message: '大写字母' },\n                      { pattern: /[a-z]+/, message: '小写字母' },\n                      { pattern: /[0-9]+/, message: '数字' },\n                      { min: 8, message: '至少8个字符' },\n                    ],\n                  })(\n                    <Input.Password size=\"large\" onChange={() => this.checkInput()} />\n                  )}\n                </Form.Item>\n              </Box>\n              <Box mt={20}>\n                <Form.Item {...formItemLayout} label={`${type === 'create' ? '确认密码' : '确认新密码'}`}>\n                  {getFieldDecorator('confirmPassword', {\n                    rules: [\n                      { required: true, message: '必填密码' },\n                      {\n                        validator: (rule, value, callback) => {\n                          const { form } = this.props;\n                          if (value && value !== form.getFieldValue('password')) {\n                            callback('输入的密码一致');\n                          } else {\n                            callback();\n                          }\n                        }\n                      }\n                    ],\n                  })(\n                    <Input.Password size=\"large\" onChange={() => this.checkInput()} />\n                  )}\n                </Form.Item>\n              </Box>\n              <Box mt={20}>\n                <Form.Item {...noLabelLayout}>\n                  <FormErrorInfo errors={this.state.errors} items={errorInfos} />\n                </Form.Item>\n              </Box>\n              {renderIf(type === 'create')(\n                <Box mt={20}>\n                  <Form.Item {...formItemLayout} label='注册费'>\n                    <Input size=\"large\" disabled value={`0.005 ETH ≈ $${utils.asLegalMoney(0.005, 'ETH', 'USD')}`} />\n                  </Form.Item>\n                </Box>\n              )}\n              <Box mt={20}>\n                <Form.Item {...formItemLayout} label='矿工费'>\n                  <Input size=\"large\" disabled value={`${gasEthForShow} ETH ≈ $${utils.asLegalMoney(gasEthForShow, 'ETH', 'USD')}`} />\n                </Form.Item>\n              </Box>\n              {renderIf(gasEth >= ethAvail)(\n                <Box mt={15}>\n                  <Form.Item {...noLabelLayout}>\n                    <Text color=\"#F0505A\" lineHeight=\"14px\">{`矿工费不能超过钱包中的可用余额 ${ethAvail}ETH`}</Text>\n                  </Form.Item>\n                </Box>\n              )}\n              <Form.Item {...noLabelLayout}>\n                {getFieldDecorator('gasEth', {\n                  initialValue: recommendedGasEth[1]\n                })(\n                  <Slider size=\"small\" min={recommendedGasEth[0]} max={recommendedGasEth[2]} marks={{\n                    [recommendedGasEth[0]]: '慢',\n                    // [recommendedGasEth[1]]: '一般',\n                    [recommendedGasEth[2]]: '快',\n                }} step={0.000001} />\n                )}\n              </Form.Item>\n              <Form.Item {...noLabelLayout}>\n                <Flex mt={10} justifyContent=\"space-between\">\n                  {getFieldDecorator('remember', {\n                    initialValue: false\n                  })(\n                    <Checkbox style={{color: '#1890ff', fontSize: '14px'}}>记住密码</Checkbox>\n                  )}\n                </Flex>\n                { remember && (<Text lineHeight={'30px'} fontSize={14} color=\"#969696\" ml={'6px'}>24 小时内交易无需输入密码</Text>) }\n              </Form.Item>\n              <Box mt={20}>\n                <Form.Item {...noLabelLayout}>\n                  <Button size=\"large\" style={{width: '100%'}} type=\"primary\" htmlType=\"submit\" >确定</Button>\n                </Form.Item>\n              </Box>\n            </Form>\n          </Box>\n        </Box>\n      </Modal>\n    )\n  }\n}\n\nconst WrappedForm = Form.create({ name: 'upsert_password_form' })(Widget);\n\nconst mapStateToProps = ({ metaMask, dexAccount, rate, walletBalance }) => {\n  return {\n    metaMask,\n    dexAccount,\n    rate,\n    walletBalance\n  };\n};\nconst mapDispatchToProps = ({ dexAccount, walletBalance }) => {\n  return {\n    updateAccount: dexAccount.updateAccount,\n    checkAccountCreated: dexAccount.checkAccountCreated,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n  };\n};\nlet connectedWidget = connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(WrappedForm)\n\nexport default function promisefy (props) {\n  console.info({props})\n  return new Promise((resolve, reject) => {\n    funcfy(connectedWidget, {\n      ...props,\n      onSucess: resolve,\n      onFail: reject,\n    })\n  })\n}","import _ from 'lodash'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, useRef } from 'react'\nimport { connect } from 'react-redux'\nimport { Modal, Form, Input, Select, Button, InputNumber, Slider } from 'antd'\nimport funcfy from './funcfyDialog'\nimport {\n  Box,\n  Flex,\n  Text,\n  Image\n} from 'rebass'\nimport switchSideIcon from 'icons/switchSide.png'\nimport utils, { notification, renderIf } from 'utils'\nimport { config, common } from 'librarys/lightcone_v3';\nimport api from 'api'\nconst gasLimitInWEI = Number(config.getGasLimitByType(\"create\").gasInWEI)\n\nconst { Option } = Select;\n\nconst formItemLayout = {\n  labelCol: { span: 4 },\n  wrapperCol: { span: 20 },\n};\nconst buttonItemLayout = {\n  wrapperCol: { span: 20, offset: 4 },\n};\n\nconst Widget = ({\n  initialSymbol,\n  initialType = 'deposit',\n  onDestory,\n  balance: balanceStore,\n  walletBalance: walletBalanceStore,\n  rate,\n  fetchBalances,\n  fetchWalletBalances,\n  transfer\n}) => {\n  const [visible, setVisible] = useState(false)\n  const [symbol, setSymbol] = useState(initialSymbol)\n  const [type, setType] = useState(initialType)\n  const [transferAmount, setTransferAmount] = useState(0)\n  const [recommendedGasEth, setRecommendedGasEth] = useState([0, 0, 0])\n  const [gasEth, setGasEth] = useState(0)\n\n  useEffect(() => {\n    // fetchBalances()\n    fetchWalletBalances()\n    show()\n\n    api.getRecommendedGasPrice().then(resp => {\n      let [min, normal, max] = resp\n      \n      let minGas = config.fromWEI('ETH', min * gasLimitInWEI, 6)\n      let normalGas = config.fromWEI('ETH', normal * gasLimitInWEI, 6)\n      let maxGas = config.fromWEI('ETH', max * gasLimitInWEI, 6)\n\n      setRecommendedGasEth([Number(minGas), Number(normalGas), Number(maxGas)])\n      setGasEth(normalGas)\n    })\n  }, [])\n\n  const show = async () => {\n    setVisible(true)\n  }\n\n  const cancel = async () => {\n    setVisible(false)\n    onDestory()\n  }\n\n  const getAvailable = () => {\n    let available = 0\n    if (symbol) {\n      if (type === 'deposit') {\n        let balance = _.find(walletBalanceStore.list, b => b.symbol === symbol)\n        available = balance ? balance.amount : 0\n      } else {\n        let balance = _.find(balanceStore.list, b => b.token.symbol === symbol)\n        available = balance ? balance.availAmount : 0\n      }\n      available = Number(available)\n      available = _.floor(available, 6)\n    }\n    return available\n  }\n\n  const getWalletEthAvail = () => {\n    let ethBalance = _.find(walletBalanceStore.list, b => b.symbol === 'ETH')\n    return ethBalance ? ethBalance.amount : 0\n  }\n\n  let balances = balanceStore.list\n  let balancesSymbols = balances.map(b => b.token.symbol)\n  let walletBalances = walletBalanceStore.list\n  let walletBalancesSymbols = walletBalances.map(b => b.symbol)\n  let symbolOptions = _.union(balancesSymbols, walletBalancesSymbols)\n\n  // 初始化 symbol 为symbolOptions的第一个元素\n  console.info({symbol})\n  if (!symbol) {\n    if (symbolOptions[0]) {\n      setSymbol(symbolOptions[0])\n    }\n    return <></>\n  }\n\n  // getFeeByType\n  // 充值：用户手动选择矿工费。\n  // 提现：从光锥的配置读，是固定的。\n  // 充值且充ETH，可转账余额需要减去矿工费，但是最少是 0\n  let walletEthAvail = getWalletEthAvail()\n  let withdrawFee = config.fromWEI('ETH', config.getFeeByType('withdraw').feeInWEI, 6)\n  \n  // 可用金额\n  let available = getAvailable()\n  // 仅充值，且充值的是 ETH 时，才跟可充值总额联动。\n  if (symbol === 'ETH' && type === 'deposit') {\n    let ethAvailable = _.floor(available - gasEth, 6)\n    available = _.max([ethAvailable, 0])\n  }\n\n  const submit = async (e) => {\n    e.preventDefault()\n\n    if (type === 'withdraw') {\n      if (walletEthAvail < withdrawFee) {\n        return\n      }\n    } else if (type === 'deposit') {\n      if (gasEth >= walletEthAvail) {\n        return\n      }\n    }\n    if (transferAmount <= 0) return\n\n    if (transferAmount > available) {\n      notification.info({ message: '划转余额不足' })\n      return\n    }\n\n    console.info({type, symbol, transferAmount, gasEth})\n    let result = await transfer(type, symbol, transferAmount, gasEth)\n    if (result) {\n      cancel()\n    }\n  }\n\n  return (\n    <Modal\n      title=\"资金划转\"\n      visible={visible}\n      maskClosable={true}\n      onCancel={() => cancel()}\n      footer={null}\n      width={660}\n      className=\"password-modal\"\n    >\n      <Box pt={60} pb={68} justifyContent=\"center\">\n        <Box width={480} mx=\"auto\">\n          <Form {...formItemLayout} onSubmit={submit}>\n            <Form.Item label=\"币种\">\n              <Select style={{color: '#323232'}} defaultValue={symbolOptions[0]} value={symbol} onChange={value => {\n                setSymbol(value)\n                setTransferAmount(0)\n              }} size=\"large\">\n                { symbolOptions.map(symbol => (<Option value={symbol}>{symbol}</Option>)) }\n              </Select>\n            </Form.Item>\n            <Box mt={28}>\n              <Form.Item label=\"从\" size=\"large\">\n                <Input style={{color: '#323232'}} value={type === 'deposit' ? '我的钱包' : '币币账户'} size=\"large\" />\n              </Form.Item>\n            </Box>\n            <Image width={32} height={68} src={switchSideIcon}\n              sx={{\n                position: 'absolute',\n                right: '55px',\n                top: '205px',\n                cursor: 'pointer'\n              }} \n              onClick={() => {\n                setType(type === 'deposit' ? 'withdraw' : 'deposit')\n                setTransferAmount(0)\n              }}\n            />\n            <Box mt={28}>\n              <Form.Item label=\"转至\" size=\"large\">\n                <Input style={{color: '#323232'}} value={type === 'deposit' ? '币币账户' : '我的钱包'} size=\"large\" />\n              </Form.Item>\n            </Box>\n            <Box mt={28}>\n              <Form.Item label=\"划转数量\">\n                <InputNumber style={{color: '#323232', width: '100%'}} min={0} value={transferAmount} onChange={value => setTransferAmount(value)} size=\"large\" />\n              </Form.Item>\n            </Box>\n            <Box>\n              <Form.Item {...buttonItemLayout}>\n                <Flex>\n                  <Text color=\"#969696\" fontSize={14}>可划转数量 {available}</Text>\n                  <Text ml={42} fontSize={14} color=\"#1890ff\"\n                    sx={{ cursor: 'pointer' }}\n                    onClick={() => setTransferAmount(available)}\n                  >\n                    全部划转\n                  </Text>\n                </Flex>\n              </Form.Item>\n            </Box>\n            {\n              renderIf(available - transferAmount < 0)(\n                <Box mt={10}>\n                  <Form.Item {...buttonItemLayout}>\n                    <Text mt={15} color=\"#F0505A\" lineHeight=\"14px\">余额不够,无法完成划转!</Text>\n                  </Form.Item>\n                </Box>\n              )\n            }\n            {\n              renderIf(type === 'deposit')(\n                <>\n                  <Box mt={20}>\n                    <Form.Item label='矿工费'>\n                      <Input size=\"large\" disabled value={`${gasEth} ETH ≈$${utils.asLegalMoney(gasEth, 'ETH', 'USD')}`} />\n                    </Form.Item>\n                  </Box>\n                  {renderIf(gasEth >= walletEthAvail)(\n                    <Box mt={15}>\n                      <Form.Item {...buttonItemLayout}>\n                        <Text color=\"#F0505A\" lineHeight=\"14px\">{`矿工费不能超过钱包中的可用余额 ${walletEthAvail}ETH`}</Text>\n                      </Form.Item>\n                    </Box>\n                  )}\n                  <Box mt={28}>\n                    <Form.Item {...buttonItemLayout}>\n                      <Slider min={recommendedGasEth[0]} max={recommendedGasEth[2]} marks={{\n                          [recommendedGasEth[0]]: '慢',\n                          // [recommendedGasEth[1]]: '一般',\n                          [recommendedGasEth[2]]: '快',\n                        }}\n                        step={0.000001} value={gasEth} onChange={value => setGasEth(value)}\n                      />\n                    </Form.Item>\n                  </Box>\n                </>\n              )\n            }\n            {\n              renderIf(type === 'withdraw')(\n                <Box mt={28}>\n                  <Form.Item label=\"手续费\">\n                    <Input style={{color: '#323232', width: '100%'}} disabled value={'0.002ETH'} size=\"large\" />\n                  </Form.Item>\n                  {\n                    renderIf(walletEthAvail < withdrawFee)(\n                      <Form.Item {...buttonItemLayout}>\n                        <Text mt={15} color=\"#F0505A\" lineHeight=\"14px\">{`手续费 ${withdrawFee}ETH， 钱包余额 ${walletEthAvail}ETH 不足`}</Text>\n                      </Form.Item>\n                    )\n                  }\n                  {\n                    renderIf(walletEthAvail >= withdrawFee)(\n                      <Form.Item {...buttonItemLayout}>\n                        <Text mt={15} color=\"#F0505A\" lineHeight=\"14px\">提现手续费主要用于支付GAS费用，该费用将从您的钱包余额ETH中支付。</Text>\n                      </Form.Item>\n                    )\n                  }\n                </Box>\n              )\n            }\n            <Box mt={20}>\n              <Form.Item {...buttonItemLayout}>\n                <Button size=\"large\" style={{width: '100%'}} type=\"primary\" htmlType=\"submit\">确定</Button>\n              </Form.Item>\n            </Box>\n          </Form>\n        </Box>\n      </Box>\n    </Modal>\n  )\n}\n\nconst mapStateToProps = ({ balance, walletBalance, rate }) => {\n  return {\n    balance,\n    walletBalance,\n    rate\n  };\n};\n\nconst mapDispatchToProps = ({ balance, transfer, walletBalance }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n    transfer: (type, symbol, amount, gasEth) => {\n      let gasPriceInWEI = config.toWEI('ETH', gasEth) / gasLimitInWEI\n      let gasPrice = common.formatter.toGWEI(gasPriceInWEI)\n      return utils.withLoading(() => transfer[type]({symbol, amount, gasPrice}))\n    }\n  };\n};\n\nlet connectedWidget = connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(Widget)\n\nexport default (props) => funcfy(connectedWidget, props)\n","import _ from 'lodash'\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { Modal } from 'antd';\n\nclass InnerModal extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      visible: false,\n    }\n  }\n\n  componentDidMount () {\n    this.show()\n  }\n\n  componentWillUnmount() {\n  }\n  \n  async show () {\n    await this.setState({\n      visible: true\n    })\n  }\n\n  render () {\n    let {renderContent, onOk, onCancel, ...otherProps} = this.props\n    return (\n      <Modal\n        visible={this.state.visible}\n        onOk={async () => {\n          try {\n            await onOk()\n            this.setState({ visible: false })\n          } catch(e) {}\n        }}\n        onCancel={async () => {\n          await onCancel()\n          this.setState({ visible: false })\n        }}\n        {...otherProps}\n      >\n        {renderContent()}\n      </Modal>\n    )\n  }\n}\n\nInnerModal.propTypes = {\n  renderContent: PropTypes.func.isRequired,\n  otherProps: PropTypes.object\n}\n\nexport function funcfy (props) {\n  var div = document.createElement('div')\n  \n  function destroy () {\n    var unmountResult = ReactDOM.unmountComponentAtNode(div)\n    if (unmountResult && div.parentNode) {\n        div.parentNode.removeChild(div)\n    }\n  }\n\n  function render () {\n    ReactDOM.render(\n      <InnerModal {...props} onDestory={() => destroy()}></InnerModal>\n    , div)\n  }\n\n  render()\n}\n\nexport default function promisefy (props) {\n  return new Promise((resolve, reject) => {\n    funcfy({\n      ...props,\n      onOk: resolve,\n      onCancel: reject,\n    })\n  })\n}","import _ from 'lodash';\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { SignInModal, UpsertPasswordModal } from '../Dialog'\nimport PromisefyConfirm from 'components/PromisefyConfirm'\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport utils from 'utils';\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport { store } from 'store'\nvar detect = require('detect-browser').detect;\n\nconst Widget = forwardRef(({\n  disabled,\n  onSuccess = () => {},\n  children,\n  metaMask,\n  dexAccount,\n  signIn,\n  initAccountFromMetaMask\n}, ref) => {\n\n  const checkBrowser = () => {\n    const browser = detect()\n    // TODO 360\n    let valid = _.includes(['firefox', 'chrome', '360'], browser.name)\n    if (valid) return true\n\n    return PromisefyConfirm({\n      bodyStyle:{backgroundColor: '#363636', color: '#d0d0d0'},\n      renderContent: () => (\n        <Box px={20}>\n          <Text>您当前的浏览器不支持MetaMask插件，为了不影响您的交易，请使用支持MetaMask的浏览器。</Text>\n          <Text>推荐使用：火狐浏览器、谷歌浏览器、360浏览器</Text>\n          <Text>查看教程</Text>\n        </Box>\n      ),\n      maskClosable: true,\n      footer: null,\n      width: 800\n    })\n  }\n\n  const checkMetaMaskInstalled = () => {\n    let valid = metaMask.installed\n    if (valid) return true\n\n    return PromisefyConfirm({\n      // title: 'MetaMask',\n      renderContent: () => (\n        <Box px={20}>\n          <Text>需要安装MetaMask，才能执行该操作。</Text>\n          <Text>前往安装MetaMask</Text>\n          <Text>查看教程</Text>\n        </Box>\n      ),\n      maskClosable: true,\n      footer: null,\n      width: 800\n    })\n  }\n\n  const checkNetwork = () => {\n    let { isDesiredNetwork } = metaMask\n\n    let invalidText = ''\n\n    if (!isDesiredNetwork) {\n      // invalidText = '您的MetaMask当前登录的是以太坊测试网，请切换到以太坊主网络。'\n      invalidText = '请确保已打开MetaMask，并切换到以太坊主网络。'\n    }\n\n    if (!invalidText) return true\n\n    return PromisefyConfirm({\n      // title: 'MetaMask',\n      renderContent: () => (\n        <Box px={20}>\n          <Text>{invalidText}</Text>\n        </Box>\n      ),\n      maskClosable: true,\n      footer: null,\n      width: 800\n    })\n  }\n\n  const checkAddress = () => {\n    let rootState = store.getState()\n    let { address } = rootState.dexAccount\n\n    let invalidText = ''\n\n    if (!address) {\n      invalidText = '无法获取MetaMask地址，请重试'\n    }\n\n    if (!invalidText) return true\n\n    return PromisefyConfirm({\n      // title: 'MetaMask',\n      renderContent: () => (\n        <Box px={20}>\n          <Text>{invalidText}</Text>\n        </Box>\n      ),\n      maskClosable: true,\n      footer: null,\n      width: 800\n    })\n  }\n\n  const loadMetamask = async () => {\n    let { enable } = metaMask\n    // enable表示已经获取到了地址。如果此处为空，说明用户拒绝了授权。\n    // 注意此处不是用 dexAccount的address，而是用的metaMask 的 enable。因为前者可能是缓存的，后者才能代表是否metamask 是否已获取到了地址。。\n    if (!enable) {\n      await initAccountFromMetaMask()\n    }\n  }\n\n  const checkSignedIn = async () => {\n    // loadMetamask会获取地址，并获取账户的状态。而此次可能状态已经更新。\n    // 比如 account 在中继存在，需要登录，但此处dexAccount还没更新，所以要从dexAccount拿\n    let rootState = store.getState()\n    let { state } = rootState.dexAccount\n    let signined = utils.checkLogined()\n    if (signined) return true\n\n    if (state === ENUM_ACCOUNT_STATUS.UNCREATED.getValue()) {\n      try {\n        await UpsertPasswordModal({type: 'create'})\n        return true\n      } catch (e) {\n        return false\n      }\n    } else if (state === ENUM_ACCOUNT_STATUS.UNSIGNED.getValue()) {\n      try {\n        await SignInModal()\n        return true\n      } catch (e) {\n        return false\n      }\n    }\n  }\n\n  useImperativeHandle(ref, () => ({\n    checkBrowser,\n    checkSignedIn,\n    check\n  }))\n\n  const check = async () => {\n    // 是否装了 metamask\n    await checkBrowser()\n    // 是否登录 metamask\n    await checkMetaMaskInstalled()\n    // 如果 metamask 还未获取到地址，则通过 MetaMask 获取地址，并初始化。（获取 MetaMask 地址，需要用户授权）\n    await loadMetamask()\n    // 检查网络\n    await checkNetwork()\n    // metamask 中是否已获取到正确的地址\n    await checkAddress()\n    // 地址是否已授权，且跟中继保存的公钥匹配\n    await checkSignedIn()\n    return true\n  }\n\n  return (\n    <div onClick={async () => {\n      if (disabled) return\n\n      let isValid = await check()\n      if (isValid) {\n        onSuccess()\n      }\n    }}>\n      {children}\n    </div>\n  )\n})\n\n\nconst mapStateToProps = ({ metaMask, dexAccount }) => {\n  return {\n    metaMask,\n    dexAccount\n  };\n};\n\nconst mapDispatchToProps = ({ dexAccount, metaMask }) => {\n  return {\n    initAccountFromMetaMask: metaMask.initAccountFromMetaMask,\n    signIn: dexAccount.signIn\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(Widget)","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { Table, Input, Icon } from 'antd';\nimport utils from 'utils';\n\nconst Widget = ({errors, items}) => {\n  return (\n    <Box>\n      <Text fontSize={14} color=\"#969696\" ml={'6px'}>密码必须包含以下内容:</Text>\n      {\n        _.map(items, item => {\n          let error = !!_.includes(errors, item)\n          return (\n            <Flex key={item} alignItems=\"center\">\n              {\n                utils.renderIf(error)(\n                  <Icon style={{color: \"#F0505A\"}} type=\"close\" />\n                )\n              }\n              {\n                utils.renderIf(!error)(\n                  <Icon style={{color: \"#50BE8c\"}} type=\"check\" />\n                )\n              }\n              <Text lineHeight={'30px'} fontSize={14} line color=\"#969696\" ml={'6px'}>{item}</Text>\n            </Flex>\n          )\n        })\n      }\n    </Box>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget);","import React from 'react';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Menu, Dropdown, Button } from 'antd';\nimport { BillPreCheck } from './Common'\nimport utils, { renderIf } from 'utils';\nimport metamaskLogo from 'metamask.png';\nimport wedexLogo from 'icons/wedexLogo.svg';\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport { UpsertPasswordModal } from 'widgets/Dialog'\n\nclass TopNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activitis: [\n        { title: '关于WEDEX9月26日升级公告', link: 'http://www.baidu.com' },\n        { title: '10月交易大赛赢百万糖果', link: 'http://www.baidu.com' },\n        { title: '关于WEDEX9月26日升级公告', link: 'http://www.baidu.com' },\n      ]\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  login() {\n    this.billPreCheck.check()\n  }\n\n  async changePassword () {\n    this.billPreCheck.checkSignedIn()\n    await UpsertPasswordModal()\n  }\n  \n  async clearStore () {\n    this.props.clearAccountInfo()\n    this.props.history.push('/')\n  }\n\n  renderNav () {\n    const menus = {\n      mine: [\n        { title: '我的资产', link: '/mine/balance' },\n        { title: '资金划转记录', link: '/mine/transfer' },\n        { title: '币币交易记录', link: '/mine/order' },\n        { title: 'API Key', link: '/mine/apikey' },\n        { title: '中奖记录', link: '/mine/award' },\n        { title: '修改交易密码', callback: () => this.changePassword() },\n        { title: '清空浏览器缓存', callback: () => this.clearStore() },\n      ],\n      activity: [\n        { title: '最新公告', newWindow: true, link: 'https://wedex.io/support/announcement' },\n        { title: '新手教程', newWindow: true, link: 'https://wedex.io/support/guide' },\n        { title: '常见问题', newWindow: true, link: 'https://wedex.io/support/faq' },\n        // { title: '上币申请', newWindow: true, link: '' },\n        { title: '关于我们', newWindow: true, link: 'https://wedex.io/support/about' },\n      ]\n    }\n    const genMenu = subMenus => (\n      <Menu onClick={({key: index}) => {\n        let menu = subMenus[index]\n        if (menu.link) {\n          // newWindow\n          // TODO: \n          if (menu.newWindow) {\n            window.open(menu.link, '_blank')\n          } else {\n            this.props.history.push(menu.link)\n          }\n        } else if (menu.callback) {\n          menu.callback()\n        }\n      }}>\n      {\n        subMenus.map((menu, index) => (\n          <Menu.Item key={index}>\n            <Text fontSize={[0, 0, 0]} color='hint'>{ menu.title }</Text>\n          </Menu.Item>\n        ))\n      }\n      </Menu>\n    )\n\n    let { address, state } = this.props.dexAccount\n    let { isDesiredBrowser, isDesiredNetwork } = this.props.metaMask\n    // enabled才代表metamask已经获取到了地址，adderss 有可能是缓存的。\n    let signined = utils.checkLogined()\n    let accountCreating = ENUM_ACCOUNT_STATUS.CREATING.equals(state)\n\n    return (\n      <Flex alignItems='center'>\n        {renderIf(isDesiredNetwork && signined && !accountCreating)(\n          <Dropdown overlay={genMenu(menus.mine)} placement=\"bottomCenter\" overlayClassName=\"nav-menu\">\n            <Flex px={25} height={40} alignItems='center'>\n              <Image src={metamaskLogo} width={[25, 25, 25]} height={[25, 25, 25]} />\n              <Box pl={3} fontSize={`13px`} fontWeight=\"bold\">{`${_.take(address, 6).join('')}...${_.takeRight(address, 4).join('')}`}</Box>\n            </Flex>\n          </Dropdown>\n        )}\n        {renderIf(!isDesiredBrowser || !isDesiredNetwork || !signined || accountCreating)(\n          <Flex px={25} height={40} alignItems='center' sx={{ cursor: 'pointer' }}\n            onClick={() => this.login()}\n          >\n            {/* <Box pl={3} fontSize={`13px`} fontWeight=\"bold\">{!isDesiredBrowser ? 'MetaMask登录' : !isDesiredNetwork ? '请选择主网' : accountCreating ? '创建中' : 'MetaMask登录'}</Box> */}\n            <Box pl={3} fontSize={`13px`} fontWeight=\"bold\">{accountCreating ? '创建中' : 'MetaMask登录'}</Box>\n          </Flex>\n        )}\n        <Box height={40} lineHeight={'40px'} px={25} fontSize={`13px`} fontWeight=\"bold\">最新活动</Box>\n        <Dropdown overlay={genMenu(menus.activity)} placement=\"bottomCenter\" overlayClassName=\"nav-menu\">\n          <Box height={40} lineHeight={'40px'} pl={25} fontSize={`13px`} fontWeight=\"bold\">帮助中心</Box>\n        </Dropdown>\n        {/* <Dropdown overlay={genMenu(menus.activity)} placement=\"bottomCenter\" overlayClassName=\"nav-menu\">\n          <Box height={40} lineHeight={'40px'} px={25} fontSize={`13px`} fontWeight=\"bold\">简体中文</Box>\n        </Dropdown> */}\n        <BillPreCheck ref={ref => this.billPreCheck = ref}></BillPreCheck>\n      </Flex>\n    )\n  }\n\n  render() {\n    return (\n      <Box>\n        <Flex variant='topNav' px={15}>\n          <Flex width={120} alignItems='center' justifyContent='start' variant=\"clickable\" onClick={() => {\n            this.props.history.push(`/`)\n          }}>\n            <Image src={wedexLogo} width={150} />\n            {/* <Text color=\"white\" ml={2} fontSize={3}>WEDEX</Text> */}\n          </Flex>\n          <Flex alignItems='center' flex={1}>\n            {/* {\n              _.map(this.state.activitis, (activity, index) => (\n                <Text key={index} mr={40} fontSize={[0, 0, 0]} color='hint'>{ activity.title }</Text>\n              ))\n            } */}\n          </Flex>\n          { this.renderNav() }\n        </Flex>\n        <Box as='hr' variant='divider.topNav'\n          // sx={{\n          // }}\n        />\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, metaMask }) => {\n  return {\n    dexAccount,\n    metaMask\n  };\n};\n\nconst mapDispatchToProps = ({ dexAccount }) => {\n  return {\n    clearAccountInfo: dexAccount.clearAccountInfo\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TopNav))","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport numeral from 'numeral'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { Table, Button, Input, Icon, AutoComplete } from 'antd';\nimport utils from 'utils'\n\nconst { Option } = AutoComplete;\n\nclass Pair extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fuzzy: '',\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  renderOption(item) {\n    return (\n      <Option key={item.category} text={item.category}>\n        <div className=\"global-search-item\">\n          <span className=\"global-search-item-desc\">\n            Found {item.query} on\n            <a\n              href={`https://s.taobao.com/search?q=${item.query}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {item.category}\n            </a>\n          </span>\n          <span className=\"global-search-item-count\">{item.count} results</span>\n        </div>\n      </Option>\n    );\n  }\n\n  onChange(pagination, filters, sorter, extra) {\n    let { order = 'market', field = 'descend' } = sorter\n    this.props.updateFilterCond({\n      sort: order,\n      sortDirection: order === 'descend' ? 'desc' : 'asc'\n    })\n  }\n\n  render() {\n    let { markets, setCurrentTab, setCurrentMarket, starMarket } = this.props\n    let { fuzzy } = this.state\n    let pairs = _.chain(markets.currentMarkets)\n                  .filter(({market}) => _.includes(_.upperCase(market), _.upperCase(fuzzy)))\n                  .value()\n\n    const columns = [\n      {\n        align: 'left',\n        title: '',\n        key: 'star',\n        width: 20,\n        render: (unused, record) => {\n          let haveStar = _.find(markets.stars, {market: record.market})\n          return (<Icon type=\"star\" theme=\"filled\"  style={{ fontSize: '14px', color: haveStar ? \"#0064FF\": \"#3c3c50\" }} />)\n        },\n        onCell: (record, rowIndex) => {\n          return {\n            onClick: event => {\n              event.stopPropagation()\n              starMarket(record)\n            }\n          }\n        }\n      },\n      {\n        align: 'left',\n        title: '交易对',\n        dataIndex: 'baseToken',\n        width: 100,\n        sorter: (a, b) => a.baseToken > b.baseToken,\n        render: (unused, record) => (<Flex>{record.baseToken}<Text color=\"hint\">/{record.quoteToken}</Text></Flex>),\n      },\n      {\n        align: 'left',\n        title: '最新价格',\n        dataIndex: 'latest',\n        width: 160,\n        sorter: (a, b) => a.latest - b.latest,\n        render: (latest, record) => (\n          <Flex>\n            {latest}\n            <Text ml={2} color=\"hint\">${utils.asLegalMoney(Number(record.latest), record.baseToken, 'USD')}</Text>\n          </Flex>\n        ),\n      },\n      {\n        align: 'right',\n        title: ' 24H涨跌',\n        dataIndex: 'variation',\n        sorter: (a, b) => a.variation - b.variation,\n        render: (variation) => (<Text color={variation >= 0 ? 'success' : 'failure'}>{numeral(variation).format('+0.00%')}</Text>),\n      },\n      {\n        align: 'right',\n        title: ' 24H成交量',\n        dataIndex: 'size24h',\n        sorter: (a, b) => a.size24h - b.size24h,\n        render: (size24h) => (<Text>{size24h}</Text>),\n      },\n    ];\n\n    return (\n      <Box {...this.props} variant='noScrollbar' bg=\"backgroundTint\" overflowY='auto'>\n        <Flex alignItems='center' justifyContent='space-between' bg=\"background\">\n          <Flex alignItems='center' justifyContent='flex-start'>\n            {\n              markets.tabs.map(tab => (\n                <Flex key={tab} width={78} height={40} alignItems='center' justifyContent='center' sx={{\n                  color: 'white',\n                  // borderBottom: '2px solid',\n                  // borderColor: tab === markets.currentTab ? 'blue': 'background',\n                  bg: tab === markets.currentTab ? 'backgroundTint': 'background',\n                  cursor: 'pointer'\n                }} onClick={() => setCurrentTab(tab)}>\n                  <Text fontSize={0} fontWeight={'bold'}>{tab}</Text>\n                </Flex>\n              ))\n            }\n          </Flex>\n          <Box px={14} width={160}>\n            {/* <AutoComplete\n              className=\"pairs-search\"\n              dataSource={pairs}\n              onSelect={pair => {\n                let [base, quote] = pair.split('-')\n                setCurrentTab(quote)\n                let currentMarket = _.find(markets.markets, {market: pair})\n                setCurrentMarket(currentMarket)\n              }}\n              onSearch={value => this.setState({ fuzzy: value })}\n              optionLabelProp=\"text\"\n            >\n              <Input.Search\n                className=\"pairs-search\"\n                placeholder=\"搜索\"\n                onSearch={value => this.setState({ fuzzy: value })}\n                style={{ height: 36, color: 'white' }}\n              />\n            </AutoComplete> */}\n            <Input.Search\n              className={`pairs-search ${fuzzy && 'has-content'}`}\n              placeholder=\"搜索\"\n              style={{ height: 36, color: 'white' }}\n              allowClear={true}\n              onChange={e => this.setState({ fuzzy: e.currentTarget.value })}\n            />\n          </Box>\n        </Flex>\n        <Box px={14}>\n          <Table rowKey=\"market\" columns={columns} dataSource={pairs} align=\"right\"\n            className=\"exchange-table\"\n            pagination={false}\n            onRow={(record, rowIndex) => {\n              return {\n                onClick: event => {\n                  setCurrentMarket(record)\n                  // 设置交易对时，同时更新地址栏\n                  this.props.history.push(`/trade/${record.market}`)\n                }\n              }\n            }}\n            locale={{emptyText: '暂无数据'}}\n            onChange={(...params) => this.onChange(...params)}\n          />\n        </Box>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({markets}) => {\n  return {\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({markets}) => {\n  return {\n    setCurrentTab: markets.setCurrentTab,\n    setCurrentMarket: markets.setCurrentMarket,\n    starMarket: markets.starMarket,\n    updateFilterCond: markets.updateFilterCond\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Pair));","import _ from 'lodash'\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { Pagination } from 'antd';\nimport styles from './index.less';\n\nclass QhPagination extends Component {\n  constructor (props) {\n    super(props)\n    \n    this.state = {\n      pageSize: props.initPageSize,\n      page: 1,\n      total: 0\n    }\n  }\n\n  async componentDidMount () {\n    if (this.props.autoload) {\n      this.fetchDataByPage()\n    }\n  }\n\n  componentWillUnmount() {\n  }\n  \n  async reset () {\n    await this.setState({\n      page: 1,\n      total: 0\n    })\n    return this.fetchDataByPage()\n  }\n\n  fetchDataByPage () {\n    let pageParams = {\n      page: this.state.page,\n      pageSize: this.state.pageSize\n    }\n    return this.props.fetchData(pageParams).then(body => {\n      this.setState({\n        total: body.count\n      })\n      this.props.onFetched(body.rows)\n    }).catch(error => { console.info(error.message) })\n  }\n\n  handleSizeChange = async function (size) {\n    await this.setState({pageSize: size})\n    this.fetchDataByPage()\n  }.bind(this)\n\n  handleCurrentChange = async function (currentPage) {\n    await this.setState({page: currentPage})\n    this.fetchDataByPage()\n  }.bind(this)\n\n  render () {\n    return (\n      <Pagination\n        className=\"qhPagination\"\n        current={this.state.page}\n        pageSize={this.state.pageSize}\n        total={this.state.total}\n        onChange={this.handleCurrentChange}\n        onShowSizeChange={this.handleSizeChange}\n        pageSizeOptions={['30', '50', '100', '200']}\n        showQuickJumper\n      />\n    )\n  }\n}\n\nQhPagination.defaultProps = {\n  initPageSize: 30,\n  autoload: true\n};\n  \nQhPagination.propTypes = {\n  initPageSize: PropTypes.number,\n  fetchData: PropTypes.func,\n  onFetched: PropTypes.func,\n  autoload: PropTypes.bool,\n};\n\nexport default QhPagination;\n","\nimport React from 'react'\n\nexport default ({\n  color,\n  icon,\n  width,\n  height,\n  size,\n  ...props\n}) => (\n  <svg className=\"icon\" aria-hidden=\"true\" style={{\n    width: width || size,\n    height: height || size,\n  }} {...props}>\n    <use xlinkHref={`#${icon}`} style={{ color }}></use>\n  </svg>\n)","\nimport React from 'react'\nimport { Spin, Icon } from 'antd';\n\nexport default ({\n  fontSize = 30,\n  color = 'white',\n  ...props\n}) => {\n  const antIcon = <Icon type=\"loading\" style={{ fontSize, color }} spin />;\n  return (\n    <Spin indicator={antIcon} {...props} wrapperClassName=\"global-spin\" />\n  )\n}","import moment from 'moment';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Table, Icon } from 'antd';\nimport { Spin } from 'components';\n\nclass Trade extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tableHeight: 600\n    }\n  }\n\n  onWindowResize = function () {\n    let tableDom = document.getElementsByClassName('trade-panel')[0]\n    if (!tableDom) return\n    this.setState({\n      tableHeight: tableDom.offsetHeight\n    })\n  }.bind(this)\n\n  componentDidMount() {\n    window.addEventListener('resize', this.onWindowResize);\n    this.onWindowResize()\n    // fix: trade的高度有问题，太小。是因为此处第一次执行时没加载完，获取的 dom 高度不对。\n    setTimeout(() => this.onWindowResize(), 1000)\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onWindowResize);\n  }\n\n  render() {\n    let { trade, markets } = this.props\n    let { tableHeight } = this.state\n\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    const columns = [\n      {\n        align: 'left',\n        title: `价格(${currentMarket.quoteToken})`,\n        dataIndex: 'price',\n        width: 96,\n        render: (price, row) => (\n          <Text color={row.side === 'BUY' ? \"success\" : \"failure\"}>{row.price}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: `数量(${currentMarket.baseToken})`,\n        dataIndex: 'size',\n        width: 96,\n      },\n      {\n        align: 'right',\n        title: '时间',\n        dataIndex: 'timestamp',\n        render: (unused, record) => {\n          return (<Text>{moment(record.timestamp).format('HH:mm:ss')}</Text>)\n        }\n      },\n    ];\n\n    return (\n      <Box {...this.props} className=\"trade-panel\">\n        <Flex height={40} alignItems=\"center\" justifyContent=\"space-between\">\n          <Text fontSize={0} fontWeight=\"bold\">实时成交</Text>\n          {/* <Text fontSize={0} color='hint'>更多</Text> */}\n        </Flex>\n        <Spin spinning={trade.loading}>\n          <Table columns={columns} dataSource={trade.list} align=\"right\"\n            style={{ height: tableHeight - 72 }}\n            scroll={{ y: tableHeight - 72 }}\n            className=\"exchange-table\"\n            pagination={false}\n            locale={{emptyText: '暂无数据'}}\n          />\n        </Spin>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ trade, markets }) => {\n  return {\n    trade,\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({ trade }) => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Trade);","import moment from 'moment';\nimport api from 'api';\nimport { config as lightcone_v3_config } from 'librarys/lightcone_v3';\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport { dispatch } from 'store'\nimport utils from 'utils'\n\n// resolution 相关文档参考 https://zlq4863947.gitbook.io/tradingview/fu-lu/resolution\nlet supportedResolutions = ENUM_INTERVAL_TYPE.getOptions().map(option => option.value)\n// 改变分辨率的回调。\n// setInterval(async () => {\n//   // 每 10s 拉取过去一分钟的蜡烛\n//   for (let key in _subscribers) {\n//     let sub = _subscribers[key]\n//     let { symbolInfo, listener } = sub\n//     let market = symbolInfo['name'];\n\n//     // var candles = await getCandlestick(market, '1min', 1);\n//     var candles = await getCandlestick(market, '1min');\n//     if (candles.length === 0) return\n\n//     console.info('_subscribers', {candles})\n//     candles.reverse();\n\n//     let startTimestamp;\n//     let endTimestamp;\n//     let quoteToken;\n\n//     var newCandles = {};\n//     for (var i = 0; i < candles.length; i = i + 1) {\n//       const candle = candles[i];\n//       const tokens = market.split('-');\n//       quoteToken = tokens[1];\n\n//       if (startTimestamp === undefined) {\n//         startTimestamp = candle['start'];\n//       } else {\n//         endTimestamp = candle['start'];\n//       }\n\n//       const start = candle['start'];\n\n//       let parsedCandle = {\n//         time: start,\n//         low: Number(candle['low']),\n//         high: Number(candle['high']),\n//         open: Number(candle['open']),\n//         close: Number(candle['close']),\n//         volume: lightcone_v3_config.fromWEI(quoteToken, candle['volume'], 8)\n//       };\n//       newCandles[start] = parsedCandle;\n//     }\n\n//     var newMoreCandles = [];\n//     var lastCandle = newCandles[startTimestamp];\n//     for (var i = startTimestamp; i <= endTimestamp; i = i + 60 * 1000) {\n//       if (newCandles[i] === undefined) {\n//         lastCandle['time'] = i;\n//         newMoreCandles.push(Object.assign({}, lastCandle));\n//       } else {\n//         const candle = newCandles[i];\n//         newMoreCandles.push(candle);\n//         lastCandle = {\n//           time: candle['start'],\n//           low: Number(candle['close']),\n//           high: Number(candle['close']),\n//           open: Number(candle['close']),\n//           close: Number(candle['close']),\n//           volume: 0\n//         };\n//       }\n//     }\n\n//     console.info('#########latastCandel', newMoreCandles[newMoreCandles.length - 1])\n//     listener(newMoreCandles[newMoreCandles.length - 1]);\n//   }\n// }, 10 * 1000)\n\nexport default {\n  onReady: cb => {\n    console.log('=====onReady running: ');\n    console.info(supportedResolutions)\n    setTimeout(() => cb({\n      supported_resolutions: supportedResolutions\n    }), 0);\n  },\n  searchSymbols: (userInput, exchange, symbolType, onResultReadyCallback) => {\n    console.log('====Search Symbols running');\n  },\n  resolveSymbol: (\n    symbolName,\n    onSymbolResolvedCallback,\n    onResolveErrorCallback\n  ) => {\n    // expects a symbolInfo object in response\n    console.log('解析 Symbol', symbolName);\n    // console.log('resolveSymbol:',{symbolName})\n    let quoteSymbol = symbolName.split('-')[1]\n    let quoteToken = lightcone_v3_config.getTokenBySymbol(quoteSymbol)\n\n    var symbol_stub = {\n      name: symbolName,\n      description: '',\n      type: 'crypto',\n      session: '24x7',\n      timezone: 'Asia/Shanghai',\n      exchange: '',\n      minmov: 1,\n      pricescale: Math.pow(10, quoteToken.precision),\n      // 如果has_intraday为true，则日内周期可用。\n      has_intraday: true,\n      // 重要: 如果 has_intraday 为 true，则 intraday_multipliers 必须设置，否则“可选分辨率”为空。只能最新'1D'，连“默认分辨率”都自动变为'1D'。\n      intraday_multipliers: supportedResolutions.filter(interval => utils.formatResolution(interval) < 24 * 60),\n      supported_resolution: supportedResolutions,\n      volume_precision: quoteToken.precision,\n      data_status: 'streaming',\n      has_intraday: true,\n      has_seconds: true,\n      has_daily: true,\n      has_weekly_and_monthly: true,\n      // 重要: 是否自动填充无交易的 bar。不能填充，否则 MV 变形。\n      // has_empty_bars: true\n    };\n\n    /*\n    var split_data = symbolName.split(/[:/]/);\n\t\tif (split_data[2].match(/USD|EUR|JPY|AUD|GBP|KRW|CNY/)) {\n\t\t\tsymbol_stub.pricescale = 100\n    }\n    */\n    setTimeout(function() {\n      onSymbolResolvedCallback(symbol_stub);\n      console.log('Resolving that symbol....', symbol_stub);\n    }, 0);\n\n    // onResolveErrorCallback('Not feeling it today')\n  },\n  getBars: function(\n    symbolInfo,\n    resolution,\n    from,\n    to,\n    onHistoryCallback,\n    onErrorCallback,\n    firstDataRequest\n  ) {\n    console.log(\n      `获取K线 ${new Date(from * 1000).toLocaleString()} --- ${new Date(to * 1000).toLocaleString()} --- resolution: ${resolution}`\n    );\n\n    let market = symbolInfo['name'];\n\n    (async () => {\n      var candles = await api.getCandlestickCombine({\n        limit: 200,\n        market,\n        interval: ENUM_INTERVAL_TYPE.toText(resolution),\n        start: from * 1000,\n        end: to * 1000,\n      })\n      candles.reverse()\n      console.log('candles解析前:', candles);\n\n      if (candles.length === 0) {\n        onHistoryCallback([], { noData: true });\n        return\n      }\n\n      let quoteSymbol = market.split('-')[1]\n      let quoteToken = lightcone_v3_config.getTokenBySymbol(quoteSymbol)\n\n      let startTimestamp = candles[0].start\n      let endTimestamp = _.last(candles).start\n\n      console.info('tradingview start ---> ' + moment(from * 1000).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('tradingview end   ---> ' + moment(to * 1000).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('relay start       ---> ' + moment(startTimestamp).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('relay end         ---> ' + moment(endTimestamp).format('YYYY-MM-DD HH:mm:ss'))\n\n      // // 重要：这里不能自己填充，否则 MA 的线会宽度变形。应该通过 has_empty_bars 让 tradingview 自己填充。\n      // // 补充: has_empty_bars 也不行，自动填充上，MA 也会变形。\n      // let parsedCandles = _.chain(candles)\n      //   // 重要: 这里必须过滤。因为中继有问题，实际返回的范围可能大于请求的范围。\n      //   // 比如请求8~10点，可能获取到8~10:09，那么 10~10:09的上一次已经有了，就会重合。\n      //   // 导致tradingview 增量更新冲突，刷新并重头开始获取。重新获取后冲突，再次重新获取。\n      //   // 中继之所以出现此问题，是因为中继的页数是从前往后的。而且 limit 没用，就取多了。\n      //   .filter(candle => candle.start >= from * 1000 && candle.start <= to * 1000)\n      //   .map(candle => {\n      //     return {\n      //       time: candle.start,\n      //       high: Number(candle['high']),\n      //       low: Number(candle['low']),\n      //       open: Number(candle['open']),\n      //       close: Number(candle['close']),\n      //       volume: lightcone_v3_config.fromWEI(quoteToken.symbol, candle['volume'], quoteToken.precision)\n      //     }\n      //   })\n      //   .value()\n\n      // range是前闭后开。所以想包含endTimestamp，需要+1.\n      let period = utils.formatResolution(resolution) * 60 * 1000\n      let timestaps = _.range((from) * 1000, (to) * 1000, period)\n      // 重要：MA 和 volume 变形，跟此处数据没关系。当有大片无数据横盘时，缓慢左移（横盘即将到头马上要重绘加载数据时，一定要慢），就没问题。\n      // 如果快速左移，或者直接缩放，就会变形。\n      // 即使出现问题，切换分辨率可恢复。\n      let parsedCandles = _.map(timestaps, ts => {\n        let candle = _.find(candles, c => c.start >= ts && c.start < ts + period)\n\n        if (!candle) {\n          let price = 0\n          // 先往前找最后一个\n          let LeftCandle = _.findLast(candles, c => c.start <= ts)\n          let rightCandle\n          // 如果找不到，往后找第一个。\n          // 不可能前后都找不到，因为数组不可能为空。真找不到，那 price 就是 0\n          if (LeftCandle) {\n            // 前面能找到柱子，则当天所有价格为这天收盘价\n            price = LeftCandle.close\n          } else {\n            rightCandle = _.find(candles, c => c.start >= ts)\n            if (rightCandle) {\n              // 后面能找到柱子，则当天所有价格为这天开盘价\n              price = rightCandle.open\n            }\n          }\n\n          candle = {\n            high: price,\n            low: price,\n            open: price,\n            close: price,\n            volume: 0,\n          }\n        }\n        return {\n          time: Number(ts),\n          high: Number(candle['high']),\n          low: Number(candle['low']),\n          open: Number(candle['open']),\n          close: Number(candle['close']),\n          volume: Number(lightcone_v3_config.fromWEI(quoteToken.symbol, candle['volume'], quoteToken.precision))\n        }\n      })\n      console.info('parsed start       ---> ' + moment(parsedCandles[0].time).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('parsed end         ---> ' + moment(parsedCandles[parsedCandles.length-1].time).format('YYYY-MM-DD HH:mm:ss'))\n       \n      console.log('candles解析后:', parsedCandles);\n      // if (firstDataRequest) {\n      //   var lastBar = bars[bars.length - 1]\n      //   history[symbolInfo.name] = {lastBar: lastBar}\n      // }\n      if (parsedCandles.length) {\n        onHistoryCallback(parsedCandles, { noData: false });\n      } else {\n        onHistoryCallback(parsedCandles, { noData: true });\n      }\n    })();\n  },\n  subscribeBars: (\n    symbolInfo,\n    resolution,\n    onRealtimeCallback,\n    subscribeUID,\n    onResetCacheNeededCallback\n  ) => {\n    console.log('订阅k线socket', {subscribeUID, onRealtimeCallback, resolution, symbolInfo});\n    dispatch.candleStick.subscribeBars({subscribeUID, onRealtimeCallback, resolution, symbolInfo})\n  },\n  unsubscribeBars: subscriberUID => {\n    console.log('去除订阅k线socket');\n    dispatch.candleStick.unsubscribeBars(subscriberUID)\n  },\n  calculateHistoryDepth: (resolution, resolutionBack, intervalBack) => {\n    // https://github.com/tradingview/charting_library/wiki/JS-Api#calculatehistorydepthresolution-resolutionback-intervalback\n    //optional\n    // console.log(\n    //   '=====calculateHistoryDepth running: ',\n    //   resolution,\n    //   resolutionBack,\n    //   intervalBack\n    // );\n    // // while optional, this makes sure we request 24 hours of minute data at a time\n    // // CryptoCompare's minute data endpoint will throw an error if we request data beyond 7 days in the past, and return no data\n    // return resolution < 60\n    //   ? { resolutionBack: 'D', intervalBack: '14' }\n    //   : undefined;\n\n    // 重要: 更改获取的时间范围。200 条在此处定制。\n    resolution = utils.formatResolution(resolution)\n    console.log('#### calculateHistoryDepth ####', _.floor(resolution * 200 / 60 / 24, 2))\n    return {\n      resolutionBack: 'D',\n      intervalBack: _.floor(resolution * 200 / 60 / 24, 2)\n    }\n  },\n  // getMarks: (symbolInfo, startDate, endDate, onDataCallback, resolution) => {\n  //   //optional\n  //   console.log('=====getMarks running');\n  // },\n  // getTimeScaleMarks: (\n  //   symbolInfo,\n  //   startDate,\n  //   endDate,\n  //   onDataCallback,\n  //   resolution\n  // ) => {\n  //   //optional\n  //   console.log('=====getTimeScaleMarks running');\n  // },\n  // getServerTime: cb => {\n  //   console.log('=====getServerTime running: ', cb);\n  // }\n};\n","import _ from 'lodash';\nimport * as React from 'react';\nimport './index.less';\nimport { widget } from 'charting_library/charting_library.min';\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport utils from 'utils'\nimport Datafeed from './api/';\nimport {\n  Flex,\n  Box,\n  Text\n} from 'rebass'\n\nconst TV_CANDLE_SERIES = 1;\nconst TV_LINE_SERIES = 2;\nconst TV_CONTAINER_ID = 'tv_chart_container_9527';\n\nfunction getLanguageFromURL() {\n  const regex = new RegExp('[\\\\?&]lang=([^&#]*)');\n  const results = regex.exec(window.location.search);\n  return results === null\n    ? null\n    : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n// Tutorial: https://medium.com/@jonchurch/tradingview-charting-library-js-api-setup-for-crypto-part-1-57e37f5b3d5a\nexport class TVChartContainer extends React.Component {\n  static defaultProps = {\n    fullScreen: false,\n    type: 'Candle',\n    // 重要: 默认的分辨率\n    interval: ENUM_INTERVAL_TYPE.HOUR_1.getValue(),\n    // interval: ENUM_INTERVAL_TYPE.MIN_1.getValue(),\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    containerId: TV_CONTAINER_ID,\n    datafeedUrl: 'https://demo_feed.tradingview.com',\n    libraryPath: '/charting_library/',\n    chartsStorageUrl: 'https://saveload.tradingview.com',\n    chartsStorageApiVersion: '1.1',\n    clientId: 'tradingview.com',\n    userId: 'public_user_id',\n    fullscreen: false,\n    autosize: true,\n    studiesOverrides: {}\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    }\n    this.tvWidget = null;\n  }\n  \n  componentDidUpdate({\n    locale: prevLocale,\n    symbol: prevSymbol,\n    lineType: prevLineType,\n    theme: prevTheme,\n    interval: prevInterval,\n  }) {\n    const {\n      locale,\n      symbol,\n      interval,\n      lineType,\n      theme,\n      visible,\n    } = this.props;\n    this.lineType = lineType;\n    if (!window.TradingView) return\n    if (!this.tvWidget) return\n\n    // resolution changed?\n    if (interval !== prevInterval && this.tvWidget.activeChart().resolution() !== interval) {\n      this.setState({ loading: true });\n      this.tvWidget.activeChart().setResolution(String(interval));\n      // locale, symbol or theme changed?\n    } else if (locale !== prevLocale || symbol !== prevSymbol || theme !== prevTheme) {\n      // language changed?\n      // symbol changed?\n      // or theme changed?\n      // trigger a re-init of tradingview.\n      try {\n        this.tvWidget && this.tvWidget.remove();\n      } catch (err) {\n      }\n      this.tvWidget = null;\n    }\n\n    // line type activated?\n    if (lineType !== prevLineType) {\n      this.setState({ loading: true });\n      this.lineType = lineType;\n      if (lineType === 'Line') {\n        // line\n        if (prevLineType !== 'Line') {\n          // switch to Candle form Line\n          this.loadStudies(lineType, symbol, interval);\n        }\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_LINE_SERIES });\n      } else {\n        // candles\n        if (prevLineType === 'Line') {\n          // switch to Line form Candle\n          this.loadStudies(lineType, symbol, interval);\n        }\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_CANDLE_SERIES });\n      }\n    }\n\n    // init tradingview?\n    if (visible) this.init();\n  }\n\n  componentDidMount() {\n    this.init()\n  }\n\n  componentWillUnmount() {\n    if (this.tvWidget !== null) {\n      this.tvWidget.remove();\n      this.tvWidget = null;\n    }\n  }\n\n  // componentWillReceiveProps(newProps) {\n  //   if (\n  //     this.props.market !== newProps.market\n  //   ) {\n  //     if (!this.tvWidget.chart() || !newProps.market) return\n  //     console.info(`#######更改 market：${newProps.market}`)\n\n  //     // let market = newProps.market.replace('-', '/')\n  //     this.tvWidget.chart().setSymbol(newProps.market, (...params) => {\n  //       console.info(\"########  setSymbol callback\", {params})\n  //     })\n  //     // changeSymbol(newProps.market)\n  //   }\n  // }\n\n  generateTradingViewConfig ({\n    symbol,\n    interval,\n    locale,\n    theme,\n  }) {\n    let timezone = 'Asia/Shanghai';\n    // try to use local timezone, if api is available\n    try {\n      timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    } catch (err) {\n      // fallback to EXCHANGE_TIMEZONE\n    }\n\n    // 重要：参考配置：\n    // https://cloud.tencent.com/developer/article/1405723\n    const widgetOptions = {\n      debug: false,\n      symbol,\n      // BEWARE: no trailing slash is expected in feed URL\n      datafeed: Datafeed,\n\n      // https://github.com/tradingview/charting_library/wiki/Resolution\n      // 重要: 均线变形的问题，切换一次分辨率后就会消失。那么可以给定一个不是当前 interval 的分辨率，然后等 init 的时候再改成当前 interval。\n      // 但是这样处理，会看到界面加载两次，network 也会发两次请求，这个方案不太好。\n      // interval: '1',\n      interval,\n\n      timezone,\n      container_id: TV_CONTAINER_ID,\n      library_path: this.props.libraryPath,\n      frameborder: 0,\n      toolbar_bg: '#0a0e1e',\n      custom_css_url : \"tradingview.css\",\n      overrides: {\n        \"mainSeriesProperties.style\": 1,\n        \"symbolWatermarkProperties.color\" : \"#944\",\n        \"volumePaneSize\": \"tiny\",\n        'paneProperties.background': \"#0a0e1e\",\n      },\n\n      // https://github.com/tradingview/charting_library/wiki/Localization\n      locale,\n      \n      // https://github.com/tradingview/charting_library/wiki/Featuresets\n      disabled_features: [\n        'use_localstorage_for_settings',\n        'header_widget',\n        // 'left_toolbar',\n        'create_volume_indicator_by_default',\n        'go_to_date',\n        'source_selection_markers',\n        'main_series_scale_menu',\n        'source_selection_markers',\n        'timeframes_toolbar',\n        'header_symbol_search',\n      ],\n      enabled_features: ['move_logo_to_main_pane'],\n      charts_storage_url: this.props.chartsStorageUrl,\n      charts_storage_api_version: this.props.chartsStorageApiVersion,\n      client_id: this.props.clientId,\n      user_id: this.props.userId,\n      fullscreen: this.props.fullscreen,\n      autosize: this.props.autosize,\n      // studies_overrides: this.props.studiesOverrides,\n      theme: 'Dark',\n\n      // 重要: 初始的 timeframe，改为 1h 则calculateHistoryDepth中的时间范围会生效。但是默认的 time_frames 并没有 1h 这个选项。\n      // 改为 1d 则跨度范围为 1 天。\n      // timeframe: '1d',\n      timeframe: '1h',\n      // 默认的 time_frames\n      // time_frames: [{ text: \"5y\", resolution: \"W\" }, { text: \"1y\", resolution: \"W\" }, { text: \"6m\", resolution: \"120\" }, { text: \"3m\", resolution: \"60\" }, { text: \"1m\", resolution: \"30\" }, { text: \"5d\", resolution: \"5\" }, { text: \"1d\", resolution: \"1\" }],\n      time_frames: [\n        // {\n        //   text: '1min',\n        //   resolution: '1',\n        //   description: '1 minute',\n        //   title: '1min'\n        // },\n        // { text: '5min', resolution: '5', description: '5 Minutes', title: '5Min' },\n        // { text: '30min', resolution: '30', description: '30 Minutes', title: '30Min' },\n        // { text: '1hr', resolution: '60', description: '1 Hour', title: '1H' }\n        // { text: \"50y\", resolution: \"6M\" },\n        { text: \"1d\", resolution: \"1\" },\n        { text: \"1h\", resolution: \"1\" },\n      ],\n      symbols_types: ['LRC-ETH', 'LRC-USDT'],\n\n      studies_overrides: {\n        // 'volume.show ma': false,\n        // 'volume.volume.color.0': '#222',\n        // 'volume.volume.color.1': '#441',\n        'Moving Average.precision': 8,\n        'Moving Average Exponential.precision': 8,\n        \n        // 'volume.volume ma.linewidth': 1,\n        // 'volume.volume ma.color': '#141', // orange\n        // 'volume.volume ma.plottype': 'area', // orange\n        // 'volume.volume.transparency': 70,\n      },\n    };\n    return widgetOptions\n  }\n\n  loadStudies(lineType, symbol, tvInterval) {\n    // const strCofig = localStorage['myTradingView' + mode + lineType];\n    // if (strCofig) {\n    //   const config = JSON.parse(strCofig);\n    //   try {\n    //     for (let i = 0; i < config.charts[0].panes.length; i++) {\n    //       config.charts[0].panes[i].sources[0].state.symbol = symbol;\n    //       config.charts[0].panes[i].sources[0].state.interval = interval;\n    //     }\n    //   } catch (ex) {\n    //     if (__DEV__) bog.error(ex);\n    //   }\n    //   this._tv.load(config); // bug https://github.com/tradingview/charting_library/issues/3610\n    //   this._tv.chart().executeActionById('chartReset');\n    // } else if (lineType !== 'Line') {\n    if (lineType !== 'Line') {\n      this._candleDefault();\n    } else if (lineType === 'Line') {\n      this._lineDefault();\n    }\n  }\n\n  _candleDefault = () => {\n    // const { theme } = this.props;\n    // this._tv.chart().createStudy('Moving Average', false, false, [7], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma1,\n    // });\n    // this._tv.chart().createStudy('Moving Average', false, false, [25], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma2,\n    // });\n    // this._tv.chart().createStudy('Moving Average', false, false, [99], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma3,\n    // });\n\n    this.tvWidget.chart().removeAllStudies();\n    // 创建均线\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [5, 'close', 0], null, {\n      'Plot.color': '#34a9ff',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [10, 'close', 0], null, {\n      'Plot.color': '#ffb620',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [30, 'close', 0], null, {\n      'Plot.color': '#ff688f',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Volume', false, false, [9], null, null);\n  \n    // 创建最新价水平线\n    // this.tvWidget.chart().createShape({\n    //     time: self.timestamp,\n    //     channel:close\n    // },{\n    //     shape: 'horizontal_line'\n    // })\n  \n    // 这里可以定制不同分辨率的 timeframe，但是范围明显不对，会变得特别小。\n    // this.tvWidget.chart()\n    //   .onIntervalChanged()\n    //   .subscribe(null, function(interval, obj) {\n    //     // if (interval === '1') {\n    //     //   obj.timeframe = `1h`\n    //     // }\n    //     let timeframe = `${_.floor(interval * 200 / 60 / 24, 2)}D`\n    //     console.info(`====== tv interval改变后，改 timeframe为: ${timeframe} ======`)\n    //     obj.timeframe = timeframe\n    //   })\n  };\n\n  _lineDefault = () => {\n    const { theme } = this.props;\n    this.tvWidget.chart().removeAllStudies();\n    this.tvWidget.chart().createStudy('Volume', false, false, [99], null, null);\n  };\n\n  init () {\n    if (this.tvWidget) return\n\n    const {\n      symbol,\n      locale,\n      interval,\n      lineType,\n      theme,\n    } = this.props;\n\n    let widgetOptions = this.generateTradingViewConfig({\n      symbol,\n      interval,\n      locale: utils.getTradingViewLocale(locale),\n      theme,\n    })\n    this.tvWidget = new widget(widgetOptions);\n\n    this.tvWidget.onChartReady(() => {\n      this.loadStudies(lineType, symbol, interval)\n      setTimeout(() => {\n        // this.tvWidget.activeChart().setResolution(interval)\n        this.tvWidget && this.tvWidget.setSymbol(symbol, interval);\n      }, 0)\n      // this.tvWidget.applyOverrides(theme.tradingViewOverrides || {});\n      if (lineType === 'Line') {\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_LINE_SERIES });\n      }\n      this.tvWidget\n        .chart()\n        .onDataLoaded()\n        .subscribe(null, () => {\n          setTimeout(() => {\n            this.setState({ loading: false });\n          }, 0)\n        });\n\n      // this.tvWidget.subscribe('onAutoSaveNeeded', () => {\n      //   this.tvWidget.save(chartData => {\n      //     localStorage['myTradingView' + this.props.theme.mode + this.lineType] = JSON.stringify(\n      //       chartData\n      //     );\n      //   });\n      // });\n    });\n  }\n\n  render() {\n    return (\n      <Box id={this.props.containerId}\n        className={'TVChartContainer'}\n        sx={{\n          height: this.props.fullScreen ? '100%' : this.props.style.height\n        }}\n      />\n    )\n  }\n}\n\n\n/* 币安的配置 */\n// webpack://utils/tradingview.js\n\n// import getConfig from 'next/config';\n// import Fetch from 'fetch-ponyfill';\n\n// import WebSocket from '../network/WebSocket';\n// import { getTradingViewLocale } from './locales';\n// import makeApiRequest from './makeApiRequest';\n// import { wssUri as _getKlinesWsUri } from '../network/handleInitTask';\n\n// const { fetch } = Fetch();\n\n// const {\n//   publicRuntimeConfig: {\n//     site: SITE,\n//     siteApiHost,\n//   },\n// } = getConfig();\n\n// const WS_PATH = '/stream?streams=';\n// const REST_BASE_URI = siteApiHost;\n// const EXCHANGE_TIMEZONE = 'Asia/Shanghai';\n// const SERVERTIME_API_PATH = '/api/v1/time';\n\n// const TV_RESOLUTIONS_TO_BINANCE = {\n//   '1': '1m',\n//   '3': '3m',\n//   '5': '5m',\n//   '15': '15m',\n//   '30': '30m',\n//   '60': '1h',\n//   '120': '2h',\n//   '240': '4h',\n//   '360': '6h',\n//   '720': '12h',\n//   'D': '1d',\n//   '1W': '1w',\n//   '1M': '1M',\n// };\n\n// const getKlinesWsUri = async (symbolName, interval) => {\n//   const streamUrl = _getKlinesWsUri();\n//   return (\n//     `${streamUrl.replace(/\\/ws$/, WS_PATH)}` +\n//     `${symbolName.toLowerCase()}@kline_${interval}`\n//   );\n// };\n\n// const convertKlineArrToBar = (arr) => {\n//   arr = arr.map(num => +num);\n//   const [time, open, high, low, close, volume] = arr;\n//   return {\n//     time,\n//     close,\n//     open,\n//     high,\n//     low,\n//     volume,\n//   };\n// };\n\n// const convertKlineObjToBar = ({ k: kline }) => {\n//   const {\n//     t, l, c, h, o, v,\n//   } = kline;\n//   return {\n//     time: t, close: +c, open: +o, high: +h, low: +l, volume: +v,\n//   };\n// };\n\n// export const translateResolutionForBinance = (resolution) => TV_RESOLUTIONS_TO_BINANCE[resolution];\n\n// export const translateResolutionForTV = (secs) => {\n//   const intervalMins = (secs / 60).toString();\n//   let tvInterval = intervalMins;\n//   if (intervalMins === '1440') { // 1d\n//     tvInterval = 'D';\n//   } else if (intervalMins === '10080') { // 1w\n//     tvInterval = '1W';\n//   } else if (intervalMins === '43200') { // 1w\n//     tvInterval = '1M';\n//   }\n//   return tvInterval;\n// };\n\n// export class DataFeed {\n//   constructor(symbols = [], baseUri = REST_BASE_URI) {\n//     this.symbols = symbols;\n//     this.baseUri = baseUri;\n//     this.sockets = new Map();\n//   }\n\n//   // ### onReady(callback)\n//   // `callback`: function(configurationData)\n//   //     `configurationData`: object (see below)\n//   //          exchanges\n//   //          symbols_types\n//   //          supported_resolutions\n//   //          supports_marks\n//   //          supports_timescale_marks\n//   //          supports_time\n//   //          futures_regex\n//   onReady = (callback) => {\n//     setTimeout(() => {\n//       callback({\n//         exchanges: [],\n//         symbols_types: [],\n//         supported_resolutions: Object.keys(TV_RESOLUTIONS_TO_BINANCE),\n//         supports_marks: false, // TODO: maybe\n//         supports_timescale_marks: false, // TODO: maybe\n//         supports_time: true,\n//       });\n//     }, 0);\n//   };\n\n//   // ### searchSymbols(userInput, exchange, symbolType, onResultReadyCallback)\n//   // `userInput`: string. It is text entered by user in the symbol search field.\n//   // `exchange`: string. The requested exchange (chosen by user).\n//   //     Empty value means no filter was specified.\n//   // `symbolType`: string. The requested symbol type: `index`, `stock`, `forex`, etc.\n//   //     Empty value means no filter was specified.\n//   // `onResultReadyCallback`: function(result)\n//   //     `result`: array (see below)\n//   //        \"symbol\": \"<short symbol name>\",\n//   //        \"full_name\": \"<full symbol name>\", // e.g. BTCE:BTCUSD\n//   //        \"description\": \"<symbol description>\",\n//   //        \"exchange\": \"<symbol exchange name>\",\n//   //        \"ticker\": \"<symbol ticker name, optional>\",\n//   //        \"type\": \"stock\" // or \"futures\" or \"crypto\" or \"forex\" or \"index\"\n//   searchSymbols = (input, exchange, symbolType, callback) => {\n//     if (__DEV__) {\n//       console.log('searchSymbols called with:', input);\n//     }\n//     const matches = this.symbols.filter(({ symbol }) => symbol.includes(input));\n//     const mapped = matches.map(match => ({\n//       symbol: match.symbol,\n//       full_name: match.symbol,\n//       description: match.symbol,\n//       exchange: 'BINANCE',\n//       type: 'crypto',\n//     }));\n//     if (__DEV__) {\n//       console.log('TradingView symbol matches', mapped);\n//     }\n//     callback(mapped);\n//   };\n\n//   // ### resolveSymbol(symbolName, onSymbolResolvedCallback, onResolveErrorCallback)\n//   // `symbolName`: string. Symbol name or `ticker` if provided.\n//   // `onSymbolResolvedCallback`: function([SymbolInfo](Symbology#symbolinfo-structure))\n//   // `onResolveErrorCallback`: function(reason)\n//   // Charting Library calls this fn when it needs [SymbolInfo](Symbology#symbolinfo-structure)\n//   // by symbol name.\n//   resolveSymbol = (symbol, callback, errorCallback) => {\n//     if (__DEV__) {\n//       console.log('resolveSymbol called with:', symbol);\n//     }\n//     symbol = symbol.replace('BINANCE:', '');\n//     const matches = this.symbols.filter(({ symbol: symb }) => symb === symbol);\n//     if (!matches.length) {\n//       errorCallback('not found');\n//       return;\n//     }\n//     const match = matches[0];\n//     const symbolFilter = match.filters.find((filter) => filter.tickSize || filter.stepSize);\n//     const tickSize = symbolFilter.stepSize || symbolFilter.tickSize;\n//     const resolved = {\n//       description: match.symbol,\n//       fractional: false, // `fractional` for common prices is `false` or it can be skipped.\n//       has_intraday: true,\n//       minmov: 1, // `minmov` is a number of units that make up one tick.\n//       minmove2: 0, // `minmove2` for common prices is `0` or it can be skipped.\n//       name: match.symbol,\n//       // `pricescale` defines number of decimal places.\n//       // Actually it is `10^number-of-decimal-places`.\n//       pricescale: 10 ** Math.abs(Math.log10(tickSize)),\n//       session: '24x7',\n//       timezone: EXCHANGE_TIMEZONE,\n//       type: 'crypto',\n//       // volume_precision: 2,\n//     };\n//     if (__DEV__) {\n//       console.log('resolved symbol:', resolved);\n//     }\n//     // TODO: fill this out properly\n//     setTimeout(() => {\n//       callback(resolved);\n//     }, 0);\n//   };\n\n//   // ### getBars(symbolInfo, resolution, from, to, onHistoryCallback,\n//   //              onErrorCallback, firstDataRequest)\n//   // `symbolInfo`: [SymbolInfo](Symbology#symbolinfo-structure) object\n//   // `resolution`: string\n//   // `from`: unix timestamp, leftmost required bar time\n//   // `to`: unix timestamp, rightmost required bar time\n//   // `onHistoryCallback`: function(array of `bar`s, `meta` = `{ noData = false }`)\n//   //     `bar`: object `{time, close, open, high, low, volume}`\n//   //     `meta`: object `{noData = true | false, nextTime - unix time}`\n//   // `onErrorCallback`: function(reason)\n//   // `firstDataRequest`: boolean to identify the first call of this method for the\n//   //     particular symbol resolution.\n//   //     When it is set to `true` you can ignore `to` (which depends on browser's `Date.now()`)\n//   //     and return bars up to the latest bar.\n//   getBars = async ({ name: symbol }, resolution, from, to, callback, onError) => {\n//     const interval = translateResolutionForBinance(resolution);\n//     // this api is hard limited to return 1000 bars max, regardless of `limit`\n//     const limit = 1000; // never more than 1000!\n//     const getUri = (startTime) => `${this.baseUri}` +\n//       '/api/v1/klines' +\n//       `?symbol=${symbol}` +\n//       `&interval=${interval}` +\n//       `&limit=${limit}` +\n//       `&startTime=${startTime}` +\n//       `&endTime=${to * 1000}`;\n//     let lastCount = -1;\n//     let lastTime = from * 1000;\n//     let errored = false;\n//     const bars = [];\n//     // deal with the 1000 hard limit by making multiple requests\n//     while (lastCount === -1 || lastCount === limit) {\n//       try {\n//         const isFirst = lastCount === -1;\n//         // +1 to not get duplicate bars\n//         const res = await fetch(getUri(isFirst ? lastTime : lastTime + 1));\n//         const batch = await res.json();\n//         if (!batch || !batch.length) break;\n//         const [time] = batch[batch.length - 1];\n//         lastTime = time;\n//         lastCount = batch.length;\n//         bars.push(...batch.map(convertKlineArrToBar));\n//       } catch (err) {\n//         errored = true;\n//         onError(err);\n//         break;\n//       }\n//     }\n//     if (!errored) {\n//       callback(bars, { noData: !bars.length });\n//     }\n//   };\n\n//   // ### subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID,\n//   //                    onResetCacheNeededCallback)\n//   // Charting Library calls this function when it wants to receive real-time updates for a symbol.\n//   // The Library assumes that you will call `onRealtimeCallback` every time you want to update\n//   // the most recent bar or to add a new one.\n//   // `symbolInfo`: [SymbolInfo](Symbology#symbolinfo-structure) object\n//   // `resolution`: string\n//   // `onRealtimeCallback`: function(bar)\n//   //     `bar`: object `{time, close, open, high, low, volume}`\n//   // `subscriberUID`: object\n//   // `onResetCacheNeededCallback` *(since version 1.7)*: function() to be executed\n//   //    when bar data has changed\n//   subscribeBars = async ({ name: symbol }, resolution, onMessage, uid, onResetNeeded) => {\n//     if (this._lastBarsSymbol &&\n//         this._lastBarsSymbol !== symbol) {\n//       onResetNeeded();\n//       return;\n//     }\n//     this._lastBarsSymbol = symbol;\n//     const interval = translateResolutionForBinance(resolution);\n//     const klinesWsUri = await getKlinesWsUri(symbol, interval);\n//     this.sockets.set(uid, new WebSocket(klinesWsUri, {\n//       onopen: () => {},\n//       onmessage: ({ data: json }) => {\n//         if (!json || !json.length) {\n//           console.warn('TradingView feed: received kline without data!', json);\n//           return;\n//         }\n//         const { data } = JSON.parse(json);\n//         onMessage(convertKlineObjToBar(data));\n//       },\n//       onreconnect: () => { onResetNeeded(); },\n//       onmaximum: () => {},\n//       onclose: () => {\n//         console.warn('TradingView feed: WebSocket data closed.');\n//       },\n//       onerror: err => {\n//         console.error('TradingView feed: WebSocket error:', err);\n//       },\n//     }));\n//   };\n\n//   // ### unsubscribeBars(subscriberUID)\n//   // `subscriberUID`: object\n//   // Charting Library calls this function when it doesn't want to receive updates for\n//   // this subscriber any more. `subscriberUID` will be the same object that Library passed\n//   // to `subscribeBars` before.\n//   unsubscribeBars = (uid) => {\n//     const socket = this.sockets.get(uid);\n//     if (!socket) {\n//       console.warn('TradingView feed: unsubscribeBars called but socket not found.');\n//       return;\n//     }\n//     socket.close(1e3, 'Requested by TradingView');\n//   };\n\n//   // ### calculateHistoryDepth(resolution, resolutionBack, intervalBack)\n//   // *Optional.*\n//   // `resolution`: requested symbol resolution\n//   // `resolutionBack`: time period types. Supported values are: `D` | `M`\n//   // `intervalBack`: amount of `resolutionBack` periods that the Charting Library is\n//   // going to request\n//   // calculateHistoryDepth = (resolution, resolutionBack, intervalBack) => ({\n//   //   resolutionBack,\n//   //   // 1000 bars hard limit on the API.\n//   //   intervalBack: intervalBack > 1000 ? 999 : intervalBack,\n//   // });\n\n//   // ### getServerTime(callback)\n//   // This function is called if the configuration flag `supports_time` is set to `true` when\n//   // the Charting Library needs to know the server time.\n//   // `callback`: function(unixTime)\n//   getServerTime = async (callback) => {\n//     const uri = `${this.baseUri}${SERVERTIME_API_PATH}`;\n//     try {\n//       const res = await makeApiRequest(uri);\n//       const unixTime = res.serverTime;\n//       const secs = Math.floor(parseInt(unixTime, 10) / 1000);\n//       callback(secs);\n//     } catch (err) {\n//       callback(Date.now());\n//       console.error('TradingView feed: getServerTime called but there was an error!');\n//     }\n//   };\n\n//   // ### calculateHistoryDepth(resolution, resolutionBack, intervalBack)\n//   // *Optional.*\n//   // ...\n\n//   // ### getMarks(symbolInfo, startDate, endDate, onDataCallback, resolution)\n//   // *Optional.*\n\n//   // ### getTimescaleMarks(symbolInfo, startDate, endDate, onDataCallback, resolution)\n//   // *Optional.*\n// }\n\n// export const generateTradingViewConfig = ({\n//   containerId,\n//   symbol,\n//   symbols,\n//   interval,\n//   locale,\n//   theme,\n// }) => {\n//   let timezone = EXCHANGE_TIMEZONE;\n//   // try to use local timezone, if api is available\n//   try {\n//     timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n//   } catch (err) {\n//     // fallback to EXCHANGE_TIMEZONE\n//   }\n//   return ({ // eslint-disable-line\n//     timezone, // user's browser timezone\n//     autosize: true,\n//     container_id: containerId,\n//     datafeed: new DataFeed(symbols),\n//     debug: !!__DEV__,\n//     enabled_features: [\n//       'dont_show_boolean_study_arguments',\n//       'hide_last_na_study_output',\n//     ],\n//     disabled_features: [\n//       'header_widget',\n//       'header_symbol_search',\n//       'symbol_info',\n//       'header_compare',\n//       // 'use_localstorage_for_settings',\n//       // 'save_chart_properties_to_local_storage',\n//       'header_chart_type',\n//       'display_market_status',\n//       'symbol_search_hot_key',\n//       'compare_symbol',\n//       'border_around_the_chart',\n//       'remove_library_container_border',\n//       'symbol_info',\n//       'header_interval_dialog_button',\n//       'show_interval_dialog_on_key_press',\n//       'volume_force_overlay',\n//     ],\n//     interval,\n//     library_path: `/static/tradingview/${SITE === 'cn' ? 'cn/' : ''}charting_library/`,\n//     custom_css_url: theme.tradingViewCssPath,\n//     locale: getTradingViewLocale(locale) || 'en',\n//     overrides: theme.tradingViewOverrides || {}, // doesn't always work, see below\n//     studies_overrides: {\n//       // 'volume.show ma': false,\n//       'volume.volume.color.0': theme.tradingViewStyle.shortFill,\n//       'volume.volume.color.1': theme.tradingViewStyle.longFill,\n//       'Moving Average.precision': 8,\n//       'Moving Average Exponential.precision': 8,\n      \n//       // 'volume.volume ma.linewidth': 1,\n//       // 'volume.volume ma.color': theme.tradingViewStyle.maLine, // orange\n//       // 'volume.volume ma.plottype': 'area', // orange\n//       // 'volume.volume.transparency': 70,\n//     },\n\n//     style: '1',\n//     symbol,\n//     theme: 'Light',\n//     toolbar_bg: 'rgba(255, 255, 255, 1)', // white\n//     time_frames: [],\n//   });\n// };\n\n// export default {\n//   translateResolutionForBinance,\n//   translateResolutionForTV,\n//   DataFeed,\n// };\n","import _ from 'lodash';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Table, Dropdown, Menu, Icon } from 'antd'\nimport utils from 'utils'\nimport { Svg } from 'components'\nimport Chart from 'bizcharts/lib/components/Chart';\nimport Geom from 'bizcharts/lib/components/Geom';\nimport Axis from 'bizcharts/lib/components/Axis';\nimport Tooltip from 'bizcharts/lib/components/Tooltip';\nimport Legend from 'bizcharts/lib/components/Legend';\n\nconst mapStateToProps = ({ markets, depth, trade, rate }) => {\n  return {\n    markets,\n    depth,\n  };\n};\n\nconst mapDispatchToProps = ({ depth, placeOrder }) => {\n  return {\n  };\n};\n\n@connect(mapStateToProps, mapDispatchToProps)\nexport class DepthChartContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    let { asks, bids } = this.props.depth\n    let data = [ ...asks, ...bids ]\n    if (data.length === 0) return <></>\n\n    data = _.chain(data)\n      .reverse(data)\n      // .map(item => {\n      //   item.price = Number(item.price)\n      //   return item\n      // })\n      .value()\n    // let min = Number(data[0].price)\n    // let max = Number(data[data.length - 1].price)\n    return (\n      <Box height={this.props.height} >\n        <Chart height={this.props.height} data={data} forceFit scale={{\n          price: {\n            type: 'cat',\n            // type: 'linear',\n            // https://bizcharts.net/product/bizcharts/category/7/page/35#linear\n            // 深度有个特别大的值，如果是线性linear，会把整个图标都变成红色，绿色只占一丝。\n            // min,\n            // max,\n            // ticks: _.range(min, max, (max - min) / 8)\n            // tickCount最好，动态的展示正好 8 个。之所以不均匀，是因为价格本身不均匀\n            alias: '委托价',\n            tickCount: 8\n          },\n          sumVolume: {\n            // type: 'linear',\n            alias: '累计'\n          }\n        }}>\n          <Axis name=\"price\"\n            label={{\n              formatter: val => {\n                // return (val / 1000).toFixed(3) + \"k\";\n                return Number(val).toFixed(8)\n              }\n            }}\n          />\n          <Axis name=\"sumVolume\" grid={null}\n            // position='right'\n            label={{\n              formatter: val => {\n                // return (val / 1000).toFixed(3) + \"k\";\n                return val\n              }\n            }}\n          />\n          {/* <Legend /> */}\n          <Tooltip showTitle={false} />\n          <Geom type=\"area\" position=\"price*sumVolume\"\n            color={['type', ['rgba(80, 190, 140, 0.3)', 'rgba(240, 80, 90, 0.3)']]}\n            tooltip={['price', (price)=>{ // array\n              return {\n                name: '委托价',\n                value: price\n              }\n            }]}\n          />\n          <Geom type=\"line\" position=\"price*sumVolume\" size={2}\n            color={['type', ['rgba(80, 190, 140, 1)', 'rgba(240, 80, 90, 1)']]}\n            tooltip={['sumVolume', (sumVolume)=>{ // array\n              return {\n                name: '累计',\n                value: sumVolume\n              }\n            }]}\n          />\n        </Chart>\n      </Box>\n    )\n  }\n}\n\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport numeral from 'numeral'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport styled from '@emotion/styled'\nimport { Pair } from 'widgets'\nimport { TVChartContainer } from './TVChartContainer';\nimport { DepthChartContainer } from './DepthChartContainer';\nimport { Dropdown, Icon, Menu } from 'antd'\nimport utils, { renderIf } from 'utils'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport fullscreenIcon from 'icons/fullscreen.svg'\n\nconst units = ['USD', 'CNY']\nconst views = {\n  DEPTH_VIEW: 0,\n  TRADING_VIEW: 1\n}\n\n// https://emotion.sh/docs/styled#object-styles\nconst ViewTypeButton = styled(Text)(\n  {\n    border: '1px solid',\n    cursor: 'pointer',\n  },\n  props => ({\n    background: `${props.active ? '#1890ff' : ''}`,\n    color: `${props.active ? 'white' : '#1890ff'}`,\n    borderColor: `${props.active ? '#1890ff' : '#1890ff'}`,\n    borderTopLeftRadius: `${props.left ? 2 : 0}px`,\n    borderBottomLeftRadius: `${props.left ? 2 : 0}px`,\n    borderTopRightRadius: `${props.right ? 2 : 0}px`,\n    borderBottomRightRadius: `${props.right ? 2 : 0}px`,\n    borderLeftWidth: `${props.right ? 0 : 1}px`,\n    borderRightWidth: `${props.left ? 0 : 1}px`,\n  })\n)\n\nconst IntervalButton = styled(Text)(\n  {\n    width: '44px',\n    height: '18px',\n    marginRight: '3px',\n    fontSize: '12px',\n    lineHeight: '18px',\n    background: 'rgba(255,255,255,0.08)',\n    cursor: 'pointer',\n    borderRadius: '1px',\n    textAlign: 'center'\n  },\n  props => ({\n    color: `${props.active ? '#0064FF' : '#78788C'}`,\n  })\n)\n\nclass TVChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      unit: 'USD',\n      pairVisible: false,\n      selectedView: views.TRADING_VIEW,\n\n      lineType: 'Candle',\n      interval: ENUM_INTERVAL_TYPE.HOUR_1.getValue(),\n      fullScreen: false,\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  renderUnits () {\n    return (\n      <Menu onClick={({key}) => {\n        console.info(key)\n        this.setState({unit: key})\n      }}>\n      {\n        units.map((unit) => (\n          <Menu.Item key={unit}>\n            <Text fontSize={[0, 0, 0]} color='hint'>{ unit }</Text>\n          </Menu.Item>\n        ))\n      }\n      </Menu>\n    )\n  }\n\n  renderPairs () {\n    return (\n      <Box bg=\"background\" sx={{\n          border: '3px solid black'\n        }}\n        onClick={e => e.preventDefault()}\n        // onClick={() => this.setState({ pairVisible: true })}\n      >\n        <Pair width={590} height={355} />\n      </Box>\n    )\n  }\n\n  renderTvOps () {\n    let { selectedView, fullScreen } = this.state\n\n    let invetvalMapping = [\n      { label: '1分钟', value: ENUM_INTERVAL_TYPE.MIN_1, },\n      { label: '5分钟', value: ENUM_INTERVAL_TYPE.MIN_5, },\n      { label: '15分钟', value: ENUM_INTERVAL_TYPE.MIN_15, },\n      { label: '30分钟', value: ENUM_INTERVAL_TYPE.MIN_30, },\n      { label: '1小时', value: ENUM_INTERVAL_TYPE.HOUR_1, },\n      { label: '2小时', value: ENUM_INTERVAL_TYPE.HOUR_2, },\n      { label: '4小时', value: ENUM_INTERVAL_TYPE.HOUR_4, },\n      { label: '12小时', value: ENUM_INTERVAL_TYPE.HOUR_12, },\n      { label: '1日', value: ENUM_INTERVAL_TYPE.DAY_1, },\n      { label: '1周', value: ENUM_INTERVAL_TYPE.WEEK_1, },\n    ]\n    return (\n      <Flex height={30} px={12} bg='background' alignItems=\"center\" justifyContent=\"space-between\">\n        {\n          renderIf(selectedView === views.TRADING_VIEW) (\n            <Flex alignItems=\"center\" justifyContent=\"space-between\" >\n              <IntervalButton\n                active={this.state.lineType === 'Line'}\n                onClick={() => this.setState({\n                  lineType: 'Line'\n                })}\n              >\n                分时\n              </IntervalButton>\n              {\n                _.map(invetvalMapping, item => {\n                  let { lineType, interval } = this.state\n                  let itemInterval = item.value.getValue()\n                  return (\n                    <IntervalButton key={item.label}\n                      active={lineType === 'Candle' && interval === itemInterval}\n                      onClick={() => {\n                        const interval = item.value.getValue()\n                        this.setState({\n                          interval,\n                          lineType: 'Candle'\n                        }, () => {\n                          // if (!window.localStorage) return;\n                          // window.localStorage.setItem('bn.lineType', type);\n                          // window.localStorage.setItem('bn.interval', interval);\n                          // window.localStorage.setItem('bn.intervalName', intervalName);\n                        });\n                      }}\n                    >\n                      {item.label}\n                    </IntervalButton>\n                  )\n                })\n              }\n              <Box mx={12} sx={{\n                width:'0px',\n                height: '16px',\n                borderRight: '1px solid rgba(50,55,75,1)'\n              }}></Box>\n              <Box mr={2} lineHeight={'12px'} sx={{\n                  cursor: 'pointer',\n                }}\n                onClick={() => this.setState({\n                  fullScreen: !this.state.fullScreen\n                })}\n              >\n                <Image width={12} height={12} lineHeight={'12px'} src={fullscreenIcon} />\n              </Box>\n            </Flex>\n          )\n        }\n        <Box></Box>\n        {\n          renderIf(!fullScreen)(\n            <Flex alignItems=\"center\" justifyContent=\"space-between\" >\n              <ViewTypeButton px={1} left\n                active={selectedView === views.TRADING_VIEW}\n                onClick={() => this.setState({selectedView: views.TRADING_VIEW})}\n              >\n                TradingView\n              </ViewTypeButton>\n              <ViewTypeButton px={1} right\n                active={selectedView === views.DEPTH_VIEW}\n                onClick={() => this.setState({selectedView: views.DEPTH_VIEW})}\n              >\n                深度图\n              </ViewTypeButton>\n            </Flex>\n          )\n        }\n      </Flex>\n    )\n  }\n\n  render() {\n    let { markets: { currentMarket }, candleStick: { dayInfo }, rate, fetchCurrentMarkets } = this.props\n\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, market, latest, variation } = currentMarket\n    return (\n      <Box {...this.props}>\n        <Flex height={50} px={12} py={'5px'} justifyContent=\"space-between\">\n          <Box pr={15}>\n            <Dropdown \n              visible={this.state.pairVisible}\n              onVisibleChange={flag => {\n                this.setState({ pairVisible: flag })\n                if (flag === true) {\n                  fetchCurrentMarkets()\n                }\n              }}\n              overlay={this.renderPairs()} trigger={['click']} placement=\"bottomCenter\">\n              <Flex onClick={e => e.preventDefault()} mt={'4px'} sx={{cursor: 'pointer'}}>\n                <Text mr={'2px'} fontSize={16} lineHeight={'18px'} fontWeight={600}>\n                  {baseToken}/{quoteToken}\n                </Text>\n                <Icon type=\"caret-down\" style={{fontSize: '18px'}} />\n              </Flex>\n            </Dropdown>\n            <Flex color={variation >= 0 ? 'success' : 'failure'} mt={'0px'} alignItems=\"center\" fontWeight={500}>\n              <Text fontSize={14}>{latest}</Text>\n              <Text width=\"60px\" ml={'10px'} fontSize={14}>{numeral(variation).format('+0.00%')}</Text>\n            </Flex>\n          </Box>\n          <Box px={15}>\n            <Dropdown overlay={this.renderUnits()} placement=\"bottomCenter\" overlayClassName=\"nav-menu\">\n              <Flex mt={'3px'} alignItems=\"center\">\n                <Text color='#646478' mr={'5px'}>计价单位:</Text>\n                <Text mr={'5px'}>{this.state.unit}</Text>\n                <Icon type=\"caret-down\" />\n              </Flex>\n            </Dropdown>\n            <Text mt={'2px'} color='#FFFFFF'>{utils.asLegalMoney(latest, quoteToken, this.state.unit)}</Text>\n          </Box>\n          <Box px={15}>\n            <Text color='#646478' mt={'3px'} mr={'5px'}>24H最高价</Text>\n            <Text color='#FFFFFF' mt={'2px'}>{dayInfo.high}</Text>\n          </Box>\n          <Box px={15}>\n            <Text color='#646478' mt={'3px'} mr={'5px'}>24H最低价</Text>\n            <Text color='#FFFFFF' mt={'2px'}>{dayInfo.low}</Text>\n          </Box>\n          <Box px={15}>\n            <Text color='#646478' mt={'3px'} mr={'5px'}>24H交易量</Text>\n            <Text color='#FFFFFF' mt={'2px'}>{dayInfo.size}</Text>\n          </Box>\n          <Box flex={1}></Box>\n        </Flex>\n\n        <Box sx={this.state.fullScreen ? {\n          position: 'fixed',\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          zIndex: 1\n        } : {}}>\n          { this.renderTvOps() }\n          {\n            renderIf(this.state.selectedView === views.TRADING_VIEW)(\n              <TVChartContainer style={{height: `calc(${this.props.height}px - 50px - 30px)`}}\n                symbol={market}\n                lineType={this.state.lineType}\n                interval={this.state.interval}\n                visible={this.state.selectedView === views.TRADING_VIEW}\n                fullScreen={this.state.fullScreen}\n              />\n            )\n          }\n          {\n            renderIf(this.state.selectedView === views.DEPTH_VIEW)(\n              <DepthChartContainer style={{height: `calc(${this.props.height}px - 50px - 30px)`}}\n                symbol={market}\n                visible={this.state.selectedView === views.DEPTH_VIEW}\n                fullScreen={this.state.fullScreen}\n              />\n            )\n          }\n        </Box>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ markets, trade, candleStick, rate }) => {\n  return {\n    markets,\n    trade,\n    candleStick,\n    rate\n  };\n};\n\nconst mapDispatchToProps = ({ markets }) => {\n  return {\n    fetchCurrentMarkets: markets.fetchCurrentMarkets\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TVChart);","import _ from 'lodash'\nimport React from 'react';\nimport numeral from 'numeral'\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Tooltip, Icon, Popover } from 'antd';\nimport { TabNav, CoinInput, BillPreCheck } from './Common'\nimport { TransferModal } from 'widgets/Dialog'\nimport utils, { notification } from 'utils'\nconst BigNumber = require('bignumber.js');\n\nconst tabs = [\n  { text: '限价', value: 'limitPrice' },\n  // { text: '市价', value: 'marketPrice' },\n]\nconst percentPositins = [ 0.25, 0.5, 0.75, 1 ]\nclass PlaceOrder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: tabs[0].value\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  renderLimitBuyArea (min, available) {\n    let { markets, rate } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n    let { placeOrder: { buyPrice, buyAmount, buyTotal }, updatePlaceOrder, placeBuyOrder } = this.props\n    let signined = utils.checkLogined()\n\n    let error = null\n    if (buyTotal) {\n      min = Number(min)\n      available = Number(available)\n      // 不能给buyTotal直接赋值，会导致无法再输入小数点。\n      // buyTotal = Number(buyTotal)\n      let total = Number(buyTotal)\n      if (total < min) {\n        error = `交易额不能小于${min}${quoteToken}`\n      } else if (total > available) {\n        error = `可用余额(${available} ${quoteToken})不足`\n      }\n    }\n\n    return (\n      <Flex flexDirection=\"column\" flex={1} px={13} pb={10} pt={'3px'}>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>单价</Text>\n          <CoinInput\n            precision={pricePrecision}\n            value={buyPrice}\n            approximate={`$ ${utils.asLegalMoney(buyPrice, quoteToken, 'USD')}`}\n            onChange={e => {\n              let price = e.target.value\n              let buyTotal = (new BigNumber(buyAmount || 0)).times(new BigNumber(price || 0))\n              updatePlaceOrder({\n                // 不能用 price，会导致输入框的 0 不能删除。\n                buyPrice: price,\n                buyTotal: buyTotal.toFixed(totalPrecision)\n              })\n            }}\n            unit={quoteToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>数量</Text>\n          <CoinInput\n            precision={amountPrecision}\n            value={buyAmount}\n            onChange={e => {\n              let amount = e.target.value\n              let total = (new BigNumber(amount || 0)).times(new BigNumber(buyPrice || 0))\n              updatePlaceOrder({\n                // 不能用 value，会导致输入框的 0 不能删除。\n                buyAmount: amount,\n                buyTotal: total.toFixed(totalPrecision),\n              })\n            }}\n            unit={baseToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>总额</Text>\n          <CoinInput\n            precision={totalPrecision}\n            error={error}\n            approximate={`$ ${utils.asLegalMoney(buyTotal, quoteToken, 'USD')}`}\n            unit={quoteToken}\n            value={buyTotal}\n            onChange={e => {\n              let total = e.target.value\n              let amount = buyPrice ? (new BigNumber(total || 0) / new BigNumber(buyPrice)) : 0\n              updatePlaceOrder({\n                buyAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n                // 不能用 total，会导致输入框的 0 不能删除。\n                buyTotal: total\n              })\n            }}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex variant=\"flexCenter\" mt={11} ml={35} justifyContent=\"space-between\" >\n        {\n          percentPositins.map(percent => (\n            <Text key={percent} width={'23%'} height={22} lineHeight={'22px'}\n              sx={{\n                bg: 'rgba(255, 255, 255, 0.05)',\n                color:\"hint\",\n                cursor: 'pointer',\n                textAlign: 'center',\n                borderRadius: '2px'\n              }}\n              onClick={() => {\n                let total = available * percent\n                let amount = buyPrice ? (new BigNumber(total || 0) / new BigNumber(buyPrice)) : 0\n                updatePlaceOrder({\n                  buyAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n                  // 不能用 total，会导致输入框的 0 不能删除。\n                  buyTotal: total >= available ? _.floor(total, totalPrecision) : _.ceil(total, totalPrecision),\n                })\n              }}\n            >\n              {numeral(percent).format('0%')}\n            </Text>\n          ))\n        }\n        </Flex>\n        <BillPreCheck disabled={buyTotal && !!error} onSuccess={() => {\n          placeBuyOrder()\n        }} depth={1}>\n          {/* <Popover content={error} trigger={error ? \"hover\" : '' }> */}\n            <Box mt={11} ml={35} height={30} bg=\"success\" sx={{\n                borderRadius: '3px',\n                cursor: 'pointer'\n              }}\n              textAlign=\"center\" lineHeight=\"30px\" fontSize={2} fontWeight=\"bold\">\n              {signined ? `买入${baseToken}` : '登录后交易'}\n            </Box>\n          {/* </Popover> */}\n        </BillPreCheck>\n      </Flex>\n    )\n  }\n\n  renderLimitSaleArea (min, available) {\n    let { markets, rate } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n    let { placeOrder: { sellPrice, sellAmount, sellTotal }, updatePlaceOrder, placeSellOrder } = this.props\n    let signined = utils.checkLogined()\n\n    let error = null\n    if (sellAmount) {\n      min = Number(min)\n      available = Number(available)\n      // 不能给 sellAmount 直接赋值，会导致无法再输入小数点。\n      // sellAmount = Number(sellAmount)\n      let amount = Number(sellAmount)\n      if (amount < min) {\n        error = `交易数量不能小于${min}${baseToken}`\n      } else if (amount > available) {\n        error = `可用余额(${available} ${baseToken})不足`\n      }\n    }\n\n    return (\n      <Flex flexDirection=\"column\" flex={1} px={13} pb={10} pt={'3px'}>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>单价</Text>\n          <CoinInput\n            precision={pricePrecision}\n            value={sellPrice}\n            approximate={`$ ${utils.asLegalMoney(sellPrice, quoteToken, 'USD')}`}\n            onChange={e => {\n              let price = e.target.value\n              let sellTotal = (new BigNumber(sellAmount || 0)).times(new BigNumber(price || 0))\n              updatePlaceOrder({\n                // 不能用 price，会导致输入框的 0 不能删除。\n                sellPrice: price,\n                sellTotal: sellTotal.toFixed(totalPrecision)\n              })\n            }}\n            unit={quoteToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>数量</Text>\n          <CoinInput\n            precision={amountPrecision}\n            error={error}\n            value={sellAmount}\n            onChange={e => {\n              let amount = e.target.value\n              let total = (new BigNumber(amount || 0)).times(new BigNumber(sellPrice || 0))\n              updatePlaceOrder({\n                // 不能用 amount，会导致输入框的 0 不能删除。\n                sellAmount: amount,\n                sellTotal: total.toFixed(totalPrecision),\n              })\n            }}\n            unit={baseToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={40}>总额</Text>\n          <CoinInput\n            precision={totalPrecision}\n            approximate={`$ ${utils.asLegalMoney(sellTotal, quoteToken, 'USD')}`}\n            unit={quoteToken}\n            value={sellTotal}\n            onChange={e => {\n              let total = e.target.value\n              let amount = sellPrice ? (new BigNumber(total || 0) / new BigNumber(sellPrice)) : 0\n              updatePlaceOrder({\n                sellAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n                // 不能用 total，会导致输入框的 0 不能删除。\n                sellTotal: total\n              })\n            }}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex variant=\"flexCenter\" mt={11} ml={35} justifyContent=\"space-between\" >\n        {\n          percentPositins.map(percent => (\n            <Text key={percent} width={'23%'} height={22} lineHeight={'22px'}\n              sx={{\n                bg: 'rgba(255, 255, 255, 0.05)',\n                color:\"hint\",\n                cursor: 'pointer',\n                textAlign: 'center',\n                borderRadius: '2px'\n              }}\n              onClick={() => {\n                let amount = available * percent\n                let total = (new BigNumber(amount || 0)).times(new BigNumber(sellPrice || 0))\n                updatePlaceOrder({\n                  // 不能用 amount，会导致输入框的 0 不能删除。\n                  sellAmount: _.floor(amount, amountPrecision),\n                  sellTotal: total.toFixed(totalPrecision),\n                })\n              }}\n            >\n            {numeral(percent).format('0%')}\n            </Text>\n          ))\n        }\n        </Flex>\n        <BillPreCheck disabled={sellAmount && !!error} onSuccess={() => placeSellOrder()} depth={1}>\n          {/* <Popover content={error} trigger={error ? \"hover\" : '' }> */}\n            <Box mt={11} ml={35} height={30} bg=\"failure\" sx={{\n                borderRadius: '3px',\n                cursor: 'pointer'\n              }}\n              textAlign=\"center\" lineHeight=\"30px\" fontSize={2} fontWeight=\"bold\">\n              {signined ? `卖出${baseToken}` : '登录后交易'}\n            </Box>\n          {/* </Popover> */}\n        </BillPreCheck>\n      </Flex>\n    )\n  }\n\n  renderMarketBuyArea (available) {\n    let { markets, depth, currentPrecision } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken } = currentMarket\n    let { placeOrder: { marketBuyTotal }, updatePlaceOrder, placeBuyOrder } = this.props\n\n    return (\n      <Flex flexDirection=\"column\" flex={1} px={13} pb={10} pt={'3px'}>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={50}>买入价</Text>\n          <CoinInput\n            disabled={true}\n            value={'以市价上最优价格买入'}\n            unit={quoteToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={50}>交易额</Text>\n          <CoinInput\n            approximate={`$ 0.0`}\n            value={marketBuyTotal}\n            onChange={e => updatePlaceOrder({marketBuyTotal: e.target.value})}\n            unit={quoteToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex variant=\"flexCenter\" mt={9} ml={40} >\n        {\n          percentPositins.map(percent => (\n            <Flex key={percent} height={18} variant=\"flexCenter\" lineHeight={'18px'} px={'6px'} py={'2px'}\n              sx={{\n                // background: '#141e32',\n                // borderRadius: '2px',\n                color:\"hint\",\n                cursor: 'pointer'\n              }}\n              onClick={() => {\n                let marketBuyTotal = (available * percent).toFixed(6)\n                updatePlaceOrder({ marketBuyTotal })\n              }}\n            >\n            {numeral(percent).format('0%')}\n            </Flex>\n          ))\n        }\n        </Flex>\n        <BillPreCheck onSuccess={() => placeBuyOrder()} depth={1}>\n          <Box mt={9} ml={40} height={34} bg=\"success\" sx={{\n              borderRadius: '3px',\n              cursor: 'pointer'\n            }}\n            textAlign=\"center\" lineHeight=\"34px\" fontSize={2} fontWeight=\"bold\">\n            买入{baseToken}\n          </Box>\n        </BillPreCheck>\n      </Flex>\n    )\n  }\n\n  renderMarketSaleArea (available) {\n    let { markets, depth, currentPrecision } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken } = currentMarket\n    let { placeOrder: { marketSellAmount }, updatePlaceOrder, placeSellOrder } = this.props\n\n    return (\n      <Flex flexDirection=\"column\" flex={1} px={13} pb={10} pt={'3px'}>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={50}>卖出价</Text>\n          <CoinInput\n            disabled={true}\n            value={'以市价上最优价格卖出'}\n            onChange={e => updatePlaceOrder({sellPrice: e.target.value})}\n            unit={quoteToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex mt={'8px'} alignItems=\"center\">\n          <Text color=\"hint\" width={50}>卖出量</Text>\n          <CoinInput\n            value={marketSellAmount}\n            onChange={e => updatePlaceOrder({marketSellAmount: e.target.value})}\n            unit={baseToken}\n          >\n          </CoinInput>\n        </Flex>\n        <Flex variant=\"flexCenter\" mt={9} ml={40} >\n        {\n          percentPositins.map(percent => (\n            <Text key={percent} height={18} lineHeight={'18px'}\n              sx={{\n                color:\"hint\",\n                cursor: 'pointer'\n              }}\n              onClick={() => {\n                let marketSellAmount = (available * percent).toFixed(6)\n                updatePlaceOrder({ marketSellAmount })\n              }}\n            >\n            {numeral(percent).format('0%')}\n            </Text>\n          ))\n        }\n        </Flex>\n        <BillPreCheck onSuccess={() => placeSellOrder()} depth={1}>\n          <Box mt={9} ml={40} height={34} bg=\"failure\" sx={{\n              borderRadius: '3px',\n              cursor: 'pointer'\n            }}\n            textAlign=\"center\" lineHeight=\"34px\" fontSize={2} fontWeight=\"bold\">\n            卖出{baseToken}\n          </Box>\n        </BillPreCheck>\n      </Flex>\n    )\n  }\n\n  getMinTradeValue (symbol) {\n    let mapping = {\n      'USDT': 2,\n      'LRC': 100,\n      'ETH': 0.01,\n      'DKEY': 10,\n    }\n    return mapping[symbol] || 0\n  }\n\n  render() {\n    let { markets: { currentMarket }, balance: { list: balances }, dexAccount: { passwordHash } } = this.props\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken } = currentMarket\n    let baseBalance = _.find(balances, balance => balance.token.symbol === baseToken)\n    let quoteBalance = _.find(balances, balance => balance.token.symbol === quoteToken)\n    let availBase = baseBalance ? baseBalance.availAmount : 0\n    let availQuote = quoteBalance ? quoteBalance.availAmount : 0\n    return (\n      <Box>\n        <TabNav tabs={tabs} onChange={tab => this.setState({activeTab: tab.value})}>\n          <Box flex={1}></Box>\n          <Text color=\"hint\">可用 {baseToken}: {availBase}</Text>\n          <Text color=\"hint\" ml={20}>可用 {quoteToken}: {availQuote}</Text>\n          <Text mx={15} color=\"blue\" onClick={() => {\n            if (!passwordHash) {\n              notification.info({ message: '请先登录' })\n              return\n            }\n            TransferModal()\n          }}\n            sx={{ cursor: 'pointer' }}\n          >\n            划转资金\n          </Text>\n        </TabNav>\n        {\n          utils.renderIf(this.state.activeTab === 'limitPrice')(\n            <Flex bg=\"backgroundTint\" height={203}>\n              {this.renderLimitBuyArea(this.getMinTradeValue(quoteToken), availQuote)}\n              {this.renderLimitSaleArea(this.getMinTradeValue(baseToken), availBase)}\n            </Flex>\n          )\n        }\n        {\n          utils.renderIf(this.state.activeTab === 'marketPrice')(\n            <Flex bg=\"backgroundTint\" height={203}>\n              {this.renderMarketBuyArea(availQuote)}\n              {this.renderMarketSaleArea(availBase)}\n            </Flex>\n          )\n        }\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ placeOrder, markets, balance, dexAccount, rate }) => {\n  return {\n    placeOrder,\n    markets,\n    balance,\n    dexAccount,\n    rate\n  };\n};\n\nconst mapDispatchToProps = ({ placeOrder }) => {\n  return {\n    placeBuyOrder: placeOrder.placeBuyOrder,\n    placeSellOrder: placeOrder.placeSellOrder,\n    updatePlaceOrder: placeOrder.update\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PlaceOrder);","import _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport numeral from 'numeral'\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Table, Tooltip, Divider, Checkbox, Menu, Dropdown, Icon } from 'antd';\nimport { TabNav, CoinInput, BillPreCheck } from './Common'\nimport { TransferModal } from 'widgets/Dialog'\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nimport utils, { notification } from 'utils'\nimport { Spin } from 'components'\n\nconst BigNumber = require('bignumber.js');\n\nconst tabs = [\n  { text: '当前委托', value: 'current' },\n  { text: '历史委托', value: 'history' },\n]\n\nclass MyOrder extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n  }\n\n  onTabChange (tab) {\n    this.props.updateFilterCond({\n      type: tab.value,\n      page: 1,\n      pageSize: 50\n    })\n    this.props.fetchOrders()\n  }\n\n  onChangeShowAll (e) {\n    // 避免 onchange 事件进一步冒泡到 tab 的同名事件。\n    e.stopPropagation()\n    this.props.updateFilterCond({\n      allMarket: e.target.checked,\n      page: 1,\n      pageSize: 50\n    })\n    this.props.fetchOrders()\n  }\n\n  render() {\n    let { order, cancelAnOrders, cancelAllOrders } = this.props\n\n    const filters = [\n      { text: '所有状态', value: 'ALL' },\n      { text: '已成交', value: 'PROCESSED' },\n      { text: '已撤销', value: 'CANCELLED' },\n    ]\n\n    let columns = [\n      {\n        align: 'left',\n        title: `时间`,\n        dataIndex: 'createdAt',\n        width: 120,\n        render: (unused, row) => {\n          return (<Text>{moment(row.createdAt).format('MM-DD HH:mm')}</Text>)\n        }\n      },\n      {\n        align: 'left',\n        title: `交易对`,\n        dataIndex: 'market',\n        width: 100,\n        render: (market, row) => {\n          let [baseSymbol, quoteSymbol] = market.split('-')\n          return (<Flex>{baseSymbol}<Text color=\"hint\">/{quoteSymbol}</Text></Flex>)\n        }\n      },\n      {\n        align: 'center',\n        title: '方向',\n        dataIndex: 'side',\n        width: 30,\n        render: (unused, row) => {\n          return (<Text color={row.side === 'BUY' ? \"success\" : \"failure\"}>{row.side === 'BUY' ? \"买入\" : \"卖出\"}</Text>)\n        }\n      },\n      {\n        align: 'right',\n        title: `价格`,\n        dataIndex: 'price',\n        width: 120,\n        render: price => (\n          <Text>{price}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: `数量`,\n        dataIndex: 'size',\n        width: 120,\n        render: size => (\n          <Text>{size}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: `成交金额`,\n        dataIndex: 'filledVolume',\n        width: 120,\n        render: filledVolume => (\n          <Text>{filledVolume}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: `已成交`,\n        dataIndex: 'filledSize',\n        width: 155,\n        render: (filledSize, row) => (\n          <Flex alignItems=\"center\" justifyContent=\"flex-end\">\n            <Text mr={'4px'}>{filledSize}</Text>\n            <Divider style={{position: 'unset', background: '#646478', margin: '0 2px'}} type=\"vertical\" />\n            <Text width={34} >{row.filled}</Text>\n          </Flex>\n        )\n      },\n    ];\n\n    if (order.cond.type === 'current') {\n      columns.push({\n        align: 'right',\n        title: `操作`,\n        dataIndex: '',\n        key: 'ops',\n        width: 80,\n        render: (unused, row) => (\n          <Text color=\"blue\" sx={{ cursor: 'pointer' }} onClick={async () => {\n            await cancelAnOrders(row)\n            notification['success']({\n              duration: 5,\n              message: '取消成功'\n            })\n          }}>撤销</Text>\n        )\n      })\n    } else {\n      columns.push({\n        align: 'right',\n        title: `状态`,\n        dataIndex: 'status',\n        key: 'ops',\n        width: 80,\n        render: (status, row) => (\n          <Text>{ENUM_ORDER_STATUS.toText(status)}</Text>\n        )\n      })\n    }\n\n    return (\n      <Flex {...this.props} flexDirection=\"column\">\n        <TabNav tabs={tabs} onChange={tab => this.onTabChange(tab)}>\n          <Box flex={1}></Box>\n          <Checkbox onChange={e => this.onChangeShowAll(e)} className=\"all-paire-type\">显示所有币种</Checkbox>\n          {\n            utils.renderIf(order.cond.type === 'current')(\n              <Text width={`100px`} px={10} textAlign=\"right\" color=\"blue\" onClick={() => cancelAllOrders()}\n                sx={{ cursor: 'pointer' }}\n              >\n                撤销最新10条\n              </Text>\n            )\n          }\n          {\n            utils.renderIf(order.cond.type === 'history')(\n              <Dropdown overlay={\n                  <Menu onClick={({key: index}) => {\n                    let historyStatus = filters[index].value\n                    this.props.updateFilterCond({\n                      historyStatus,\n                      page: 1,\n                      pageSize: 50\n                    })\n                    this.props.fetchOrders()\n                  }}>\n                  {\n                    filters.map((menu, index) => (\n                      <Menu.Item key={index}>\n                        <Text fontSize={[0, 0, 0]} color='hint'>{ menu.text }</Text>\n                      </Menu.Item>\n                    ))\n                  }\n                  </Menu>\n                }\n                placement=\"bottomCenter\" overlayClassName=\"nav-menu\"\n              >\n                <Flex width={`100px`} px={10} justifyContent=\"flex-end\" height={40} lineHeight={'40px'} alignItems=\"center\">\n                  {_.find(filters, {value: order.cond.historyStatus}).text}<Icon type=\"caret-down\" />\n                </Flex>\n              </Dropdown>\n            )\n          }\n        </TabNav>\n        <Flex bg=\"backgroundTint\" px={15} flex={1}>\n          <Spin spinning={order.loading}>\n            <Table rowKey=\"hash\" columns={columns} dataSource={order.list} align=\"right\"\n              style={{flex: 1}}\n              tableLayout=\"auto\"\n              className=\"exchange-table\"\n              pagination={false}\n              scroll={{ y: this.props.height - 70 }}\n              // height={this.props.height - 50}\n              locale={{emptyText: '暂无数据'}}\n            />\n          </Spin>\n        </Flex>\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = ({ order }) => {\n  return {\n    order,\n  };\n};\n\nconst mapDispatchToProps = ({ order }) => {\n  return {\n    updateFilterCond: order.updateFilterCond,\n    fetchOrders: order.fetchOrders,\n    cancelAnOrders: order.cancelAnOrders,\n    cancelAllOrders: () => utils.withLoading(() => order.cancelAllOrders())\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrder);","import numeral from 'numeral';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Table, Dropdown, Menu, Icon } from 'antd'\nimport utils from 'utils'\nimport { Svg, Spin } from 'components'\nimport depthAllIcon from 'icons/depthAll.svg'\nimport depthSellIcon from 'icons/depthSell.svg'\nimport depthBuyIcon from 'icons/depthBuy.svg'\n\nconst tableHeaderHeight = 30\n\nconst depthTypes = [\n  { key: 'all', icon: depthAllIcon },\n  { key: 'sell', icon: depthSellIcon },\n  { key: 'buy', icon: depthBuyIcon },\n]\nclass Depth extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeType: depthTypes[0]\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  renderPrecisions () {\n    let precisions = this.props.precisions()\n    return (\n      <Menu onClick={({key}) => {\n        let { markets, setLevel } = this.props\n        let precision = Number(key)\n        let level = markets.currentMarket.pricePrecision - precision\n        setLevel(level)\n      }}>\n      {\n        precisions.map((precision) => (\n          <Menu.Item key={precision}>\n            <Text fontSize={[0, 0, 0]} color='hint'>{ precision }位小数</Text>\n          </Menu.Item>\n        ))\n      }\n      </Menu>\n    )\n  }\n\n  render() {\n    let { height, markets, depth, trade: { latestPrice, variation }, currentPrecision, rate } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { activeType } = this.state\n    let { key: depthType } = activeType\n    \n    let tableHeight = (height - (40 + 30 + 30)) / 2\n    let scrollHeight = depthType === 'all' ? tableHeight : tableHeight * 2\n\n    let {asks, bids} = depth\n    let max = _.maxBy([...asks, ...bids], item => Number(item.size))\n    let maxSize = max ? max.size : 100\n\n    const columns = [\n      {\n        align: 'left',\n        title: (col) => `价格(${currentMarket.quoteToken})`,\n        dataIndex: 'price',\n        render: (price, row) => (\n          <Text color={row.type === 'ask' ? \"failure\" : \"success\"}>{price}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: (col) => `数量(${currentMarket.baseToken})`,\n        dataIndex: 'size',\n        width: 105,\n        render: size => (\n          <Text>{size}</Text>\n        )\n      },\n      {\n        align: 'right',\n        title: (col) => `累计(${currentMarket.quoteToken})`,\n        dataIndex: 'volume',\n        width: 105,\n        render: volume => (\n          <Text>{volume}</Text>\n        )\n      },\n      {\n        // dataIndex: 'size',\n        width: 0,\n        className: 'col-percentage',\n        render: (size, row) => (\n          <Box sx={{\n            position: \"absolute\",\n            right: '0',\n            width: numeral(row.size / maxSize).format('0%'),\n            height: '18px',\n          }}>\n            <Box bg={row.type === 'ask' ? \"#F0505A\" : \"#50BE8C\"} sx={{\n              // position: \"relative\",\n              // bottom: '9px',\n              height: '100%',\n              opacity: 0.15,\n            }}></Box>\n          </Box>\n        )\n      },\n    ];\n\n    const onRowEvent = record => {\n      return {\n        onClick: event => {\n          this.props.updatePlaceOrder({\n            buyPrice: record.price,\n            buyAmount: null,\n            buyTotal: null,\n            marketBuyTotal: null,\n          })\n          this.props.updatePlaceOrder({\n            sellPrice: record.price,\n            sellAmount: null,\n            sellTotal: null,\n            marketSellAmount: null,\n          })\n        }\n      }\n    }\n\n    return (\n      <Box width={this.props.width}>\n        <Flex px={14} height={40} alignItems=\"center\" justifyContent=\"flex-start\">\n          <Text fontSize={0} fontWeight=\"bolder\">交易深度</Text>\n          <Flex ml={'5px'}>\n            {\n              depthTypes.map(type => (\n                <Flex key={type.key} width={16} height={14} mx={'4px'} variant=\"flexCenter\" sx={{\n                    borderRadius: '2px',\n                    border: `1px solid ${this.state.activeType === type ? '#0064FF' : '#32374b'}`,\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => {\n                    this.setState({ activeType: type })\n                    this.props.scrollSellTable()\n                  }}\n                >\n                  <Image width={10} height={6} src={type.icon} />\n                </Flex>\n              ))\n            }\n          </Flex>\n          <Box flex={1}></Box>\n          <Dropdown overlay={this.renderPrecisions()} placement=\"bottomCenter\" overlayClassName=\"nav-menu\">\n            <Flex height={40} lineHeight={'40px'} alignItems=\"center\">{currentPrecision()}位小数<Icon type=\"caret-down\" /></Flex>\n          </Dropdown>\n        </Flex>\n        <Flex height={30} alignItems=\"center\" px={14}>\n          <Box px={`2px`} fontSize=\"12\" lineHeight={`20px`} color=\"#646478\" flex={1}>{`价格(${currentMarket.quoteToken})`}</Box>\n          <Box px={`2px`} fontSize=\"12\" lineHeight={`20px`} color=\"#646478\" width={105} textAlign=\"right\">{`数量(${currentMarket.baseToken})`}</Box>\n          <Box px={`2px`} fontSize=\"12\" lineHeight={`20px`} color=\"#646478\" width={105} textAlign=\"right\">{`累计(${currentMarket.quoteToken})`}</Box>\n        </Flex>\n        {\n          utils.renderIf(depthType === 'all' || depthType === 'sell')(\n            <Box px={14}>\n              <Spin spinning={depth.loading}>\n                <Table rowKey=\"price\" px={14} columns={columns} dataSource={depth.asks} onRow={onRowEvent} align=\"right\"\n                  className=\"exchange-table sell-table\"\n                  pagination={false}\n                  scroll={{ y: scrollHeight }}\n                  style={{ height: scrollHeight }}\n                  showHeader={false}\n                  locale={{emptyText: '暂无数据'}}\n                />\n              </Spin>\n            </Box>\n          )\n        }\n        <Flex px={14} height={30} fontWeight=\"bold\" bg=\"backgroundTint\" alignItems=\"center\">\n          <Text mr={'8px'} fontSize={'18px'} color={variation >= 0 ? 'success' : 'failure'}>{latestPrice}</Text>\n          <Svg color={variation >= 0 ? '#50BE8c' : '#F0505A'} icon={variation >= 0 ? 'icon-arrow-up' : 'icon-arrow-down'} size=\"25px\"></Svg>\n          <Text ml={'8px'} fontSize={'18px'} color=\"#3c3c50\">≈$ {utils.asLegalMoney(latestPrice, currentMarket.quoteToken, 'USD')}</Text>\n        </Flex>\n        {\n          utils.renderIf(depthType === 'all' || depthType === 'buy')(\n            <Box px={14}>\n              <Spin spinning={depth.loading}>\n                <Table rowKey=\"price\" px={14} columns={columns} dataSource={depth.bids} onRow={onRowEvent} align=\"right\" \n                  className=\"exchange-table\"\n                  pagination={false}\n                  scroll={{ y: scrollHeight }}\n                  showHeader={false}\n                  style={{ height: scrollHeight }}\n                  locale={{emptyText: '暂无数据'}}\n                />\n              </Spin>\n            </Box>\n          )\n        }\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ markets, depth, trade, rate }) => {\n  return {\n    markets,\n    depth,\n    trade,\n    rate,\n    precisions: () => {\n      let market = markets.currentMarket\n      if (!market) return []\n\n      let { pricePrecision, maxLevel } = market\n      return _.range(pricePrecision, pricePrecision - maxLevel)\n    },\n    currentPrecision: () => {\n      if (!markets.currentMarket) return 0\n      return markets.currentMarket.pricePrecision - depth.level\n    }\n  };\n};\n\nconst mapDispatchToProps = ({ depth, placeOrder }) => {\n  return {\n    setLevel: depth.setLevel,\n    scrollSellTable: depth.scrollSellTable,\n    updatePlaceOrder: placeOrder.update\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Depth);","import moment from 'moment'\nimport _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { Table, Input, Icon } from 'antd';\nimport awardIcon from 'icons/award.png';\nimport wedexLogoVertical from 'icons/wedexLogoVertical.png';\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n    })\n  }\n\n  render() {\n    let { appState: {awardInfo}, dexAccount, closeAward, markRead } = this.props\n    if (!awardInfo.visible) return <></>\n    return (\n      <Flex variant=\"flexCenter\" sx={{\n        position: 'fixed',\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        margin: 'auto',\n        backgroundImage: `url(${awardIcon})`,\n        backgroundSize: 'contain',\n        backgroundPosition: 'center',\n        width: 375 * 1.4,\n        height: 515 * 1.4,\n        flexDirection: 'column',\n        justifyContent: 'flex-start',\n        zIndex: 999\n      }} >\n        {/* <Image src={awardIcon} width={300} /> */}\n        <Image mt={262} src={wedexLogoVertical} size={45} />\n        <Text fontSize={14} mt={'8px'} color=\"black\" fontWeight={700}>恭喜您获得彩蛋</Text>\n        <Text fontSize={20} color=\"red\" fontWeight={700}>{awardInfo.amount}{awardInfo.unit}</Text>\n        <Flex variant=\"flexCenter\" color=\"hint\" sx={{\n          borderTop: '1px dashed #646478',\n          flexDirection: 'column'\n        }}>\n          <Text mt={2}>奖金将在24小时内转入您的钱包</Text>\n          <Text mt={0}>{`${_.take(dexAccount.address, 10).join('')}......${_.takeRight(dexAccount.address, 10).join('')}`}</Text>\n          <Text mt={0}>获奖时间:{moment(awardInfo.createdAt).format('YYYY-MM-DD HH:mm:ss')}</Text>\n        </Flex>\n        <Box sx={{\n            position: 'absolute',\n            right: 100,\n            top: 100,\n            border: '1px solid #646478',\n            borderRadius: '50%',\n            size: 30,\n            // padding: '3px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            cursor: 'pointer'\n          }} onClick={async () => {\n            await markRead([awardInfo.id])\n            closeAward()\n          }}>\n          <Icon type=\"close\" style={{ fontSize: '15px', width: '15px', height: '15px'}}/>\n        </Box>\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = ({appState, dexAccount}) => {\n  return {\n    appState: appState,\n    dexAccount: dexAccount,\n  };\n};\n\nconst mapDispatchToProps = ({appState, award}) => {\n  return {\n    closeAward: appState.closeAward,\n    markRead: award.markRead\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget);","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport {\n  Trade,\n  TVChart,\n  PlaceOrder,\n  MyOrder,\n  Depth,\n  EggAward\n} from 'widgets'\nimport { BillPreCheck } from 'widgets/Common'\nimport utils from 'utils'\n\nconst TOP_NAV_HEIGHT = 50\nconst PLACE_ORDER_HEIGHT = 243\nconst DIVIDER_SIZE = 3\nconst TADEINGVIEW_MIN_HEIGHT = 285\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    // this.billPreCheck = React.createRef();\n    this.state = {\n      windowHeight: 747,\n      largeScreen: false\n    }\n  }\n\n  onWindowResize = function () {\n    const windowHeight = document.body.clientHeight\n    const windowWidth = document.body.clientWidth\n\n    this.setState({\n      windowHeight,\n      largeScreen: windowWidth >= 1920\n    })\n  }.bind(this)\n\n  componentDidMount() {\n    window.addEventListener('resize', this.onWindowResize);\n    this.onWindowResize()\n\n    this.billPreCheck.checkBrowser()\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onWindowResize);\n  }\n\n  render() {\n    let { windowHeight } = this.state\n    let bodyHeight = windowHeight - TOP_NAV_HEIGHT - 2 * DIVIDER_SIZE\n    let leftRemainHeight = bodyHeight - DIVIDER_SIZE\n    let rightRemainHeight = bodyHeight - DIVIDER_SIZE\n\n    return (\n      <Flex variant='exchange' width=\"100%\">\n        <Flex flex={1} flexDirection=\"column\">\n          <TVChart height={_.max([leftRemainHeight * 480 / (480 + 225), TADEINGVIEW_MIN_HEIGHT])} />\n          <Box as='hr' variant='divider.exchangeX' />\n          <MyOrder height={_.min([leftRemainHeight * 225 / (480 + 225), leftRemainHeight - TADEINGVIEW_MIN_HEIGHT])} />\n        </Flex>\n        <Box as='hr' variant='divider.exchangeY' />\n        <Flex width={320 + 300 + DIVIDER_SIZE} flexDirection='column'>\n          <Flex >\n            <Depth width={320} height={rightRemainHeight - PLACE_ORDER_HEIGHT} />\n            <Box as='hr' variant='divider.exchangeY' />\n            <Trade width={300} height={rightRemainHeight - PLACE_ORDER_HEIGHT} px={14} />\n          </Flex>\n          <Box as='hr' variant='divider.exchangeX' />\n          <PlaceOrder />\n        </Flex>\n        <BillPreCheck ref={ref => this.billPreCheck = ref}></BillPreCheck>\n        <EggAward />\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Home);","import _ from 'lodash'\nimport numeral from 'numeral'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { config } from 'librarys/lightcone_v3';\nimport { TransferModal } from 'widgets/Dialog'\nimport utils from 'utils'\nimport { Spin } from 'components'\n\nimport Chart from 'bizcharts/lib/components/Chart';\nimport Geom from 'bizcharts/lib/components/Geom';\nimport Coord from 'bizcharts/lib/components/Coord';\n\nimport { Tabs, Table, Select, Checkbox, Menu, Dropdown } from 'antd';\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\nlet tokens = config.getTokens()\nconst symbols = tokens.map(token => token.symbol)\n\nconst renderChart = _.memoize((overview) => {\n  return (\n    <Chart\n      width={200}\n      height={200}\n      data={overview}\n      padding={[0, 0, 0, 0]}\n      forceFit\n    >\n      <Coord type={\"theta\"} radius={1} innerRadius={0.6} />\n      <Geom\n        type=\"intervalStack\"\n        position=\"percent\"\n        // 不能以 count。因为会被按照 count 的大小排序，而此次是想固定的颜色排序。\n        color={['item', ['#0064FF', '#1890ff']]}\n      >\n      </Geom>\n    </Chart>\n  )\n}, overview => `${overview[0].count}-${overview[1].count}`)\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filters: {\n        tokenSymbol: ''\n      },\n      marketOptions: []\n    }\n  }\n\n  componentDidMount() {\n    // this.props.fetchBalances()\n    this.props.fetchWalletBalances()\n  }\n\n  onChangeTab (key) {\n    if (key === 'dex') {\n      // 这里不用获取，有 socket 推送。\n      // this.props.fetchBalances()\n    } else {\n      this.props.fetchWalletBalances()\n    }\n  }\n\n  renderOverview () {\n    let { dexAccount, balance, walletBalance, rate } = this.props\n    let balanceTotal = _.reduce(balance.list, (total, item) => {\n      let usd = utils.asLegalMoney(Number(item.totalAmount), item.token.symbol, 'USD')\n      return total + Number(usd)\n    }, 0)\n    let walletBalanceTotal = _.reduce(walletBalance.list, (total, item) => {\n      let usd = utils.asLegalMoney(Number(item.amount), item.symbol, 'USD')\n      return total + Number(usd)\n    }, 0)\n    let total = balanceTotal + walletBalanceTotal\n\n    const overview = [\n      {\n        item: \"我的钱包\",\n        count: walletBalanceTotal,\n        percent: total ? walletBalanceTotal / total * 100 : 0,\n      },\n      {\n        item: \"币币账户\",\n        count: balanceTotal,\n        percent: total ? balanceTotal / total * 100: 0,\n      },\n    ];\n    console.info(overview)\n    return (\n      <Flex>\n        <Box size={200} mr={60} mb={90}>\n          { renderChart(overview) }\n        </Box>\n        <Flex flexDirection=\"column\" flex={1}>\n          <Text color=\"#323232\" fontSize={20} fontWeight=\"bolder\">总资产估值</Text>\n          <Flex mt={'5px'} alignItems=\"center\">\n            <Text color=\"#323232\" fontSize={30} fontWeight=\"bolder\">{utils.toTokenPrecision(total, 'USDT')} USD</Text>\n            <Text fontSize={20} ml={30} fontWeight=\"bolder\">≈{utils.asLegalMoney(total, 'USD', 'CNY')} CNY</Text>\n          </Flex>\n          <Text mt={'5px'} color=\"#323232\">钱包地址: {dexAccount.address}</Text>\n          <Flex mt={30} justifyContent=\"flex-start\">\n            <Box flex={1}>\n              <Flex alignItems=\"center\">\n                <Box size={14} bg=\"#0064FF\"></Box>\n                <Text ml={'6px'} color=\"#969696\">我的钱包资产估值</Text>\n              </Flex>\n              <Flex mt={'5px'} alignItems=\"center\">\n                <Text color=\"#323232\" fontSize={14} fontWeight=\"bold\">{utils.toTokenPrecision(walletBalanceTotal, 'USD')} USD</Text>\n                <Text fontSize={14} ml={13}>≈{utils.asLegalMoney(walletBalanceTotal, 'USD', 'CNY')} CNY</Text>\n              </Flex>\n            </Box>\n            <Box flex={1}>\n              <Flex alignItems=\"center\">\n                <Box size={14} bg=\"#1890ff\"></Box>\n                <Text ml={'6px'} color=\"#969696\">币币账户资产估值</Text>\n              </Flex>\n              <Flex mt={'5px'} alignItems=\"center\">\n                <Text color=\"#323232\" fontSize={14} fontWeight=\"bold\">{utils.toTokenPrecision(balanceTotal, 'USD')} USD</Text>\n                <Text fontSize={14} ml={13}>≈{utils.asLegalMoney(balanceTotal, 'USD', 'CNY')} CNY</Text>\n              </Flex>\n            </Box>\n          </Flex>\n        </Flex>\n      </Flex>\n    )\n  }\n\n  renderFilters () {\n    // let { balance, walletBalance } = this.props\n    // let balanceSymbols = balance.list.map(b => b.token.symbol)\n    // let walletBalanceSymbols = walletBalance.list.map(b => b.symbol)\n\n    // let symbols = _.union(balanceSymbols, walletBalanceSymbols)\n    return (\n      <Flex alignItems=\"center\" style={{position: 'absolute', right: 0, zIndex: 1000}}>\n        <Checkbox style={{color: '#323232'}} onChange={() => {}}>隐藏小额代币</Checkbox>\n        <Select\n          // size=\"small\"\n          placeholder=\"全部币种\"\n          allowClear\n          style={{ width: 140, color: '#323232' }}\n          onChange={tokenSymbol => {\n            this.setState(({ filters }) => {\n              filters.tokenSymbol = tokenSymbol\n              return { filters }\n            })\n          }}\n        >\n          {\n            symbols.map(symbol => (\n              <Option key={symbol} value={symbol}>{symbol}</Option>\n            ))\n          }\n        </Select>\n      </Flex>\n    )\n  }\n  \n  render() {\n    let { filters, marketOptions } = this.state\n    let { history, balance, walletBalance, markets: marketsStore, setCurrentTab, setCurrentMarket } = this.props\n    let balances = balance.list\n    let walletBalances = walletBalance.list\n\n    if (filters.tokenSymbol) {\n      balances = balances.filter(b => b.token.symbol === filters.tokenSymbol)\n      walletBalances = walletBalances.filter(b => b.symbol === filters.tokenSymbol)\n    }\n\n    const walletColumns = [\n      {\n        title: '代币名称',\n        dataIndex: 'tokenId',\n        key: 'tokenId',\n        render: (unused, record) => {\n          return (\n            <Flex>\n              <Text>{record.symbol}</Text>\n              <Text color=\"#969696\">({record.name})</Text>\n            </Flex>\n          )\n        },\n      },\n      {\n        title: '余额',\n        dataIndex: 'amount',\n        key: 'amount',\n        render: (unused, record) => {\n          return <Text>{utils.toTokenPrecision(record.amount, record.symbol)}</Text>\n        },\n      },\n      {\n        align: 'center',\n        title: `操作`,\n        dataIndex: '',\n        key: 'ops',\n        width: 140,\n        render: (unused, record) => (\n          <Flex>\n            <Text color=\"#0078FF\" mr={\"6px\"}\n              sx={{ cursor: 'pointer' }}\n              onClick={() => TransferModal({\n                initialSymbol: record.symbol,\n                initialType: 'deposit',\n              })}\n            >\n              资金划转\n            </Text>\n            <Text color=\"#0078FF\"\n              sx={{ cursor: 'pointer' }}\n              onClick={async () => {\n                history.push({ pathname: `/mine/transfer`, data: {\n                  initialSymbol: record.symbol,\n                  initialSide: 'WITHDRAW',\n                }})\n              }}\n            >\n              资金记录\n            </Text>\n          </Flex>\n        )\n      }\n    ]\n\n    const dexColumns = [\n      {\n        title: '代币名称',\n        dataIndex: 'tokenId',\n        key: 'tokenId',\n        render: (unused, record) => {\n          return (\n            <Flex>\n              <Text>{record.token.symbol}</Text>\n              <Text color=\"#969696\">({record.token.name})</Text>\n            </Flex>\n          )\n        },\n      },\n      {\n        title: '可用余额',\n        dataIndex: 'availAmount',\n        key: 'availAmount',\n        render: (availAmount, record) => {\n          return <Text>{utils.toTokenPrecision(availAmount, record.token.symbol)}</Text>\n        },\n      },\n      {\n        title: '挂单金额',\n        dataIndex: 'frozenAmount',\n        key: 'frozenAmount',\n        render: (frozenAmount, record) => {\n          return <Text>{utils.toTokenPrecision(frozenAmount, record.token.symbol)}</Text>\n        },\n      },\n      {\n        title: '总计(可用+挂单)',\n        dataIndex: 'totalAmount',\n        key: 'totalAmount',\n        render: (totalAmount, record) => {\n          return <Text>{utils.toTokenPrecision(totalAmount, record.token.symbol)}</Text>\n        },\n      },\n      {\n        align: 'center',\n        title: `操作`,\n        dataIndex: '',\n        key: 'ops',\n        width: 180,\n        render: (unused, record) => (\n          <Flex>\n            <Dropdown overlay={\n              <Menu onClick={({key: pair}) => {\n                let [base, quote] = pair.split('-')\n                setCurrentTab(quote)\n                let currentMarket = _.find(marketsStore.markets, {market: pair})\n                setCurrentMarket(currentMarket)\n                history.push(`/trade/${currentMarket.market}`)\n              }}>\n                {\n                  marketOptions.map((menu) => (\n                    <Menu.Item key={menu.market}>\n                      <Text fontSize={[0, 0, 0]} color='hint'>{ menu.market }</Text>\n                    </Menu.Item>\n                  ))\n                }\n              </Menu>\n              }\n              placement=\"bottomCenter\" overlayClassName=\"nav-menu\"\n            >\n              <Text color=\"#0078FF\" mr={\"6px\"} sx={{ cursor: 'pointer' }} onMouseEnter={() => {\n                let markets = config.getMarkets().filter(market => market.baseToken === record.token.symbol || market.quoteToken === record.token.symbol)\n                this.setState({marketOptions: markets})\n              }}>交易</Text>\n            </Dropdown>\n            <Text color=\"#0078FF\" mr={\"6px\"}\n              sx={{ cursor: 'pointer' }}\n              onClick={() => TransferModal({\n                initialSymbol: record.token.symbol,\n                initialType: 'withdraw',\n              })}\n            >\n              资金划转\n            </Text>\n            <Text color=\"#0078FF\"\n              sx={{ cursor: 'pointer' }}\n              onClick={async () => {\n                history.push({ pathname: `/mine/transfer`, data: {\n                  initialSymbol: record.token.symbol,\n                  initialSide: 'DEPOSIT',\n                }})\n              }}\n            >\n              资金记录\n            </Text>\n          </Flex>\n        )\n      }\n    ]\n\n    return (\n      <>\n        { this.renderOverview() }\n        <Box style={{position: 'relative'}}>\n          { this.renderFilters() }\n          <Tabs className=\"balance-tab\" onChange={(key) => this.onChangeTab(key)} type=\"card\">\n            <TabPane tab=\"我的钱包\" key=\"wallet\">\n              <Spin spinning={walletBalance.loading} color=\"#0064FF\">\n                <Table rowKey=\"symbol\" columns={walletColumns} dataSource={walletBalances}\n                  className=\"mine-table\"\n                  pagination={false}\n                  locale={{emptyText: '暂无数据'}}\n                />\n              </Spin>\n            </TabPane>\n            <TabPane tab=\"币币账户\" key=\"dex\">\n              <Spin spinning={balance.loading} color=\"#0064FF\">\n                <Table rowKey=\"tokenId\" columns={dexColumns} dataSource={balances}\n                  className=\"mine-table\"\n                  pagination={false}\n                  locale={{emptyText: '暂无数据'}}\n                />\n              </Spin>\n            </TabPane>\n          </Tabs>\n        </Box>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, balance, walletBalance, rate, markets }) => {\n  return {\n    dexAccount,\n    balance,\n    walletBalance,\n    rate,\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({ balance, walletBalance, transfer, markets }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n    setCurrentTab: markets.setCurrentTab,\n    setCurrentMarket: markets.setCurrentMarket,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import numeral from 'numeral';\nimport _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Spin } from 'components'\nimport { Table, Select, DatePicker } from 'antd';\nimport { ENUM_TX_STATUS } from 'utils/enum'\nimport { config } from 'librarys/lightcone_v3';\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\n\nconst transferColumns = [\n  {\n    title: '代币名称',\n    dataIndex: 'symbol',\n    key: 'symbol',\n    width: 90,\n    render: (symbol, record) => {\n      return (\n        <Flex>\n          <Text>{symbol}</Text>\n        </Flex>\n      )\n    },\n  },\n  {\n    title: '时间',\n    dataIndex: 'timestamp',\n    key: 'timestamp',\n    width: 160,\n    render: (timestamp, row) => {\n      return (<Text>{moment(timestamp).format('YYYY-MM-DD HH:mm:ss')}</Text>)\n    }\n  },\n  {\n    title: '划转自',\n    dataIndex: 'txType',\n    key: 'txType',\n    width: 100,\n    render: (txType, row) => {\n      return (<Text>{txType === 'deposit' ? '我的钱包' : '币币账户'}</Text>)\n    }\n  },\n  {\n    title: '划转至',\n    dataIndex: 'txType',\n    key: 'txType2',\n    width: 100,\n    render: (txType, row) => {\n      return (<Text>{txType === 'deposit' ? '币币账户' : '我的钱包'}</Text>)\n    }\n  },\n  {\n    title: '数量',\n    dataIndex: 'realAmount',\n    key: 'realAmount',\n    width: 150,\n    render: (realAmount, row) => (\n      <Text>{numeral(realAmount).format('0,0.[00000000]')}</Text>\n    )\n  },\n  {\n    title: '手续费',\n    dataIndex: 'feeAmount',\n    key: 'feeAmount',\n    width: 150,\n    render: (feeAmount, row) => (\n      <Text>{numeral(feeAmount).format('0,0.[00000000]')} ETH</Text>\n    )\n  },\n  {\n    title: '状态',\n    dataIndex: 'status',\n    key: 'status',\n    width: 50,\n    render: (status, row) => (\n      <Text>{ENUM_TX_STATUS.toText(status)}</Text>\n    )\n  },\n];\n\nlet tokens = config.getTokens()\nconst symbols = tokens.map(token => token.symbol)\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filters: {\n        symbol: undefined,\n        side: undefined,\n        status: undefined\n      }\n    }\n  }\n\n  async componentDidMount() {\n    let { initialSymbol, initialSide } = this.props.history.location.data || {}\n    if (initialSymbol) {\n      await this.onSymbolChanged(initialSymbol)\n    }\n    if (initialSide) {\n      await this.onSideChanged(initialSide)\n    }\n    this.props.fetchTransactions()\n  }\n\n  async onSymbolChanged (symbol) {\n    this.setState(({ filters }) => {\n      filters.symbol = symbol\n      return { filters }\n    })\n    await this.props.updateFilterCond({ token: symbol })\n  }\n\n  async onSideChanged (side) {\n    this.setState(({ filters }) => {\n      filters.side = side\n      return { filters }\n    })\n\n    let types = side && (side === 'WITHDRAW' ? ['onchainWithdrawal'] : ['deposit'])\n    await this.props.updateFilterCond({ types })\n  }\n\n  async onStatusChanged (status) {\n    this.setState(({ filters }) => {\n      filters.status = status\n      return { filters }\n    })\n    await this.props.updateFilterCond({ statuses: [status] })\n  }\n\n  renderFilters () {\n    let { updateFilterCond, fetchTransactions } = this.props\n    return (\n      <Flex justifyContent=\"flex-end\" flex={1}>\n        <Select\n          placeholder=\"全部币种\"\n          allowClear\n          style={{ width: 140, color: '#323232' }}\n          value={this.state.filters.symbol}\n          onChange={symbol => {\n            this.onSymbolChanged(symbol)\n            fetchTransactions()\n          }}\n        >\n          {\n            symbols.map(symbol => (\n              <Option key={symbol} value={symbol}>{symbol}</Option>\n            ))\n          }\n        </Select>\n        <Select\n          placeholder=\"全部类型\"\n          allowClear\n          style={{ width: 180, color: '#323232', marginLeft: '20px', marginRight: '20px' }}\n          value={this.state.filters.side}\n          onChange={async (side) => {\n            this.onSideChanged(side)\n            fetchTransactions()\n          }}\n        >\n          <Option value={'DEPOSIT'}>{'我的钱包 转至 币币账户'}</Option>\n          <Option value={'WITHDRAW'}>{'币币账户 转至 我的钱包'}</Option>\n        </Select>\n        <Select\n          placeholder=\"全部状态\"\n          allowClear\n          style={{ width: 140, color: '#323232', marginRight: '20px' }}\n          onChange={async (status) => {\n            this.onStatusChanged(status)\n            fetchTransactions()\n          }}\n        >\n          {\n            _.map(ENUM_TX_STATUS.getOptions(), status => (\n              <Option key={status.value} value={status.value}>{status.label}</Option>\n            ))\n          }\n        </Select>\n        <RangePicker placeholder={['开始日期', '结束日期']} onChange={async range => {\n          let [start, end] = range\n          start = start && start.startOf('day').toDate().valueOf()\n          end = end && end.endOf('day').toDate().valueOf()\n\n          console.info({start, end})\n          await updateFilterCond({\n            start,\n            end\n          })\n          fetchTransactions()\n        }} />\n      </Flex>\n    )\n  }\n\n  render() {\n    let { transfer } = this.props\n    // TODO: 此处 render 为啥老被刷新？\n    \n    let transfers = transfer.list.map(transfer => {\n      let { symbol, amount, realAmount, feeAmount } = transfer\n      let token = config.getTokenBySymbol(symbol)\n      let ethToken = config.getTokenBySymbol('ETH')\n      return {\n        ...transfer,\n        token,\n        amount: config.fromWEI(token.symbol, amount, token.precision),\n        realAmount: config.fromWEI(token.symbol, realAmount, token.precision),\n        feeAmount: config.fromWEI(ethToken.symbol, feeAmount, ethToken.precision)\n      }\n    })\n\n    return (\n      <Box>\n        { this.renderFilters() }\n        <Spin spinning={transfer.loading} color=\"#0064FF\">\n          <Table rowKey=\"tokenId\" columns={transferColumns} dataSource={transfers}\n            className=\"mine-table\"\n            pagination={false}\n            style={{ minHeight: '450px' }}\n            locale={{emptyText: '暂无数据'}}\n          />\n        </Spin>\n        {/* <Pagination ref={pagination => this.pagination = pagination} fetchData={this.fetchData} onFetched={this.onDataFetched}></Pagination> */}\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ transfer, markets }) => {\n  return {\n    transfer,\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({ transfer }) => {\n  return {\n    fetchTransactions: transfer.fetchTransactions,\n    updateFilterCond: transfer.updateFilterCond,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import numeral from 'numeral';\nimport _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Pagination } from 'components';\nimport { config } from 'librarys/lightcone_v3';\nimport { Table, Select, DatePicker } from 'antd';\nimport utils from 'utils'\nimport api from 'api'\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\n\nconst columns = [\n  {\n    align: 'left',\n    title: `时间`,\n    dataIndex: 'createdAt',\n    width: 90,\n    render: (unused, row) => {\n      return (<Text>{moment(row.createdAt).format('MM-DD HH:mm')}</Text>)\n    }\n  },\n  {\n    align: 'left',\n    title: `交易对`,\n    dataIndex: 'market',\n    width: 100,\n    render: (market, row) => {\n      let [baseSymbol, quoteSymbol] = market.split('-')\n      return (<Flex>{baseSymbol}<Text color=\"hint\">/{quoteSymbol}</Text></Flex>)\n    }\n  },\n  {\n    align: 'left',\n    title: '类型',\n    dataIndex: 'side',\n    width: 30,\n    render: (unused, row) => {\n      return (<Text>{row.side === 'BUY' ? \"买入\" : \"卖出\"}</Text>)\n    }\n  },\n  {\n    align: 'right',\n    title: `数量`,\n    dataIndex: 'filledSize',\n    width: 100,\n    render: (filledSize, row) => {\n      let isBuy = (row.side === 'BUY')\n      return (\n        <Text color={isBuy ? \"success\" : \"failure\"}>{isBuy ? '+' : '-'}{filledSize}</Text>\n      )\n    }\n  },\n  {\n    align: 'right',\n    title: `价格`,\n    dataIndex: 'price',\n    width: 100,\n    render: (price, row) => (\n      <Text>{price}</Text>\n    )\n  },\n  {\n    align: 'right',\n    title: `成交金额`,\n    dataIndex: 'volume',\n    width: 120,\n    render: volume => (\n      <Text>{volume}</Text>\n    )\n  },\n  // {\n  //   align: 'right',\n  //   title: `已成交`,\n  //   dataIndex: 'filledSize',\n  //   width: 180,\n  //   render: (filledSize, row) => (\n  //     <Flex alignItems=\"center\" justifyContent=\"flex-end\">\n  //       <Text mr={'4px'}>{filledSize}</Text>\n  //     </Flex>\n  //   )\n  // },\n  {\n    align: 'right',\n    title: `手续费`,\n    dataIndex: 'filledFee',\n    width: 180,\n    render: (filledFee, row) => {\n      let [baseSymbol, quoteSymbol] = row.market.split('-')\n      return (\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\n          <Text mr={'4px'}>{filledFee} {row.side === 'BUY' ? baseSymbol : quoteSymbol }</Text>\n        </Flex>\n      )\n    }\n  },\n  {\n    align: 'right',\n    title: '状态',\n    dataIndex: 'status',\n    key: 'status',\n    width: 100,\n    render: (status, row) => (\n      <Text>{ENUM_ORDER_STATUS.toText(status)}</Text>\n    )\n  },\n];\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      filters: {\n        market: undefined,\n        start: undefined,\n        end: undefined,\n        side: undefined,\n        status: undefined\n      }\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  fetchData = async function (pageParams) {\n    let { dexAccount: { accountId, apiKey } } = this.props\n    let { filters: { market, side, start, end, status } } = this.state\n    let { offset, limit } = utils.formatPageParams(pageParams)\n\n    let resp = await api.getOrders({\n      accountId,\n      apiKey,\n      offset,\n      limit,\n      market,\n      side,\n      start,\n      end,\n      statuses: status ? [status] : undefined\n    })\n    let { totalNum, orders } = resp || {}\n\n    orders = orders || []\n    return {\n      // TODO: 目前没有总数\n      count: totalNum || 0,\n      rows: orders\n    }\n  }.bind(this)\n  \n  onDataFetched = function (list) {\n    console.info({list})\n    this.setState({list})\n  }.bind(this)\n\n  renderFilters () {\n    let { markets: marketsStore } = this.props\n    let markets = marketsStore.markets.map(item => item.market)\n    return (\n      <Flex justifyContent=\"flex-end\" flex={1}>\n        <Select\n          placeholder=\"全部交易对\"\n          allowClear\n          style={{ width: 140, color: '#323232', marginRight: '20px' }}\n          onChange={async (market) => {\n            console.info({market})\n            await this.setState(({ filters }) => {\n              filters.market = market\n              return { filters }\n            })\n            this.pagination.reset()\n          }}\n        >\n          {\n            markets.map(market => (\n              <Option key={market} value={market}>{market}</Option>\n            ))\n          }\n        </Select>\n        <Select\n          placeholder=\"全部类型\"\n          allowClear\n          style={{ width: 140, color: '#323232', marginRight: '20px' }}\n          onChange={async (side) => {\n            console.info({side})\n            await this.setState(({ filters }) => {\n              filters.side = side\n              return { filters }\n            })\n            this.pagination.reset()\n          }}\n        >\n          <Option value={'BUY'}>{'买入'}</Option>\n          <Option value={'SELL'}>{'卖出'}</Option>\n        </Select>\n        <Select\n          placeholder=\"全部状态\"\n          allowClear\n          style={{ width: 140, color: '#323232', marginRight: '20px' }}\n          onChange={async (status) => {\n            console.info({status})\n            await this.setState(({ filters }) => {\n              filters.status = status\n              return { filters }\n            })\n            this.pagination.reset()\n          }}\n        >\n          {\n            _.map(ENUM_ORDER_STATUS.getOptions(), status => (\n              <Option key={status.value} value={status.value}>{status.label}</Option>\n            ))\n          }\n        </Select>\n        <RangePicker placeholder={['开始日期', '结束日期']} onChange={async range => {\n          let [start, end] = range\n          start = start && start.startOf('day').toDate().valueOf()\n          end = end && end.endOf('day').toDate().valueOf()\n\n          console.info({start, end})\n          await this.setState(({ filters }) => {\n            filters.start = start\n            filters.end = end\n            return { filters }\n          })\n          this.pagination.reset()\n        }} />\n      </Flex>\n    )\n  }\n\n  render() {\n    let { list } = this.state\n\n    return (\n      <Box>\n        { this.renderFilters() }\n        <Table rowKey=\"tokenId\" columns={columns} dataSource={list}\n          className=\"mine-table\"\n          pagination={false}\n          style={{ minHeight: '450px' }}\n          locale={{emptyText: '暂无数据'}}\n        />\n        <Pagination ref={pagination => this.pagination = pagination} fetchData={this.fetchData} onFetched={this.onDataFetched}></Pagination>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, markets }) => {\n  return {\n    dexAccount,\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({ order }) => {\n  return {\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Divider, Table } from 'antd';\nimport { Account } from 'librarys/lightcone_v3'\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    let { dexAccount, metaMask } = this.props\n    let { installed, startConnecting } = metaMask\n    let { address, accountId, apiKey, passwordHash } = dexAccount\n\n    if (startConnecting || !installed || !address || !passwordHash) return <></>\n\n    // TODO: 优化。window.wallet可能没有初始化。初始化的时机是用户登录时(在 initAccountFromMetaMask 函数，也可考虑从此函数中分拆出来，无论如何让window.wallet初始化)，而没登录直接在缓存中加载，会有此问题。\n    // if (!window.wallet) {\n    //   window.wallet = ethereum.account.fromMetaMask(\n    //     window.web3,\n    //     address,\n    //     address\n    //   )\n    // }\n    let exchangeAccount = new Account(window.wallet)\n    const keyPair = exchangeAccount.generateKeyPair(passwordHash)\n\n    let infos = [\n      { label: '账户ID', value: accountId },\n      { label: '钱包地址', value: address },\n      { label: 'API密钥', value: apiKey },\n      { label: '公钥X', value: keyPair.publicKeyX },\n      { label: '公钥Y', value: keyPair.publicKeyY },\n      { label: '密钥', value: keyPair.secretKey },\n    ]\n\n    return (\n      <Box {...this.props}>\n        <Text mb={'14px'} color=\"#323232\" fontSize={16} fontWeight=\"bold\">API KEY</Text>\n        <Divider/>\n        <Box>\n        {\n          infos.map(info => (\n            <Flex key={info.label} height={50}>\n              <Text fontSize={14} width={100} color=\"#969696\">{info.label}:</Text>\n              <Text fontSize={14} color=\"#323232\">{info.value}</Text>\n            </Flex>\n          ))\n        }\n        </Box>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, metaMask }) => {\n  return {\n    dexAccount,\n    metaMask\n  };\n};\n\nconst mapDispatchToProps = ({ metaMask }) => {\n  return {\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import _ from 'lodash'\nimport moment from 'moment'\nimport numeral from 'numeral'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { config } from 'librarys/lightcone_v3';\nimport { Pagination, Spin } from 'components';\nimport api from 'api'\n\nimport { Tabs, Table, Select, Checkbox } from 'antd';\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\nlet tokens = config.getTokens()\nconst symbols = tokens.map(token => token.symbol)\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      list: []\n    }\n  }\n\n  componentDidMount() {\n    // this.props.fetchBalances()\n    // this.props.fetchWalletBalances()\n  }\n\n  onChangeTab (key) {\n    if (key === 'mine') {\n    } else {\n    }\n  }\n\n  fetchData = async function (pageParams) {\n    this.setState({ loading: true })\n    let { dexAccount } = this.props\n    let resp = await api.getUserBillEggPrizeList({\n      // address: '0x2bbfe5650e9876fb313d6b32352c6dc5966a7b68',\n      address: dexAccount.address,\n      ...pageParams,\n      sort: 'billTime',\n      sortDirection: 'desc',\n      // TODO: delete\n      startDate: '2020-01-02 18:00:00'\n    })\n    this.setState({ loading: false })\n    return resp.data\n  }.bind(this)\n  \n  onDataFetched = function (list) {\n    console.info({list})\n    this.setState({list})\n  }.bind(this)\n\n  render() {\n    const columns = [\n      {\n        title: '时间',\n        dataIndex: 'billTime',\n        key: 'billTime',\n        render: (billTime, record) => {\n          return (\n            <Flex>\n              <Text>{moment(billTime).format('YYYY-MM-DD HH:mm:ss')}</Text>\n            </Flex>\n          )\n        },\n      },\n      {\n        title: '中奖人',\n        dataIndex: 'winnerWalletAddr',\n        key: 'winnerWalletAddr',\n      },\n      {\n        align: 'center',\n        title: `金额`,\n        dataIndex: 'money',\n        key: 'money',\n      },\n      {\n        align: 'center',\n        title: `代币名称`,\n        dataIndex: 'unit',\n        key: 'unit',\n      },\n      \n    ]\n    let { list } = this.state\n\n    return (\n      <>\n        <Box style={{position: 'relative'}}>\n          <Tabs className=\"balance-tab\" onChange={(key) => this.onChangeTab(key)} type=\"card\">\n            <TabPane tab=\"我的中奖详情\" key=\"mine\">\n              <Spin spinning={this.state.loading} color=\"#0064FF\">\n                <Table rowKey=\"symbol\" columns={columns} dataSource={list}\n                  className=\"mine-table\"\n                  pagination={false}\n                  locale={{emptyText: '暂无数据'}}\n                />\n              </Spin>\n              <Pagination autoload={true} ref={pagination => this.pagination = pagination} fetchData={this.fetchData} onFetched={this.onDataFetched}></Pagination>\n            </TabPane>\n            {/* <TabPane tab=\"全部中奖详情\" key=\"all\">\n              <Table rowKey=\"tokenId\" columns={columns} dataSource={balances}\n                className=\"mine-table\"\n                pagination={false}\n                locale={{emptyText: '暂无数据'}}\n              />\n            </TabPane> */}\n          </Tabs>\n          {/* <Pagination ref={pagination => this.pagination = pagination} fetchData={this.fetchData} onFetched={this.onDataFetched}></Pagination> */}\n        </Box>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, balance, walletBalance }) => {\n  return {\n    dexAccount,\n    balance,\n    walletBalance\n  };\n};\n\nconst mapDispatchToProps = ({ balance, walletBalance, transfer }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport {\n  Pair,\n  Trade,\n  TVChart,\n  PlaceOrder,\n  MyOrder,\n  Depth,\n} from 'widgets'\nimport { Tabs } from 'antd';\nimport Balance from './Balance';\nimport Transfer from './Transfer';\nimport Order from './Order';\nimport Apikey from './Apikey';\nimport Award from './Award';\nimport { UpsertPasswordModal } from 'widgets/Dialog'\n\nconst { TabPane } = Tabs;\n\nconst tabs = [\n  { title: '我的资产', key: 'balance', render: () => <Balance/> },\n  { title: '资金划转记录', key: 'transfer', render: () => <Transfer/> },\n  { title: '币币交易记录', key: 'order', render: () => <Order/> },\n  { title: 'API Key', key: 'apikey', render: () => <Apikey/> },\n  { title: '中奖记录', key: 'award', render: () => <Award/> },\n  { title: '修改交易密码', key: 'password' },\n]\n\nclass Mine extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: tabs[0].key\n    }\n  }\n\n  componentDidMount() {\n    console.info(this.props.location)\n    let { tab } = this.props.match.params\n    this.setState({activeTab: tab})\n  }\n\n  componentWillReceiveProps(newProps) {\n    let { tab: oldTab } = this.props.match.params\n    let { tab: newTab } = newProps.match.params\n    if (oldTab !== newTab) {\n      this.setState({activeTab: newTab})\n    }\n  }\n\n  renderContent () {\n    let {activeTab} = this.state\n    let tab = _.find(tabs, { key: activeTab })\n    return tab.render && tab.render()\n  }\n\n  render() {\n    return (\n      <Flex pt={90} variant={'mine'} fontSize={14}>\n        <Flex flexDirection=\"column\" sx={{\n          borderLeft: '1px solid #F0F0F0',\n          borderTop: '1px solid #F0F0F0',\n        }}>\n        {\n          tabs.map(tab => (\n            <Box key={tab.key} variant=\"flexCenter\" width={150} height={50} lineHeight={'50px'} sx={{\n                bg: tab.key === this.state.activeTab ? '#eff7ff' : 'white',\n                color: tab.key === this.state.activeTab ? '#0078FF' : 'black',\n                cursor: 'pointer',\n                borderRight: '1px solid #F0F0F0',\n                borderBottom: '1px solid #F0F0F0',\n                textAlign: 'center',\n              }} onClick={async () => {\n                if (tab.key === 'password') {\n                  await UpsertPasswordModal()\n                  return\n                }\n                this.props.history.push(`/mine/${tab.key}`)\n              }}\n            >\n              {tab.title}\n            </Box>\n          ))\n        }\n        </Flex>\n        <Box width={1100} ml={60} mb={20}>\n        {\n          this.renderContent()\n        }\n        </Box>\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Mine))","import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router';\nimport MyOrders from 'components/my-orders/MyOrders';\nimport MyBalances from 'components/my-balances/MyBalances';\nimport Referral from 'components/referral/Referral';\n// import NavBarLevel1 from 'components/nav-bar/NavBarLevel1';\nimport TopNav from 'widgets/TopNav';\nimport Home from 'views/Home';\nimport Mine from 'views/mine/Mine';\n\nconst routes = (\n  <div>\n    {/* <NavBarLevel1 /> */}\n    <TopNav />\n    {/* Routes must be also defined in server.js */}\n    <Switch>\n      <Route exact path=\"/\" render={() => <Redirect to=\"/trade/LRC-ETH\" />} />\n      <Route\n        exact\n        path=\"/trade\"\n        render={() => <Redirect to=\"/trade/LRC-ETH\" />}\n      />\n      <Route exact path=\"/trade/:market\" component={Home} />\n      <Route exact path=\"/mine/:tab\" component={Mine} />\n    </Switch>\n  </div>\n);\n\nexport default routes;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { ConnectedRouter } from 'connected-react-router';\nimport routes from './routes';\nimport { connect } from 'react-redux';\nimport { Spin, Icon } from 'antd';\nimport {\n  Box,\n} from 'rebass'\nimport './App.less';\n\nconst App = ({ history, ready, loading, fetchMarkets, startSocket }) => {\n\n  // 需等待 persist/REHYDRATE 完成\n  if (!ready) return <div>加载中</div>\n\n  return (\n    <div>\n      <Spin className=\"body-loading\" spinning={loading} size=\"large\" style={{height: '100vh', maxHeight: 'unset', zIndex:1001}}>\n        <ConnectedRouter history={history}>{routes}</ConnectedRouter>\n      </Spin>\n    </div>\n  )\n};\n\nApp.propTypes = {\n  history: PropTypes.object\n};\n\nconst mapState = ({ appState }) => {\n  return {\n    ready: appState.ready,\n    loading: appState.loading,\n  }\n}\n\nconst mapDispatch = ({ metaMask, markets, socket }) => {\n  return {\n    fetchMarkets: markets.fetchMarkets,\n    startSocket: socket.start\n  };\n};\n\nexport default connect(mapState, mapDispatch)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","var topNavHeight = [50, 50, 50]\nvar tableHeaderHeight = [30, 30, 30]\nvar topNavDividerHeight = 3\nvar exchangeDividerHeight = 3\nexport default {\n  // breakpoints: ['40em', '52em', '64em'],\n  // TODO: 需改为 1920\n  breakpoints: ['1366px', '1919px'],\n  space: [\n    0,\n    4,\n    8,\n    16,\n    32,\n    64,\n    128,\n    256,\n    512\n  ],\n  fonts: {\n    body: 'system-ui, sans-serif',\n    heading: 'inherit',\n    monospace: 'Menlo, monospace'\n  },\n  fontSizes: [\n    12,\n    14,\n    16,\n    20,\n    24,\n    32,\n    48,\n    64,\n    96\n  ],\n  fontWeights: {\n    body: 400,\n    heading: 700,\n    bold: 700\n  },\n  lineHeights: {\n    body: 1.5,\n    heading: 1.125\n  },\n  colors: {\n    text: '#000',\n    background: '#0A0F1E',\n    backgroundTint: '#0F1428',\n    primary: '#07c',\n    secondary: '#30c',\n    muted: '#f6f6f6',\n    hint: '#646478',\n    blue: '#0064FF',\n    success: '#50BE8c',\n    failure: '#F0505A',\n  },\n  styles: {\n    root: {\n      fontFamily: 'body',\n      lineHeight: 'body',\n      fontWeight: 'body'\n    },\n    h1: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 5\n    },\n    h2: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 4\n    },\n    h3: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 3\n    },\n    h4: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 2\n    },\n    h5: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 1\n    },\n    h6: {\n      color: 'text',\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading',\n      fontSize: 0\n    },\n    p: {\n      color: 'text',\n      fontFamily: 'body',\n      fontWeight: 'body',\n      lineHeight: 'body'\n    },\n    a: {\n      color: 'primary'\n    },\n    pre: {\n      fontFamily: 'monospace',\n      overflowX: 'auto',\n      code: {\n        color: 'inherit'\n      }\n    },\n    code: {\n      fontFamily: 'monospace',\n      fontSize: 'inherit'\n    },\n    table: {\n      width: '100%',\n      borderCollapse: 'separate',\n      borderSpacing: 0\n    },\n    th: {\n      textAlign: 'left',\n      borderBottomStyle: 'solid'\n    },\n    td: {\n      textAlign: 'left',\n      borderBottomStyle: 'solid'\n    },\n    img: {\n      maxWidth: '100%'\n    }\n  },\n  shadows: {\n    small: '0 0 4px rgba(0, 0, 0, .125)',\n    large: '0 0 24px rgba(0, 0, 0, .125)'\n  },\n  variants: {\n    divider: {\n      topNav: {\n        bg: 'black',\n        border: 0,\n        height: topNavDividerHeight\n      },\n      exchangeX: {\n        bg: 'black',\n        border: 0,\n        width: '100%',\n        height: exchangeDividerHeight\n      },\n      exchangeY: {\n        bg: 'black',\n        border: 0,\n        width: exchangeDividerHeight,\n        height: '100%'\n      }\n    },\n    topNav: {\n      height: topNavHeight,\n    },\n    exchange: {\n      position: 'fixed',\n      top: topNavHeight.map(height => `${height + topNavDividerHeight}px`),\n      bottom: 0,\n      borderBottom: `${topNavDividerHeight * 1.5}px solid black`,\n      overflow: 'hidden'\n    },\n    mine: {\n      minHeight: topNavHeight.map(height => `calc(100vh - ${height + topNavDividerHeight}px)`),\n      bg: 'white',\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    noScrollbar: {\n      '::-webkit-scrollbar': {\n        display: 'none'\n      }\n    },\n    flexCenter: {\n      justifyContent: \"space-around\",\n      alignItems: \"center\"\n    },\n    clickable: {\n      cursor: 'pointer'\n    }\n  },\n  text: {\n  },\n  buttons: {\n    primary: {\n      color: 'white',\n      bg: 'primary',\n    }\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from 'react-redux';\n\nimport './index.less';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// import configureStore, { history } from 'redux/configureStore';\nimport {history, store, reloadSaga} from 'store'\n\nimport theme from './theme'\nimport { ThemeProvider } from 'emotion-theming'\n\n// loadTheme({\n//   palette: {\n//     themePrimary: '#303030',\n//     themeLighterAlt: '#eff6fc',\n//     themeLighter: '#deecf9',\n//     themeLight: '#c7e0f4',\n//     themeTertiary: '#71afe5',\n//     themeSecondary: '#2b88d8',\n//     themeDarkAlt: '#106ebe',\n//     themeDark: '#005a9e',\n//     themeDarker: '#004578',\n//     neutralLighterAlt: '#f8f8f8',\n//     neutralLighter: '#272727', // Used in dropdown item when it's hovered.\n//     neutralLight: '#252525', // Used in dropdown item selected\n//     neutralQuaternaryAlt: '#dadada',\n//     neutralQuaternary: '#d0d0d0',\n//     neutralTertiaryAlt: '#c8c8c8',\n//     neutralTertiary: '#c2c2c2',\n//     neutralSecondary: '#858585',\n//     neutralPrimaryAlt: '#4b4b4b',\n//     neutralPrimary: '#333333',\n//     neutralDark: '#eeeeee',\n//     black: '#1d1d1d',\n//     white: '#ffffff'\n//   }\n// });\n\n// const store = configureStore();\nconst render = () => {\n  ReactDOM.render(\n    <AppContainer>\n      <Provider store={store}>\n        <ThemeProvider theme={theme}>\n          <App history={history} />\n        </ThemeProvider>\n      </Provider>\n    </AppContainer>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\n// Hot reloading\nif (module.hot) {\n  // Reload components\n  module.hot.accept('./App', () => {\n    render();\n  });\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import ethUtil from \"ethereumjs-util\";\nimport BigNumber from \"bignumber.js\";\nimport BN from \"bn.js\";\n\nBigNumber.config({\n  EXPONENTIAL_AT: 20,\n  RANGE: [-100000, 10000000],\n  ROUNDING_MODE: 1\n});\n\n/**\n *\n * @param mixed Buffer|number|string (hex string must be with '0x' prefix)\n * @returns {Buffer}\n */\nexport function toBuffer(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed;\n  } else {\n    return ethUtil.toBuffer(mixed);\n  }\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {string}\n */\nexport function toHex(mixed) {\n  if (\n    typeof mixed === \"number\" ||\n    mixed instanceof BigNumber ||\n    mixed instanceof BN\n  ) {\n    return addHexPrefix(mixed.toString(16));\n  }\n\n  if (mixed instanceof Buffer) {\n    return addHexPrefix(mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    const regex = new RegExp(/^0x[0-9a-fA-F]*$/);\n    return regex.test(mixed)\n      ? mixed\n      : addHexPrefix(toBuffer(mixed).toString(\"hex\"));\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {number}\n */\nexport function toNumber(mixed) {\n  if (typeof mixed === \"number\") {\n    return mixed;\n  }\n\n  if (mixed instanceof BigNumber || mixed instanceof BN) {\n    return mixed.toNumber();\n  }\n\n  if (typeof mixed === \"string\") {\n    return Number(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BigNumber}\n */\nexport function toBig(mixed) {\n  if (mixed instanceof BigNumber) {\n    return mixed;\n  }\n\n  if (typeof mixed === \"number\") {\n    return new BigNumber(mixed.toString());\n  }\n\n  if (typeof mixed === \"string\") {\n    return new BigNumber(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toBN(mixed) {\n  return mixed instanceof BN ? mixed : new BN(toBig(mixed).toString(10), 10);\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function fromGWEI(value) {\n  return toBig(value).times(1e9).decimalPlaces(0);\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toGWEI(valueInWEI) {\n  return toBig(valueInWEI).div(1e9);\n}\n\n/**\n * Returns formatted hex string of a given private key\n * @param mixed Buffer| string\n * @returns {string}\n */\nexport function formatKey(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed.toString(\"hex\");\n  }\n\n  if (typeof mixed === \"string\") {\n    return mixed.startsWith(\"0x\") ? mixed.slice(2) : mixed;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string of a given address\n * @param mixed Buffer | string\n * @returns {string}\n */\nexport function formatAddress(mixed) {\n  if (mixed instanceof Buffer) {\n    return ethUtil.toChecksumAddress(\"0x\" + mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    return ethUtil.toChecksumAddress(\n      mixed.startsWith(\"0x\") ? mixed : \"0x\" + mixed\n    );\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string with '0x' prefix\n * @param input\n * @returns {string}\n */\nexport function addHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input : \"0x\" + input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string without '0x' prefix\n * @param input string\n * @returns {string}\n */\nexport function clearHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input.slice(2) : input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param hex\n * @returns {string}\n */\nexport function padLeftEven(hex) {\n  return hex.length % 2 !== 0 ? `0${hex}` : hex;\n}\n\n/**\n * Returns symbol of a given kind of currency\n * @param settingsCurrency\n * @returns {*}\n */\nexport function getDisplaySymbol(settingsCurrency) {\n  switch (settingsCurrency) {\n    case \"CNY\":\n      return \"￥\";\n    case \"USD\":\n      return \"$\";\n    default:\n      return \"\";\n  }\n}\n\n/**\n * Returns number in string with a given precision\n * @param number number | BigNumber\n * @param precision number\n * @param ceil bool  round up\n * @returns {string}\n */\nexport function toFixed(number, precision, ceil) {\n  precision = precision || 0;\n  ceil = ceil || false;\n  if (number instanceof BigNumber) {\n    const rm = ceil ? 0 : 1;\n    return number.toFixed(precision, rm);\n  }\n\n  if (typeof number === \"number\") {\n    return ceil\n      ? (\n          Math.ceil(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision)\n      : (\n          Math.floor(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\nexport default {};\n","import { hashPersonalMessage, keccak } from \"ethereumjs-util\";\nimport formatter, { toBig, toHex } from \"./formatter\";\n\n/**\n * trim head space and tail space\n * @param str string\n */\nexport function trim(str) {\n  return str.replace(/(^\\s+)|(\\s+$)/g, \"\");\n}\n\n/**\n * trim all spaces\n * @param str\n */\nexport function trimAll(str) {\n  return trim(str).replace(/\\s/g, \"\");\n}\n\nexport function keccakHash(str) {\n  return toHex(keccak(str));\n}\n\nexport function calculateGas(gasPrice, gasLimit) {\n  return toBig(gasPrice)\n    .times(gasLimit)\n    .div(1e9);\n}\n\nexport default {\n  hashPersonalMessage,\n  ...formatter,\n  trim,\n  trimAll,\n  keccakHash,\n  calculateGas\n};\n","import validator from \"./validator\";\nimport Response from \"../common/response\";\nimport code from \"../common/code\";\nimport { addHexPrefix, toHex, toNumber } from \"../common/formatter\";\nimport { hashPersonalMessage, sha3 } from \"ethereumjs-util\";\nimport EthTransaction from \"ethereumjs-tx\";\n\n/**\n * @description sign hash\n * @param web3\n * @param account\n * @param hash\n * @returns {Promise.<*>}\n */\nexport async function sign(web3, account, hash) {\n  try {\n    validator.validate({ value: account, type: \"ETH_ADDRESS\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n\n  return new Promise(resolve => {\n    web3.eth.sign(account, hash, function(err, result) {\n      if (!err) {\n        const r = result.slice(0, 66);\n        const s = addHexPrefix(result.slice(66, 130));\n        const v = toNumber(addHexPrefix(result.slice(130, 132)));\n        resolve({ result: { r, s, v } });\n      } else {\n        const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n        resolve({ error: { message: errorMsg } });\n      }\n    });\n  });\n}\n\n/**\n * @description sign message\n * @param web3\n * @param account\n * @param message\n * @returns {Promise}\n */\nexport function signMessage(web3, account, message) {\n  const hash = toHex(hashPersonalMessage(sha3(message)));\n  return sign(web3, account, hash);\n}\n\n/**\n * @description Signs ethereum tx\n * @param web3\n * @param account\n * @param rawTx\n * @returns {Promise.<*>}\n */\nexport async function signEthereumTx(web3, account, rawTx) {\n  try {\n    validator.validate({ value: rawTx, type: \"TX\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n  try {\n    const ethTx = new EthTransaction(rawTx);\n    const hash = toHex(ethTx.hash(false));\n    const response = await sign(web3, account, hash);\n    if (!response[\"error\"]) {\n      const signature = response[\"result\"];\n      signature.v += ethTx._chainId * 2 + 8;\n      Object.assign(ethTx, signature);\n      return { result: toHex(ethTx.serialize()) };\n    } else {\n      return response;\n    }\n  } catch (e) {\n    console.log(\"Failed to sign EthereumTx\");\n    console.log(e);\n    return e;\n  }\n}\n\n/**\n * @description Sends ethereum tx through MetaMask\n * @param web3\n * @param tx\n * @returns {*}\n */\nexport function sendTransaction(web3, tx) {\n  try {\n    validator.validate({ type: \"TX\", value: tx });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n\n  return new Promise(resolve => {\n    web3.eth.sendTransaction(tx, function(err, transactionHash) {\n      if (!err) {\n        resolve({ result: transactionHash });\n      } else {\n        const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n        resolve({ error: { message: errorMsg } });\n      }\n    });\n  });\n}\n","import { fromEthSale, fromPrivateKey, fromV1, fromV3 } from \"ethereumjs-wallet\";\nimport { clearHexPrefix } from \"../common/formatter\";\n\n/**\n * Returns private key of given keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptKeystoreToPkey(keystore, password) {\n  let wallet;\n  const parsed = JSON.parse(keystore);\n  switch (determineKeystoreType(keystore)) {\n    case \"presale\":\n      wallet = decryptPresaleToPrivKey(keystore, password);\n      break;\n    case \"v1-unencrypted\":\n      wallet = Buffer.from(parsed.private, \"hex\");\n      break;\n    case \"v1-encrypted\":\n      wallet = decryptMewV1ToPrivKey(keystore, password);\n      break;\n    case \"v2-unencrypted\":\n      wallet = Buffer.from(parsed.privKey, \"hex\");\n      break;\n    case \"v2-v3-utc\":\n      wallet = decryptUtcKeystoreToPkey(keystore, password);\n      break;\n    default:\n      throw new Error(\"unrecognized type of keystore\");\n  }\n  return wallet;\n}\n\n/**\n * Returns keystore of a given ethereum private key with password\n * @param privateKey\n * @param password\n * @returns {{version, id, address, crypto}}  keystore\n */\nexport function pkeyToKeystore(privateKey, password) {\n  return fromPrivateKey(privateKey).toV3(password, { c: 1024, n: 1024 });\n}\n\n/**\n * Returns ethereum private key of given v3 keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptUtcKeystoreToPkey(keystore, password) {\n  return fromV3(keystore, password, true).getPrivateKey();\n}\n\n/**\n * Returns type of a given keystore\n * @param keystore string\n * @returns {string}\n */\nexport function determineKeystoreType(keystore) {\n  const parsed = JSON.parse(keystore);\n  if (parsed.encseed) {\n    return \"presale\";\n  } else if (parsed.Crypto || parsed.crypto) {\n    return \"v2-v3-utc\";\n  } else if (parsed.hash && parsed.locked === true) {\n    return \"v1-encrypted\";\n  } else if (parsed.hash && parsed.locked === false) {\n    return \"v1-unencrypted\";\n  } else if (parsed.publisher === \"MyEtherWallet\") {\n    return \"v2-unencrypted\";\n  } else {\n    throw new Error(\"Invalid keystore\");\n  }\n}\n\n/**\n * Returns ethereum  private key of given presale keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptPresaleToPrivKey(keystore, password) {\n  return fromEthSale(keystore, password).getPrivateKey();\n}\n\n/**\n * Returns ethereum  private key of given v1 keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptMewV1ToPrivKey(keystore, password) {\n  return fromV1(keystore, password).getPrivateKey();\n}\n\n/**\n * Checks whether a password is required to decrypt the given keystore\n * @param keystore string\n * @returns {boolean}\n */\nexport function isKeystorePassRequired(keystore) {\n  switch (determineKeystoreType(keystore)) {\n    case \"presale\":\n      return true;\n    case \"v1-unencrypted\":\n      return false;\n    case \"v1-encrypted\":\n      return true;\n    case \"v2-unencrypted\":\n      return false;\n    case \"v2-v3-utc\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Returns V3 format fileName\n * @param address\n * @returns {string}\n */\nexport function getFileName(address) {\n  const ts = new Date();\n  return [\n    \"UTC--\",\n    ts.toJSON().replace(/:/g, \"-\"),\n    \"--\",\n    clearHexPrefix(address),\n    \".json\"\n  ].join(\"\");\n}\n","// Taken from\n// https://github.com/iden3/circomlib\n\nconst bn128 = require(\"snarkjs\").bn128;\nconst bigInt = require(\"snarkjs\").bigInt;\nconst blake2b = require(\"blake2b\");\nconst assert = require(\"assert\");\n\nconst F = bn128.Fr;\nconst SEED = \"poseidon\";\nconst NROUNDSF = 8;\nconst NROUNDSP = 57;\nconst T = 6;\n\nfunction getPseudoRandom(seed, n) {\n  const res = [];\n  let input = Buffer.from(seed);\n  let h = blake2b(32)\n    .update(input)\n    .digest();\n  while (res.length < n) {\n    const n = F.affine(bigInt.leBuff2int(h));\n    res.push(n);\n    h = blake2b(32)\n      .update(h)\n      .digest();\n  }\n\n  return res;\n}\n\nfunction allDifferent(v) {\n  for (let i = 0; i < v.length; i++) {\n    if (v[i].isZero()) return false;\n    for (let j = i + 1; j < v.length; j++) {\n      if (v[i].equals(v[j])) return false;\n    }\n  }\n  return true;\n}\n\nexport function getMatrix(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  let nonce = \"0000\";\n  let cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  while (!allDifferent(cmatrix)) {\n    nonce = Number(nonce) + 1 + \"\";\n    while (nonce.length < 4) nonce = \"0\" + nonce;\n    cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  }\n\n  const M = new Array(t);\n  for (let i = 0; i < t; i++) {\n    M[i] = new Array(t);\n    for (let j = 0; j < t; j++) {\n      M[i][j] = F.affine(F.inverse(F.sub(cmatrix[i], cmatrix[t + j])));\n    }\n  }\n  return M;\n}\n\nexport function getConstants(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  return getPseudoRandom(seed + \"_constants\", nRounds);\n}\n\nfunction ark(state, c) {\n  for (let j = 0; j < state.length; j++) {\n    state[j] = F.add(state[j], c);\n  }\n}\n\nfunction sigma(a) {\n  return F.mul(a, F.square(F.square(a, a)));\n}\n\nfunction mix(state, M) {\n  const newState = new Array(state.length);\n  for (let i = 0; i < state.length; i++) {\n    newState[i] = F.zero;\n    for (let j = 0; j < state.length; j++) {\n      newState[i] = F.add(newState[i], F.mul(M[i][j], state[j]));\n    }\n  }\n  for (let i = 0; i < state.length; i++) state[i] = newState[i];\n}\n\nexport function createHash(t, nRoundsF, nRoundsP, seed?) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRoundsF === \"undefined\") nRoundsF = NROUNDSF;\n  if (typeof nRoundsP === \"undefined\") nRoundsP = NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n\n  assert(nRoundsF % 2 == 0);\n  const C = getConstants(t, seed, nRoundsF + nRoundsP);\n  const M = getMatrix(t, seed, nRoundsF + nRoundsP);\n  return function(inputs) {\n    let state = [];\n    assert(inputs.length < t);\n    assert(inputs.length > 0);\n    for (let i = 0; i < inputs.length; i++) state[i] = bigInt(inputs[i]);\n    for (let i = inputs.length; i < t; i++) state[i] = F.zero;\n\n    for (let i = 0; i < nRoundsF + nRoundsP; i++) {\n      ark(state, C[i]);\n      if (i < nRoundsF / 2 || i >= nRoundsF / 2 + nRoundsP) {\n        for (let j = 0; j < t; j++) state[j] = sigma(state[j]);\n      } else {\n        state[0] = sigma(state[0]);\n      }\n      mix(state, M);\n    }\n    return F.affine(state[0]);\n  };\n}\n","import { mnemonicToSeed, validateMnemonic } from \"bip39\";\nimport { fromMasterSeed } from \"hdkey\";\n\n/**\n * Decrypt mnemonic into ethereum private key\n * @param mnemonic string\n * @param password string\n * @param dpath string\n */\nexport function mnemonictoPrivatekey(mnemonic, dpath, password) {\n  if (dpath) {\n    mnemonic = mnemonic.trim();\n    if (!validateMnemonic(mnemonic)) {\n      throw new Error(\"Invalid mnemonic\");\n    }\n    const seed = mnemonicToSeed(mnemonic, password);\n    const derived = fromMasterSeed(seed).derive(dpath);\n    return derived.privateKey;\n  } else {\n    throw new Error(\"dpath can't be null\");\n  }\n}\n\n/**\n * Valid mnemonic\n * @param phrase string\n * @returns {bool}\n */\nexport function isValidateMnemonic(phrase) {\n  return validateMnemonic(phrase);\n}\n","export default [\n  {\n    symbol: \"ETH\",\n    title: \"Ethereum\",\n    icon: true\n  },\n  {\n    symbol: \"WETH\",\n    title: \"WETH\",\n    icon: true\n  },\n  {\n    symbol: \"LRC\",\n    title: \"Loopring\",\n    icon: true\n  },\n  {\n    symbol: \"EOS\",\n    title: \"EOS\",\n    icon: true\n  },\n  {\n    symbol: \"QTUM\",\n    title: \"QTUM\",\n    icon: true\n  },\n  {\n    symbol: \"BNB\",\n    title: \"Binance\",\n    icon: true\n  },\n  {\n    symbol: \"ZRX\",\n    title: \"0x\",\n    icon: true\n  },\n  {\n    symbol: \"XRP\",\n    title: \"Ripple\",\n    icon: true\n  },\n  {\n    symbol: \"SNT\",\n    icon: true\n  },\n  {\n    symbol: \"AE\",\n    icon: true\n  },\n  {\n    symbol: \"TRX\",\n    tile: \"TRON\",\n    icon: true\n  },\n  {\n    symbol: \"RDN\",\n    title: \"Raiden Network\"\n  },\n  {\n    symbol: \"BTM\"\n  },\n  {\n    symbol: \"MCO\"\n  },\n  {\n    symbol: \"PPT\"\n  },\n  {\n    symbol: \"SWT\"\n  },\n  {\n    symbol: \"NMR\"\n  },\n  {\n    symbol: \"MTL\"\n  },\n  {\n    symbol: \"REX\"\n  },\n  {\n    symbol: \"SNGLS\"\n  },\n  {\n    symbol: \"OMG\"\n  },\n  {\n    symbol: \"SAN\"\n  },\n  {\n    symbol: \"ANT\"\n  },\n  {\n    symbol: \"ATM\"\n  },\n  {\n    symbol: \"DNT\"\n  },\n  {\n    symbol: \"STORJ\"\n  },\n  {\n    symbol: \"HMQ\"\n  },\n  {\n    symbol: \"TAAS\"\n  },\n  {\n    symbol: \"MGO\"\n  },\n  {\n    symbol: \"AST\"\n  },\n  {\n    symbol: \"LUN\"\n  },\n  {\n    symbol: \"1ST\"\n  },\n  {\n    symbol: \"REQ\"\n  },\n\n  {\n    symbol: \"FUN\"\n  },\n  {\n    symbol: \"XAUR\"\n  },\n  {\n    symbol: \"PAY\"\n  },\n  {\n    symbol: \"SALT\"\n  },\n  {\n    symbol: \"CFI\"\n  },\n  {\n    symbol: \"WINGS\"\n  },\n  {\n    symbol: \"GNT\"\n  },\n  {\n    symbol: \"TKN\"\n  },\n  {\n    symbol: \"GUP\"\n  },\n  {\n    symbol: \"BAT\"\n  },\n  {\n    symbol: \"RCN\"\n  },\n  {\n    symbol: \"KNC\"\n  },\n  {\n    symbol: \"PPP\"\n  },\n  {\n    symbol: \"MLN\"\n  },\n  {\n    symbol: \"REP\"\n  },\n  {\n    symbol: \"NET\"\n  },\n  {\n    symbol: \"WTC\"\n  },\n  {\n    symbol: \"MANA\"\n  },\n  {\n    symbol: \"CVC\"\n  },\n  {\n    symbol: \"ICN\"\n  },\n  {\n    symbol: \"RDN\"\n  },\n  {\n    symbol: \"ETHOS\"\n  },\n  {\n    symbol: \"POWR\"\n  },\n  {\n    symbol: \"BNT\"\n  },\n  {\n    symbol: \"PLU\"\n  },\n  {\n    symbol: \"EDG\"\n  },\n  {\n    symbol: \"ENG\"\n  },\n  {\n    symbol: \"KIN\"\n  },\n  {\n    symbol: \"GNO\"\n  },\n  {\n    symbol: \"LINK\"\n  },\n  {\n    symbol: \"RLC\"\n  },\n  {\n    symbol: \"QSP\"\n  },\n  {\n    symbol: \"IND\"\n  },\n  {\n    symbol: \"TRST\"\n  },\n  {\n    symbol: \"CAT\"\n  }\n];\n","import tokens from \"./tokens\";\n\nimport configs from \"./config.json\";\nimport wallets from \"./dpath.json\";\n\nexport { tokens, configs, wallets };\n","export {\n  default as UpOutline\n} from \"@ant-design/icons/lib/outline/UpOutline\";\nexport {\n  default as DownOutline\n} from \"@ant-design/icons/lib/outline/DownOutline\";\nexport {\n  default as CloseOutline\n} from \"@ant-design/icons/lib/outline/CloseOutline\";\nexport {\n  default as CheckOutline\n} from \"@ant-design/icons/lib/outline/CheckOutline\";\n\nexport {\n  default as RightOutline\n} from \"@ant-design/icons/lib/outline/RightOutline\";\nexport {\n  default as LeftOutline\n} from \"@ant-design/icons/lib/outline/LeftOutline\";\n\nexport {\n  default as CheckCircleOutline\n} from \"@ant-design/icons/lib/outline/CheckCircleOutline\";\nexport {\n  default as InfoCircleOutline\n} from \"@ant-design/icons/lib/outline/InfoCircleOutline\";\nexport {\n  default as ExclamationCircleOutline\n} from \"@ant-design/icons/lib/outline/ExclamationCircleOutline\";\nexport {\n  default as CloseCircleOutline\n} from \"@ant-design/icons/lib/outline/CloseCircleOutline\";\nexport {\n  default as CloseCircleFill\n} from \"@ant-design/icons/lib/fill/CloseCircleFill\";\nexport {\n  default as SearchOutline\n} from \"@ant-design/icons/lib/outline/SearchOutline\";\n\nexport {\n  default as CaretUpFill\n} from \"@ant-design/icons/lib/fill/CaretUpFill\";\nexport {\n  default as CaretDownFill\n} from \"@ant-design/icons/lib/fill/CaretDownFill\";\nexport {\n  default as CaretDownOutline\n} from \"@ant-design/icons/lib/outline/CaretDownOutline\";\n\n// export {\n//   default as EyeInvisibleFill\n// } from \"@ant-design/icons/lib/fill/EyeInvisibleFill\";\n// export {\n//   default as EyeFill\n// } from \"@ant-design/icons/lib/fill/EyeFill\";\nexport {\n  default as EyeInvisibleOutline\n} from \"@ant-design/icons/lib/outline/EyeInvisibleOutline\";\nexport {\n  default as EyeOutline\n} from \"@ant-design/icons/lib/outline/EyeOutline\";\n\nexport {\n  default as StarFill\n} from \"@ant-design/icons/lib/fill/StarFill\";\nexport {\n  default as LoadingOutline\n} from \"@ant-design/icons/lib/outline/LoadingOutline\";","import basicSchemas from \"../common/schemas\";\n\nlet standSchemas = {\n  BASIC_TX: {\n    to: {\n      ...basicSchemas.ADDRESS\n    },\n    value: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasLimit: {\n      type: \"string\",\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    gasPrice: {\n      type: \"string\",\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    chainId: {\n      type: \"number\"\n    },\n    nonce: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    data: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]*$/g\n    }\n  },\n  TX: {\n    to: {\n      ...basicSchemas.ADDRESS\n    },\n    value: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasLimit: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasPrice: {\n      ...basicSchemas.ETH_DATA\n    },\n    chainId: {\n      type: \"number\",\n      required: true\n    },\n    nonce: {\n      ...basicSchemas.ETH_DATA\n    },\n    data: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]*$/g\n    },\n    signed: {\n      type: \"string\"\n    }\n  },\n  BASIC_TOKEN: {\n    address: {\n      ...basicSchemas.ADDRESS\n    },\n    symbol: {\n      type: \"string\"\n    },\n    name: {\n      type: \"string\"\n    },\n    digits: {\n      type: \"number\"\n    },\n    unit: {\n      type: \"string\"\n    },\n    website: {\n      type: \"url\"\n    },\n    allowance: {\n      type: \"number\"\n    },\n    precision: {\n      type: \"number\"\n    },\n    minTradeValue: {\n      type: \"number\"\n    }\n  },\n  TOKEN: {\n    address: {\n      ...basicSchemas.ADDRESS\n    },\n    symbol: {\n      type: \"string\",\n      required: true\n    },\n    name: {\n      type: \"string\",\n      required: true\n    },\n    digits: {\n      type: \"number\",\n      required: true\n    },\n    unit: {\n      type: \"string\",\n      required: true\n    },\n    website: {\n      type: \"url\"\n    },\n    allowance: {\n      type: \"number\",\n      required: true\n    },\n    precision: {\n      type: \"number\",\n      required: true\n    },\n    minTradeValue: {\n      type: \"number\",\n      required: true\n    }\n  }\n};\n\n// Hack: What is standSchemas?\nexport default standSchemas;\n","import Schema from \"async-validator\";\nimport basicSchemas from \"../common/schemas\";\nimport transactionSchmas from \"./schemas\";\n\nconst schemas = {\n  basic: {\n    ...basicSchemas\n  },\n  transaction: {\n    ...transactionSchmas\n  }\n};\n\nlet handleErrors = (errors, fields) => {\n  let msgs = errors.map(err => err.message).join();\n  throw new Error(`data type invalid: ${msgs} \\n`);\n};\n\nlet validate = payload => {\n  let { type, value, onError, onSuccess } = payload;\n  let source = {};\n  let schema = {};\n\n  // fix bug: if value undefined or null\n  if (typeof value === \"undefined\") {\n    throw new Error(`data type invalid: ${type} should not be undefined`);\n  }\n  if (value === null) {\n    throw new Error(`data type invalid: ${type} should not be null`);\n  }\n\n  if (schemas[\"basic\"][type]) {\n    // validate one field , schema & source must just has one field\n    schema[type] = schemas[\"basic\"][type];\n    source[type] = value;\n  }\n  if (schemas[\"transaction\"][type]) {\n    // validate multiple fileds , schema & source must has multiple fields\n    schema[type] = {\n      type: \"object\",\n      required: true,\n      fields: schemas[\"transaction\"][type]\n    };\n    source[type] = value;\n  }\n\n  // TODO: if schema empty\n  let validator = new Schema(schema);\n  validator.validate(source, (errors, fields) => {\n    if (errors) {\n      console.log(\"validate start source\", source);\n      console.log(\"validate start schema\", schema);\n      if (onError) {\n        onError(errors, fields);\n      } else {\n        handleErrors(errors, fields);\n      }\n    } else {\n      if (onSuccess) {\n        onSuccess();\n      }\n    }\n  });\n};\n\nexport default {\n  validate\n};\n","// @ts-ignore\n/* ts-disable */\nimport validator from \"./validator\";\nimport {\n  addHexPrefix,\n  formatAddress,\n  formatKey,\n  toBuffer,\n  toHex,\n  toNumber\n} from \"../common/formatter\";\nimport { decryptKeystoreToPkey, pkeyToKeystore } from \"./keystore\";\nimport {\n  ecsign,\n  hashPersonalMessage,\n  privateToAddress,\n  privateToPublic,\n  publicToAddress,\n  sha3\n} from \"ethereumjs-util\";\nimport { mnemonictoPrivatekey } from \"./mnemonic\";\nimport { generateMnemonic } from \"bip39\";\nimport { trimAll } from \"../common/utils\";\nimport HDKey from \"hdkey\";\nimport EthTransaction from \"ethereumjs-tx\";\nimport * as MetaMask from \"./metaMask\";\nimport Wallet from \"ethereumjs-wallet\";\n\nimport wallets from \"../config/wallets.json\";\nconst LoopringWallet = wallets.find(\n  wallet => trimAll(wallet.name).toLowerCase() === \"loopringwallet\"\n);\nexport const path = LoopringWallet.dpath;\n\nexport function createWallet() {\n  return Wallet.generate();\n}\n\n/**\n * @description Returns the ethereum address  of a given private key\n * @param privateKey\n * @returns {string}\n */\nexport function privateKeytoAddress(privateKey) {\n  try {\n    if (typeof privateKey === \"string\") {\n      validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n      privateKey = toBuffer(addHexPrefix(privateKey));\n    } else {\n      validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n    }\n  } catch (e) {\n    throw new Error(\"Invalid private key\");\n  }\n  return formatAddress(privateToAddress(privateKey));\n}\n\n/**\n * @description Returns the ethereum address of a given public key.\n * Accepts \"Ethereum public keys\" and SEC1 encoded keys.\n * @param publicKey Buffer | string\n * @param sanitize bool [sanitize=false] Accept public keys in other formats\n * @returns {string}\n */\nexport function publicKeytoAddress(publicKey, sanitize) {\n  publicKey = toBuffer(publicKey);\n  return formatAddress(publicToAddress(publicKey, sanitize));\n}\n\n/**\n *\n * @param publicKey\n * @param chainCode\n * @param pageSize\n * @param pageNum\n * @returns {<Array>}\n */\nexport function getAddresses({ publicKey, chainCode, pageSize, pageNum }) {\n  const addresses = [];\n  const hdk = new HDKey();\n  hdk.publicKey =\n    publicKey instanceof Buffer ? publicKey : toBuffer(addHexPrefix(publicKey));\n  hdk.chainCode =\n    chainCode instanceof Buffer ? chainCode : toBuffer(addHexPrefix(chainCode));\n  for (let i = 0; i < pageSize; i++) {\n    const dkey = hdk.derive(`m/${i + pageSize * pageNum}`);\n    addresses.push(publicKeytoAddress(dkey.publicKey, true));\n  }\n  return addresses;\n}\n\n/**\n * @description Returns the ethereum public key of a given private key.\n * @param privateKey Buffer | string\n * @returns {string}\n */\nexport function privateKeytoPublic(privateKey) {\n  try {\n    if (typeof privateKey === \"string\") {\n      validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n      privateKey = toBuffer(addHexPrefix(privateKey));\n    } else {\n      validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n    }\n  } catch (e) {\n    throw new Error(\"Invalid private key\");\n  }\n  return formatKey(privateToPublic(privateKey));\n}\n\n/**\n * @description Returns WalletAccount of given mnemonic, dpath and password\n * @param mnemonic string\n * @param dpath string\n * @param password string\n * @returns {WalletAccount}\n */\nexport function fromMnemonic(mnemonic, dpath, password) {\n  const privateKey = mnemonictoPrivatekey(mnemonic, dpath, password);\n  return fromPrivateKey(privateKey);\n}\n\n/**\n * @description Returns WalletAccount of a given private key\n * @param privateKey string | buffer\n * @returns {WalletAccount}\n */\nexport function fromPrivateKey(privateKey) {\n  return new PrivateKeyAccount(privateKey);\n}\n\n/**\n * @description Returns WalletAccount of the given keystore\n * @param keystore string\n * @param password string\n * @returns {WalletAccount}\n */\nexport function fromKeystore(keystore, password) {\n  const privateKey = decryptKeystoreToPkey(keystore, password);\n  return fromPrivateKey(privateKey);\n}\n\nexport function fromMetaMask(web3, account, address) {\n  return new MetaMaskAccount(web3, account, address);\n}\n\n/**\n * @description generate mnemonic\n * @param strength\n * @returns {*}\n */\nexport function createMnemonic(strength) {\n  return generateMnemonic(strength || 256);\n}\n\n// Hack: Failed to import in react web app\nexport class WalletAccount {\n  // Hack: to use in typescript\n  getAddress() {\n    return \"1\";\n  }\n\n  // /**\n  //  * @description sign\n  //  * @param hash\n  //  */\n  // sign(hash) {\n  //     throw Error('unimplemented');\n  // }\n\n  // /**\n  //  * @description Returns serialized signed ethereum tx\n  //  * @param rawTx\n  //  * @returns {string}\n  //  */\n  signEthereumTx(rawTx) {\n    throw Error(\"unimplemented\");\n  }\n\n  // /**\n  //  * @description Returns given order along with r, s, v\n  //  * @param order\n  //  */\n  // signOrder(order) {\n  //     throw Error('unimplemented');\n  // }\n\n  // /**\n  //  * @description Calculates an Ethereum specific signature with: sign(keccak256(\"\\x19Ethereum Signed Message:\\n\" + len(message) + message))).\n  //  * @param message string\n  //  */\n  // signMessage(message) {\n  //     throw Error('unimplemented');\n  // }\n\n  async sendTransaction(ethNode, signedTx) {\n    const response = await ethNode.sendRawTransaction(signedTx);\n    console.log(\"WalletAccount sendTransaction: \", response);\n    return response;\n  }\n}\n\nexport class PrivateKeyAccount extends WalletAccount {\n  privateKey: any;\n\n  /**\n   * @property\n   * @param privateKey string | Buffer\n   */\n  constructor(privateKey) {\n    super();\n    try {\n      if (typeof privateKey === \"string\") {\n        validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n        privateKey = toBuffer(addHexPrefix(privateKey));\n      } else {\n        validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n      }\n    } catch (e) {\n      throw new Error(\"Invalid private key\");\n    }\n    this.privateKey = privateKey;\n  }\n\n  /**\n   * @description Returns V3 type keystore of this account\n   * @param password\n   * @returns {{version, id, address, crypto}}\n   */\n  toV3Keystore(password) {\n    return pkeyToKeystore(this.privateKey, password);\n  }\n\n  /**\n   * Returns ethereum public key of this account\n   * @returns {string}\n   */\n  getPublicKey() {\n    return privateKeytoPublic(this.privateKey);\n  }\n\n  getAddress() {\n    return privateKeytoAddress(this.privateKey);\n  }\n\n  sign(hash) {\n    hash = toBuffer(hash);\n    const signature = ecsign(hash, this.privateKey);\n    const v = toNumber(signature.v);\n    const r = toHex(signature.r);\n    const s = toHex(signature.s);\n    return { r, s, v };\n  }\n\n  signMessage(message) {\n    const hash = sha3(message);\n    const finalHash = hashPersonalMessage(hash);\n    return this.sign(finalHash);\n  }\n\n  signEthereumTx(rawTx) {\n    validator.validate({ type: \"TX\", value: rawTx });\n    const ethTx = new EthTransaction(rawTx);\n    ethTx.sign(this.privateKey);\n    return toHex(ethTx.serialize());\n  }\n}\n\nexport class MetaMaskAccount extends WalletAccount {\n  web3: any;\n  account: any;\n  address: string;\n\n  constructor(web3, account, address) {\n    super();\n    this.web3 = web3;\n    this.account = account;\n    this.address = address;\n  }\n\n  getAddress() {\n    return this.address;\n  }\n\n  async sign(hash) {\n    const result = await MetaMask.sign(this.web3, this.account, hash);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signMessage(message) {\n    const result = await MetaMask.signMessage(this.web3, this.account, message);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signEthereumTx(rawTx) {\n    const result = await MetaMask.signEthereumTx(\n      this.web3,\n      this.account,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async sendTransaction(unused, rawTx) {\n    const result = await MetaMask.sendTransaction(\n      this.web3,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n}\n","import { BigNumber } from \"bignumber.js\";\nimport BN from \"bn.js\";\n\nconst assert = require(\"assert\");\nconst abi = require(\"ethereumjs-abi\");\n\nexport class Bitstream {\n  private data: string;\n\n  constructor(initialData: string = \"\") {\n    this.data = initialData;\n    if (this.data.startsWith(\"0x\")) {\n      this.data = this.data.slice(2);\n    }\n  }\n\n  public getData() {\n    if (this.data.length === 0) {\n      return \"0x\";\n    } else {\n      return \"0x\" + this.data;\n    }\n  }\n\n  public getBytes32Array() {\n    if (this.data.length === 0) {\n      return [];\n    } else {\n      assert.equal(\n        this.length() % 32,\n        0,\n        \"Bitstream not compatible with bytes32[]\"\n      );\n      return this.data.match(/.{1,64}/g).map(element => \"0x\" + element);\n    }\n  }\n\n  public addBigNumber(x: BigNumber, numBytes = 32) {\n    const formattedData = this.padString(x.toString(16), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addBN(x: BN, numBytes = 32) {\n    const formattedData = this.padString(x.toString(16), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addNumber(x: number, numBytes = 4) {\n    // Check if we need to encode this number as negative\n    if (x < 0) {\n      const encoded = abi.rawEncode([\"int256\"], [x.toString(10)]);\n      const hex = encoded.toString(\"hex\").slice(-(numBytes * 2));\n      return this.addHex(hex);\n    } else {\n      return this.addBigNumber(new BigNumber(x), numBytes);\n    }\n  }\n\n  public addAddress(x: string, numBytes = 20) {\n    const formattedData = this.padString(x.slice(2), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addHex(x: string) {\n    if (x.startsWith(\"0x\")) {\n      return this.insert(x.slice(2));\n    } else {\n      return this.insert(x);\n    }\n  }\n\n  public extractUint8(offset: number) {\n    return parseInt(this.extractData(offset, 1), 16);\n  }\n\n  public extractUint16(offset: number) {\n    return parseInt(this.extractData(offset, 2), 16);\n  }\n\n  public extractUint24(offset: number) {\n    return parseInt(this.extractData(offset, 3), 16);\n  }\n\n  public extractUint32(offset: number) {\n    return parseInt(this.extractData(offset, 4), 16);\n  }\n\n  public extractUint40(offset: number) {\n    return parseInt(this.extractData(offset, 5), 16);\n  }\n\n  public extractUint48(offset: number) {\n    return parseInt(this.extractData(offset, 6), 16);\n  }\n\n  public extractUint56(offset: number) {\n    return new BN(this.extractData(offset, 7), 16);\n  }\n\n  public extractUint64(offset: number) {\n    return new BN(this.extractData(offset, 8), 16);\n  }\n\n  public extractUint(offset: number) {\n    return new BN(this.extractData(offset, 32), 16);\n  }\n\n  public extractAddress(offset: number) {\n    return \"0x\" + this.extractData(offset, 20);\n  }\n\n  public extractBytes1(offset: number) {\n    return this.extractBytesX(offset, 1);\n  }\n\n  public extractBytes32(offset: number) {\n    return this.extractBytesX(offset, 32);\n  }\n\n  public extractBytesX(offset: number, length: number) {\n    return new Buffer(this.extractData(offset, length), \"hex\");\n  }\n\n  public extractChar(offset: number) {\n    return this.extractData(offset, 1);\n  }\n\n  public extractData(offset: number, length: number) {\n    const start = offset * 2;\n    const end = start + length * 2;\n    if (this.data.length < end) {\n      throw new Error(\n        \"substring index out of range:[\" + start + \", \" + end + \"]\"\n      );\n    }\n    return this.data.slice(start, end);\n  }\n\n  // Returns the number of bytes of data\n  public length() {\n    return this.data.length / 2;\n  }\n\n  public static hashCode(s) {\n    for (var i = 0, h = 0; i < s.length; i++)\n      h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;\n    return Math.abs(h);\n  }\n\n  private insert(x: string) {\n    const offset = this.length();\n    this.data += x;\n    return offset;\n  }\n\n  private padString(x: string, targetLength: number) {\n    if (x.length > targetLength) {\n      throw Error(\n        \"0x\" +\n          x +\n          \" is too big to fit in the requested length (\" +\n          targetLength +\n          \")\"\n      );\n    }\n    while (x.length < targetLength) {\n      x = \"0\" + x;\n    }\n    return x;\n  }\n}\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/wedexLogo.6266a393.svg\";","/* eslint-disable */\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.TradingView={})}(this,function(t){\"use strict\";var e=Object.assign||function(t){for(var e,o=arguments,i=1,n=arguments.length;i<n;i++)for(var s in e=o[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};function o(t,i){var n=e({},t);for(var s in i)\"object\"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==i[s]&&(n[s]=i[s]):n[s]=o(t[s],i[s]);return n}var i={mobile:{disabled_features:[\"left_toolbar\",\"header_widget\",\"timeframes_toolbar\",\"edit_buttons_in_legend\",\"context_menus\",\"control_bar\",\"border_around_the_chart\"],enabled_features:[]}},n={width:800,height:500,symbol:\"AA\",interval:\"D\",timezone:\"Etc/UTC\",container_id:\"\",library_path:\"\",locale:\"en\",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{\"mainSeriesProperties.showCountdown\":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:\"5y\",resolution:\"W\"},{text:\"1y\",resolution:\"W\"},{text:\"6m\",resolution:\"120\"},{text:\"3m\",resolution:\"60\"},{text:\"1m\",resolution:\"30\"},{text:\"5d\",resolution:\"5\"},{text:\"1d\",resolution:\"1\"}],client_id:\"0\",user_id:\"0\",charts_storage_api_version:\"1.0\",favorites:{intervals:[],chartTypes:[]}};function s(){return\"1.14 (internal id 36c29828 @ 2019-09-24 10:39:54.259301)\"}var r=function(){function t(t){if(this._id=\"tradingview_\"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error(\"Datafeed is not defined\");if(this._options=o(n,t),t.preset){var e=i[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn(\"Unknown preset: `\"+t.preset+\"`\")}\"Dark\"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:\"#131722\"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,o){this._innerAPI().changeSymbol(t,e+\"\",o)},t.prototype.remove=function(){window.removeEventListener(\"resize\",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,o,i){this._innerAPI().saveChartToServer(t,e,o,i)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=o(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+\"px\")},t.prototype._create=function(){var t=this,e=this._render(),o=document.getElementById(this._options.container_id);if(null===o)throw new Error(\"There is no such element - #\"+this._options.container_id);o.innerHTML=e,this._iFrame=o.querySelector(\"#\"+this._id);var i=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(i.style.width=\"100%\",this._options.fullscreen||(i.style.height=\"100%\")),window.addEventListener(\"resize\",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){var e=function(){i.removeEventListener(\"load\",e,!1),t()};i.addEventListener(\"load\",e,!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,o=t._readyHandlers;e<o.length;e++){var i=o[e];try{i.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||\"\")+\"static/\"+encodeURIComponent(this._options.locale)+\"-tv-chart.36c29828de05fa4d10c3.html#symbol=\"+encodeURIComponent(this._options.symbol)+\"&interval=\"+encodeURIComponent(this._options.interval)+(this._options.timeframe?\"&timeframe=\"+encodeURIComponent(this._options.timeframe):\"\")+(this._options.toolbar_bg?\"&toolbarbg=\"+encodeURIComponent(this._options.toolbar_bg.replace(\"#\",\"\")):\"\")+(this._options.studies_access?\"&studiesAccess=\"+encodeURIComponent(JSON.stringify(this._options.studies_access)):\"\")+\"&widgetbar=\"+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?\"&drawingsAccess=\"+encodeURIComponent(JSON.stringify(this._options.drawings_access)):\"\")+\"&timeFrames=\"+encodeURIComponent(JSON.stringify(this._options.time_frames))+\"&locale=\"+encodeURIComponent(this._options.locale)+\"&uid=\"+encodeURIComponent(this._id)+\"&clientId=\"+encodeURIComponent(String(this._options.client_id))+\"&userId=\"+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?\"&chartsStorageUrl=\"+encodeURIComponent(this._options.charts_storage_url):\"\")+(this._options.charts_storage_api_version?\"&chartsStorageVer=\"+encodeURIComponent(this._options.charts_storage_api_version):\"\")+(this._options.custom_css_url?\"&customCSS=\"+encodeURIComponent(this._options.custom_css_url):\"\")+(this._options.auto_save_delay?\"&autoSaveDelay=\"+encodeURIComponent(String(this._options.auto_save_delay)):\"\")+\"&debug=\"+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?\"&snapshotUrl=\"+encodeURIComponent(this._options.snapshot_url):\"\")+(this._options.timezone?\"&timezone=\"+encodeURIComponent(this._options.timezone):\"\")+(this._options.study_count_limit?\"&studyCountLimit=\"+encodeURIComponent(String(this._options.study_count_limit)):\"\")+(this._options.symbol_search_request_delay?\"&ssreqdelay=\"+encodeURIComponent(String(this._options.symbol_search_request_delay)):\"\")+(this._options.theme?\"&theme=\"+encodeURIComponent(String(this._options.theme)):\"\");return'<iframe id=\"'+this._id+'\" name=\"'+this._id+'\"  src=\"'+e+'\"'+(this._options.autosize||this._options.fullscreen?\"\":' width=\"'+this._options.width+'\" height=\"'+this._options.height+'\"')+' frameborder=\"0\" allowTransparency=\"true\" scrolling=\"no\" allowfullscreen style=\"display:block;\"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=s,t.version=s,t.widget=r,Object.defineProperty(t,\"__esModule\",{value:!0})});\n","module.exports = __webpack_public_path__ + \"static/media/fullscreen.5f4ffc05.svg\";","module.exports = __webpack_public_path__ + \"static/media/depthAll.66afdc64.svg\";","module.exports = __webpack_public_path__ + \"static/media/depthSell.58406931.svg\";","module.exports = __webpack_public_path__ + \"static/media/depthBuy.efcbc04e.svg\";","module.exports = __webpack_public_path__ + \"static/media/award.86f95a8e.png\";","module.exports = __webpack_public_path__ + \"static/media/wedexLogoVertical.d319b12f.png\";","export default {\n  SUCC: { code: 0, msg: \"success\" },\n  PARAM_INVALID: { code: 1001, msg: \"parameter invalid\" }\n};\n","// Schema Help： https://github.com/yiminghe/async-validator\n// required: value should be not empty eg: null, undefined, ''\n\nlet basicSchemas = {\n  STRING: {\n    type: \"string\",\n    required: true\n  },\n  OPTION_NUMBER: {\n    validator: (rule, value, cb) => {\n      if (value) {\n        if (typeof value === \"number\") {\n          cb();\n        } else {\n          cb(\"page number valid\");\n        }\n      } else {\n        cb();\n      }\n    }\n  },\n  URL: {\n    type: \"url\",\n    required: true\n  },\n  ADDRESS: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{40}$/g\n  },\n  HEX: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]*$/g\n  },\n  ETH_DATA: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{1,64}$/g\n  },\n  QUANTITY: {\n    type: \"string\",\n    required: true\n  },\n  PRIVATE_KEY: {\n    type: \"string\",\n    required: true,\n    len: 64\n  },\n  TX_HASH: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{64}$/g\n  },\n  ABI_METHOD: {\n    type: \"enum\",\n    required: true,\n    enum: [\n      \"cancelOrder\",\n      \"cancelAllOrders\",\n      \"cancelOrdersByTokenPairs\",\n      \"approve\",\n      \"deposit\",\n      \"withdraw\",\n      \"transfer\",\n      \"balanceOf\",\n      \"allowance\",\n      \"symbol\",\n      \"name\",\n      \"decimals\",\n      \"bind\",\n      \"unbind\",\n      \"getBindingAddress\"\n    ]\n  },\n  RPC_TAG: {\n    type: \"enum\",\n    required: true,\n    enum: [\"latest\", \"earliest\", \"pending\"]\n  },\n  TIMESTAMP: {\n    type: \"string\"\n  },\n  PROJECT_ID: {\n    type: \"number\",\n    required: true,\n    min: 1\n  },\n  LOOPRING_TOKEN: {\n    type: \"enum\",\n    required: true,\n    enum: [\"LRC\", \"LRN\", \"LRQ\"]\n  },\n  PRIVATE_KEY_BUFFER: {\n    validator: (rule, value, cb) => {\n      if (value instanceof Buffer && value.length === 32) {\n        cb();\n      } else {\n        cb(\"private_key must be buffer\");\n      }\n    }\n  },\n  CURRENCY: {\n    type: \"string\",\n    required: true,\n    enum: [\"USD\", \"CNY\"]\n  },\n  DEFAULT_BLOCK: {\n    type: \"string\",\n    required: true,\n    enum: [\"earliest\", \"latest\", \"pending\"]\n  },\n  CANCEL_ORDER_TYPE: {\n    type: \"enum\",\n    required: true,\n    enum: [1, 2, 3, 4]\n  }\n};\n\nexport default basicSchemas;\n","import { bigInt, bn128 } from \"snarkjs\";\n\nexport let Base8 = [\n  bigInt(\n    \"16540640123574156134436876038791482806971768689494387082833631921987005038935\"\n  ),\n  bigInt(\n    \"20819045374670962167435360035096875258406992893633759881276124905556507972311\"\n  )\n];\nexport let order = bigInt(\n  \"21888242871839275222246405745257275088614511777268538073601725287587578984328\"\n);\nexport let subOrder = order.shr(3);\nexport let p = bn128.r;\n\nexport function addPoint(a, b) {\n  const q = bn128.r;\n  const cta = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n  const res = [];\n\n  res[0] = bigInt(\n    bigInt(a[0])\n      .mul(b[1])\n      .add(bigInt(b[0]).mul(a[1]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").add(\n            d\n              .mul(a[0])\n              .mul(b[0])\n              .mul(a[1])\n              .mul(b[1])\n          )\n        ).inverse(q)\n      )\n  ).affine(q);\n  res[1] = bigInt(\n    bigInt(a[1])\n      .mul(b[1])\n      .sub(cta.mul(a[0]).mul(b[0]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").sub(\n            d\n              .mul(a[0])\n              .mul(b[0])\n              .mul(a[1])\n              .mul(b[1])\n          )\n        ).inverse(q)\n      )\n  ).affine(q);\n\n  return res;\n}\n\nexport function mulPointEscalar(base, e) {\n  let res = [bigInt(\"0\"), bigInt(\"1\")];\n  let rem = bigInt(e);\n  let exp = base;\n\n  while (!rem.isZero()) {\n    if (rem.isOdd()) {\n      res = addPoint(res, exp);\n    }\n    exp = addPoint(exp, exp);\n    rem = rem.shr(1);\n  }\n\n  return res;\n}\n\nexport function inSubgroup(P) {\n  if (!inCurve(P)) return false;\n  const res = mulPointEscalar(P, subOrder);\n  return res[0].equals(bigInt(0)) && res[1].equals(bigInt(1));\n}\n\nexport function inCurve(P) {\n  const F = bn128.Fr;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const x2 = F.square(P[0]);\n  const y2 = F.square(P[1]);\n\n  if (!F.equals(F.add(F.mul(a, x2), y2), F.add(F.one, F.mul(F.mul(x2, y2), d))))\n    return false;\n\n  return true;\n}\n\nexport function packPoint(P) {\n  const buff = bigInt.leInt2Buff(P[1], 32);\n  if (P[0].greater(p.shr(1))) {\n    buff[31] = buff[31] | 0x80;\n  }\n  return buff;\n}\n\nexport function unpackPoint(_buff) {\n  const F = bn128.Fr;\n\n  const buff = Buffer.from(_buff);\n  let sign = false;\n  const P = new Array(2);\n  if (buff[31] & 0x80) {\n    sign = true;\n    buff[31] = buff[31] & 0x7f;\n  }\n  P[1] = bigInt.leBuff2int(buff);\n  if (P[1].greaterOrEquals(p)) return null;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const y2 = F.square(P[1]);\n\n  let x = F.sqrt(F.div(F.sub(F.one, y2), F.sub(a, F.mul(d, y2))));\n\n  if (x == null) return null;\n\n  if (sign) x = F.neg(x);\n\n  P[0] = F.affine(x);\n\n  return P;\n}\n\nexport default {\n  addPoint,\n  mulPointEscalar,\n  inCurve,\n  inSubgroup,\n  packPoint,\n  unpackPoint,\n  Base8,\n  order,\n  subOrder,\n  p,\n}","// Taken and modified from\n// https://github.com/iden3/circomlib\nimport { Bitstream } from \"./bitstream\";\nimport { KeyPair, Signature } from \"../../model/types\";\n\nconst createBlakeHash = require(\"blake-hash\");\nconst bigInt = require(\"snarkjs\").bigInt;\nconst babyJub = require(\"./babyjub\");\nconst poseidon = require(\"./poseidon\");\n\nexport class EdDSA {\n  public static generateKeyPair(seed: string) {\n    let randomNumber = Bitstream.hashCode(seed);\n    let secretKey = bigInt(randomNumber.toString(10));\n    secretKey = secretKey.mod(babyJub.subOrder);\n    const publicKey = babyJub.mulPointEscalar(babyJub.Base8, secretKey);\n\n    const keyPair: KeyPair = {\n      publicKeyX: publicKey[0].toString(10),\n      publicKeyY: publicKey[1].toString(10),\n      secretKey: secretKey.toString(10)\n    };\n    return keyPair;\n  }\n\n  public static sign(strKey: string, msg: string) {\n    const key = bigInt(strKey);\n    const prv = bigInt.leInt2Buff(key, 32);\n\n    const h1 = createBlakeHash(\"blake512\")\n      .update(prv)\n      .digest();\n    const msgBuff = bigInt.leInt2Buff(bigInt(msg), 32);\n    const rBuff = createBlakeHash(\"blake512\")\n      .update(Buffer.concat([h1.slice(32, 64), msgBuff]))\n      .digest();\n    let r = bigInt.leBuff2int(rBuff);\n    r = r.mod(babyJub.subOrder);\n\n    const A = babyJub.mulPointEscalar(babyJub.Base8, key);\n    const R8 = babyJub.mulPointEscalar(babyJub.Base8, r);\n\n    const hasher = poseidon.createHash(6, 6, 52);\n    const hm = hasher([R8[0], R8[1], A[0], A[1], msg]);\n    const S = r.add(hm.mul(key)).mod(babyJub.subOrder);\n\n    const signature: Signature = {\n      Rx: R8[0].toString(),\n      Ry: R8[1].toString(),\n      s: S.toString()\n    };\n    return signature;\n  }\n\n  public static verify(msg: string, sig: Signature, pubKey: string[]) {\n    const A = [bigInt(pubKey[0]), bigInt(pubKey[1])];\n    const R = [bigInt(sig.Rx), bigInt(sig.Ry)];\n    const S = bigInt(sig.s);\n\n    // Check parameters\n    if (!babyJub.inCurve(R)) return false;\n    if (!babyJub.inCurve(A)) return false;\n    if (S >= babyJub.subOrder) return false;\n\n    const hasher = poseidon.createHash(6, 6, 52);\n    const hm = hasher([R[0], R[1], A[0], A[1], bigInt(msg)]);\n\n    const Pleft = babyJub.mulPointEscalar(babyJub.Base8, S);\n    let Pright = babyJub.mulPointEscalar(A, hm);\n    Pright = babyJub.addPoint(R, Pright);\n\n    if (!Pleft[0].equals(Pright[0])) return false;\n    if (!Pleft[1].equals(Pright[1])) return false;\n\n    return true;\n  }\n}\n"],"sourceRoot":""}