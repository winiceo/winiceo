{"version":3,"sources":["librarys/lightcone_v3/lib/wallet/common/utils.ts","librarys/lightcone_v3/lib/wallet/common/formatter.ts","librarys/lightcone_v3/lib/wallet/ethereum/metaMask.ts","librarys/lightcone_v3/lib/wallet/ethereum/keystore.ts","librarys/lightcone_v3/lib/sign/poseidon.ts","utils/enum.js","api/wedexApi.js","api/index.js","librarys/lightcone_v3/lib/wallet/ethereum/mnemonic.ts","librarys/lightcone_v3/lib/wallet/config/tokens.ts","librarys/lightcone_v3/lib/wallet/config/data.ts","librarys/lightcone_v3/lib/wallet/common/request.ts","librarys/lightcone_v3/lib/wallet/common/validator.ts","librarys/lightcone_v3/lib/wallet/common/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/AbiFunction.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/Contract.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/Contracts.ts","librarys/lightcone_v3/lib/wallet/ethereum/contracts/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/utils.ts","librarys/lightcone_v3/lib/wallet/ethereum/eth.ts","librarys/lightcone_v3/lib/wallet/ethereum/wallet.ts","librarys/lightcone_v3/lib/wallet/ethereum/index.ts","librarys/lightcone_v3/lib/wallet/config/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/transaction.ts","librarys/lightcone_v3/model/types.ts","librarys/lightcone_v3/sign/exchange.ts","librarys/lightcone_v3/wallet/account.ts","librarys/lightcone_v3/index.ts","librarys/lightcone_v3/lib/wallet/ethereum/schemas.ts","librarys/lightcone_v3/lib/wallet/ethereum/validator.ts","charting_library/charting_library.min.js","librarys/lightcone_v3/lib/wallet/ethereum/walletAccount.ts","librarys/lightcone_v3/lib/wallet/ethereum/dkey.ts","librarys/lightcone_v3/lib/sign/bitstream.ts","sagas/StartupSagas.js","sagas/index.js","store/models/appState.js","store/models/metaMask.js","store/models/dexAccount.js","store/models/depth.js","store/models/trade.js","store/models/candleStick.js","store/models/ticker.js","store/models/markets.js","store/models/tokens.js","store/models/placeOrder.js","store/models/balance.js","store/models/walletBalance.js","store/models/order.js","store/models/transfer.js","store/models/socket.js","store/models/rate.js","store/models/award.js","store/models/persistData.js","store/models/index.js","store/index.js","icons/award.png","librarys/lightcone_v3/lib/wallet/common/code.ts","widgets/TVChartContainer/index.less","config/appConfig.js","librarys/lightcone_v3/lib/wallet/common/response.ts","librarys/lightcone_v3/lib/wallet/common/schemas.ts","librarys/lightcone_v3/lib/sign/babyjub.ts","librarys/lightcone_v3/lib/sign/eddsa.ts","icons/switchSide.png","locales/en_US.js","locales/zh_CN.js","locales/index.js","locales/ja_JP.js","locales/ko_KR.js","locales/ru_RU.js","views/Login.js","components/Page.js","components/Svg.js","components/Spin.js","components/InfiniteScroll.js","components/QhStepper.js","widgets/Trade.js","widgets/TVChartContainer/api/index.js","widgets/TVChartContainer/index.js","widgets/TVChart.js","widgets/PlaceOrder.js","widgets/Common/CoinInput.js","widgets/Common/TabNav.js","widgets/Common/CurrentPair.js","widgets/Dialog/funcfyDialog.js","widgets/Dialog/SignInModal.js","widgets/Dialog/UpsertPasswordModal.js","widgets/Common/BillPreCheck.js","widgets/Common/FormErrorInfo.js","widgets/Common/Input.js","widgets/Common/DepthBg.js","widgets/Common/Styled.js","widgets/MyOrder.js","widgets/Depth.js","widgets/DepthHorizontal.js","widgets/EggAward.js","widgets/TokenInfo.js","views/Exchange.js","views/Finder.js","views/Balance.js","views/Home.js","views/Pair.js","views/Market.js","views/transfer/TransferList.js","views/transfer/TransferCreate.js","views/setting/Setting.js","views/setting/Apikey.js","views/setting/AwardRecord.js","router/index.js","theme.js","App.js","services/api.js","serviceWorker.js","index.js","utils/index.js"],"names":["trim","str","replace","trimAll","keccakHash","toHex","keccak","calculateGas","gasPrice","gasLimit","toBig","times","div","hashPersonalMessage","formatter","toBuffer","mixed","Buffer","ethUtil","BigNumber","BN","addHexPrefix","toString","RegExp","test","Error","toNumber","Number","toBN","fromGWEI","value","decimalPlaces","toGWEI","valueInWEI","formatKey","startsWith","slice","formatAddress","toChecksumAddress","input","clearHexPrefix","padLeftEven","hex","length","getDisplaySymbol","settingsCurrency","toFixed","number","precision","ceil","rm","Math","floor","config","EXPONENTIAL_AT","RANGE","ROUNDING_MODE","MetaMask","web3","account","hash","validator","validate","type","Promise","resolve","Response","code","PARAM_INVALID","msg","eth","sign","err","result","errorMsg","message","substring","indexOf","error","r","s","v","sha3","this","rawTx","ethTx","EthTransaction","response","signature","_chainId","Object","assign","serialize","console","log","tx","e","sendTransaction","transactionHash","decryptKeystoreToPkey","keystore","password","wallet","parsed","JSON","parse","determineKeystoreType","decryptPresaleToPrivKey","from","private","decryptMewV1ToPrivKey","privKey","decryptUtcKeystoreToPkey","pkeyToKeystore","privateKey","fromPrivateKey","toV3","c","n","fromV3","getPrivateKey","encseed","Crypto","crypto","locked","publisher","fromEthSale","fromV1","isKeystorePassRequired","getFileName","address","Date","toJSON","join","bn128","require","bigInt","blake2b","assert","F","Fr","SEED","NROUNDSF","NROUNDSP","T","getPseudoRandom","seed","res","h","update","digest","affine","leBuff2int","push","allDifferent","i","isZero","j","equals","getMatrix","t","nRounds","nonce","cmatrix","M","Array","inverse","sub","getConstants","ark","state","add","sigma","a","mul","square","mix","newState","zero","createHash","nRoundsF","nRoundsP","C","inputs","XEnumItem","text","meta","getValue","XEnum","enumDict","enumItems","values","keys","forEach","key","itemValue","find","item","_","undefined","getText","exist","ele","excludeIndex","options","filter","map","label","specKey","includes","ENUM_ACCOUNT_STATUS","UNSIGNED","UNCREATED","CREATED","LOGGED_IN","CREATING","LOCKED","ENUM_ORDER_STATUS","PROCESSING","PROCESSED","CANCELLING","CANCELLED","EXPIRED","ENUM_TX_STATUS","RECEIVED","FAILED","ENUM_INTERVAL_TYPE","MIN_1","MIN_5","MIN_15","MIN_30","HOUR_1","HOUR_2","HOUR_4","HOUR_12","DAY_1","WEEK_1","ENUM_LANGUAGE_TYPE","cn","us","kr","ru","jp","srvApi","axios","create","baseURL","appConfig","wedex","serverUrl","formatExchanges","exchanges","exchange","baseToken","standardContractName","quoteToken","targetContractName","pricePrecision","amountPrecision","totalPrecision","maxLevel","baseContractId","standardContract","id","quoteContractId","targetContract","market","toUpper","interceptors","request","use","store","getState","dexAccount","headers","common","getAllExchanges","params","get","resp","data","rows","getChannelExchanges","getUserBillEggPrizeList","restParams","postUserReadBillEggPrizeList","post","getExchanges","channelName","getContracts","contracts","contract","symbol","name","fullname","contractAddr","website","homepage","getContract","getSystemContractFee","getSystemBillValidTime","getArticleList","getArticleListRecommended","recommended","getArticle","relay","withoutThrow","func","Toast","fail","String","parseResponse","resultInfo","errorData","errorMessage","104208","_parseResponse","relayApi","owner","tokenAddress","token","responseData","status","limit","level","tokens","split","depth","bids","updatedBids","bid","updatedBid","price","size","volume","count","sizeInNumber","fromWEI","asks","updatedAsks","ask","updatedAsk","accountId","offset","apiKey","statuses","side","start","end","orders","updatedOrders","utils","formatOrders","totalNum","orderHash","clientOrderId","signed","Rx","Ry","getCandlestick","interval","resolution","parseValueByText","promises","periodEnd","periodStart","ms","promise","max","all","candles","flatten","skip","signedEthereumTx","sendDeposit","tokenSId","minPrice","normalPrice","plus","maxPrice","getTokenBySymbol","reject","getBalances","getOrders","cancelOrders","getEthBalance","getTokenBalance","sendWithdrawTransaction","getTrade","lightconeGetAccount","getDepth","getCandlestickCombine","getApiKey","getTickers","getPrice","getTransactions","getNonce","sendApprove","getOrderId","submitOrderToLightcone","getRecommendedGasPrice","getAllowance","wedexApi","mnemonictoPrivatekey","mnemonic","dpath","validateMnemonic","mnemonicToSeed","fromMasterSeed","derive","isValidateMnemonic","phrase","title","icon","tile","checkStatus","statusText","randomBytes","host","timeOut","requestPromise","body","stringify","fetch","then","json","catch","timeoutPromise","setTimeout","race","schemas","basic","basicSchemas","payload","onError","onSuccess","source","schema","Schema","errors","fields","msgs","handleErrors","abi","AbiFunction","outputs","constant","inputTypes","outputTypes","methodAbiHash","methodID","abiInputs","parseInputs","rawEncode","parseOutputs","rawDecode","encoded","output","ethereumjs_abi","Contract","abiFunctions","funAbi","reduce","acc","methodHash","method","abiFunction","encodeInputs","decodeOutputs","encode","methodId","decodeEncodedInputs","WETH","wethAbi","ERC20Token","erc20Abi","AirdropContract","airdropAbi","ExchangeContract","exchangeAbi","Contracts","updateHost","newValue","getTransactionCount","tag","getGasPrice","estimateGas","getAccountBalance","getTransactionByhash","getTransactionRecipt","isValidEthAddress","getHash","Eth","signedTx","sendRawTransaction","txHash","call","getWallet","wallets","localStorage","toLowerCase","localNonce","metamask","setWallet","otherWallets","w","isInWhiteList","storeUnlockedAddress","unlockType","unlockedType","unlockedAddress","getUnlockedAddress","getUnlockedType","clearUnlockedAddress","fm","configs","fees","txs","whiteList","getTokens","getMarketBySymbol","getMarkets","getMarketsByTokenR","markets","getTokenByAddress","getMarketByPair","pair","pairArr","getGasLimitByType","getFeeByType","fee","isinWhiteList","getChainId","chainId","getExchangeId","exchangeId","getLabel","getMaxFeeBips","maxFeeBips","isSupportedMarket","m","toUpperCase","getTokenSupportedMarkets","leftMarket","getMarketsByTokenL","rightMarket","getWalletAddress","walletAddress","getExchangeAddress","exchangeAddress","getMaxAmountInWEI","maxAmount","getWallets","digits","toWEI","Transaction","raw","walletType","path","complete","setChainId","setGasLimit","setGasPrice","KeyPair","publicKeyX","publicKeyY","secretKey","DexAccount","keyPair","WithdrawalRequest","tokenId","amount","amountInBN","tokenF","tokenFId","amountF","amountFInBN","OrderRequest","tokenS","tokenB","tokenBId","amountS","amountB","amountSInBN","amountBInBN","orderId","allOrNone","validSince","validUntil","buy","feeBips","rebateBips","signatureRx","signatureRy","signatureS","CancelRequest","orderToken","orderTokenId","GetAPIKeyRequest","SignAPIKeyRequest","FlexCancelRequest","SignFlexCancelRequest","currentWalletAccount","EdDSA","generateKeyPair","permission","getAddress","createAccountAndDeposit","publicX","publicY","ethereum","pubKeyX","pubKeyY","to","feeInWEI","gasInWEI","withdrawal","feeToken","signWithdrawal","Poseidon","hasher","success","verify","order","tokenBuy","tokenSell","signOrder","random","setupOrder","cancel","signCancel","sha256","Account","_spender","_value","txSendByMetaMask","signEthereumTx","verifyPassword","createOrUpdateAccountResposne","createOrUpdateAccount","deposit","withdraw","submitWithdrawal","submitOrder","submitCancel","signGetApiKey","submitFlexCancel","standSchemas","BASIC_TX","ADDRESS","ETH_DATA","pattern","required","TX","BASIC_TOKEN","unit","allowance","minTradeValue","TOKEN","transaction","transactionSchmas","o","arguments","prototype","hasOwnProperty","isArray","mobile","disabled_features","enabled_features","width","height","timezone","container_id","library_path","locale","widgetbar","details","watchlist","watchlist_settings","default_symbols","overrides","studies_overrides","brokerConfig","configFlags","fullscreen","autosize","debug","logo","time_frames","client_id","user_id","charts_storage_api_version","favorites","intervals","chartTypes","_id","_ready","_readyHandlers","_onWindowResize","_autoResizeChart","bind","datafeed","_options","preset","concat","warn","theme","loading_screen","backgroundColor","_create","onChartReady","headerReady","_innerWindowLoaded","_innerWindow","onGrayedObjectClicked","_innerAPI","onShortcut","createShortcutAction","subscribe","unsubscribe","chart","setLanguage","remove","setSymbol","changeSymbol","window","removeEventListener","splice","_iFrame","parentNode","removeChild","closePopupsAndDialogs","selectLineTool","selectedLineTool","save","saveChart","load","loadChart","extendedData","getSavedCharts","loadChartFromServer","saveChartToServer","removeChartFromServer","onContextMenu","createButton","showNoticeDialog","showConfirmDialog","showLoadChartDialog","showSaveAsChartDialog","symbolInterval","getSymbolInterval","mainSeriesPriceFormatter","getIntervals","getStudiesList","addCustomCSSFile","applyOverrides","applyStudiesOverrides","watchList","activeChart","chartsCount","layout","setLayout","layoutName","changeTheme","takeScreenshot","lockAllDrawingTools","hideAllDrawingTools","undoRedoState","tradingViewApi","contentWindow","style","innerHeight","_render","document","getElementById","innerHTML","querySelector","addEventListener","widgetReady","initializationFinished","customFormatters","brokerFactory","studiesOverrides","disabledFeatures","enabledFeatures","restConfig","numeric_formatting","rss_news_feed","newsProvider","news_provider","loadLastChart","load_last_chart","saveLoadAdapter","save_load_adapter","settingsAdapter","settings_adapter","customIndicatorsUrl","indicators_file_name","saved_data","chartContent","encodeURIComponent","timeframe","toolbar_bg","studies_access","drawings_access","charts_storage_url","custom_css_url","auto_save_delay","snapshot_url","study_count_limit","symbol_search_request_delay","TradingView","version","widget","defineProperty","exports","createWallet","Wallet","generate","privateKeytoAddress","privateToAddress","publicKeytoAddress","publicKey","sanitize","publicToAddress","getAddresses","chainCode","pageSize","pageNum","addresses","hdk","HDKey","dkey","privateKeytoPublic","privateToPublic","fromMnemonic","PrivateKeyAccount","fromKeystore","fromMetaMask","MetaMaskAccount","fromDkey","DkeyAccount","createMnemonic","strength","generateMnemonic","WalletAccount","ethNode","ecsign","finalHash","metaMask","signMessage","unused","Dkey","dkeySignSuccess","dkeySignFailure","dkeySendTxSuccess","info","dkeySendTxFailure","Bitstream","initialData","equal","match","element","x","numBytes","formattedData","padString","insert","addHex","addBigNumber","parseInt","extractData","extractBytesX","targetLength","imul","charCodeAt","abs","startup","api","action","put","dispatch","fetchMarkets","list","appState","loadAccount","setImmediateInterval","socket","checkHeartBeat","onLocationChange","root","safeWrap","args","takeLatest","ready","loading","awardInfo","visible","createdAt","selectedTab","showMarketDrawer","notification","reducers","showEggAward","closeAward","walletName","enable","accounts","dkeyEnableSuccess","dkeyEnableFailure","startConnecting","isDesiredNetwork","installed","updateMetaMask","effects","connectToMetaMask","isMetaMask","autoRefreshOnNetworkChange","desireNetwork","networkVersion","on","getAccount","isDkey","initAccountFromMetaMask","initState","passwordHash","rememberMeStartTime","rememberMeMinutes","canceledOrders","switchAccount","clearAccountInfo","updateAccount","checkAccountOvertime","moment","isAfter","logout","initialize","balance","walletBalance","relayAccount","isFreeze","startFetchBalance","checkAccountCreated","checkAccountInterval","clearInterval","setInterval","checkPassword","genApiKey","fetchOrders","duration","scrollSellTableToBottom","tableDom","getElementsByClassName","tableBodyDom","scrollTop","scrollHeight","formatFromWEI","currentMarket","baseSymbol","quoteSymbol","calcSummationCurve","items","direction","orderBy","reverse","sumVolume","incrementalVersion","fetchDepth","marketPair","setLevel","scrollSellTable","incrementalUpdate","depthState","startVersion","endVersion","newDepth","expectVersion","chain","unionBy","trades","trade","timestamp","latestPrice","lastPrice","variation","page","updateVariation","fetchTrade","index","currentPrice","tradeState","unshift","modified","take","dayInfo","tvSubscribers","fetchDayInfo","candleStick","pick","subscribeBars","subscribeUID","onRealtimeCallback","symbolInfo","toText","topic","newSub","lastBar","realtimeCb","unsubscribeBars","subscriberUID","subscriber","open","close","high","low","newCancle","time","formatTicker","ticker","marketName","baseTokenSymbol","quoteTokenSymbol","differ","fetchTicker","tickers","size24h","volume24h","stars","tabs","currentTab","currentMarkets","cond","sort","sortDirection","searchHistory","selectors","createSelector","hasProps","updateFilterCond","updateMarketsTicker","currentMatched","addToHistory","union","clearHistory","router","persistData","defaultBaseSymbol","defaultQuoteSymbol","quoteTokens","uniq","defaultTab","setCurrentTab","setCurrentMarket","tab","fetchCurrentMarkets","startFetchMarketInfo","placeOrder","ws","readyState","location","reload","onSocketReady","starMarket","xorBy","pairs","buyPrice","buyAmount","buyTotal","sellPrice","sellAmount","sellTotal","marketBuyTotal","marketSellAmount","placeAnOrder","isBuy","exchangeAccount","tradingPrivKey","tokenSConfig","getTime","signedEtheruemTx","channelId","placeBuyOrder","withLoading","placeSellOrder","formatBalances","balances","totalAmount","frozenAmount","relayTokenId","availAmount","fetchBalances","formatPageParams","newBalance","b","appendBalance","blance","fetchBalance","fetchAllBalances","historyStatus","allMarket","orderState","cancelAnOrders","cancelAllOrders","orderStore","checkAllowance","tokenSymbol","depositAmout","txCount","types","fetchTransactions","transfer","transactions","realAmount","feeAmount","toTokenPrecision","approveTxCount","approveZero","approveMax","depositTo","resetLastTransferTime","onchainWithdrawal","pollingIntervalRatio","lastPingTime","pollingIntervals","inverval","history","alert","WebSocket","wsUrl","onmessage","event","onMessage","onerror","onopen","polling","_onSubResult","description","send","op","topicType","TopicMarket","upperCase","subInfo","topics","rate","fetchRate","award","checkAward","now","clone","isBefore","CNY","USD","legal","CNYRates","usdt","USDRates","latestAward","billSn","read","newAward","money","markRead","ids","lastTransferTime","format","checkChannel","query","getUrlParams","search","channel","checkLocale","pathname","locales","checkMarket","matchPath","exact","strict","sagaMiddleware","createBrowserHistory","middleware","React","createContext","loggerMiddleware","createLogger","collapsed","createSagaMiddleware","historyMiddleware","routerMiddleware","initMiddleware","enhancers","applyMiddleware","init","models","redux","connectRouter","plugins","persistPlugin","createRematchPersist","whitelist","storage","asyncLocalStorage","selectorPlugin","selectPlugin","initPlugin","run","rootSaga","module","SUCC","relayUrl","ratioRecommendedGasPrice","errorCode","STRING","OPTION_NUMBER","rule","cb","URL","HEX","QUANTITY","PRIVATE_KEY","len","TX_HASH","ABI_METHOD","enum","RPC_TAG","TIMESTAMP","PROJECT_ID","min","LOOPRING_TOKEN","PRIVATE_KEY_BUFFER","CURRENCY","DEFAULT_BLOCK","CANCEL_ORDER_TYPE","Base8","subOrder","shr","p","addPoint","q","cta","d","mulPointEscalar","base","rem","exp","isOdd","inSubgroup","P","inCurve","x2","y2","one","packPoint","buff","leInt2Buff","greater","unpackPoint","_buff","greaterOrEquals","sqrt","neg","createBlakeHash","babyJub","poseidon","randomNumber","hashCode","mod","strKey","prv","h1","msgBuff","rBuff","A","R8","hm","S","sig","pubKey","R","Pleft","Pright","messages","zh_CN","en_US","connect","login","auth","onClick","profile","children","props","sx","bg","color","fontSize","lineHeight","minHeight","className","aria-hidden","xlinkHref","spinning","display","animating","opacity","Item","MyBody","InfiniteScroll","reset","setState","isLoading","hasMore","pager","_fetchDataByPage","dataBlobs","dataSource","cloneWithRows","_fetchSuccess","_parseRetList","_fetchFailed","onEndReached","disablePage","fetchData","DataSource","rowHasChanged","row1","row2","refreshing","disableAutoLoad","parseRetList","listKey","List","newDataBlobs","newItem","cloneDeep","styles","overflow","autoHeight","flex","renderEmptyList","renderItem","enableRefresh","onRefresh","intl","otherProps","pullToRefresh","ref","el","lv","renderFooter","padding","textAlign","formatMessage","_cachedRowCount","renderBodyComponent","renderRow","scrollRenderAheadDistance","onEndReachedThreshold","initialListSize","Component","injectIntl","forwardRef","POSITIVE_INFINITY","onKeyPress","onChange","onBlur","onFocus","adjust","steps","isNumber","step","pow","changed","round","formatValue","justifyContent","border","borderRadius","Svg","target","param","Trade","px","alignItems","Spin","supportedResolutions","getOptions","option","onReady","supported_resolutions","searchSymbols","userInput","symbolType","onResultReadyCallback","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","select","symbol_stub","session","minmov","pricescale","has_intraday","intraday_multipliers","formatResolution","supported_resolution","volume_precision","data_status","getBars","onHistoryCallback","onErrorCallback","firstDataRequest","toLocaleString","noData","startTimestamp","endTimestamp","last","period","formatedFrom","formatedTo","timestaps","range","parsedCandles","ts","candle","rightCandle","LeftCandle","findLast","onResetCacheNeededCallback","calculateHistoryDepth","resolutionBack","intervalBack","TVChartContainer","_candleDefault","tvWidget","removeAllStudies","createStudy","_lineDefault","_showSettingDialog","checked","executeActionById","_showIndicatorsDialog","prevLocale","prevSymbol","prevLineType","lineType","prevTheme","prevInterval","prevShowIndicatorsDialog","showIndicatorsDialog","prevShowSettingDialog","showSettingDialog","setResolution","loadStudies","Intl","DateTimeFormat","resolvedOptions","timeZone","Datafeed","libraryPath","frameborder","timeFormatter","date","getUTCHours","getUTCMinutes","getUTCSeconds","dateFormatter","getUTCFullYear","getUTCMonth","getUTCDate","chartsStorageUrl","chartsStorageApiVersion","clientId","userId","symbols_types","tvInterval","widgetOptions","generateTradingViewConfig","onDataLoaded","containerId","fullScreen","defaultProps","datafeedUrl","views","DEPTH_VIEW","TRADING_VIEW","tvLocalMapping","TVChart","styled","Text","cursor","background","active","borderColor","borderTopLeftRadius","left","borderBottomLeftRadius","borderTopRightRadius","right","borderBottomRightRadius","borderLeftWidth","borderRightWidth","marginRight","pairVisible","tokenInfoVisible","tokenInfo","selectedView","showIndicators","showSetting","invetvalMapping","selected","mr","showActionSheetWithOptions","cancelButtonIndex","maskClosable","borderBottom","borderBottomColor","CurrentPair","mt","fontWeight","ml","asLegalMoney","minWidth","renderTvOps","percentPositins","PlaceOrder","activeType","available","updatePlaceOrder","signined","checkLogined","total","disabled","variant","flexShrink","initialSymbol","initialType","percent","numeral","BillPreCheck","baseBalance","quoteBalance","availBase","availQuote","py","onSelectType","renderLimitBuyArea","getMinTradeValue","renderLimitSaleArea","withRouter","Infinity","restProps","useState","focused","setFocused","hideLabel","position","top","renderIf","boxSizing","QhStepper","showNumber","currentTarget","selectionStart","selectionEnd","valueAsNumber","isNaN","getPrecision","preventDefault","Widget","activeTab","activeTabValue","borderTop","borderTopColor","setActive","marketsStore","contentSx","updateAppState","funcfy","createElement","ReactDOM","render","onDestory","unmountComponentAtNode","prompt","AgreeItem","errorInfos","checkInput","waitFor","form","getFieldProps","getFieldsError","validateFields","promisefy","remember","genPasswordHash","loginSunccess","onSucess","modalTitle","getFieldDecorator","getFieldsValue","footer","onPress","submit","onFail","UpsertPasswordModal","rules","placeholder","onErrorClick","FormErrorInfo","WrappedForm","createForm","withRef","connectedWidget","gasLimitInWEI","createAccountFee","recommendedGasEth","fetchWalletBalances","normal","minGas","normalGas","maxGas","confirmPassword","gasEth","ethAvail","getEthAvail","gasEthInWEI","gasPriceInWEI","dividedBy","ethBalance","ethAmount","callback","getFieldValue","extra","flexDirection","signIn","useIntl","checkNetwork","invalidText","checkAddress","loadMetamask","checkSignedIn","rootState","SignInModal","useImperativeHandle","check","line","InputWidget","pr","borderRight","DepthBg","Box","percentage","gap","align","bottom","TextEllipsis","MyOrder","renderOrder","row","filled","filledVolume","filledSize","mx","toLower","filters","TabNav","onTabChange","transform","ratioToIphone6","platform","onChangeShowAll","condType","depthTypes","Depth","precisions","Menu","currentPrecision","depthLines","maxLines","takeRight","maxBy","maxSize","onSelectPrecision","maxHeight","overflowY","onSetPrice","zIndex","pl","margin","backgroundImage","awardIcon","backgroundSize","backgroundPosition","Line","Flex","Label","Value","TokenInfo","lang","marketValue","publishDate","rank","publishAmount","flowAmount","whitePaper","publishPrice","desc","descInLocale","pt","my","shadowWhite","buttonStyle","OverView","setVisible","useEffect","clipboard","usd","data-clipboard-text","whiteSpace","ExchangeBalane","WalletBalane","walletBalances","setActiveTab","Page","component","Exchange","Balance","setSelectedTab","billPreCheck","useRef","tintColor","unselectedTintColor","barTintColor","prerenderingSiblingsNumber","prefixCls","selectedIcon","current","EggAward","Pair","fuzzy","pb","maxLength","onSubmit","flexWrap","flexBasis","tabNav","record","haveStar","stopPropagation","setTokenInfo","DepthHorizontal","initialSide","showDrawer","showDataRanger","symbols","sideOptions","sideOption","cols","onSymbolChanged","arrow","Brief","onSideChanged","multipleLine","onStatusChanged","onCancel","onConfirm","startOf","toDate","valueOf","endOf","defaultDate","pickTime","showShortcut","transfers","sidebarStyle","documentElement","clientHeight","sidebar","renderFilters","onOpenChange","txType","withdrawFeeInWEI","balanceStore","walletBalanceStore","setType","transferAmount","setTransferAmount","setRecommendedGasEth","setGasEth","balancesSymbols","walletBalancesSymbols","symbolOptions","walletEthAvail","getWalletEthAvail","withdrawFee","getAvailable","ethAvailable","duaration","diff","second","goBack","Input","updatePersistData","settings","handler","languages","language","renderHeader","infos","wordBreak","pageParams","startDate","billTime","winnerWalletAddr","listHeight","findDOMNode","infinite","offsetTop","newProps","toastType","warning","basename","Home","Login","Market","TransferList","TransferCreate","Setting","Apikey","AwardRecord","colors","primary","secondary","muted","gray","highlight","c1","c2","c3","c4","c5","c6","c7","fonts","heading","monospace","fontSizes","f1","f2","f3","f4","f5","f6","f7","f8","lineHeights","lh1","lh2","lh3","lh4","lh5","lh6","lh7","lh8","fontWeights","medium","semibold","bold","space","s1","s2","s3","s4","s5","s6","s7","mainPadding","sizes","avatar","radii","circle","shadows","card","fontFamily","caps","textTransform","letterSpacing","variants","boxShadow","link","nav","textDecoration","flexCenter","flexYCenter","buttons","outline","toast","SERVER_URL","process","throttle","notHandleError","globalStore","getUserInfo","Boolean","hostname","safeParse","defaultValue","isEmpty","App","navigator","serviceWorker","registration","unregister","predicate","elemOrThunk","isFunction","debounce","offline","hashes","val","decodeURIComponent","lightConeUtils","asyncFunc","preArgs","num","parts","filledFee","updatedOrder","filledInNumber","signinedStatus","getTradingViewLocale"],"mappings":"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","file":"static/js/main.11fb59e1.chunk.js","sourcesContent":["import { hashPersonalMessage, keccak } from \"ethereumjs-util\";\nimport formatter, { toBig, toHex } from \"./formatter\";\n\n/**\n * trim head space and tail space\n * @param str string\n */\nexport function trim(str) {\n  return str.replace(/(^\\s+)|(\\s+$)/g, \"\");\n}\n\n/**\n * trim all spaces\n * @param str\n */\nexport function trimAll(str) {\n  return trim(str).replace(/\\s/g, \"\");\n}\n\nexport function keccakHash(str) {\n  return toHex(keccak(str));\n}\n\nexport function calculateGas(gasPrice, gasLimit) {\n  return toBig(gasPrice)\n    .times(gasLimit)\n    .div(1e9);\n}\n\nexport default {\n  hashPersonalMessage,\n  ...formatter,\n  trim,\n  trimAll,\n  keccakHash,\n  calculateGas\n};\n","import ethUtil from \"ethereumjs-util\";\nimport BigNumber from \"bignumber.js\";\nimport BN from \"bn.js\";\n\nBigNumber.config({\n  EXPONENTIAL_AT: 20,\n  RANGE: [-100000, 10000000],\n  ROUNDING_MODE: 1\n});\n\n/**\n *\n * @param mixed Buffer|number|string (hex string must be with '0x' prefix)\n * @returns {Buffer}\n */\nexport function toBuffer(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed;\n  } else {\n    return ethUtil.toBuffer(mixed);\n  }\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {string}\n */\nexport function toHex(mixed) {\n  if (\n    typeof mixed === \"number\" ||\n    mixed instanceof BigNumber ||\n    mixed instanceof BN\n  ) {\n    return addHexPrefix(mixed.toString(16));\n  }\n\n  if (mixed instanceof Buffer) {\n    return addHexPrefix(mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    const regex = new RegExp(/^0x[0-9a-fA-F]*$/);\n    return regex.test(mixed)\n      ? mixed\n      : addHexPrefix(toBuffer(mixed).toString(\"hex\"));\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {number}\n */\nexport function toNumber(mixed) {\n  if (typeof mixed === \"number\") {\n    return mixed;\n  }\n\n  if (mixed instanceof BigNumber || mixed instanceof BN) {\n    return mixed.toNumber();\n  }\n\n  if (typeof mixed === \"string\") {\n    return Number(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BigNumber}\n */\nexport function toBig(mixed) {\n  if (mixed instanceof BigNumber) {\n    return mixed;\n  }\n\n  if (typeof mixed === \"number\") {\n    return new BigNumber(mixed.toString());\n  }\n\n  if (typeof mixed === \"string\") {\n    return new BigNumber(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toBN(mixed) {\n  return mixed instanceof BN ? mixed : new BN(toBig(mixed).toString(10), 10);\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function fromGWEI(value) {\n  return toBig(value).times(1e9).decimalPlaces(0);\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toGWEI(valueInWEI) {\n  return toBig(valueInWEI).div(1e9);\n}\n\n/**\n * Returns formatted hex string of a given private key\n * @param mixed Buffer| string\n * @returns {string}\n */\nexport function formatKey(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed.toString(\"hex\");\n  }\n\n  if (typeof mixed === \"string\") {\n    return mixed.startsWith(\"0x\") ? mixed.slice(2) : mixed;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string of a given address\n * @param mixed Buffer | string\n * @returns {string}\n */\nexport function formatAddress(mixed) {\n  if (mixed instanceof Buffer) {\n    return ethUtil.toChecksumAddress(\"0x\" + mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    return ethUtil.toChecksumAddress(\n      mixed.startsWith(\"0x\") ? mixed : \"0x\" + mixed\n    );\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string with '0x' prefix\n * @param input\n * @returns {string}\n */\nexport function addHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input : \"0x\" + input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string without '0x' prefix\n * @param input string\n * @returns {string}\n */\nexport function clearHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input.slice(2) : input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param hex\n * @returns {string}\n */\nexport function padLeftEven(hex) {\n  return hex.length % 2 !== 0 ? `0${hex}` : hex;\n}\n\n/**\n * Returns symbol of a given kind of currency\n * @param settingsCurrency\n * @returns {*}\n */\nexport function getDisplaySymbol(settingsCurrency) {\n  switch (settingsCurrency) {\n    case \"CNY\":\n      return \"￥\";\n    case \"USD\":\n      return \"$\";\n    default:\n      return \"\";\n  }\n}\n\n/**\n * Returns number in string with a given precision\n * @param number number | BigNumber\n * @param precision number\n * @param ceil bool  round up\n * @returns {string}\n */\nexport function toFixed(number, precision, ceil) {\n  precision = precision || 0;\n  ceil = ceil || false;\n  if (number instanceof BigNumber) {\n    const rm = ceil ? 0 : 1;\n    return number.toFixed(precision, rm);\n  }\n\n  if (typeof number === \"number\") {\n    return ceil\n      ? (\n          Math.ceil(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision)\n      : (\n          Math.floor(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\nexport default {};\n","import validator from \"./validator\";\nimport Response from \"../common/response\";\nimport code from \"../common/code\";\nimport { addHexPrefix, toHex, toNumber } from \"../common/formatter\";\nimport { hashPersonalMessage, sha3 } from \"ethereumjs-util\";\nimport EthTransaction from \"ethereumjs-tx\";\n\nexport class MetaMask {\n  /**\n   * @description sign hash\n   * @param web3\n   * @param account\n   * @param hash\n   * @returns {Promise.<*>}\n   */\n  async sign(web3, account, hash) {\n    try {\n      validator.validate({ value: account, type: \"ETH_ADDRESS\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n\n    return new Promise(resolve => {\n      web3.eth.sign(account, hash, function(err, result) {\n        if (!err) {\n          const r = result.slice(0, 66);\n          const s = addHexPrefix(result.slice(66, 130));\n          const v = toNumber(addHexPrefix(result.slice(130, 132)));\n          resolve({ result: { r, s, v } });\n        } else {\n          const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n          resolve({ error: { message: errorMsg } });\n        }\n      });\n    });\n  }\n\n  /**\n   * @description sign message\n   * @param web3\n   * @param account\n   * @param message\n   * @returns {Promise}\n   */\n  signMessage(web3, account, message) {\n    const hash = toHex(hashPersonalMessage(sha3(message)));\n    return this.sign(web3, account, hash);\n  }\n\n  /**\n   * @description Signs ethereum tx\n   * @param web3\n   * @param account\n   * @param rawTx\n   * @returns {Promise.<*>}\n   */\n  async signEthereumTx(web3, account, rawTx) {\n    try {\n      validator.validate({ value: rawTx, type: \"TX\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n    try {\n      const ethTx = new EthTransaction(rawTx);\n      const hash = toHex(ethTx.hash(false));\n      const response = await this.sign(web3, account, hash);\n      if (!response[\"error\"]) {\n        const signature = response[\"result\"];\n        signature.v += ethTx._chainId * 2 + 8;\n        Object.assign(ethTx, signature);\n        return { result: toHex(ethTx.serialize()) };\n      } else {\n        return response;\n      }\n    } catch (e) {\n      console.log(\"Failed to sign EthereumTx\");\n      console.log(e);\n      return e;\n    }\n  }\n\n  /**\n   * @description Sends ethereum tx through MetaMask\n   * @param web3\n   * @param tx\n   * @returns {*}\n   */\n  sendTransaction(web3, tx) {\n    try {\n      validator.validate({ type: \"TX\", value: tx });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n\n    return new Promise(resolve => {\n      web3.eth.sendTransaction(tx, function(err, transactionHash) {\n        if (!err) {\n          resolve({ result: transactionHash });\n        } else {\n          const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n          resolve({ error: { message: errorMsg } });\n        }\n      });\n    });\n  }\n}","import { fromEthSale, fromPrivateKey, fromV1, fromV3 } from \"ethereumjs-wallet\";\nimport { clearHexPrefix } from \"../common/formatter\";\n\n/**\n * Returns private key of given keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptKeystoreToPkey(keystore, password) {\n  let wallet;\n  const parsed = JSON.parse(keystore);\n  switch (determineKeystoreType(keystore)) {\n    case \"presale\":\n      wallet = decryptPresaleToPrivKey(keystore, password);\n      break;\n    case \"v1-unencrypted\":\n      wallet = Buffer.from(parsed.private, \"hex\");\n      break;\n    case \"v1-encrypted\":\n      wallet = decryptMewV1ToPrivKey(keystore, password);\n      break;\n    case \"v2-unencrypted\":\n      wallet = Buffer.from(parsed.privKey, \"hex\");\n      break;\n    case \"v2-v3-utc\":\n      wallet = decryptUtcKeystoreToPkey(keystore, password);\n      break;\n    default:\n      throw new Error(\"unrecognized type of keystore\");\n  }\n  return wallet;\n}\n\n/**\n * Returns keystore of a given ethereum private key with password\n * @param privateKey\n * @param password\n * @returns {{version, id, address, crypto}}  keystore\n */\nexport function pkeyToKeystore(privateKey, password) {\n  return fromPrivateKey(privateKey).toV3(password, { c: 1024, n: 1024 });\n}\n\n/**\n * Returns ethereum private key of given v3 keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptUtcKeystoreToPkey(keystore, password) {\n  return fromV3(keystore, password, true).getPrivateKey();\n}\n\n/**\n * Returns type of a given keystore\n * @param keystore string\n * @returns {string}\n */\nexport function determineKeystoreType(keystore) {\n  const parsed = JSON.parse(keystore);\n  if (parsed.encseed) {\n    return \"presale\";\n  } else if (parsed.Crypto || parsed.crypto) {\n    return \"v2-v3-utc\";\n  } else if (parsed.hash && parsed.locked === true) {\n    return \"v1-encrypted\";\n  } else if (parsed.hash && parsed.locked === false) {\n    return \"v1-unencrypted\";\n  } else if (parsed.publisher === \"MyEtherWallet\") {\n    return \"v2-unencrypted\";\n  } else {\n    throw new Error(\"Invalid keystore\");\n  }\n}\n\n/**\n * Returns ethereum  private key of given presale keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptPresaleToPrivKey(keystore, password) {\n  return fromEthSale(keystore, password).getPrivateKey();\n}\n\n/**\n * Returns ethereum  private key of given v1 keystore\n * @param keystore string\n * @param password string\n * @returns {Buffer}\n */\nexport function decryptMewV1ToPrivKey(keystore, password) {\n  return fromV1(keystore, password).getPrivateKey();\n}\n\n/**\n * Checks whether a password is required to decrypt the given keystore\n * @param keystore string\n * @returns {boolean}\n */\nexport function isKeystorePassRequired(keystore) {\n  switch (determineKeystoreType(keystore)) {\n    case \"presale\":\n      return true;\n    case \"v1-unencrypted\":\n      return false;\n    case \"v1-encrypted\":\n      return true;\n    case \"v2-unencrypted\":\n      return false;\n    case \"v2-v3-utc\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Returns V3 format fileName\n * @param address\n * @returns {string}\n */\nexport function getFileName(address) {\n  const ts = new Date();\n  return [\n    \"UTC--\",\n    ts.toJSON().replace(/:/g, \"-\"),\n    \"--\",\n    clearHexPrefix(address),\n    \".json\"\n  ].join(\"\");\n}\n","// Taken from\n// https://github.com/iden3/circomlib\n\nconst bn128 = require(\"snarkjs\").bn128;\nconst bigInt = require(\"snarkjs\").bigInt;\nconst blake2b = require(\"blake2b\");\nconst assert = require(\"assert\");\n\nconst F = bn128.Fr;\nconst SEED = \"poseidon\";\nconst NROUNDSF = 8;\nconst NROUNDSP = 57;\nconst T = 6;\n\nfunction getPseudoRandom(seed, n) {\n  const res = [];\n  let input = Buffer.from(seed);\n  let h = blake2b(32)\n    .update(input)\n    .digest();\n  while (res.length < n) {\n    const n = F.affine(bigInt.leBuff2int(h));\n    res.push(n);\n    h = blake2b(32)\n      .update(h)\n      .digest();\n  }\n\n  return res;\n}\n\nfunction allDifferent(v) {\n  for (let i = 0; i < v.length; i++) {\n    if (v[i].isZero()) return false;\n    for (let j = i + 1; j < v.length; j++) {\n      if (v[i].equals(v[j])) return false;\n    }\n  }\n  return true;\n}\n\nexport function getMatrix(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  let nonce = \"0000\";\n  let cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  while (!allDifferent(cmatrix)) {\n    nonce = Number(nonce) + 1 + \"\";\n    while (nonce.length < 4) nonce = \"0\" + nonce;\n    cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  }\n\n  const M = new Array(t);\n  for (let i = 0; i < t; i++) {\n    M[i] = new Array(t);\n    for (let j = 0; j < t; j++) {\n      M[i][j] = F.affine(F.inverse(F.sub(cmatrix[i], cmatrix[t + j])));\n    }\n  }\n  return M;\n}\n\nexport function getConstants(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  return getPseudoRandom(seed + \"_constants\", nRounds);\n}\n\nfunction ark(state, c) {\n  for (let j = 0; j < state.length; j++) {\n    state[j] = F.add(state[j], c);\n  }\n}\n\nfunction sigma(a) {\n  return F.mul(a, F.square(F.square(a, a)));\n}\n\nfunction mix(state, M) {\n  const newState = new Array(state.length);\n  for (let i = 0; i < state.length; i++) {\n    newState[i] = F.zero;\n    for (let j = 0; j < state.length; j++) {\n      newState[i] = F.add(newState[i], F.mul(M[i][j], state[j]));\n    }\n  }\n  for (let i = 0; i < state.length; i++) state[i] = newState[i];\n}\n\nexport function createHash(t, nRoundsF, nRoundsP, seed?) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRoundsF === \"undefined\") nRoundsF = NROUNDSF;\n  if (typeof nRoundsP === \"undefined\") nRoundsP = NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n\n  assert(nRoundsF % 2 == 0);\n  const C = getConstants(t, seed, nRoundsF + nRoundsP);\n  const M = getMatrix(t, seed, nRoundsF + nRoundsP);\n  return function(inputs) {\n    let state = [];\n    assert(inputs.length < t);\n    assert(inputs.length > 0);\n    for (let i = 0; i < inputs.length; i++) state[i] = bigInt(inputs[i]);\n    for (let i = inputs.length; i < t; i++) state[i] = F.zero;\n\n    for (let i = 0; i < nRoundsF + nRoundsP; i++) {\n      ark(state, C[i]);\n      if (i < nRoundsF / 2 || i >= nRoundsF / 2 + nRoundsP) {\n        for (let j = 0; j < t; j++) state[j] = sigma(state[j]);\n      } else {\n        state[0] = sigma(state[0]);\n      }\n      mix(state, M);\n    }\n    return F.affine(state[0]);\n  };\n}\n","/**\n * Created by zuozhuo on 2016/12/8.\n */\n'use strict'\n\nimport _ from 'lodash'\n\nclass XEnumItem {\n  constructor (value, text, meta = {}) {\n    this.value = value\n    this.text = text\n    this.meta = meta\n  }\n\n  getValue () {\n    return this.value\n  }\n\n  getText () {\n    return this.text\n  }\n\n  equals (value) {\n    if (value instanceof XEnumItem) {\n      value = value.getValue()\n    }\n    return this.value === value\n  }\n}\nclass XEnum {\n  constructor (enumDict) {\n    this.enumItems = Object.values(enumDict)\n    Object.keys(enumDict).forEach(key => {\n      this[key] = enumDict[key]\n    })\n  }\n\n  findItem (itemValue) {\n    if (itemValue instanceof XEnumItem) {\n      itemValue = itemValue.getValue()\n    }\n    return this.enumItems.find(e => e.getValue() === itemValue)\n  }\n\n  toText (value) {\n    let item = _.find(this.enumItems, ['value', value])\n    return item === undefined ? null : item.getText()\n  }\n\n  parseValueByText (text) {\n    let exist = _.find(this.enumItems, ele => {\n      return ele.getText() === text\n    })\n    if (exist === undefined) {\n      return null\n    } else {\n      return exist.getValue()\n    }\n  }\n\n  getOptions (excludeIndex) {\n    if (!this.options) {\n      return this.enumItems\n        .filter(e => excludeIndex !== e.getValue())\n        .map(e => {\n          return {\n            value: e.getValue(),\n            label: e.getText()\n          }\n        })\n    } else {\n      return []\n    }\n  }\n\n  getSpecOptions (specKey = []) {\n    if (!this.options) {\n      return this.enumItems\n        .filter(e => specKey.includes(e.getValue()))\n        .map(e => {\n          return {\n            value: e.getValue(),\n            label: e.getText()\n          }\n        })\n    } else {\n      return []\n    }\n  }\n}\n\nconst ENUM_ACCOUNT_STATUS = new XEnum({\n  UNSIGNED: new XEnumItem(0, '未登录'),\n  UNCREATED: new XEnumItem(1, '未注册'),\n  CREATED: new XEnumItem(2, '已注册'),\n  LOGGED_IN: new XEnumItem(3, '已登录'),\n  CREATING: new XEnumItem(4, '创建中'),\n  LOCKED: new XEnumItem(5, '锁定'),\n})\n\nconst ENUM_ORDER_STATUS = new XEnum({\n  PROCESSING: new XEnumItem('processing', '待成交'),\n  PROCESSED: new XEnumItem('processed', '已成交'),\n  CANCELLING: new XEnumItem('cancelling', '撤销中'),\n  CANCELLED: new XEnumItem('cancelled', '已撤销'),\n  EXPIRED: new XEnumItem('expired', '已超时'),\n  // WAITING: new XEnumItem('waiting', '等待中'),\n})\n\nconst ENUM_TX_STATUS = new XEnum({\n  RECEIVED: new XEnumItem('received', '待划转'),\n  PROCESSING: new XEnumItem('processing', '划转中'),\n  PROCESSED: new XEnumItem('processed', '已完成'),\n  FAILED: new XEnumItem('failed', '失败'),\n})\n\nconst ENUM_INTERVAL_TYPE = new XEnum({\n  MIN_1: new XEnumItem('1', '1min'),\n  MIN_5: new XEnumItem('5', '5min'),\n  MIN_15: new XEnumItem('15', '15min'),\n  MIN_30: new XEnumItem('30', '30min'),\n  HOUR_1: new XEnumItem('60', '1hr'),\n  HOUR_2: new XEnumItem('120', '2hr'),\n  HOUR_4: new XEnumItem('240', '4hr'),\n  HOUR_12: new XEnumItem('720', '12hr'),\n  DAY_1: new XEnumItem('D', '1d'),\n  WEEK_1: new XEnumItem('W', '1w'),\n})\n\nconst ENUM_LANGUAGE_TYPE = new XEnum({\n  cn: new XEnumItem(1, '中文'),\n  us: new XEnumItem(2, '英文'),\n  kr: new XEnumItem(3, '韩文'),\n  ru: new XEnumItem(4, '俄文'),\n  jp: new XEnumItem(5, '日文'),\n})\n\nexport {\n  ENUM_ACCOUNT_STATUS,\n  ENUM_ORDER_STATUS,\n  ENUM_TX_STATUS,\n  ENUM_INTERVAL_TYPE,\n  ENUM_LANGUAGE_TYPE\n}\n\n","import _ from 'lodash';\nimport axios from 'axios';\nimport appConfig from 'config/appConfig'\nimport { store } from 'store'\n\nlet srvApi = axios.create({\n  // timeout: 10000,\n  baseURL: appConfig.wedex.serverUrl,\n})\n\nsrvApi.interceptors.request.use(function (config) {\n  let rootState = store.getState()\n  let { dexAccount: { address } } = rootState\n  // config.headers.common['x-user-wallet-addr'] = '0x07f452344909f601aa8f9167e673d432404735d9'\n  config.headers.common['x-user-wallet-addr'] = address\n  return config\n})\n\nfunction getUserBillEggPrizeList (params) {\n  let {address, ...restParams} = params\n  // const headers = {\n  //   'x-user-wallet-addr': address\n  // };\n  return srvApi.get(`user/billEggPrizes`, {\n    params: restParams,\n    // headers\n  })\n}\n\nfunction postUserReadBillEggPrizeList (params) {\n  let {address, ...restParams} = params\n  // const headers = {\n  //   'x-user-wallet-addr': address\n  // };\n  return srvApi.post(`user/billEggPrize/batchRead`, restParams, {\n    // headers\n  })\n}\n\nfunction formatExchanges (exchanges) {\n  return _.map(exchanges, exchange => {\n    let {\n      standardContractName: baseToken,\n      targetContractName: quoteToken,\n      pricePrecision,\n      amountPrecision,\n      totalPrecision,\n      maxLevel,\n    } = exchange\n    let baseContractId = exchange.standardContract.id\n    let quoteContractId = exchange.targetContract.id\n\n    return {\n      market: _.toUpper(`${baseToken}-${quoteToken}`),\n      baseToken,\n      quoteToken,\n      pricePrecision,\n      amountPrecision,\n      totalPrecision,\n      maxLevel,\n      baseContractId,\n      quoteContractId\n    }\n  })\n}\n// 获取交易对列表\nlet getAllExchanges = async (params) => {\n  let resp = await srvApi.get(`user/exchanges`, {params})\n  let exchanges = formatExchanges(resp.data.rows)\n  return exchanges\n}\nlet getChannelExchanges = async (params) => {\n  let resp = await srvApi.get(`user/channelExchanges`, {params})\n  let exchanges = formatExchanges(resp.data.rows)\n  return exchanges\n}\nlet getExchanges = async (params = {}) => {\n  let { channelName } = params\n  if (channelName) {\n    return await getChannelExchanges(params)\n  } else {\n    return await getAllExchanges()\n  }\n}\nlet getContracts = async (params) => {\n  let resp = await srvApi.get(`platform/contracts`, {params})\n  let contracts = _.map(resp.data.rows, contract => {\n    let {\n      name: symbol,\n      fullname: name,\n      contractAddr : address,\n      homepage: website,\n      ...restProps\n    } = contract\n    return {\n      symbol,\n      name,\n      address,\n      website,\n      ...restProps\n    }\n  })\n  return contracts\n}\nlet getContract = id => srvApi.get(`user/contracts/${id}`)\n\n// 获取合约配置\nlet getSystemContractFee = params => srvApi.get(`user/system/contractFee`, {params})\n\n// 获取订单配置\nlet getSystemBillValidTime = params => srvApi.get(`user/system/billValidTime`, {params})\n\nlet getArticleList = params => srvApi.get(`user/articles`, {params})\nlet getArticleListRecommended = params => srvApi.get(`user/articles`, {\n  params: {\n    recommended: true,\n    ...params\n  }\n})\nlet getArticle = id => srvApi.get(`user/articles/${id}`)\n\nexport default {\n  getUserBillEggPrizeList,\n  postUserReadBillEggPrizeList,\n\n  getExchanges,\n  getContracts,\n  getContract,\n  getSystemContractFee,\n  getSystemBillValidTime,\n\n  getArticleList,\n  getArticleListRecommended,\n  getArticle\n}","import _ from 'lodash'\nimport axios from 'axios';\nimport wedexApi from './wedexApi'\nimport { config } from 'librarys/lightcone_v3';\nimport appConfig from 'config/appConfig'\nimport utils, { Toast } from 'utils'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport BigNumber from 'bignumber.js';\nlet { serverUrl } = appConfig.relay\n\nfunction withoutThrow(func) {\n  return async (...params) => {\n    try {\n      return await func(...params)\n    } catch (error) {\n      // debugger\n      Toast.fail(String(error), 1)\n      return null\n    }\n  }\n}\n\nexport function _parseResponse(response) {\n  const data = response['data'];\n  const resultInfo = data['resultInfo'];\n  const errorData = data['error'];\n\n  // Some API endpoints in the old versions don't have resultInfo.\n  if (resultInfo) {\n    const code = resultInfo['code'];\n    if (code !== 0) {\n      const errorMessage = resultInfo['message'];\n      throw Error(errorMessage);\n    }\n    return data;\n  } else if (errorData) {\n    const { code, message } = errorData;\n    if (code !== 0) {\n      // TODO: 国际化\n      let errorCodeMapping = {\n        104208: '两次提交请保持一定时间间隔'\n      }\n      let errorMsgMapping = {\n        'nounce too low': '操作频繁，请稍后再试'\n      }\n      let errorMessage = errorCodeMapping[code] || errorMsgMapping[message] || `${code} ${message}`\n      throw Error(errorMessage);\n    }\n    return data;\n  } else {\n    return data;\n  }\n}\n\nexport function parseResponse(response) {\n  try {\n    return _parseResponse(response)\n  } catch (err) {\n    Toast.fail(String(err), 1)\n  }\n}\n\nlet relayApi = axios.create({\n  // timeout: 10000,\n  baseURL: serverUrl,\n})\n\nrelayApi.interceptors.response.use(function (response) {\n  // Do something with response data\n  return response\n}, function (error) {\n  if (error.message === \"Network Error\") {\n    return Promise.reject('请检查网络')\n  }\n\n  if (error.response) {\n    return Promise.reject(error.response.data)\n  } else {\n    return Promise.reject({message: '系统维护中'})\n  }\n})\n\nasync function getTokenBalance(owner, tokenAddress) {\n  const data = {\n    owner,\n    token: tokenAddress\n  };\n\n  try {\n    const response = await relayApi.post('/tokenBalances', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function getEthBalance(address) {\n  const data = {\n    address\n  };\n\n  try {\n    const response = await relayApi.post('/ethBalances', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function lightconeGetAccount(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await relayApi.post('/account', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData.account;\n    } else if (responseData['error'].code === 101002) {\n      return null;\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    if (e.response.status === 404) {\n      return null\n    }\n    throw new Error(e);\n  }\n}\n\nasync function getTrade(market, limit) {\n  const data = {\n    market,\n    limit\n  };\n  try {\n    const response = await relayApi.post('/trade', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['trades'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getDepth(market, level, limit) {\n  const data = {\n    market,\n    level,\n    limit\n  };\n  const tokens = market.split('-');\n  const baseToken = tokens[0];\n\n  try {\n    const response = await relayApi.post('/depth', data);\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      const depth = responseData['depth'];\n      const bids = depth['bids'];\n      var updatedBids = [];\n      for (var i = 0; i < bids.length; i = i + 1) {\n        const bid = bids[i];\n        var updatedBid = {\n          price: bid.price,\n          size: bid.size,\n          volume: bid.volume,\n          count: bid.count,\n          sizeInNumber: config.fromWEI(baseToken, bid.size, 4)\n        };\n        updatedBids.push(updatedBid);\n      }\n\n      const asks = depth['asks'];\n      var updatedAsks = [];\n      for (var i = 0; i < asks.length; i = i + 1) {\n        const ask = asks[i];\n        var updatedAsk = {\n          price: ask.price,\n          size: ask.size,\n          volume: ask.volume,\n          count: ask.count,\n          sizeInNumber: config.fromWEI(baseToken, ask.size, 4)\n        };\n        updatedAsks.push(updatedAsk);\n      }\n\n      return {\n        bids: updatedBids,\n        asks: updatedAsks\n      };\n    } else {\n      return {\n        bids: [],\n        asks: []\n      };\n    }\n  } catch (error) {\n    return {\n      bids: [],\n      asks: []\n    };\n  }\n}\n\nasync function getOrders({accountId, offset, limit, market, apiKey, statuses, side, start, end}) {\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  const data = {\n    accountId,\n    offset,\n    limit,\n    statuses,\n    side,\n    start,\n    end\n  };\n  if (typeof market !== 'undefined') {\n    data.market = market;\n  }\n\n  try {\n    const response = await relayApi.post('/orders', data, {\n      headers: headers,\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      const orders = responseData['orders'];\n      let updatedOrders = utils.formatOrders(orders)\n      return {\n        totalNum: responseData.totalNum,\n        orders: updatedOrders\n      }\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function cancelOrders(\n  accountId,\n  orderHash,\n  clientOrderId,\n  signed,\n  apiKey\n) {\n  try {\n    const data = {\n      accountId: accountId,\n      orderHash: orderHash,\n      clientOrderId: clientOrderId\n    };\n    const signature = signed.Rx + ',' + signed.Ry + ',' + signed.s;\n    const headers = {\n      'X-API-KEY': apiKey,\n      'X-API-SIG': signature\n    };\n    const response = await relayApi.post('/deleteOrders', data, {\n      headers: headers,\n    });\n\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getCandlestick(data) {\n  try {\n    const response = await relayApi.post('/candlestick', data)\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['candles'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    // throw error;\n    return []\n  }\n}\n\nasync function getCandlestickCombine(data) {\n  let { start, end, interval } = data\n  \n  let resolution = ENUM_INTERVAL_TYPE.parseValueByText(interval)\n  let ms = resolution * 200 * 60 * 1000\n\n  let promises = []\n  let periodEnd = end\n  let periodStart = end - ms\n  while (periodEnd > start) {\n    let promise = getCandlestick({\n      ...data,\n      start: _.max([periodStart, start]),\n      end: periodEnd\n    })\n    promises.push(promise)\n    \n    periodEnd -= ms\n    periodStart -= ms\n  }\n\n  let resp = await Promise.all(promises)\n  let candles = _.flatten(resp)\n  return candles\n}\n\nasync function getBalances(accountId, apiKey, skip, limit) {\n  try {\n    const data = {\n      accountId,\n      skip,\n      limit\n    };\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await relayApi.post('/user/balances', data, {\n      headers: headers,\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['balances'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function sendWithdrawTransaction(signedEthereumTx) {\n  const data = {\n    data: signedEthereumTx\n  };\n  try {\n    const response = await relayApi.post('/onchainWithdrawal', data);\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getApiKey(data, signed) {\n  try {\n    const signature = signed.Rx + ',' + signed.Ry + ',' + signed.s;\n    const headers = {\n      'X-API-SIG': signature\n    };\n    const response = await relayApi.post('/getApiKey', data, {\n      headers: headers\n    })\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getTickers(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/ticker', data, {\n      headers: headers\n    })\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getPrice(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/price', data, {\n      headers: headers\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['tickers'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    return []\n  }\n}\n\nasync function getTransactions(params) {\n  let { apiKey, ...data } = params\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/user/deposits', data, {\n      headers: headers\n    });\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return responseData['transactions'];\n    } else {\n      // throw new Error(responseData['error']['message']);\n      return null\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getNonce(address) {\n  const data = {\n    address\n  };\n  try {\n    const response = await relayApi.post('/ethNonce', data)\n    if (response['data']['nonce'] !== undefined) {\n      return response['data']['nonce'];\n    } else {\n      throw new Error('Failed to get nonce');\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function sendApprove(signedEthereumTx) {\n  return sendDeposit(signedEthereumTx);\n}\n\nasync function sendDeposit(signedEthereumTx) {\n  const data = {\n    data: signedEthereumTx\n  };\n  try {\n    const response = await relayApi.post('/deposit', data)\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getOrderId(accountId, tokenSId, apiKey) {\n  const data = {\n    accountId: accountId,\n    tokenSId: tokenSId\n  };\n  const headers = {\n    'X-API-KEY': apiKey\n  };\n  try {\n    const response = await relayApi.post('/orderId', data, {\n      headers: headers\n    })\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      return response['data']['orderId'];\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function submitOrderToLightcone(data, apiKey) {\n  try {\n    const headers = {\n      'X-API-KEY': apiKey\n    };\n    const response = await relayApi.post('/order', data, {\n      headers: headers\n    })\n    return parseResponse(response);\n  } catch (e) {\n    throw e;\n  }\n}\n\nasync function getRecommendedGasPrice() {\n  try {\n    const data = {};\n    const response = await relayApi.post('/recommendedGasPrice', data)\n\n    const responseData = response['data'];\n    if (responseData['error'] === undefined) {\n      let price = responseData['price']\n      let minPrice = BigNumber(price)\n      let normalPrice = minPrice.plus(2 * 1e9)\n      let maxPrice = minPrice.times(30)\n      return [minPrice, normalPrice, maxPrice]\n    } else {\n      throw new Error(responseData['error']['message']);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getAllowance(owner, symbol) {\n  let token = config.getTokenBySymbol(symbol);\n  let tokenAddress = token.address;\n  const data = {\n    owner,\n    token: tokenAddress\n  };\n\n  const response = await relayApi.post('/allowances', data)\n  return response['data']['allowances'];\n}\n\nexport default {\n  getBalances: withoutThrow(getBalances),\n  getOrders: withoutThrow(getOrders),\n  cancelOrders: withoutThrow(cancelOrders),\n  getEthBalance: withoutThrow(getEthBalance),\n  getTokenBalance: withoutThrow(getTokenBalance),\n  sendWithdrawTransaction: withoutThrow(sendWithdrawTransaction),\n  getTrade: withoutThrow(getTrade),\n  lightconeGetAccount: withoutThrow(lightconeGetAccount),\n  getDepth: withoutThrow(getDepth),\n  getCandlestick: withoutThrow(getCandlestick),\n  getCandlestickCombine: withoutThrow(getCandlestickCombine),\n  getApiKey: withoutThrow(getApiKey),\n  getTickers: withoutThrow(getTickers),\n  getPrice: withoutThrow(getPrice),\n  getTransactions: withoutThrow(getTransactions),\n  getNonce: withoutThrow(getNonce),\n  sendApprove: withoutThrow(sendApprove),\n  sendDeposit: withoutThrow(sendDeposit),\n  getOrderId: withoutThrow(getOrderId),\n  submitOrderToLightcone: withoutThrow(submitOrderToLightcone),\n  getRecommendedGasPrice: withoutThrow(getRecommendedGasPrice),\n  getAllowance: withoutThrow(getAllowance),\n  ...wedexApi\n}","import { mnemonicToSeed, validateMnemonic } from \"bip39\";\nimport { fromMasterSeed } from \"hdkey\";\n\n/**\n * Decrypt mnemonic into ethereum private key\n * @param mnemonic string\n * @param password string\n * @param dpath string\n */\nexport function mnemonictoPrivatekey(mnemonic, dpath, password) {\n  if (dpath) {\n    mnemonic = mnemonic.trim();\n    if (!validateMnemonic(mnemonic)) {\n      throw new Error(\"Invalid mnemonic\");\n    }\n    const seed = mnemonicToSeed(mnemonic, password);\n    const derived = fromMasterSeed(seed).derive(dpath);\n    return derived.privateKey;\n  } else {\n    throw new Error(\"dpath can't be null\");\n  }\n}\n\n/**\n * Valid mnemonic\n * @param phrase string\n * @returns {bool}\n */\nexport function isValidateMnemonic(phrase) {\n  return validateMnemonic(phrase);\n}\n","export default [\n  {\n    symbol: \"ETH\",\n    title: \"Ethereum\",\n    icon: true\n  },\n  {\n    symbol: \"WETH\",\n    title: \"WETH\",\n    icon: true\n  },\n  {\n    symbol: \"LRC\",\n    title: \"Loopring\",\n    icon: true\n  },\n  {\n    symbol: \"EOS\",\n    title: \"EOS\",\n    icon: true\n  },\n  {\n    symbol: \"QTUM\",\n    title: \"QTUM\",\n    icon: true\n  },\n  {\n    symbol: \"BNB\",\n    title: \"Binance\",\n    icon: true\n  },\n  {\n    symbol: \"ZRX\",\n    title: \"0x\",\n    icon: true\n  },\n  {\n    symbol: \"XRP\",\n    title: \"Ripple\",\n    icon: true\n  },\n  {\n    symbol: \"SNT\",\n    icon: true\n  },\n  {\n    symbol: \"AE\",\n    icon: true\n  },\n  {\n    symbol: \"TRX\",\n    tile: \"TRON\",\n    icon: true\n  },\n  {\n    symbol: \"RDN\",\n    title: \"Raiden Network\"\n  },\n  {\n    symbol: \"BTM\"\n  },\n  {\n    symbol: \"MCO\"\n  },\n  {\n    symbol: \"PPT\"\n  },\n  {\n    symbol: \"SWT\"\n  },\n  {\n    symbol: \"NMR\"\n  },\n  {\n    symbol: \"MTL\"\n  },\n  {\n    symbol: \"REX\"\n  },\n  {\n    symbol: \"SNGLS\"\n  },\n  {\n    symbol: \"OMG\"\n  },\n  {\n    symbol: \"SAN\"\n  },\n  {\n    symbol: \"ANT\"\n  },\n  {\n    symbol: \"ATM\"\n  },\n  {\n    symbol: \"DNT\"\n  },\n  {\n    symbol: \"STORJ\"\n  },\n  {\n    symbol: \"HMQ\"\n  },\n  {\n    symbol: \"TAAS\"\n  },\n  {\n    symbol: \"MGO\"\n  },\n  {\n    symbol: \"AST\"\n  },\n  {\n    symbol: \"LUN\"\n  },\n  {\n    symbol: \"1ST\"\n  },\n  {\n    symbol: \"REQ\"\n  },\n\n  {\n    symbol: \"FUN\"\n  },\n  {\n    symbol: \"XAUR\"\n  },\n  {\n    symbol: \"PAY\"\n  },\n  {\n    symbol: \"SALT\"\n  },\n  {\n    symbol: \"CFI\"\n  },\n  {\n    symbol: \"WINGS\"\n  },\n  {\n    symbol: \"GNT\"\n  },\n  {\n    symbol: \"TKN\"\n  },\n  {\n    symbol: \"GUP\"\n  },\n  {\n    symbol: \"BAT\"\n  },\n  {\n    symbol: \"RCN\"\n  },\n  {\n    symbol: \"KNC\"\n  },\n  {\n    symbol: \"PPP\"\n  },\n  {\n    symbol: \"MLN\"\n  },\n  {\n    symbol: \"REP\"\n  },\n  {\n    symbol: \"NET\"\n  },\n  {\n    symbol: \"WTC\"\n  },\n  {\n    symbol: \"MANA\"\n  },\n  {\n    symbol: \"CVC\"\n  },\n  {\n    symbol: \"ICN\"\n  },\n  {\n    symbol: \"RDN\"\n  },\n  {\n    symbol: \"ETHOS\"\n  },\n  {\n    symbol: \"POWR\"\n  },\n  {\n    symbol: \"BNT\"\n  },\n  {\n    symbol: \"PLU\"\n  },\n  {\n    symbol: \"EDG\"\n  },\n  {\n    symbol: \"ENG\"\n  },\n  {\n    symbol: \"KIN\"\n  },\n  {\n    symbol: \"GNO\"\n  },\n  {\n    symbol: \"LINK\"\n  },\n  {\n    symbol: \"RLC\"\n  },\n  {\n    symbol: \"QSP\"\n  },\n  {\n    symbol: \"IND\"\n  },\n  {\n    symbol: \"TRST\"\n  },\n  {\n    symbol: \"CAT\"\n  }\n];\n","import tokens from \"./tokens\";\n\nimport configs from \"./config.json\";\nimport wallets from \"./dpath.json\";\n\nexport { tokens, configs, wallets };\n","import \"isomorphic-fetch\";\nimport crypto from \"crypto\";\n\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\n\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error(response.statusText);\n    error[\"response\"] = response;\n    throw error;\n  }\n}\n\n/**\n * @description Supports single request and batch request;\n * @param host\n * @param options\n * @param timeOut\n * @returns {Promise}\n */\nfunction request(host: string, options: any, timeOut?: number) {\n  timeOut = timeOut || 15000;\n  const requestPromise = new Promise(resolve => {\n    if (options.body) {\n      options.headers = options.headers || headers;\n      options.body = JSON.stringify(options.body);\n    }\n    fetch(host, options)\n      .then(checkStatus)\n      .then(res => res.json())\n      .then(data => resolve(data))\n      .catch(e => {\n        resolve({ error: e });\n      });\n  });\n  const timeoutPromise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({ error: { message: \"request time out\" } });\n    }, timeOut);\n  });\n  return Promise.race([requestPromise, timeoutPromise]);\n}\n\n/**\n * @description Returns a random hex string\n */\nexport function id() {\n  return crypto.randomBytes(8).toString(\"hex\");\n}\n\nexport default request;\n","import Schema from \"async-validator\";\nimport basicSchemas from \"./schemas\";\n\nconst schemas = {\n  basic: {\n    ...basicSchemas\n  }\n};\n\nlet handleErrors = (errors, fields) => {\n  let msgs = errors.map(err => err.message).join();\n  throw new Error(`data type invalid: ${msgs} \\n`);\n};\n\nlet validate = payload => {\n  let { type, value, onError, onSuccess } = payload;\n  let source = {};\n  let schema = {};\n\n  // fix bug: if value undefined or null\n  if (typeof value === \"undefined\") {\n    throw new Error(`data type invalid: ${type} should not be undefined`);\n  }\n  if (value === null) {\n    throw new Error(`data type invalid: ${type} should not be null`);\n  }\n\n  if (schemas[\"basic\"][type]) {\n    // validate one field , schema & source must just has one field\n    schema[type] = schemas[\"basic\"][type];\n    source[type] = value;\n  }\n\n  // TODO: if schema empty\n  let validator = new Schema(schema);\n  validator.validate(source, (errors, fields) => {\n    if (errors) {\n      console.log(\"validate start source\", source);\n      console.log(\"validate start schema\", schema);\n      if (onError) {\n        onError(errors, fields);\n      } else {\n        handleErrors(errors, fields);\n      }\n    } else {\n      if (onSuccess) {\n        onSuccess();\n      }\n    }\n  });\n};\n\nexport default {\n  validate\n};\n","import request from \"./request\";\nimport * as formatter from \"./formatter\";\nimport validator from \"./validator\";\nimport code from \"./code\";\nimport response from \"./response\";\nimport * as utils from \"./utils\";\n\nexport default {\n  formatter,\n  request,\n  validator,\n  code,\n  response,\n  utils\n};\n","// Using import {*} from 'ethereumjs-abi'; failed to import ethereumjs-abi\nvar abi = require(\"ethereumjs-abi\");\nimport {\n  addHexPrefix,\n  clearHexPrefix,\n  toBuffer,\n  toHex\n} from \"../../common/formatter\";\nimport BN from \"bn.js\";\n\nexport default class AbiFunction {\n  name: string;\n  inputTypes: string[];\n  inputs: any[];\n  outputTypes: string[];\n  outputs: any[];\n  constant: string;\n  methodAbiHash: string;\n\n  constructor({ inputs, name, outputs, constant }) {\n    this.name = name;\n    this.inputTypes = inputs.map(({ type }) => type);\n    this.inputs = inputs;\n    this.outputTypes = outputs.map(({ type }) => type);\n    this.outputs = outputs;\n    this.constant = constant;\n    this.methodAbiHash = toHex(abi.methodID(name, this.inputTypes));\n  }\n\n  /**\n   * @description Returns encoded methodId and inputs\n   * @param inputs Object, examples {owner:\"0x000...}\n   * @returns {string}\n   */\n  encodeInputs(inputs) {\n    const abiInputs = this.parseInputs(inputs);\n    return (\n      this.methodAbiHash +\n      clearHexPrefix(toHex(abi.rawEncode(this.inputTypes, abiInputs)))\n    );\n  }\n\n  /**\n   * @description decode ethereum jsonrpc response result\n   * @param outputs\n   * @returns {*}\n   */\n  decodeOutputs(outputs) {\n    return this.parseOutputs(\n      abi.rawDecode(this.outputTypes, toBuffer(outputs))\n    );\n  }\n\n  /**\n   * @description decode encoded inputs\n   * @param encoded\n   * @returns {*}\n   */\n  decodeEncodedInputs(encoded) {\n    return this.parseOutputs(\n      abi.rawDecode(this.inputTypes, toBuffer(addHexPrefix(encoded)))\n    );\n  }\n\n  parseInputs(inputs = {}) {\n    return this.inputs.map(({ name, type }) => {\n      if (inputs[name] === undefined) {\n        throw new Error(`Parameter ${name} of type ${type} is required!`);\n      }\n      return inputs[name];\n    });\n  }\n\n  parseOutputs(outputs) {\n    return outputs.map(output => {\n      if (output instanceof BN) {\n        return toHex(output);\n      }\n      return output;\n    });\n  }\n}\n","import AbiFunction from \"./AbiFunction\";\nimport { toHex } from \"../../common/formatter\";\nvar ethereumjs_abi = require(\"ethereumjs-abi\");\n\nexport default class Contract {\n  abiFunctions: any;\n\n  constructor(abi) {\n    const funAbi = abi.filter(({ type }) => type === \"function\");\n    this.abiFunctions = funAbi.reduce((acc, item) => {\n      const inputTypes = item.inputs.map(({ type }) => type);\n      const key = `${item.name}(${inputTypes.toString()})`;\n      const methodHash = ethereumjs_abi.methodID(item.name, inputTypes);\n      return {\n        ...acc,\n        [item.name]: new AbiFunction(item),\n        [key]: new AbiFunction(item),\n        [methodHash]: new AbiFunction(item)\n      };\n    });\n  }\n\n  /**\n   * @description Encodes inputs data according to  ethereum abi\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param inputs array\n   * @returns {*|string}\n   */\n  encodeInputs(method, inputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.encodeInputs(inputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decodes outputs\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param outputs string\n   * @returns {*}\n   */\n  decodeOutputs(method, outputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.decodeOutputs(outputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decode encoded method and inputs\n   * @param encode string | Buffer\n   * @returns {*}\n   */\n  decodeEncodeInputs(encode) {\n    encode = toHex(encode);\n    const methodId = encode.slice(0, 10);\n    const abiFunction = this.abiFunctions[methodId];\n    if (abiFunction) {\n      return abiFunction.decodeEncodedInputs(encode.slice(10));\n    } else {\n      throw new Error(`No corresponding method according to abi `);\n    }\n  }\n}\n","import Contract from \"./Contract\";\n\nimport erc20Abi from \"../../config/abis/erc20.json\";\nimport wethAbi from \"../../config/abis/weth.json\";\nimport airdropAbi from \"../../config/abis/airdrop.json\";\nimport exchangeAbi from \"../../config/abis/exchange.json\";\n\nconst WETH = new Contract(wethAbi);\nconst ERC20Token = new Contract(erc20Abi);\nconst AirdropContract = new Contract(airdropAbi);\nconst ExchangeContract = new Contract(exchangeAbi);\n\nexport default {\n  ERC20Token,\n  WETH,\n  AirdropContract,\n  ExchangeContract\n};\n","import AbiFunction from \"./AbiFunction\";\nimport Contract from \"./Contract\";\nimport Contracts from \"./Contracts\";\n\nexport default {\n  AbiFunction,\n  Contract,\n  Contracts\n};\n","import validator from \"../common/validator\";\nimport request from \"../common/request\";\n\nimport { sha3 } from \"ethereumjs-util\";\n\nvar host = \"http://localhost:8545\";\n\nexport function updateHost(newValue) {\n  host = newValue;\n}\n\nexport async function getTransactionCount(address, tag) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n  } catch (e) {\n    throw new Error(\"Invalid Address\");\n  }\n  tag = tag || \"pending\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      throw new Error(\"Invalid tag, must be one of latest, pending, earliest\");\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionCount\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getGasPrice() {\n  const params = [];\n  const body = {};\n  body[\"method\"] = \"eth_gasPrice\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function estimateGas(tx) {\n  const body = {};\n  body[\"method\"] = \"eth_estimateGas\";\n  body[\"params\"] = [tx];\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getAccountBalance(address, tag?) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n  } catch (e) {\n    throw new Error(\"Invalid Address\");\n  }\n  tag = tag || \"pending\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      throw new Error(\"Invalid tag, must be one of latest, pending,earliest\");\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getBalance\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getTransactionByhash(hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    throw new Error(\"Invalid Transaction Hash\");\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionByHash\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport async function getTransactionRecipt(hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    throw new Error(\"Invalid Transaction Hash\");\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionReceipt\";\n  body[\"params\"] = params;\n  // Set id\n  body[\"id\"] = 1;\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\nexport function isValidEthAddress(address) {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function getHash(message) {\n  return sha3(message);\n}\n","import validator from \"./validator\";\nimport request, { id } from \"../common/request\";\nimport Response from \"../common/response\";\nimport code from \"../common/code\";\n\nexport default class Eth {\n  host: string;\n\n  constructor(host) {\n    this.host = host;\n  }\n\n  getTransactionCount({ address, tag }) {\n    return getTransactionCount(this.host, { address, tag });\n  }\n\n  sendRawTransaction(signedTx) {\n    return sendRawTransaction(this.host, signedTx);\n  }\n\n  getGasPrice() {\n    return getGasPrice(this.host);\n  }\n\n  estimateGas(tx) {\n    return estimateGas(this.host, tx);\n  }\n\n  getAccountBalance({ address, tag }) {\n    return getAccountBalance(this.host, { address, tag });\n  }\n\n  getTransactionByhash(txHash) {\n    return getTransactionByhash(this.host, txHash);\n  }\n\n  call({ tx, tag }) {\n    return call(this.host, { tx, tag });\n  }\n}\n\n/**\n * @description Returns the number of transactions sent from an address.\n * @param host\n * @param address\n * @param tag\n * @returns {Promise}\n */\nexport function getTransactionCount(host, { address, tag }) {\n  tag = tag || \"pending\";\n  try {\n    validator.validate({ value: address, type: \"ETH_ADDRESS\" });\n    validator.validate({ value: tag, type: \"RPC_TAG\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionCount\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Sends signed ethereum tx\n * @param host\n * @param signedTx\n * @returns {Promise}\n */\nexport function sendRawTransaction(host, signedTx) {\n  const body = {};\n  body[\"method\"] = \"eth_sendRawTransaction\";\n  body[\"params\"] = [signedTx];\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the current price per gas in wei.\n * @param host\n * @returns {Promise}\n */\nexport function getGasPrice(host) {\n  const params = [];\n  const body = {};\n  body[\"method\"] = \"eth_gasPrice\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Generates and returns an estimate of how much gas is necessary to allow the transaction to complete.\n * @param host\n * @param tx\n * @returns {Promise}\n */\nexport function estimateGas(host, tx) {\n  const body = {};\n  body[\"method\"] = \"eth_estimateGas\";\n  body[\"params\"] = [tx];\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the ethereum balance of the account of given address.\n * @param host\n * @param address\n * @param tag\n * @returns {Promise}\n */\nexport function getAccountBalance(host, { address, tag }) {\n  tag = tag || \"latest\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n      validator.validate({ value: address, type: \"ETH_ADDRESS\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n  }\n  const params = [address, tag];\n  const body = {};\n  body[\"method\"] = \"eth_getBalance\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Returns the information about a transaction requested by transaction hash.\n * @param host\n * @param hash ethereum tx hash\n * @returns {Promise}\n */\nexport function getTransactionByhash(host, hash) {\n  try {\n    validator.validate({ value: hash, type: \"ETH_DATA\" });\n  } catch (e) {\n    return Promise.resolve(\n      new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n    );\n  }\n  const params = [hash];\n  const body = {};\n  body[\"method\"] = \"eth_getTransactionByHash\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n\n/**\n * @description Executes a new message call immediately without creating a transaction on the block chain.\n * @param host\n * @param tx\n * @param tag\n * @returns {Promise}\n */\nexport function call(host, { tx, tag }) {\n  tag = tag || \"latest\";\n  if (tag) {\n    try {\n      validator.validate({ value: tag, type: \"RPC_TAG\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n  }\n  const params = [tx, tag];\n  const body = {};\n  body[\"method\"] = \"eth_call\";\n  body[\"params\"] = params;\n  body[\"id\"] = id();\n  body[\"jsonrpc\"] = \"2.0\";\n  return request(host, {\n    method: \"post\",\n    body\n  });\n}\n","import { getTransactionCount } from \"./utils\";\nimport { toNumber } from \"../common/formatter\";\nimport validator from \"./validator\";\n\nconst setWallet = wallet => {\n  const wallets =\n    typeof localStorage !== \"undefined\" && localStorage.wallet\n      ? JSON.parse(localStorage.wallet)\n      : [];\n  const otherWallets = wallets.filter(\n    w => w.address.toLowerCase() !== wallet.address.toLowerCase()\n  );\n  otherWallets.push({\n    address: wallet.address,\n    nonce: toNumber(wallet.nonce) + 1\n  });\n  if (typeof localStorage !== \"undefined\") {\n    localStorage.wallet = JSON.stringify(otherWallets);\n  }\n};\n\nconst getWallet = address => {\n  const wallets =\n    typeof localStorage !== \"undefined\" && localStorage.wallet\n      ? JSON.parse(localStorage.wallet)\n      : [];\n  console.log(\"get wallets\");\n  return wallets.find(\n    wallet => wallet.address.toLowerCase() === address.toLowerCase()\n  );\n};\n\nconst getNonce = async address => {\n  try {\n    validator.validate({ value: address, type: \"ADDRESS\" });\n    const nonce =\n      toNumber((await getTransactionCount(address, \"pending\"))[\"result\"]) || 0;\n    const localNonce =\n      getWallet(address) && getWallet(address).nonce\n        ? getWallet(address).nonce\n        : 0;\n    return Math.max(nonce, localNonce);\n  } catch (e) {\n    throw new Error(e.message);\n  }\n};\n\nconst storeUnlockedAddress = (unlockType, address) => {\n  localStorage.unlockedType = unlockType;\n  localStorage.unlockedAddress = address;\n};\n\nconst getUnlockedAddress = () => {\n  return localStorage.unlockedAddress || \"\";\n};\n\nconst getUnlockedType = () => {\n  return localStorage.unlockedType || \"\";\n};\n\nconst clearUnlockedAddress = () => {\n  localStorage.unlockedType = \"\";\n  localStorage.unlockedAddress = \"\";\n};\n\nconst isInWhiteList = address => {};\n\nexport default {\n  setWallet,\n  getWallet,\n  isInWhiteList,\n  getNonce,\n  storeUnlockedAddress,\n  getUnlockedAddress,\n  getUnlockedType,\n  clearUnlockedAddress\n};\n","import abi from \"./contracts\";\nimport * as account from \"./walletAccount\";\nimport * as keystore from \"./keystore\";\nimport * as metamask from \"./metaMask\";\nimport * as mnemonic from \"./mnemonic\";\nimport * as utils from \"./utils\";\nimport validator from \"./validator\";\nimport eth from \"./eth\";\nimport wallet from \"./wallet\";\n\nexport default {\n  abi,\n  account,\n  keystore,\n  mnemonic,\n  metamask,\n  eth,\n  wallet,\n  validator,\n  utils\n};\n","//const config = require('./config.json');\nconst data = require(\"./data\");\nconst fm = require(\"../common/formatter\");\nconst config = data.configs;\nconst fees = config.fees;\nconst txs = config.txs;\n\nfunction requestWhiteList() {\n  const url =\n    \"//raw.githubusercontent.com/Loopring/mock-relay-data/master/whiteList.json\";\n  return fetch(url, { method: \"GET\" }).then(res => res.json());\n}\n\nasync function isinWhiteList(address) {\n  return await requestWhiteList().then(whiteList => {\n    const result = whiteList.find(\n      add => add.toLowerCase() === address.toLowerCase()\n    );\n    return !!result;\n  });\n}\n\nfunction getChainId() {\n  return config.chainId;\n}\n\nfunction getExchangeId() {\n  return config.exchangeId;\n}\n\nfunction getLabel() {\n  return config.label;\n}\n\nfunction getMaxFeeBips() {\n  return config.maxFeeBips;\n}\n\nfunction getTokenBySymbol(symbol) {\n  if (!symbol) {\n    return {};\n  }\n  return (\n    getTokens().find(\n      token => token.symbol.toLowerCase() === symbol.toLowerCase()\n    ) || {}\n  );\n}\n\nfunction getTokenByAddress(address) {\n  if (!address) {\n    return {};\n  }\n  return getTokens().find(\n    token => token.address.toLowerCase() === address.toLowerCase()\n  );\n}\n\nfunction getCustomTokens() {\n  return getTokens().filter(token => token.custom);\n}\n\nfunction getTokens() {\n  return config.tokens;\n}\n\nfunction fromWEI(symbol, valueInWEI, precision = 4) {\n  const token = getTokenBySymbol(symbol);\n  if (!token) {\n    return 0;\n  }\n  const value = fm.toBig(valueInWEI).div(\"1e\" + token.digits);\n  return value.toNumber().toFixed(precision);\n}\n\nfunction toWEI(symbol, value) {\n  const token = getTokenBySymbol(symbol);\n  if (!token) {\n    return 0;\n  }\n  const valueInBN = fm.toBig(value).times(\"1e\" + token.digits);\n  return valueInBN.toString(10);\n}\n\nfunction getMarketByPair(pair) {\n  if (pair) {\n    const pairArr = pair.split(\"-\");\n    if (pairArr && pairArr.length === 2) {\n      return getMarketBySymbol(pairArr[0], pairArr[1]);\n    }\n  }\n}\n\nfunction isSupportedMarket(market) {\n  if (!market) {\n    return false;\n  }\n  const pair = market.split(\"-\");\n  if (pair.length !== 2) {\n    return false;\n  }\n  return getMarkets().find(m => {\n    return (\n      (m.baseToken === pair[0].toUpperCase() &&\n        m.quoteToken === pair[1].toUpperCase()) ||\n      (m.baseToken === pair[1].toUpperCase() &&\n        m.quoteToken === pair[0].toUpperCase())\n    );\n  });\n}\n\nfunction getMarketBySymbol(baseToken, quoteToken) {\n  if (baseToken && quoteToken) {\n    return (\n      getMarkets().find(market => {\n        return (\n          (market.baseToken === baseToken &&\n            market.quoteToken === quoteToken) ||\n          (market.baseToken === quoteToken && market.quoteToken === baseToken)\n        );\n      }) || {\n        pricePrecision: 8\n      }\n    );\n  } else {\n    return {\n      pricePrecision: 8\n    };\n  }\n}\n\nfunction getMarketsByTokenR(token) {\n  return getMarkets().filter(item => item.quoteToken === token);\n}\n\nfunction getMarketsByTokenL(token) {\n  return getMarkets().filter(item => item.baseToken === token);\n}\n\nfunction getTokenSupportedMarkets(token) {\n  const leftMarket = getMarketsByTokenL(token);\n  const rightMarket = getMarketsByTokenR(token);\n  return [...leftMarket, ...rightMarket];\n}\n\nfunction getMarkets() {\n  return config.markets;\n}\n\nfunction getGasLimitByType(type) {\n  if (type) {\n    return txs.find(tx => type === tx.type);\n  }\n}\n\nfunction getFeeByType(type) {\n  if (type) {\n    return fees.find(fee => type === fee.type);\n  }\n}\n\nfunction getWalletAddress() {\n  return config.walletAddress;\n}\n\nfunction getExchangeAddress() {\n  return config.exchangeAddress;\n}\n\nfunction getWallets() {\n  return data.wallets;\n}\n\nfunction getMaxAmountInWEI() {\n  return config.maxAmount;\n}\n\nexport default {\n  getTokenBySymbol,\n  getTokenByAddress,\n  getTokens,\n  getMarketBySymbol,\n  getMarketByPair,\n  getGasLimitByType,\n  getFeeByType,\n  isinWhiteList,\n  getChainId,\n  getExchangeId,\n  getLabel,\n  getMaxFeeBips,\n  isSupportedMarket,\n  getMarketsByTokenR,\n  getTokenSupportedMarkets,\n  getMarkets,\n  getWalletAddress,\n  getExchangeAddress,\n  getMaxAmountInWEI,\n  getWallets,\n  fromWEI,\n  toWEI\n};\n","import EthTransaction from \"ethereumjs-tx\";\nimport validator from \"./validator\";\nimport { addHexPrefix, toBuffer, toHex } from \"../common/formatter\";\nimport { getGasPrice, getTransactionCount } from \"./utils\";\nimport request from \"../common/request\";\nimport { configs } from \"../config/data\";\n\n// HACK: What is the host in wallet/ethereum?\nconst host = \"host\";\n\nexport default class Transaction {\n  raw: string;\n  signed: string;\n\n  constructor(rawTx) {\n    validator.validate({ value: rawTx, type: \"BASIC_TX\" });\n    this.raw = rawTx;\n  }\n\n  setGasLimit() {\n    this.raw[\"gasLimit\"] = this.raw[\"gasLimit\"] || configs[\"defaultGasLimit\"];\n  }\n\n  async setGasPrice() {\n    this.raw[\"gasPrice\"] =\n      this.raw[\"gasPrice\"] || (await getGasPrice())[\"result\"];\n  }\n\n  setChainId() {\n    this.raw[\"chainId\"] = this.raw[\"chainId\"] || configs[\"chainId\"] || 1;\n  }\n\n  async setNonce(address, tag) {\n    tag = tag || \"pending\";\n    this.raw[\"nonce\"] =\n      this.raw[\"nonce\"] || (await getTransactionCount(address, tag))[\"result\"];\n  }\n\n  hash() {\n    validator.validate({ value: this.raw, type: \"TX\" });\n    return new EthTransaction(this.raw).hash();\n  }\n\n  async sign({ privateKey, walletType, path }) {\n    try {\n      validator.validate({ value: this.raw, type: \"TX\" });\n    } catch (e) {\n      await this.complete();\n    }\n    const ethTx = new EthTransaction(this.raw);\n\n    let signed;\n    if (privateKey) {\n      try {\n        if (typeof privateKey === \"string\") {\n          validator.validate({ value: privateKey, type: \"PRIVATE_KEY\" });\n          privateKey = toBuffer(addHexPrefix(privateKey));\n        } else {\n          validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n        }\n      } catch (e) {\n        throw new Error(\"Invalid private key\");\n      }\n\n      ethTx.sign(privateKey);\n      signed = toHex(ethTx.serialize());\n    } else {\n      throw new Error(\"Invalid private key\");\n    }\n    this.signed = signed;\n    return signed;\n  }\n\n  async send({ privateKey, walletType, path }) {\n    if (!this.signed) {\n      await this.sign({ privateKey, walletType, path });\n    }\n    let body = {};\n    body[\"method\"] = \"eth_sendRawTransaction\";\n    body[\"params\"] = [this.signed];\n    return request(host, {\n      method: \"post\",\n      body\n    });\n  }\n\n  async sendRawTx(signedTx) {\n    let body = {};\n    body[\"method\"] = \"eth_sendRawTransaction\";\n    body[\"params\"] = [signedTx];\n    return request(host, {\n      method: \"post\",\n      body\n    });\n  }\n\n  async complete() {\n    this.setChainId();\n    this.setGasLimit();\n    await this.setGasPrice();\n  }\n}\n","import BN from \"bn.js\";\n\n/**\n * The keypair data for EdDSA.\n */\nexport class KeyPair {\n  publicKeyX: string;\n  publicKeyY: string;\n  secretKey: string;\n}\n\nexport class DexAccount {\n  accountId: number;\n  keyPair: KeyPair;\n  nonce?: number;\n}\n\n/**\n * The signature data for EdDSA.\n */\nexport interface Signature {\n  Rx: string;\n  Ry: string;\n  s: string;\n}\n\nexport class WithdrawalRequest {\n  account: DexAccount;\n  token: string;\n  tokenId?: number;\n  amount: string;\n  amountInBN?: BN;\n  tokenF: string;\n  tokenFId?: number;\n  amountF: string;\n  amountFInBN?: BN;\n  label?: number;\n  signature?: Signature;\n  hash?: string;\n}\n\nexport class OrderRequest {\n  owner: string;\n  accountId: number;\n  exchangeId: number;\n  keyPair: KeyPair;\n\n  tokenS: string;\n  tokenB: string;\n  tokenSId: number;\n  tokenBId: number;\n\n  amountS: string;\n  amountB: string;\n  amountSInBN: BN;\n  amountBInBN: BN;\n\n  orderId: number;\n\n  label: number;\n\n  allOrNone?: boolean;\n  validSince: number;\n  validUntil: number;\n  maxFeeBips: number;\n  buy?: boolean;\n\n  feeBips: number;\n  rebateBips?: number;\n\n  hash?: string;\n  signatureRx?: string;\n  signatureRy?: string;\n  signatureS?: string;\n\n  [key: string]: any;\n}\n\n// must be cost by circuit -- NOT recommend\nexport class CancelRequest {\n  account: DexAccount;\n  orderToken: string;\n  orderTokenId?: number;\n  orderId: number;\n  tokenF: string;\n  tokenFId?: number;\n  amountF: string;\n  amountFInBN?: BN;\n  label?: number;\n  signature?: Signature;\n}\n\nexport class GetAPIKeyRequest {\n  account: DexAccount;\n  signature?: Signature;\n}\n\nexport class SignAPIKeyRequest {\n  accountId: number;\n  publicKeyX: string;\n  publicKeyY: string;\n}\n\nexport class FlexCancelRequest {\n  account: DexAccount;\n  orderHash?: string;\n  clientOrderId?: string;\n  signature?: Signature;\n}\n\nexport class SignFlexCancelRequest {\n  accountId: number;\n  orderHash?: string;\n  clientOrderId?: string;\n}\n","import { EdDSA } from \"../lib/sign/eddsa\";\nimport { ethereum } from \"../lib/wallet\";\nimport * as fm from \"../lib/wallet/common/formatter\";\nimport config from \"../lib/wallet/config\";\nimport Transaction from \"../lib/wallet/ethereum/transaction\";\nimport { WalletAccount } from \"../lib/wallet/ethereum/walletAccount\";\nimport {\n  CancelRequest,\n  FlexCancelRequest,\n  GetAPIKeyRequest,\n  OrderRequest,\n  SignAPIKeyRequest,\n  SignFlexCancelRequest,\n  WithdrawalRequest\n} from \"../model/types\";\nimport * as Poseidon from \"../lib/sign/poseidon\";\nimport sha256 from \"crypto-js/sha256\";\n\nconst assert = require(\"assert\");\n\nexport class Exchange {\n  private currentWalletAccount: WalletAccount;\n\n  public generateKeyPair(seed: string) {\n    return EdDSA.generateKeyPair(seed);\n  }\n\n  public verifyPassword(publicKeyX: string, publicKeyY: string, seed: string) {\n    const keyPair = this.generateKeyPair(seed);\n    return (\n      keyPair.publicKeyX === publicKeyX && keyPair.publicKeyY === publicKeyY\n    );\n  }\n\n  public createOrUpdateAccount(\n    wallet: WalletAccount,\n    password: string,\n    nonce: number,\n    gasPrice: number,\n    permission: Buffer\n  ) {\n    try {\n      const keyPair = EdDSA.generateKeyPair(wallet.getAddress() + password);\n      this.currentWalletAccount = wallet;\n      const transaction = this.createAccountAndDeposit(\n        keyPair.publicKeyX,\n        keyPair.publicKeyY,\n        \"\",\n        \"0\",\n        permission,\n        nonce,\n        gasPrice\n      );\n      return {\n        rawTx: transaction,\n        keyPair: keyPair\n      };\n    } catch (err) {\n      console.error(\"Failed in method updateAccount. Error: \", err);\n      throw err;\n    }\n  }\n\n  private createAccountAndDeposit(\n    publicX: string,\n    publicY: string,\n    symbol: string,\n    amount: string,\n    permission: Buffer,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      let address, value: string;\n      const token = config.getTokenBySymbol(symbol);\n\n      if (JSON.stringify(token) === \"{}\") {\n        address = \"0x0\";\n        value = \"0\";\n      } else {\n        address = token.address;\n        value = fm.toHex(fm.toBig(amount).times(\"1e\" + token.digits));\n      }\n\n      const data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n        \"updateAccountAndDeposit\",\n        {\n          pubKeyX: fm.toHex(fm.toBN(publicX)),\n          pubKeyY: fm.toHex(fm.toBN(publicY)),\n          tokenAddress: address,\n          amount: value,\n          permission: permission\n        }\n      );\n\n      return new Transaction({\n        to: config.getExchangeAddress(),\n        value: fm.toHex(config.getFeeByType(\"create\").feeInWEI),\n        data: data,\n        chainId: config.getChainId(),\n        nonce: fm.toHex(nonce),\n        gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n        gasLimit: fm.toHex(config.getGasLimitByType(\"create\").gasInWEI)\n      });\n    } catch (err) {\n      console.error(\"Failed in method createOrUpdateAccount. Error: \", err);\n      throw err;\n    }\n  }\n\n  public deposit(\n    wallet: WalletAccount,\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    let to, value, data: string;\n    try {\n      const token = config.getTokenBySymbol(symbol);\n      const fee = config.getFeeByType(\"deposit\").feeInWEI;\n      value = fm.toBig(amount).times(\"1e\" + token.digits);\n\n      if (wallet.getAddress()) {\n        this.currentWalletAccount = wallet;\n        if (symbol === \"ETH\") {\n          to = \"0x0\";\n          data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n            \"deposit\",\n            {\n              tokenAddress: to,\n              amount: fm.toHex(value)\n            }\n          );\n          value = value.plus(fee);\n        } else {\n          to = token.address;\n          data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n            \"deposit\",\n            {\n              tokenAddress: to,\n              amount: fm.toHex(value)\n            }\n          );\n          value = fee;\n        }\n\n        return new Transaction({\n          to: config.getExchangeAddress(),\n          value: fm.toHex(value),\n          data: data,\n          chainId: config.getChainId(),\n          nonce: fm.toHex(nonce),\n          gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n          gasLimit: fm.toHex(config.getGasLimitByType(\"depositTo\").gasInWEI)\n        });\n      }\n    } catch (err) {\n      console.error(\"Failed in method deposit. Error: \", err);\n      throw err;\n    }\n  }\n\n  public withdraw(\n    wallet: WalletAccount,\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    let to, value, data: string;\n    try {\n      const token = config.getTokenBySymbol(symbol);\n      const fee = config.getFeeByType(\"withdraw\").feeInWEI;\n      value = fm.toBig(amount).times(\"1e\" + token.digits);\n\n      if (wallet.getAddress()) {\n        this.currentWalletAccount = wallet;\n        to = symbol === \"ETH\" ? \"0x0\" : token.address;\n        data = ethereum.abi.Contracts.ExchangeContract.encodeInputs(\n          \"withdraw\",\n          {\n            tokenAddress: to,\n            amount: fm.toHex(value)\n          }\n        );\n        value = fee;\n        return new Transaction({\n          to: config.getExchangeAddress(),\n          value: fm.toHex(value),\n          data: data,\n          chainId: config.getChainId(),\n          nonce: fm.toHex(nonce),\n          gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n          gasLimit: fm.toHex(config.getGasLimitByType(\"withdrawFrom\").gasInWEI)\n        });\n      }\n    } catch (err) {\n      console.error(\"Failed in method withdraw. Error: \", err);\n      throw err;\n    }\n  }\n\n  public submitWithdrawal(withdrawal: WithdrawalRequest) {\n    let token, feeToken;\n    if (!withdrawal.token.startsWith(\"0x\")) {\n      token = config.getTokenBySymbol(withdrawal.token);\n    } else {\n      token = config.getTokenByAddress(withdrawal.token);\n    }\n    if (!withdrawal.tokenF.startsWith(\"0x\")) {\n      feeToken = config.getTokenBySymbol(withdrawal.tokenF);\n    } else {\n      feeToken = config.getTokenByAddress(withdrawal.tokenF);\n    }\n    withdrawal.tokenId = token.id;\n    withdrawal.token = token.address;\n    withdrawal.amountInBN = config.toWEI(token.symbol, withdrawal.amount);\n    withdrawal.amount = withdrawal.amountInBN.toString(10);\n\n    withdrawal.tokenFId = feeToken.id;\n    withdrawal.tokenF = feeToken.address;\n    withdrawal.amountFInBN = config.toWEI(feeToken.symbol, withdrawal.amountF);\n    withdrawal.amountF = withdrawal.amountFInBN.toString(10);\n\n    withdrawal.label =\n      withdrawal.label !== undefined ? withdrawal.label : config.getLabel();\n    return this.signWithdrawal(withdrawal);\n  }\n\n  public signWithdrawal(withdrawal: WithdrawalRequest) {\n    if (withdrawal.signature !== undefined) {\n      return;\n    }\n    const account = withdrawal.account;\n    const hasher = Poseidon.createHash(9, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      account.accountId,\n      withdrawal.tokenId,\n      withdrawal.amountInBN,\n      withdrawal.tokenFId,\n      withdrawal.amountFInBN,\n      withdrawal.label,\n      account.nonce\n    ];\n    const hash = hasher(inputs).toString(10);\n\n    // Create signature\n    withdrawal.hash = hash;\n    withdrawal.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, withdrawal.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return withdrawal;\n  }\n\n  public signOrder(order: OrderRequest) {\n    if (order.signature !== undefined) {\n      return;\n    }\n    const hasher = Poseidon.createHash(14, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      order.orderId,\n      order.accountId,\n      order.tokenSId,\n      order.tokenBId,\n      order.amountSInBN,\n      order.amountBInBN,\n      order.allOrNone ? 1 : 0,\n      order.validSince,\n      order.validUntil,\n      order.maxFeeBips,\n      order.buy ? 1 : 0,\n      order.label\n    ];\n    order.hash = hasher(inputs).toString(10);\n\n    // Create signature\n    const signature = EdDSA.sign(order.keyPair.secretKey, order.hash);\n    order.signature = signature;\n    order.signatureRx = signature.Rx;\n    order.signatureRy = signature.Ry;\n    order.signatureS = signature.s;\n\n    // Verify signature\n    const success = EdDSA.verify(order.hash, order.signature, [\n      order.keyPair.publicKeyX,\n      order.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return order;\n  }\n\n  public setupOrder(order: OrderRequest) {\n    let tokenBuy, tokenSell;\n    if (!order.tokenS.startsWith(\"0x\")) {\n      tokenSell = config.getTokenBySymbol(order.tokenS);\n    } else {\n      tokenSell = config.getTokenByAddress(order.tokenS);\n    }\n    if (!order.tokenB.startsWith(\"0x\")) {\n      tokenBuy = config.getTokenBySymbol(order.tokenB);\n    } else {\n      tokenBuy = config.getTokenByAddress(order.tokenB);\n    }\n    order.tokenS = tokenSell.address;\n    order.tokenB = tokenBuy.address;\n    order.tokenSId = tokenSell.id;\n    order.tokenBId = tokenBuy.id;\n\n    order.amountSInBN = config.toWEI(tokenSell.symbol, order.amountS);\n    order.amountS = order.amountSInBN.toString(10);\n\n    order.amountBInBN = config.toWEI(tokenBuy.symbol, order.amountB);\n    order.amountB = order.amountBInBN.toString(10);\n\n    order.exchangeId =\n      order.exchangeId !== undefined\n        ? order.exchangeId\n        : config.getExchangeId();\n    order.buy = order.buy !== undefined ? order.buy : false;\n\n    order.maxFeeBips =\n      order.maxFeeBips !== undefined\n        ? order.maxFeeBips\n        : config.getMaxFeeBips();\n    order.allOrNone = order.allOrNone !== undefined ? order.allOrNone : false;\n\n    order.feeBips =\n      order.feeBips !== undefined ? order.feeBips : order.maxFeeBips;\n    order.rebateBips = order.rebateBips !== undefined ? order.rebateBips : 0;\n    order.label = order.label !== undefined ? order.label : config.getLabel();\n\n    assert(order.maxFeeBips < 64, \"maxFeeBips >= 64\");\n    assert(order.feeBips < 64, \"feeBips >= 64\");\n    assert(order.rebateBips < 64, \"rebateBips >= 64\");\n    assert(order.label < 2 ** 16, \"order.label >= 2**16\");\n\n    // Sign the order\n    return this.signOrder(order);\n  }\n\n  public getRandomInt(max: number) {\n    return Math.floor(Math.random() * max);\n  }\n\n  public submitOrder(wallet: WalletAccount, request: OrderRequest) {\n    this.currentWalletAccount = wallet;\n    return this.setupOrder(request);\n  }\n\n  public signCancel(cancel: CancelRequest) {\n    if (cancel.signature !== undefined) {\n      return;\n    }\n    const account = cancel.account;\n    const hasher = Poseidon.createHash(9, 6, 53);\n\n    // Calculate hash\n    const inputs = [\n      config.getExchangeId(),\n      account.accountId,\n      cancel.orderTokenId,\n      cancel.orderId,\n      cancel.tokenFId,\n      cancel.amountFInBN,\n      cancel.label,\n      account.nonce\n    ];\n    const hash = hasher(inputs).toString(10);\n\n    // Create signature\n    cancel.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, cancel.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return cancel;\n  }\n\n  public submitCancel(cancel: CancelRequest) {\n    let orderToken, feeToken;\n    if (!cancel.orderToken.startsWith(\"0x\")) {\n      orderToken = config.getTokenBySymbol(cancel.orderToken);\n    } else {\n      orderToken = config.getTokenByAddress(cancel.orderToken);\n    }\n    if (!cancel.tokenF.startsWith(\"0x\")) {\n      feeToken = config.getTokenBySymbol(cancel.tokenF);\n    } else {\n      feeToken = config.getTokenByAddress(cancel.tokenF);\n    }\n    cancel.tokenFId = feeToken.id;\n    cancel.tokenF = feeToken.symbol;\n    cancel.orderTokenId = orderToken.id;\n    cancel.orderToken = orderToken.symbol;\n\n    cancel.amountFInBN = config.toWEI(feeToken.symbol, cancel.amountF);\n    cancel.amountF = cancel.amountFInBN.toString(10);\n\n    cancel.label =\n      cancel.label !== undefined ? cancel.label : config.getLabel();\n    return this.signCancel(cancel);\n  }\n\n  public submitFlexCancel(request: FlexCancelRequest) {\n    if (request.signature !== undefined) {\n      return;\n    }\n    const account = request.account;\n    let sign = new SignFlexCancelRequest();\n    sign.accountId = account.accountId;\n    sign.orderHash = request.orderHash;\n    sign.clientOrderId = request.clientOrderId;\n    const hash = fm.addHexPrefix(sha256(JSON.stringify(sign)).toString());\n\n    // Create signature\n    request.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, request.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return request;\n  }\n\n  public signGetApiKey(request: GetAPIKeyRequest) {\n    if (request.signature !== undefined) {\n      return;\n    }\n    let account = request.account;\n    let sign = new SignAPIKeyRequest();\n    sign.accountId = account.accountId;\n    sign.publicKeyX = account.keyPair.publicKeyX;\n    sign.publicKeyY = account.keyPair.publicKeyY;\n    const hash = fm.addHexPrefix(sha256(JSON.stringify(sign)).toString());\n\n    // Create signature\n    request.signature = EdDSA.sign(account.keyPair.secretKey, hash);\n\n    // Verify signature\n    const success = EdDSA.verify(hash, request.signature, [\n      account.keyPair.publicKeyX,\n      account.keyPair.publicKeyY\n    ]);\n    assert(success, \"Failed to verify signature\");\n    return request;\n  }\n}\n\nexport const exchange: Exchange = new Exchange();\n","import { exchange } from \"..\";\nimport * as fm from \"../lib/wallet/common/formatter\";\nimport config from \"../lib/wallet/config\";\nimport Contracts from \"../lib/wallet/ethereum/contracts/Contracts\";\nimport Transaction from \"../lib/wallet/ethereum/transaction\";\nimport { WalletAccount } from \"../lib/wallet/ethereum/walletAccount\";\nimport {\n  CancelRequest,\n  DexAccount,\n  FlexCancelRequest,\n  GetAPIKeyRequest,\n  KeyPair,\n  OrderRequest,\n  WithdrawalRequest\n} from \"../model/types\";\nimport appConfig from 'config/appConfig'\n\nconst assert = require(\"assert\");\n\nexport class Account {\n  public account: WalletAccount;\n\n  public constructor(account) {\n    this.account = account;\n  }\n\n  /**\n   * Approve Zero\n   * @param symbol: approve token symbol to zero\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async approveZero(symbol: string, nonce: number, gasPrice: number) {\n    const token = config.getTokenBySymbol(symbol);\n    const rawTx = new Transaction({\n      to: token.address,\n      value: \"0x0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: config.getExchangeAddress(),\n        _value: \"0x0\"\n      }),\n      chainId: config.getChainId(),\n      nonce: fm.toHex(nonce),\n      gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n      gasLimit: fm.toHex(config.getGasLimitByType(\"approve\").gasInWEI)\n    });\n    // return this.account.signEthereumTx(rawTx.raw);\n\n    const response = appConfig.txSendByMetaMask\n      ? await this.account.sendTransaction(null, rawTx.raw)\n      : await this.account.signEthereumTx(rawTx.raw)\n    return response;\n  }\n\n  /**\n   * Approve Max\n   * @param symbol: approve token symbol to max\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async approveMax(symbol: string, nonce: number, gasPrice: number) {\n    const token = config.getTokenBySymbol(symbol);\n    const rawTx = new Transaction({\n      to: token.address,\n      value: \"0x0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: config.getExchangeAddress(),\n        _value: config.getMaxAmountInWEI()\n      }),\n      chainId: config.getChainId(),\n      nonce: fm.toHex(nonce),\n      gasPrice: fm.toHex(fm.fromGWEI(gasPrice)),\n      gasLimit: fm.toHex(config.getGasLimitByType(\"approve\").gasInWEI)\n    });\n\n    const response = appConfig.txSendByMetaMask\n      ? await this.account.sendTransaction(null, rawTx.raw)\n      : await this.account.signEthereumTx(rawTx.raw)\n    return response;\n  }\n\n  /**\n   * generate key pair of account in DEX\n   * @param password: account specified password\n   */\n  public generateKeyPair(password: string) {\n    try {\n      assert(this.account !== null);\n      return exchange.generateKeyPair(this.account.getAddress() + password);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * verify password of account in DEX\n   * @param publicKeyX: publicKeyX of account's key pair\n   * @param publicKeyY: publicKeyY of account's key pair\n   * @param password: account specified password\n   */\n  public verifyPassword(\n    publicKeyX: string,\n    publicKeyY: string,\n    password: string\n  ) {\n    try {\n      assert(this.account !== null);\n      return exchange.verifyPassword(\n        publicKeyX,\n        publicKeyY,\n        this.account.getAddress() + password\n      );\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * create Or Update Account in DEX\n   * @param gasPrice: in gwei\n   * @param nonce: Ethereum nonce of this address\n   * @param permission: user permission\n   * @param password: user password\n   */\n  public async createOrUpdateAccount(\n    password: string,\n    nonce: number,\n    gasPrice: number,\n    permission?: string\n  ) {\n    try {\n      permission = permission !== undefined ? permission : \"\";\n      const createOrUpdateAccountResposne = exchange.createOrUpdateAccount(\n        this.account,\n        password,\n        nonce,\n        gasPrice,\n        fm.toBuffer(permission)\n      );\n      const rawTx = createOrUpdateAccountResposne[\"rawTx\"];\n      // const signedEthereumTx = await this.account.signEthereumTx(rawTx.raw);\n      const signedEthereumTx = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw);\n      return {\n        signedTx: signedEthereumTx,\n        keyPair: createOrUpdateAccountResposne[\"keyPair\"]\n      };\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Deposit to Dex\n   * @param symbol: string symbol of token to deposit\n   * @param amount: string number amount to deposit, e.g. '1.5'\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async depositTo(\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      const rawTx = exchange.deposit(\n        this.account,\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n      // return await this.account.signEthereumTx(rawTx.raw);\n      const response = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw)\n      return response;\n\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * On-chain Withdrawal from Dex\n   * @param symbol: string symbol of token to withdraw\n   * @param amount: string number amount to withdraw, e.g. '1.5'\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   */\n  public async onchainWithdrawal(\n    symbol: string,\n    amount: string,\n    nonce: number,\n    gasPrice: number\n  ) {\n    try {\n      const rawTx = exchange.withdraw(\n        this.account,\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n\n      const response = appConfig.txSendByMetaMask\n        ? await this.account.sendTransaction(null, rawTx.raw)\n        : await this.account.signEthereumTx(rawTx.raw);\n      return response;\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Off-chain Withdrawal from Dex\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param nonce: DEX nonce of account\n   * @param token: token symbol or address to withdraw\n   * @param amount: amount to withdraw, in decimal string. e.g. '15'\n   * @param tokenF: fee token symbol or address to withdraw\n   * @param amountF: withdrawal fee, in decimal string. e.g. '15'\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public offchainWithdrawal(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    nonce: number,\n    token: string,\n    amount: string,\n    tokenF: string,\n    amountF: string,\n    label?: number\n  ) {\n    try {\n      const withdraw = new WithdrawalRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      withdraw.account = account;\n      withdraw.account.accountId = accountId;\n      withdraw.account.keyPair.publicKeyX = publicKeyX;\n      withdraw.account.keyPair.publicKeyY = publicKeyY;\n      withdraw.account.keyPair.secretKey = privateKey;\n      withdraw.account.nonce = nonce;\n      withdraw.token = token;\n      withdraw.amount = amount;\n      withdraw.tokenF = tokenF;\n      withdraw.amountF = amountF;\n      withdraw.label = label;\n      return exchange.submitWithdrawal(withdraw);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get signed order, should be submitted by frontend itself TEMPORARY\n   * @param owner: Ethereum address of this order's owner\n   * @param accountId: account ID in exchange\n   * @param tokenS: symbol or hex address of token sell\n   * @param tokenB: symbol or hex address of token buy\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param amountS: amount of token sell, in string number\n   * @param amountB: amount of token buy, in string number\n   * @param orderId: next order ID, needed by order signature\n   * @param validSince: valid beginning period of this order, SECOND in timestamp\n   * @param validUntil: valid ending period of this order, SECOND in timestamp\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public submitOrder(\n    owner: string,\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    tokenS: string,\n    tokenB: string,\n    amountS: string,\n    amountB: string,\n    orderId: number,\n    validSince: number,\n    validUntil: number,\n    label?: number\n  ) {\n    try {\n      const order = new OrderRequest();\n      order.owner = owner;\n      order.accountId = accountId;\n      order.keyPair = new KeyPair();\n      order.keyPair.publicKeyX = publicKeyX;\n      order.keyPair.publicKeyY = publicKeyY;\n      order.keyPair.secretKey = privateKey;\n\n      order.tokenS = tokenS;\n      order.tokenB = tokenB;\n      order.amountS = amountS;\n      order.amountB = amountB;\n\n      order.orderId = orderId;\n      order.validSince = Math.floor(validSince);\n      order.validUntil = Math.floor(validUntil);\n      order.label = label;\n      return exchange.submitOrder(this.account, order);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Cancel order in Dex\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param nonce: DEX nonce of account\n   * @param orderToken: token symbol or address of cancel\n   * @param orderId: specified order id to cancel\n   * @param tokenF: amountF token symbol or address of cancel\n   * @param amountF: cancel amountF, e.g. '15'\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  public submitCancel(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    nonce: number,\n    orderToken: string,\n    orderId: number,\n    tokenF: string,\n    amountF: string,\n    label?: number\n  ) {\n    try {\n      const cancel = new CancelRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      cancel.account = account;\n      cancel.account.accountId = accountId;\n      cancel.account.keyPair.publicKeyX = publicKeyX;\n      cancel.account.keyPair.publicKeyY = publicKeyY;\n      cancel.account.keyPair.secretKey = privateKey;\n      cancel.account.nonce = nonce;\n      cancel.orderToken = orderToken;\n      cancel.orderId = orderId;\n      cancel.tokenF = tokenF;\n      cancel.amountF = amountF;\n      cancel.label = label;\n      return exchange.submitCancel(cancel);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get Api Key signature\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   */\n  public getApiKey(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string\n  ) {\n    try {\n      const request = new GetAPIKeyRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      request.account = account;\n      request.account.accountId = accountId;\n      request.account.keyPair.publicKeyX = publicKeyX;\n      request.account.keyPair.publicKeyY = publicKeyY;\n      request.account.keyPair.secretKey = privateKey;\n      return exchange.signGetApiKey(request);\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  /**\n   * Get Api Key signature\n   * @param accountId: account ID in exchange\n   * @param publicKeyX: trading public key X of account, decimal string\n   * @param publicKeyY: trading public key Y of account, decimal string\n   * @param privateKey: trading private key of account, decimal string\n   * @param orderHash: [OPTIONAL] specified order hash to cancel\n   * @param clientOrderId: [OPTIONAL] specified client order ID to cancel\n   */\n  public submitFlexCancel(\n    accountId: number,\n    publicKeyX: string,\n    publicKeyY: string,\n    privateKey: string,\n    orderHash?: string,\n    clientOrderId?: string\n  ) {\n    try {\n      const request = new FlexCancelRequest();\n      const account = new DexAccount();\n      account.keyPair = new KeyPair();\n      request.account = account;\n      request.account.accountId = accountId;\n      request.account.keyPair.publicKeyX = publicKeyX;\n      request.account.keyPair.publicKeyY = publicKeyY;\n      request.account.keyPair.secretKey = privateKey;\n      request.orderHash = orderHash;\n      request.clientOrderId = clientOrderId;\n      return exchange.submitFlexCancel(request);\n    } catch (e) {\n      throw e;\n    }\n  }\n}\n","import common from \"./lib/wallet/common\";\nimport ethereum from \"./lib/wallet/ethereum\";\nimport ContractUtils from \"./lib/wallet/ethereum/contracts/Contracts\";\nimport EthRpcUtils from \"./lib/wallet/ethereum/eth\";\nimport Utils from \"./lib/wallet/common/utils\";\nimport config from \"./lib/wallet/config\";\n\nimport { exchange } from \"./sign/exchange\";\nimport { Account } from \"./wallet/account\";\n\nexport {\n  common,\n  config,\n  ethereum,\n  exchange,\n  Account,\n  ContractUtils,\n  EthRpcUtils,\n  Utils\n};\n","import basicSchemas from \"../common/schemas\";\n\nlet standSchemas = {\n  BASIC_TX: {\n    to: {\n      ...basicSchemas.ADDRESS\n    },\n    value: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasLimit: {\n      type: \"string\",\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    gasPrice: {\n      type: \"string\",\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    chainId: {\n      type: \"number\"\n    },\n    nonce: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]{1,64}$/g\n    },\n    data: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]*$/g\n    }\n  },\n  TX: {\n    to: {\n      ...basicSchemas.ADDRESS\n    },\n    value: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasLimit: {\n      ...basicSchemas.ETH_DATA\n    },\n    gasPrice: {\n      ...basicSchemas.ETH_DATA\n    },\n    chainId: {\n      type: \"number\",\n      required: true\n    },\n    nonce: {\n      ...basicSchemas.ETH_DATA\n    },\n    data: {\n      type: \"string\",\n      required: true,\n      pattern: /^0x[0-9a-fA-F]*$/g\n    },\n    signed: {\n      type: \"string\"\n    }\n  },\n  BASIC_TOKEN: {\n    address: {\n      ...basicSchemas.ADDRESS\n    },\n    symbol: {\n      type: \"string\"\n    },\n    name: {\n      type: \"string\"\n    },\n    digits: {\n      type: \"number\"\n    },\n    unit: {\n      type: \"string\"\n    },\n    website: {\n      type: \"url\"\n    },\n    allowance: {\n      type: \"number\"\n    },\n    precision: {\n      type: \"number\"\n    },\n    minTradeValue: {\n      type: \"number\"\n    }\n  },\n  TOKEN: {\n    address: {\n      ...basicSchemas.ADDRESS\n    },\n    symbol: {\n      type: \"string\",\n      required: true\n    },\n    name: {\n      type: \"string\",\n      required: true\n    },\n    digits: {\n      type: \"number\",\n      required: true\n    },\n    unit: {\n      type: \"string\",\n      required: true\n    },\n    website: {\n      type: \"url\"\n    },\n    allowance: {\n      type: \"number\",\n      required: true\n    },\n    precision: {\n      type: \"number\",\n      required: true\n    },\n    minTradeValue: {\n      type: \"number\",\n      required: true\n    }\n  }\n};\n\n// Hack: What is standSchemas?\nexport default standSchemas;\n","import Schema from \"async-validator\";\nimport basicSchemas from \"../common/schemas\";\nimport transactionSchmas from \"./schemas\";\n\nconst schemas = {\n  basic: {\n    ...basicSchemas\n  },\n  transaction: {\n    ...transactionSchmas\n  }\n};\n\nlet handleErrors = (errors, fields) => {\n  let msgs = errors.map(err => err.message).join();\n  throw new Error(`data type invalid: ${msgs} \\n`);\n};\n\nlet validate = payload => {\n  let { type, value, onError, onSuccess } = payload;\n  let source = {};\n  let schema = {};\n\n  // fix bug: if value undefined or null\n  if (typeof value === \"undefined\") {\n    throw new Error(`data type invalid: ${type} should not be undefined`);\n  }\n  if (value === null) {\n    throw new Error(`data type invalid: ${type} should not be null`);\n  }\n\n  if (schemas[\"basic\"][type]) {\n    // validate one field , schema & source must just has one field\n    schema[type] = schemas[\"basic\"][type];\n    source[type] = value;\n  }\n  if (schemas[\"transaction\"][type]) {\n    // validate multiple fileds , schema & source must has multiple fields\n    schema[type] = {\n      type: \"object\",\n      required: true,\n      fields: schemas[\"transaction\"][type]\n    };\n    source[type] = value;\n  }\n\n  // TODO: if schema empty\n  let validator = new Schema(schema);\n  validator.validate(source, (errors, fields) => {\n    if (errors) {\n      console.log(\"validate start source\", source);\n      console.log(\"validate start schema\", schema);\n      if (onError) {\n        onError(errors, fields);\n      } else {\n        handleErrors(errors, fields);\n      }\n    } else {\n      if (onSuccess) {\n        onSuccess();\n      }\n    }\n  });\n};\n\nexport default {\n  validate\n};\n","/* eslint-disable */\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.TradingView={})}(this,function(t){\"use strict\";var e=Object.assign||function(t){for(var e,o=arguments,i=1,n=arguments.length;i<n;i++)for(var s in e=o[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};function o(t,i){var n=e({},t);for(var s in i)\"object\"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==i[s]&&(n[s]=i[s]):n[s]=o(t[s],i[s]);return n}var i={mobile:{disabled_features:[\"left_toolbar\",\"header_widget\",\"timeframes_toolbar\",\"edit_buttons_in_legend\",\"context_menus\",\"control_bar\",\"border_around_the_chart\"],enabled_features:[]}},n={width:800,height:500,symbol:\"AA\",interval:\"D\",timezone:\"Etc/UTC\",container_id:\"\",library_path:\"\",locale:\"en\",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{\"mainSeriesProperties.showCountdown\":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:\"5y\",resolution:\"W\"},{text:\"1y\",resolution:\"W\"},{text:\"6m\",resolution:\"120\"},{text:\"3m\",resolution:\"60\"},{text:\"1m\",resolution:\"30\"},{text:\"5d\",resolution:\"5\"},{text:\"1d\",resolution:\"1\"}],client_id:\"0\",user_id:\"0\",charts_storage_api_version:\"1.0\",favorites:{intervals:[],chartTypes:[]}};function s(){return\"1.14 (internal id 36c29828 @ 2019-09-24 10:39:54.259301)\"}var r=function(){function t(t){if(this._id=\"tradingview_\"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error(\"Datafeed is not defined\");if(this._options=o(n,t),t.preset){var e=i[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn(\"Unknown preset: `\"+t.preset+\"`\")}\"Dark\"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:\"#131722\"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,o){this._innerAPI().changeSymbol(t,e+\"\",o)},t.prototype.remove=function(){window.removeEventListener(\"resize\",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,o,i){this._innerAPI().saveChartToServer(t,e,o,i)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=o(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+\"px\")},t.prototype._create=function(){var t=this,e=this._render(),o=document.getElementById(this._options.container_id);if(null===o)throw new Error(\"There is no such element - #\"+this._options.container_id);o.innerHTML=e,this._iFrame=o.querySelector(\"#\"+this._id);var i=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(i.style.width=\"100%\",this._options.fullscreen||(i.style.height=\"100%\")),window.addEventListener(\"resize\",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){var e=function(){i.removeEventListener(\"load\",e,!1),t()};i.addEventListener(\"load\",e,!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,o=t._readyHandlers;e<o.length;e++){var i=o[e];try{i.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||\"\")+\"static/\"+encodeURIComponent(this._options.locale)+\"-tv-chart.36c29828de05fa4d10c3.html#symbol=\"+encodeURIComponent(this._options.symbol)+\"&interval=\"+encodeURIComponent(this._options.interval)+(this._options.timeframe?\"&timeframe=\"+encodeURIComponent(this._options.timeframe):\"\")+(this._options.toolbar_bg?\"&toolbarbg=\"+encodeURIComponent(this._options.toolbar_bg.replace(\"#\",\"\")):\"\")+(this._options.studies_access?\"&studiesAccess=\"+encodeURIComponent(JSON.stringify(this._options.studies_access)):\"\")+\"&widgetbar=\"+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?\"&drawingsAccess=\"+encodeURIComponent(JSON.stringify(this._options.drawings_access)):\"\")+\"&timeFrames=\"+encodeURIComponent(JSON.stringify(this._options.time_frames))+\"&locale=\"+encodeURIComponent(this._options.locale)+\"&uid=\"+encodeURIComponent(this._id)+\"&clientId=\"+encodeURIComponent(String(this._options.client_id))+\"&userId=\"+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?\"&chartsStorageUrl=\"+encodeURIComponent(this._options.charts_storage_url):\"\")+(this._options.charts_storage_api_version?\"&chartsStorageVer=\"+encodeURIComponent(this._options.charts_storage_api_version):\"\")+(this._options.custom_css_url?\"&customCSS=\"+encodeURIComponent(this._options.custom_css_url):\"\")+(this._options.auto_save_delay?\"&autoSaveDelay=\"+encodeURIComponent(String(this._options.auto_save_delay)):\"\")+\"&debug=\"+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?\"&snapshotUrl=\"+encodeURIComponent(this._options.snapshot_url):\"\")+(this._options.timezone?\"&timezone=\"+encodeURIComponent(this._options.timezone):\"\")+(this._options.study_count_limit?\"&studyCountLimit=\"+encodeURIComponent(String(this._options.study_count_limit)):\"\")+(this._options.symbol_search_request_delay?\"&ssreqdelay=\"+encodeURIComponent(String(this._options.symbol_search_request_delay)):\"\")+(this._options.theme?\"&theme=\"+encodeURIComponent(String(this._options.theme)):\"\");return'<iframe id=\"'+this._id+'\" name=\"'+this._id+'\"  src=\"'+e+'\"'+(this._options.autosize||this._options.fullscreen?\"\":' width=\"'+this._options.width+'\" height=\"'+this._options.height+'\"')+' frameborder=\"0\" allowTransparency=\"true\" scrolling=\"no\" allowfullscreen style=\"display:block;\"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=s,t.version=s,t.widget=r,Object.defineProperty(t,\"__esModule\",{value:!0})});\n","// @ts-ignore\n/* ts-disable */\nimport validator from \"./validator\";\nimport {\n  addHexPrefix,\n  formatAddress,\n  formatKey,\n  toBuffer,\n  toHex,\n  toNumber\n} from \"../common/formatter\";\nimport { decryptKeystoreToPkey, pkeyToKeystore } from \"./keystore\";\nimport {\n  ecsign,\n  hashPersonalMessage,\n  privateToAddress,\n  privateToPublic,\n  publicToAddress,\n  sha3\n} from \"ethereumjs-util\";\nimport { mnemonictoPrivatekey } from \"./mnemonic\";\nimport { generateMnemonic } from \"bip39\";\nimport { trimAll } from \"../common/utils\";\nimport HDKey from \"hdkey\";\nimport EthTransaction from \"ethereumjs-tx\";\nimport { MetaMask } from \"./metaMask\";\nimport { Dkey } from \"./dkey\";\nimport Wallet from \"ethereumjs-wallet\";\nimport wallets from \"../config/wallets.json\";\nimport { Toast } from 'utils'\n\nconst LoopringWallet = wallets.find(\n  wallet => trimAll(wallet.name).toLowerCase() === \"loopringwallet\"\n);\nexport const path = LoopringWallet.dpath;\n\nexport function createWallet() {\n  return Wallet.generate();\n}\n\n/**\n * @description Returns the ethereum address  of a given private key\n * @param privateKey\n * @returns {string}\n */\nexport function privateKeytoAddress(privateKey) {\n  try {\n    if (typeof privateKey === \"string\") {\n      validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n      privateKey = toBuffer(addHexPrefix(privateKey));\n    } else {\n      validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n    }\n  } catch (e) {\n    throw new Error(\"Invalid private key\");\n  }\n  return formatAddress(privateToAddress(privateKey));\n}\n\n/**\n * @description Returns the ethereum address of a given public key.\n * Accepts \"Ethereum public keys\" and SEC1 encoded keys.\n * @param publicKey Buffer | string\n * @param sanitize bool [sanitize=false] Accept public keys in other formats\n * @returns {string}\n */\nexport function publicKeytoAddress(publicKey, sanitize) {\n  publicKey = toBuffer(publicKey);\n  return formatAddress(publicToAddress(publicKey, sanitize));\n}\n\n/**\n *\n * @param publicKey\n * @param chainCode\n * @param pageSize\n * @param pageNum\n * @returns {<Array>}\n */\nexport function getAddresses({ publicKey, chainCode, pageSize, pageNum }) {\n  const addresses = [];\n  const hdk = new HDKey();\n  hdk.publicKey =\n    publicKey instanceof Buffer ? publicKey : toBuffer(addHexPrefix(publicKey));\n  hdk.chainCode =\n    chainCode instanceof Buffer ? chainCode : toBuffer(addHexPrefix(chainCode));\n  for (let i = 0; i < pageSize; i++) {\n    const dkey = hdk.derive(`m/${i + pageSize * pageNum}`);\n    addresses.push(publicKeytoAddress(dkey.publicKey, true));\n  }\n  return addresses;\n}\n\n/**\n * @description Returns the ethereum public key of a given private key.\n * @param privateKey Buffer | string\n * @returns {string}\n */\nexport function privateKeytoPublic(privateKey) {\n  try {\n    if (typeof privateKey === \"string\") {\n      validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n      privateKey = toBuffer(addHexPrefix(privateKey));\n    } else {\n      validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n    }\n  } catch (e) {\n    throw new Error(\"Invalid private key\");\n  }\n  return formatKey(privateToPublic(privateKey));\n}\n\n/**\n * @description Returns WalletAccount of given mnemonic, dpath and password\n * @param mnemonic string\n * @param dpath string\n * @param password string\n * @returns {WalletAccount}\n */\nexport function fromMnemonic(mnemonic, dpath, password) {\n  const privateKey = mnemonictoPrivatekey(mnemonic, dpath, password);\n  return fromPrivateKey(privateKey);\n}\n\n/**\n * @description Returns WalletAccount of a given private key\n * @param privateKey string | buffer\n * @returns {WalletAccount}\n */\nexport function fromPrivateKey(privateKey) {\n  return new PrivateKeyAccount(privateKey);\n}\n\n/**\n * @description Returns WalletAccount of the given keystore\n * @param keystore string\n * @param password string\n * @returns {WalletAccount}\n */\nexport function fromKeystore(keystore, password) {\n  const privateKey = decryptKeystoreToPkey(keystore, password);\n  return fromPrivateKey(privateKey);\n}\n\nexport function fromMetaMask(web3, account, address) {\n  return new MetaMaskAccount(web3, account, address);\n}\n\nexport function fromDkey(web3, account, address) {\n  return new DkeyAccount(web3, account, address);\n}\n\n/**\n * @description generate mnemonic\n * @param strength\n * @returns {*}\n */\nexport function createMnemonic(strength) {\n  return generateMnemonic(strength || 256);\n}\n\n// Hack: Failed to import in react web app\nexport class WalletAccount {\n  // Hack: to use in typescript\n  getAddress() {\n    return \"1\";\n  }\n\n  // /**\n  //  * @description sign\n  //  * @param hash\n  //  */\n  // sign(hash) {\n  //     throw Error('unimplemented');\n  // }\n\n  // /**\n  //  * @description Returns serialized signed ethereum tx\n  //  * @param rawTx\n  //  * @returns {string}\n  //  */\n  signEthereumTx(rawTx) {\n    throw Error(\"unimplemented\");\n  }\n\n  // /**\n  //  * @description Returns given order along with r, s, v\n  //  * @param order\n  //  */\n  // signOrder(order) {\n  //     throw Error('unimplemented');\n  // }\n\n  // /**\n  //  * @description Calculates an Ethereum specific signature with: sign(keccak256(\"\\x19Ethereum Signed Message:\\n\" + len(message) + message))).\n  //  * @param message string\n  //  */\n  // signMessage(message) {\n  //     throw Error('unimplemented');\n  // }\n\n  async sendTransaction(ethNode, signedTx) {\n    const response = await ethNode.sendRawTransaction(signedTx);\n    console.log(\"WalletAccount sendTransaction: \", response);\n    return response;\n  }\n}\n\nexport class PrivateKeyAccount extends WalletAccount {\n  privateKey: any;\n\n  /**\n   * @property\n   * @param privateKey string | Buffer\n   */\n  constructor(privateKey) {\n    super();\n    try {\n      if (typeof privateKey === \"string\") {\n        validator.validate({ value: privateKey, type: \"ETH_KEY\" });\n        privateKey = toBuffer(addHexPrefix(privateKey));\n      } else {\n        validator.validate({ value: privateKey, type: \"PRIVATE_KEY_BUFFER\" });\n      }\n    } catch (e) {\n      throw new Error(\"Invalid private key\");\n    }\n    this.privateKey = privateKey;\n  }\n\n  /**\n   * @description Returns V3 type keystore of this account\n   * @param password\n   * @returns {{version, id, address, crypto}}\n   */\n  toV3Keystore(password) {\n    return pkeyToKeystore(this.privateKey, password);\n  }\n\n  /**\n   * Returns ethereum public key of this account\n   * @returns {string}\n   */\n  getPublicKey() {\n    return privateKeytoPublic(this.privateKey);\n  }\n\n  getAddress() {\n    return privateKeytoAddress(this.privateKey);\n  }\n\n  sign(hash) {\n    hash = toBuffer(hash);\n    const signature = ecsign(hash, this.privateKey);\n    const v = toNumber(signature.v);\n    const r = toHex(signature.r);\n    const s = toHex(signature.s);\n    return { r, s, v };\n  }\n\n  signMessage(message) {\n    const hash = sha3(message);\n    const finalHash = hashPersonalMessage(hash);\n    return this.sign(finalHash);\n  }\n\n  signEthereumTx(rawTx) {\n    validator.validate({ type: \"TX\", value: rawTx });\n    const ethTx = new EthTransaction(rawTx);\n    ethTx.sign(this.privateKey);\n    return toHex(ethTx.serialize());\n  }\n}\n\nexport class MetaMaskAccount extends WalletAccount {\n  web3: any;\n  account: any;\n  address: string;\n  metaMask: MetaMask;\n\n  constructor(web3, account, address) {\n    super();\n    this.web3 = web3;\n    this.account = account;\n    this.address = address;\n    this.metaMask = new MetaMask()\n  }\n\n  getAddress() {\n    return this.address;\n  }\n\n  async sign(hash) {\n    const result = await this.metaMask.sign(this.web3, this.account, hash);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signMessage(message) {\n    const result = await this.metaMask.signMessage(this.web3, this.account, message);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signEthereumTx(rawTx) {\n    const result = await this.metaMask.signEthereumTx(\n      this.web3,\n      this.account,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async sendTransaction(unused, rawTx) {\n    // 如果不填gasprice，则默认是 1Gwei\n\n    // 要用provider 的形式。\n    // react_devtools_backend.js:6 MetaMask: web3 will be deprecated in the near future in favor of the ethereumProvider\n    // https://github.com/MetaMask/faq/blob/master/detecting_metamask.md#deprecation-of-global-web3js\n    // rawTx.gasPrice = await this.web3.eth.getGasPrice(console.log)\n    // console.info(rawTx.gasPrice)\n    const result = await this.metaMask.sendTransaction(\n      this.web3,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n}\n\nexport class DkeyAccount extends WalletAccount {\n  web3: any;\n  account: any;\n  address: string;\n  dkey: Dkey;\n\n  constructor(web3, account, address) {\n    super();\n    this.web3 = web3;\n    this.account = account;\n    this.address = address;\n    this.dkey = new Dkey()\n\n  }\n\n  getAddress() {\n    return this.address;\n  }\n\n  async sign(hash) {\n    const result = await this.dkey.sign(this.web3, this.account, hash);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signMessage(message) {\n    const result = await this.dkey.signMessage(this.web3, this.account, message);\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async signEthereumTx(rawTx) {\n    const result = await this.dkey.signEthereumTx(\n      this.web3,\n      this.account,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n\n  async sendTransaction(unused, rawTx) {\n    // 如果不填gasprice，则默认是 1Gwei\n\n    // 要用provider 的形式。\n    // react_devtools_backend.js:6 MetaMask: web3 will be deprecated in the near future in favor of the ethereumProvider\n    // https://github.com/MetaMask/faq/blob/master/detecting_metamask.md#deprecation-of-global-web3js\n    // rawTx.gasPrice = await this.web3.eth.getGasPrice(console.log)\n    // console.info(rawTx.gasPrice)\n\n    rawTx.from = this.account\n    const result = await this.dkey.sendTransaction(\n      this.web3,\n      rawTx\n    );\n    if (!result[\"error\"]) {\n      return result[\"result\"];\n    } else {\n      // SDK shouldn't throw any error\n      Toast.fail(result[\"error\"][\"message\"], 1)\n      throw new Error(result[\"error\"][\"message\"]);\n    }\n  }\n}\n","import validator from \"./validator\";\nimport Response from \"../common/response\";\nimport code from \"../common/code\";\nimport { addHexPrefix, toHex, toNumber } from \"../common/formatter\";\nimport EthTransaction from \"ethereumjs-tx\";\nimport { MetaMask } from \"./metaMask\";\n\ndeclare global {\n  interface Window {\n    dkeySignSuccess: any;\n    dkeySignFailure: any;\n    dkeySendTxSuccess: any;\n    dkeySendTxFailure: any;\n    ethereum: any;\n  }\n}\n\nexport class Dkey extends MetaMask {\n  async sign(web3, account, hash) {\n    try {\n      validator.validate({ value: account, type: \"ETH_ADDRESS\" });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n\n    return new Promise(resolve => {\n      window.dkeySignSuccess = function (resp) {\n        let { result } = resp\n        const r = result.slice(0, 66);\n        const s = addHexPrefix(result.slice(66, 130));\n        const v = toNumber(addHexPrefix(result.slice(130, 132)));\n        resolve({ result: { r, s, v } });\n      }\n      window.dkeySignFailure = function (error) {\n        resolve({ error: { message: String(error) } });\n      }\n      // let dkeyTxParams = {\n      //   from: account,\n      //   data: rawTx.data,\n      //   gasLimit: rawTx.gasLimit,\n      //   gasPrice: rawTx.gasPrice,\n      //   to: rawTx.to,\n      //   value: rawTx.value,\n      //   nonce: rawTx.nonce,\n      // }\n      // window.ethereum.sign2(JSON.stringify(dkeyTxParams), 'dkeySignSuccess', 'dkeySignFailure')\n      window.ethereum.sign(hash, 'dkeySignSuccess', 'dkeySignFailure')\n    });\n  }\n\n  // async signEthereumTx(web3, account, rawTx) {\n  //   try {\n  //     validator.validate({ value: rawTx, type: \"TX\" });\n  //   } catch (e) {\n  //     return Promise.resolve(\n  //       new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n  //     );\n  //   }\n  //   try {\n  //     const ethTx = new EthTransaction(rawTx);\n  //     const response = await this.sign(web3, account, rawTx);\n  //     if (!response[\"error\"]) {\n  //       const signature = response[\"result\"];\n  //       signature.v += ethTx._chainId * 2 + 8;\n  //       Object.assign(ethTx, signature);\n  //       return { result: toHex(ethTx.serialize()) };\n  //     } else {\n  //       return response;\n  //     }\n  //   } catch (e) {\n  //     console.log(\"Failed to sign EthereumTx\");\n  //     console.log(e);\n  //     return e;\n  //   }\n  // }\n\n  sendTransaction(web3, tx) {\n    try {\n      validator.validate({ type: \"TX\", value: tx });\n    } catch (e) {\n      return Promise.resolve(\n        new Response(code.PARAM_INVALID.code, code.PARAM_INVALID.msg)\n      );\n    }\n\n    // return new Promise(resolve => {\n    //   web3.eth.sendTransaction(tx, function(err, transactionHash) {\n    //     if (!err) {\n    //       resolve({ result: transactionHash });\n    //     } else {\n    //       const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n    //       resolve({ error: { message: errorMsg } });\n    //     }\n    //   });\n    // });\n\n    return new Promise(resolve => {\n      window.dkeySendTxSuccess = function (resp) {\n        console.info('dkey sendTransaction success', resp)\n        resolve(resp);\n      }\n      window.dkeySendTxFailure = function (error) {\n        console.info('dkey sendTransaction failure:', error)\n        resolve({ error });\n      }\n      // let dkeyTxParams = {\n      //   from: account,\n      //   data: rawTx.data,\n      //   gasLimit: rawTx.gasLimit,\n      //   gasPrice: rawTx.gasPrice,\n      //   to: rawTx.to,\n      //   value: rawTx.value,\n      //   nonce: rawTx.nonce,\n      // }\n      // window.ethereum.sign2(JSON.stringify(dkeyTxParams), 'dkeySignSuccess', 'dkeySignFailure')\n      window.ethereum.sendTransaction(JSON.stringify(tx), 'dkeySendTxSuccess', 'dkeySendTxFailure')\n    });\n  }\n}","import { BigNumber } from \"bignumber.js\";\nimport BN from \"bn.js\";\n\nconst assert = require(\"assert\");\nconst abi = require(\"ethereumjs-abi\");\n\nexport class Bitstream {\n  private data: string;\n\n  constructor(initialData: string = \"\") {\n    this.data = initialData;\n    if (this.data.startsWith(\"0x\")) {\n      this.data = this.data.slice(2);\n    }\n  }\n\n  public getData() {\n    if (this.data.length === 0) {\n      return \"0x\";\n    } else {\n      return \"0x\" + this.data;\n    }\n  }\n\n  public getBytes32Array() {\n    if (this.data.length === 0) {\n      return [];\n    } else {\n      assert.equal(\n        this.length() % 32,\n        0,\n        \"Bitstream not compatible with bytes32[]\"\n      );\n      return this.data.match(/.{1,64}/g).map(element => \"0x\" + element);\n    }\n  }\n\n  public addBigNumber(x: BigNumber, numBytes = 32) {\n    const formattedData = this.padString(x.toString(16), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addBN(x: BN, numBytes = 32) {\n    const formattedData = this.padString(x.toString(16), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addNumber(x: number, numBytes = 4) {\n    // Check if we need to encode this number as negative\n    if (x < 0) {\n      const encoded = abi.rawEncode([\"int256\"], [x.toString(10)]);\n      const hex = encoded.toString(\"hex\").slice(-(numBytes * 2));\n      return this.addHex(hex);\n    } else {\n      return this.addBigNumber(new BigNumber(x), numBytes);\n    }\n  }\n\n  public addAddress(x: string, numBytes = 20) {\n    const formattedData = this.padString(x.slice(2), numBytes * 2);\n    return this.insert(formattedData);\n  }\n\n  public addHex(x: string) {\n    if (x.startsWith(\"0x\")) {\n      return this.insert(x.slice(2));\n    } else {\n      return this.insert(x);\n    }\n  }\n\n  public extractUint8(offset: number) {\n    return parseInt(this.extractData(offset, 1), 16);\n  }\n\n  public extractUint16(offset: number) {\n    return parseInt(this.extractData(offset, 2), 16);\n  }\n\n  public extractUint24(offset: number) {\n    return parseInt(this.extractData(offset, 3), 16);\n  }\n\n  public extractUint32(offset: number) {\n    return parseInt(this.extractData(offset, 4), 16);\n  }\n\n  public extractUint40(offset: number) {\n    return parseInt(this.extractData(offset, 5), 16);\n  }\n\n  public extractUint48(offset: number) {\n    return parseInt(this.extractData(offset, 6), 16);\n  }\n\n  public extractUint56(offset: number) {\n    return new BN(this.extractData(offset, 7), 16);\n  }\n\n  public extractUint64(offset: number) {\n    return new BN(this.extractData(offset, 8), 16);\n  }\n\n  public extractUint(offset: number) {\n    return new BN(this.extractData(offset, 32), 16);\n  }\n\n  public extractAddress(offset: number) {\n    return \"0x\" + this.extractData(offset, 20);\n  }\n\n  public extractBytes1(offset: number) {\n    return this.extractBytesX(offset, 1);\n  }\n\n  public extractBytes32(offset: number) {\n    return this.extractBytesX(offset, 32);\n  }\n\n  public extractBytesX(offset: number, length: number) {\n    return new Buffer(this.extractData(offset, length), \"hex\");\n  }\n\n  public extractChar(offset: number) {\n    return this.extractData(offset, 1);\n  }\n\n  public extractData(offset: number, length: number) {\n    const start = offset * 2;\n    const end = start + length * 2;\n    if (this.data.length < end) {\n      throw new Error(\n        \"substring index out of range:[\" + start + \", \" + end + \"]\"\n      );\n    }\n    return this.data.slice(start, end);\n  }\n\n  // Returns the number of bytes of data\n  public length() {\n    return this.data.length / 2;\n  }\n\n  public static hashCode(s) {\n    for (var i = 0, h = 0; i < s.length; i++)\n      h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;\n    return Math.abs(h);\n  }\n\n  private insert(x: string) {\n    const offset = this.length();\n    this.data += x;\n    return offset;\n  }\n\n  private padString(x: string, targetLength: number) {\n    if (x.length > targetLength) {\n      throw Error(\n        \"0x\" +\n          x +\n          \" is too big to fit in the requested length (\" +\n          targetLength +\n          \")\"\n      );\n    }\n    while (x.length < targetLength) {\n      x = \"0\" + x;\n    }\n    return x;\n  }\n}\n","import _ from 'lodash'\nimport { channel } from 'redux-saga'\nimport { put, call, all, select, take, fork } from 'redux-saga/effects'\nimport moment from 'moment'\nimport { dispatch } from 'store'\nimport utils from 'utils'\n\nexport function * startup (api, action) {\n  console.log('startup')\n\n  // 检查auth\n  // let needAuth = yield call(checkAuthToken, api)\n\n  // yield call(setHttpAuth, api)\n\n  // if (!needAuth) {\n  //   yield put(StartupActions.setReady(true))\n  // }\n\n  // yield put 需要这样写\n  // yield put({      // dispatch一个action到reducer， payload是请求返回的数据\n  //   type: actionTypes.GET_AGE_SUCCESS,\n  //   payload: res   \n  // })\n\n  yield put({ type: 'persistData/checkChannel'})\n  yield put({ type: 'persistData/checkLocale'})\n  yield put({ type: 'persistData/checkMarket'})\n  dispatch.markets.fetchMarkets()\n  let tokens = yield call(api.getContracts)\n  dispatch.tokens.update({ list: tokens })\n  dispatch.appState.startup()\n  // 必须 yield put connectToMetaMask。因为有可能导致地址已切换。\n  // dispatch.metaMask.connectToMetaMask()\n  // 重要：这里并没有用， connectToMetaMask 中又用了await，并不会等其执行完。\n  yield put({ type: 'metaMask/connectToMetaMask'})\n  dispatch.dexAccount.loadAccount()\n  // 此定时器永不关闭。\n  // utils.setImmediateInterval(async () => {\n  //   dispatch.dexAccount.checkAccountOvertime()\n  // }, 60 * 1000)\n  utils.setImmediateInterval(async () => {\n    dispatch.socket.checkHeartBeat()\n  }, 30 * 1000)\n  dispatch.socket.start()\n\n  // 内存泄露。\n  // 场景一: 输入不存在的 url，页面无可渲染的 dom。此时即使用下面的方式让 store不停的计算。内存也无明显增长。说明还是dom的问题，特别是 table。币安用的是react-virtualized\n  // 场景二: url 正确，但是把 home 中的所有组件都注释掉，基本缓慢。说明还是 dom 问题。\n  // 场景三: 打开 tvchart，但是仍然关闭 trade。基本不增长。会在大约 10 分钟后突然增加10M 左右，应该是 tvchart 自身的问题。\n  // 场景四: 打开 tvchart，打开 trade，但是不显示 table。相比“场景三”有增长（15 分钟 30M。可能是candlestick 订阅的socket自己带来的更新），但是仍然比较缓慢。说明还是 trade 的 table 本身的问题。\n  // 场景五: 关闭 tvchart，打开 trade，显示 table。明显每秒 dom内存（内存占用空间） 增加 3M，js（js 使用内存实际大小） 每秒增加 0.8M。持续增长了 100M后，开始下降，应该是内存回收开始生效，之后会进入一个动态平衡。\n  //        原因分析：虽然只取了头部的 30 个，但是列表中实际有 130 个 dom 了。因为每次渲染时，若数组中有 rowKey 冲突，就会挂死一行数据的 dom 在列表中，估计是 ant 根据 rowKey 做了什么优化。\n  //        其他细节：socket 重连一次时，会再次 1s 增加 3M。但是等 30 个 dom 绘制完成后，等一会会回收之前的 30 个 dom。应该是重新加载导致 loading，dom 全部销毁重建。\n  //        这里要继续优化就得考虑共用dom。但是没必要。\n  // 场景六: rowKey使用数组的 index。竟然效果奇好。对比 dom 发现，完全复用了。（当不使用 index 时，在 elements 中选中一个 dom，可以看到这个 dom 不停的往下走，上面不停的会插入新的 dom，直至到达数组末尾，然后被销毁。）\n  //        这种方式下，内存明显表现非常好。而且数据的变更等表现到界面上。\n  //        也有不好的地方。当头部插入 1 条数据时。整个数组的 rowKey 全部变化，虚拟 dom 树的对比会耗费 “CPU” 资源。如果不使用 ant 的 table，可能还可以进一步优化。\n  //        https://segmentfault.com/a/1190000015648248\n  //        此处我们主要解决内存问题，那么还是如此优化吧。\n  // 场景六: table 的 rowKey 不传。\n  // 场景七: trade 没有截断为最多 30 条。明显持续增加，直至崩溃。\n\n  // cpu 占用。\n  // 不停的推送期间，cpu 一直高达 10%，但是观察币安，也是如此，因此没关系。\n\n  // utils.setImmediateInterval(async () => {\n  //   let now = new Date().getTime()\n  //   let price = 0.00017857\n\n  //   let datas = []\n  //   for (let i=1; i<5; i++) {\n  //     datas.push(\n  //       {\n  //         timestamp: now + _.random(0, 1),\n  //         tradeId: now + i,\n  //         side: \"sell\",\n  //         size: \"103000000000000000000\",\n  //         price: price + _.random(0, 3),\n  //         market: \"LRC-ETH\",\n  //         fee: \"0\",\n  //       }\n  //     )\n  //   }\n  //   dispatch.trade.incrementalUpdate(datas)\n  // }, 1 * 1000)\n  \n}\n\nexport function * process401 (api, action) {\n  console.log('开始处理401')\n  let logined = yield select((state) => state.auth.logined)\n  yield put(replace(logined ? '/UnauthScreen' : '/LoginScreen'))\n}\n","import _ from 'lodash'\nimport { takeLatest, takeEvery, all, call, put, select } from 'redux-saga/effects'\nimport { startup } from './StartupSagas'\nimport api from 'api'\nimport { push, replace } from 'connected-react-router'\nimport utils from 'utils'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\n/* ------------- Types ------------- */\n\n/* ------------- Sagas ------------- */\n\n/* ------------- Connect Types To Sagas ------------- */\n\n\n// 所有使用saga异步调用的函数，必须处理所有异常，否则抛出异常后会导致整个saga事件机制崩溃，程序无法正常使用\nfunction safeWrap (func) {\n  if (!func) {\n    return () => {}\n  }\n\n  return function * (...args) {\n    // console.tron.log({safeWrap: 'safeWrap', args})\n    try {\n      yield call(func, ...args)\n    } catch (err) {\n      console.info('saga err!!!', err)\n      // console.tron.log(err)\n    }\n  }\n}\n\nfunction * onLocationChange (api, {payload}) {\n  // let pathname = payload && payload.location && payload.location.pathname\n\n  // if (_.includes(pathname, 'mine')) {\n  //   let status = yield select((state) => state.dexAccount.state)\n  //   if (status !== ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()) {\n  //     // 直接在地址栏输入受保护的路由，不waitFor的话，put(push('/'))会失效。\n  //     // 表现为地址栏已变化，但是页面并未正常刷新。\n  //     // 可能是 router 尚未加载（appstate.loading控制着app.js中的路由组件，尚未渲染）。也可能是 store/index.js中的 history 中间件未加载完。\n  //     // 优化点：在受保护组件内判断，就不会有一个短暂的切换。\n\n  //     yield call(utils.waitFor, 200)\n  //     console.info(`未登录，跳转主页, 状态：${ENUM_ACCOUNT_STATUS.toText(status)}`, )\n  //     notification.success({ message: '请先登录' })\n  //     yield put(push('/'))\n  //   }\n  // }\n}\n\nexport default function * root () {\n  yield all([   \n    takeLatest('@@router/LOCATION_CHANGE', safeWrap(onLocationChange), api),\n    takeLatest('persist/REHYDRATE', safeWrap(startup), api)\n  ])\n}\n","import moment from 'moment'\nexport default {\n  state: {\n    ready: false,\n    loading: false,\n    awardInfo: {\n      visible: false,\n      id: null,\n      title: '',\n      amount: 500,\n      unit: 'LRC',\n      createdAt: undefined\n    },\n    selectedTab: 'market',\n    showMarketDrawer: false,\n    notification: {}\n  },\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    startup: (state) => {\n      return { \n        ...state, \n        ready: true \n      }\n    },\n    showEggAward: (state, payload) => {\n      return { \n        ...state, \n        awardInfo: {\n          visible: true,\n          ...payload\n        }\n      }\n    },\n    closeAward: (state) => {\n      let {awardInfo} = state\n      awardInfo.visible = false\n      return { \n        ...state, \n        awardInfo\n      }\n    }\n  }\n}","import { ethereum } from 'librarys/lightcone_v3';\nimport appConfig from 'config/appConfig'\nlet { chainId } = appConfig\n\n// DKEY:\n// isDkey()  同步boolean  \n// enable(success: String, error: String)  异步\n// getBalance(success: String, error: String)  异步\n// sign(params: String, success: String, error: String)  异步\n// networkVersion() 同步 string\n\nconst initState = {\n  startConnecting: false,\n  isDesiredNetwork: false,\n  installed: false,\n  walletName: 'metamask',\n  enable: false,\n}\n\nasync function getAddress (walletName) {\n  if (walletName === 'metamask') {\n    console.log('连接 metamask');\n    const accounts = await window.ethereum.enable();\n    let address = accounts[0]\n    if (!address) {\n      console.log(`metamask 获取不到地址`);\n      return Promise.reject('获取不到地址')\n    }\n    console.log(`metamask 获取到地址: ${address}`);\n\n    window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n    return address\n  } else if (walletName === 'dkey') {\n    console.log('连接 dkey');\n    let promise = new Promise((resolve, reject) => {\n      window.dkeyEnableSuccess = function (resp) {\n        resolve(resp.result)\n      }\n      window.dkeyEnableFailure = function (error) {\n        reject(error)\n      }\n      window.ethereum.enable('dkeyEnableSuccess', 'dkeyEnableFailure')\n    })\n    const address = await promise\n    if (!address) {\n      console.log(`dkey 获取不到地址`);\n      return Promise.reject('获取不到地址')\n    }\n    console.log(`dkey 获取到地址: ${address}`);\n\n    window.wallet = ethereum.account.fromDkey(window.web3, address, address)\n    return address\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    updateMetaMask: (state, payload) => ({ ...state, ...payload }),\n  },\n  effects: dispatch => ({\n    async connectToMetaMask (payload, { metaMask, dexAccount }) {\n      this.updateMetaMask({ startConnecting: true })\n\n      if (typeof window.ethereum === 'undefined') {\n        this.updateMetaMask({\n          installed: false,\n          startConnecting: false\n        })\n        return\n      }\n\n      if (window.ethereum.isMetaMask) {\n        this.updateMetaMask({\n          installed: true,\n          walletName: 'metamask'\n        })\n\n        window.ethereum.autoRefreshOnNetworkChange = false;\n        // 刚进来时，检测不到window.ethereum.networkVersion，因此延迟 1s\n        setTimeout(() => {\n          const desireNetwork = chainId\n          this.updateMetaMask({\n            isDesiredNetwork:\n              desireNetwork === Number(window.ethereum.networkVersion)\n          })\n        }, 1000)\n\n        window.ethereum.on('networkChanged', networkVersion => {\n          console.info('### networkChanged')\n          const desireNetwork = chainId\n          this.updateMetaMask({\n            isDesiredNetwork: desireNetwork === Number(networkVersion)\n          });\n        });\n        window.ethereum.on('accountsChanged', accounts => {\n          console.info('### accountsChanged')\n          let address = accounts[0]\n          if (!address) return\n          window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n          dispatch.dexAccount.getAccount(address)\n        })\n      } else if (window.ethereum.isDkey) {\n        const desireNetwork = chainId\n        this.updateMetaMask({\n          isDesiredNetwork: desireNetwork === Number(window.ethereum.networkVersion()),\n          installed: true,\n          walletName: 'dkey'\n        })\n      } else {\n        this.updateMetaMask({\n          installed: false,\n          startConnecting: false\n        })\n        return\n      }\n\n      this.updateMetaMask({ startConnecting: false })\n      await dispatch.metaMask.initAccountFromMetaMask()\n    },\n    // 网站刚初始化的时候，不调用此函数。防止出现授权弹窗。只有在必须使用地址的流程，才进行获取。\n    // 但是对于 DKEY，进网站的时候，在外面改了地址。如果不加载时获取新的地址，则不知道改变了。而我们又保存了用户的登录信息，那么显示我的订单，就是以前的地址。\n    // 结论，必须改为一进来就获取地址。如果壳子需要授权（DKEY 可优化为不要授权），那就直接授权弹窗，体验依赖于壳子。\n    async initAccountFromMetaMask (payload, { metaMask }) {\n      // metaMask.enable 代表地址已经被获取到。\n      if (metaMask.enable) return\n\n      let address = await getAddress(metaMask.walletName)\n\n      if (!address) {\n        dispatch.appState.update({\n          notification: {\n            type: 'info',\n            message: 'notify.metamask.needLogin'\n          },\n        })\n        return\n      }\n\n      // window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n      // 维护dexAccount中的地址信息\n      await dispatch.dexAccount.getAccount(address);\n\n      this.updateMetaMask({ enable: true })\n    }\n  })\n}","import moment from 'moment'\nimport { push } from 'connected-react-router'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport api from 'api'\nimport utils, { Toast } from 'utils'\nimport { ethereum } from 'librarys/lightcone_v3';\n\nconst initState = {\n  address: '',\n  accountId: '',\n  passwordHash: '',\n  // 需要去服务端获取，因此不应该每次生成。\n  apiKey: '',\n  state: ENUM_ACCOUNT_STATUS.UNSIGNED.getValue(),\n  rememberMeStartTime: null,\n  rememberMeMinutes: null,\n  canceledOrders: [],\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    // 账户切换时，初始化当前账户，只保留地址。\n    // TODO: 缓存不同地址对应的账户。否则 creating 状态，会被丢弃。\n    switchAccount: (state, address) => {\n      if (state.address === address) {\n        return state\n      } else {\n        return {\n          ...initState,\n          address\n        }\n      }\n    },\n    clearAccountInfo ({ address }, payload) {\n      return {\n        ...initState,\n        address\n      }\n    },\n    updateAccount: (state, payload) => {\n      return {\n        ...state,\n        ...payload\n      }\n    },\n    checkAccountOvertime (state, payload) {\n      let { rememberMeStartTime, rememberMeMinutes } = state\n      if (rememberMeStartTime && rememberMeMinutes) {\n        let validUntil = moment(rememberMeStartTime).add(rememberMeMinutes, 'minutes')\n        if (moment().isAfter(validUntil)) {\n          Toast.success('授权超时,请重新登录')\n\n          return {\n            ...initState,\n            address: state.address,\n            accountId: state.accountId,\n          }\n        }\n      }\n      return state\n    }\n  },\n  effects: dispatch => ({\n    async logout () {\n      this.clearAccountInfo()\n      // 退回主页。\n      dispatch(push('/'))\n      // 中继的 socket 是跟 apikey 绑定的。如果切换了账号，socket 也必须重连\n      dispatch.socket.start()\n      // 委托订单和余额也要清除，免得首页有残留信息。\n      dispatch.order.initialize()\n      dispatch.balance.initialize()\n      dispatch.walletBalance.initialize()\n    },\n    // 获取中继的 account 基本信息。\n    async getAccount (address, { dexAccount, socket }) {\n      // initAccountFromMetaMask 会调用此函数，那么应该判断下地址是否变化。\n      // 其实不管什么场景，只要调用此函数，都判断下地址变化也没关系。\n      if (dexAccount.address !== address) {\n        this.switchAccount(address)\n        // 退回主页。\n        dispatch(push('/'))\n        // 中继的 socket 是跟 apikey 绑定的。如果切换了账号，socket 也要重连\n        dispatch.socket.start()\n      }\n\n      const relayAccount = await api.lightconeGetAccount(address);\n      // 中继还没账号\n      if (!relayAccount) {\n        this.updateAccount({ state: ENUM_ACCOUNT_STATUS.UNCREATED.getValue()})\n        return\n      } else {\n        if (relayAccount.isFreeze) {\n          // 中继有账户，但是冻结的\n          this.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOCKED.getValue() })\n        } else {\n          // 如果本地是没创建（可能从缓存中恢复的），则改为没登录。\n          // 其他状态，则保持原状态。\n          if (dexAccount.state === ENUM_ACCOUNT_STATUS.UNCREATED.getValue()) {\n            this.updateAccount({ state: ENUM_ACCOUNT_STATUS.UNSIGNED.getValue() })\n          }\n        }\n      }\n\n      this.updateAccount({\n        accountId: relayAccount.accountId,\n      })\n      dispatch.balance.startFetchBalance()\n    },\n    async loadAccount (payload, { dexAccount }) {\n      // 若缓存中有地址，需要处理。\n      if (!dexAccount.address) return\n\n      // 启动时，缓存中有地址，直接初始化 window.wallet。\n      let { address } = dexAccount\n      window.wallet = ethereum.account.fromMetaMask(window.web3, address, address)\n\n      // 启动时，如果账户状态仍然是创建中，说明上次没创建完就关闭了。继续开始检查。\n      if (dexAccount.state === ENUM_ACCOUNT_STATUS.CREATING.getValue()) {\n        dispatch.dexAccount.checkAccountCreated()\n      } else {\n        // 重新获取account 基本信息，并刷新本地。\n        // 重要: 必须放在 else 分支，因为中继没有 creating 态，会导致被更新为 uncreated 态。\n        await dispatch.dexAccount.getAccount(address)\n      }\n    },\n    async checkAccountCreated (payload, { dexAccount, appState }) {\n      if (window.checkAccountInterval) {\n        clearInterval(window.checkAccountInterval)\n      }\n      window.checkAccountInterval = setInterval(async () => {\n        try {\n          const relayAccount = await api.lightconeGetAccount(window.wallet.account)\n          if (!relayAccount) return\n          // 刚创建好的账号，有一段时间是 isFreeze 状态，这期间认为还是没创建好。\n          if (relayAccount.isFreeze) return\n          this.updateAccount({ accountId: relayAccount.accountId })\n\n          let valid = utils.checkPassword(dexAccount.passwordHash, relayAccount)\n          if (!valid) {\n            this.updateAccount({\n              state: ENUM_ACCOUNT_STATUS.CREATED.getValue()\n            })\n            // 不能 return，否则改密码，永远无法执行到下面的流程。\n            // return\n          }\n          // 登录时，只验证密码，不更新account，直接在登录流程更新 apiKey。\n          // 而 upsert 流程，需要在此处定时检查更新\n          let apiKey = await utils.genApiKey(relayAccount.accountId, dexAccount.passwordHash)\n          this.updateAccount({\n            apiKey,\n            state: ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()\n          })\n          dispatch.balance.startFetchBalance()\n          dispatch.order.fetchOrders()\n\n          dispatch.appState.update({\n            notification: {\n              type: 'success',\n              duration: 1,\n              message: 'notify.account.modify.effective'\n            },\n          })\n\n          clearInterval(window.checkAccountInterval)\n        } catch (e) {}\n      }, 5000);\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport utils from 'utils'\n\nconst initDeepthState = {\n  loading: false,\n  level: 0,\n  asks: [],\n  bids: [],\n  incrementalVersion: null\n}\n\nfunction scrollSellTableToBottom () {\n  let tableDom = document.getElementsByClassName('sell-table')[0]\n  if (!tableDom) return\n  let tableBodyDom = tableDom.getElementsByClassName('ant-table-body')[0]\n  if (!tableBodyDom) return\n  tableBodyDom.scrollTop = tableBodyDom.scrollHeight\n}\n\nfunction formatFromWEI (resp, currentMarket, level) {\n  let { asks, bids } = resp\n  let { baseToken: baseSymbol, quoteToken: quoteSymbol, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n\n  asks = asks.map(ask => ({\n    ...ask,\n    type: 'ask',\n    // 这里必须 toFixed 转为字符串，因为界面上要显示为精度带 0,比如 23.120000\n    // 所以排序的时候，需要转成 number 再排序\n    price: Number(ask.price).toFixed(pricePrecision - level),\n    size: utils.fromWEI(baseSymbol, ask.size, amountPrecision),\n    volume: utils.fromWEI(quoteSymbol, ask.volume, totalPrecision)\n  }))\n  bids = bids.map(bid => ({\n    ...bid,\n    type: 'bid',\n    price: Number(bid.price).toFixed(pricePrecision - level),\n    size: utils.fromWEI(baseSymbol, bid.size, amountPrecision),\n    volume: utils.fromWEI(quoteSymbol, bid.volume, totalPrecision)\n  }))\n\n  return { asks, bids }\n}\n\n// direction: 求合时的方向。按照此顺序排好序，再从左往右累加求和。\n// asks(卖方) 从小到大。bids(买) 从大到小\nfunction calcSummationCurve (items, direction, currentMarket) {\n  // 计算累计曲线时必须先排序。因此 depth 的排序统一在此处做。\n  items = _.orderBy(items, item => -Number(item.price))\n  // 只是为了计算累计值的时候循环方便。处理完后再重新转成倒序。\n  if (direction === 'asc') {\n    items = _.reverse(items)\n  }\n\n  let { totalPrecision } = currentMarket\n  let sumVolume = 0\n  for (let item of items) {\n    let { volume } = item\n    sumVolume += Number(volume)\n    item.sumVolume = Number(sumVolume.toFixed(totalPrecision))\n  }\n\n  if (direction === 'asc') {\n    items = _.reverse(items)\n  }\n  return items\n}\n\nexport default {\n  state: initDeepthState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchDepth (payload, { markets, depth }) {\n      if (!markets.currentMarket) return\n\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n      \n      this.update({\n        asks: [],\n        bids: [],\n        loading: true,\n      })\n\n      const resp = await api.getDepth(marketPair, depth.level, 50)\n      let { asks, bids } = formatFromWEI(resp, markets.currentMarket, depth.level)\n\n      this.update({\n        asks: calcSummationCurve(asks, 'asc', markets.currentMarket),\n        bids: calcSummationCurve(bids, 'desc', markets.currentMarket),\n        incrementalVersion: null,\n        loading: false,\n      })\n      \n      // 每次全量获取完 depth 后，重新订阅\n      dispatch.socket.subscribe([ `depth&${marketPair}&${depth.level}` ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'orderbook',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'orderbook',\n      //   market: marketPair,\n      //   level: depth.level,\n      //   // count: \n      // }])\n\n      scrollSellTableToBottom()\n    },\n    async setLevel (level) {\n      this.update({level})\n      dispatch.depth.fetchDepth()\n    },\n    async scrollSellTable () {\n      scrollSellTableToBottom()\n    },\n    async incrementalUpdate (payload, { depth: depthState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      let { startVersion, endVersion, data: newDepth } = payload\n      let { incrementalVersion, asks, bids, level } = depthState\n\n      if (incrementalVersion) {\n        // 2510, 2510 ---> 2511, 2511\n        let expectVersion = incrementalVersion + 1\n        if (startVersion < expectVersion) {\n          return\n        }\n        \n        if (startVersion > expectVersion) {\n          // 说明跳跃了，需要重新获取全量的。\n          dispatch.depth.fetchDepth()\n          return\n        }\n      }\n      \n      // 增量更新\n      // newDepth.asks = newDepth.asks.map(depth => {\n      //   let [ price, size, volume, count ] = depth\n      //   return { price, size, volume, count }\n      // })\n      // newDepth.bids = newDepth.bids.map(depth => {\n      //   let [ price, size, volume, count ] = depth\n      //   return { price, size, volume, count }\n      // })\n      newDepth = formatFromWEI(newDepth, markets.currentMarket, level)\n      asks = _.chain([...newDepth.asks, ...asks]).unionBy(a => a.price).reject(a => Number(a.size) === 0).value()\n      bids = _.chain([...newDepth.bids, ...bids]).unionBy(a => a.price).reject(a => Number(a.size) === 0).value()\n\n      this.update({\n        asks: calcSummationCurve(asks, 'asc', markets.currentMarket),\n        bids: calcSummationCurve(bids, 'desc', markets.currentMarket),\n        incrementalVersion: endVersion\n      })\n    },\n  })\n}","import _ from 'lodash'\nimport numeral from 'numeral'\nimport utils from 'utils'\nimport api from 'api'\n\nconst maxTradeCount = 40\nconst initState = {\n  loading: false,\n  list: [],\n  latestPrice: 0,\n  lastPrice: 0,\n  variation: 0,\n  page: 1,\n  pageSize: 10\n}\n\nfunction formatFromWEI (trades, currentMarket) {\n  let { baseToken: baseSymbol, quoteToken: quoteSymbol, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n\n  trades = trades.map(trade => {\n    trade.side = _.toUpper(trade.side)\n    trade.timestamp = Number(trade.timestamp)\n    trade.price = Number(trade.price).toFixed(pricePrecision)\n    trade.size = utils.fromWEI(baseSymbol, Number(trade.size), amountPrecision)\n    return trade\n  })\n\n  return trades\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateVariation: (state, latestPrice) => {\n      let lastPrice = state.latestPrice\n      let variation = 0\n      if (lastPrice && latestPrice) {\n        variation = (latestPrice - lastPrice) / lastPrice\n      }\n      return {\n        ...state,\n        lastPrice,\n        latestPrice,\n        variation\n      }\n    }\n  },\n  effects: dispatch => ({\n    async fetchTrade (payload, { markets, trade: tradeStore }) {\n      if (!markets.currentMarket) return\n      let { market: marketPair } = markets.currentMarket\n\n      // 每次全量获取完 trade 后，重新订阅\n      dispatch.socket.subscribe([ `trade&${marketPair}` ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'trade',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'trade',\n      //   market: marketPair,\n      // }])\n\n      this.update({\n        list: [],\n        loading: true,\n      })\n\n      var trades = await api.getTrade(marketPair, maxTradeCount);\n      if (!trades || trades.length === 0) {\n        this.update({ loading: false })\n        return\n      }\n      trades = formatFromWEI(trades, markets.currentMarket)\n      trades = trades.map((item, i) => {\n        item.index = i\n        return item\n      })\n\n      this.update({\n        list: trades,\n        loading: false\n      })\n\n      let currentPrice = trades[0].price\n      this.updateVariation(currentPrice)\n      document.title = `${currentPrice}|${marketPair}|WeDEX`\n    },\n    async incrementalUpdate (trades, { trade: tradeState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      // array to object\n      // trades = trades.map(trade => {\n      //   let [timestamp, tradeId, side, size, price, fee] = trade\n      //   return { timestamp, tradeId, side, size, price, fee }\n      // })\n      trades = formatFromWEI(trades, markets.currentMarket)\n      \n      // 新数据排序后，插入头部。\n      trades = _.orderBy(trades, ['timestamp'], ['desc'])\n      let { list } = tradeState\n      list.unshift(...trades)\n      // 太多会积压很多 dom，导致卡\n      let modified = _.take(list, maxTradeCount)\n      modified = modified.map((item, i) => {\n        item.index = i\n        return item\n      })\n\n      this.update({\n        list: modified,\n      })\n\n      let currentPrice = modified[0].price\n      this.updateVariation(currentPrice)\n      document.title = `${currentPrice}|${marketPair}|WeDEX`\n    },\n  })\n}","import _ from 'lodash'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport api from 'api'\nimport utils from 'utils'\n\nconst initState = {\n  dayInfo: {\n    \"high\": 0,\n    \"low\": 0,\n    \"size\": 0,\n    \"volume\": 0\n  },\n  tvSubscribers: []\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchDayInfo (payload, { markets, candleStick }) {\n      if (!markets.currentMarket) return\n\n      var candles = await api.getCandlestick({\n        market: markets.currentMarket.market,\n        interval: '1d',\n      })\n      if (!candles || candles.length === 0) return\n\n      let dayInfo = _.pick(candles[0], ['high', 'low', 'size', 'volume'])\n      let { baseToken: baseSymbol } = markets.currentMarket\n      dayInfo.size = utils.fromWEI(baseSymbol, dayInfo.size)\n\n      this.update({\n        dayInfo: dayInfo,\n      })\n    },\n    async subscribeBars (payload, { candleStick: {tvSubscribers} }) {\n      let {subscribeUID, onRealtimeCallback, resolution, symbolInfo} = payload\n\n      let market = symbolInfo['name'];\n      resolution = ENUM_INTERVAL_TYPE.toText(resolution)\n      let topic = `candlestick&${market}&${resolution}`\n\n      let newSub = {\n        lastBar: null,\n        subscribeUID,\n        topic,\n        realtimeCb: onRealtimeCallback,\n        resolution: resolution,\n        symbolInfo: symbolInfo\n      }\n      tvSubscribers = _.unionBy(tvSubscribers, [newSub], subscribeUID)\n      this.update({tvSubscribers})\n\n      dispatch.socket.subscribe([ topic ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'candlestick',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'candlestick',\n      //   market,\n      //   interval: resolution,\n      // }])\n    },\n    async unsubscribeBars (subscriberUID, { candleStick: {tvSubscribers} }) {\n      tvSubscribers = _.reject(tvSubscribers, sub => sub.subscriberUID = subscriberUID)\n      this.update({tvSubscribers})\n    },\n    async incrementalUpdate(payload, { candleStick: {tvSubscribers} }) {\n      // let { topic: topicInfo, data } = payload\n      // let { topic, market, interval } = topicInfo\n      \n      // let subscriberTopic = `candlestick&${market}&${interval}`\n      // let subscriber = tvSubscribers.find(sub => _.toUpper(sub.topic) === _.toUpper(subscriberTopic))\n\n      let { topic, data } = payload\n      let subscriber = tvSubscribers.find(sub => _.toUpper(sub.topic) === _.toUpper(topic))\n      if (!subscriber) return\n\n      // let lastBar = sub.lastBar\n\n      let quoteSymbol = subscriber.symbolInfo.name.split('-')[1]\n      // let [start, count, open, close, high, low, size, volume] = data\n      let {start, count, open, close, high, low, size, volume} = data\n\n      let newCancle = {\n        time: Number(start),\n        high: Number(high),\n        low: Number(low),\n        open: Number(open),\n        close: Number(close),\n        volume: utils.fromWEI(quoteSymbol, volume)\n      }\n      console.info('蜡烛图推送', newCancle)\n      subscriber.realtimeCb(newCancle)\n      // sub.lastBar = lastBar\n    }\n  })\n}","// candlestick 是有开盘闭盘时间。而 ticker 是滚动的时间窗。\nimport _ from 'lodash'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport api from 'api'\nimport utils from 'utils'\n\nconst initState = {\n  dayInfo: {\n    \"high\": 0,\n    \"low\": 0,\n    \"size\": 0,\n    \"volume\": 0,\n    \"close\": 0,\n    \"differ\": 0,\n    \"variation\": 0\n  },\n}\n\nfunction formatTicker (ticker) {\n  let { market: marketName, open, high, low, close, size, volume } = ticker\n\n  const [baseTokenSymbol, quoteTokenSymbol] = marketName.split('-')\n\n  size = utils.fromWEI(baseTokenSymbol, size)\n  volume = utils.fromWEI(quoteTokenSymbol, volume)\n\n  open = Number(open)\n  close = Number(close)\n  let differ = close - open\n  let variation = open ? differ / open : 0\n\n  return { high, low, size, volume, close, differ, variation }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchTicker (payload, { markets, dexAccount }) {\n      if (!markets.currentMarket) return\n      let { market: marketPair } = markets.currentMarket\n      \n      //  1. 每次全量获取 ticker 时，重新订阅\n      dispatch.socket.subscribe([ `ticker&${marketPair}` ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'ticker',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'ticker',\n      //   market: marketPair,\n      // }])\n      \n      let { apiKey } = dexAccount\n      let tickers = await api.getTickers({\n        markets: [marketPair],\n        apiKey\n      })\n\n      if (!tickers || tickers.length === 0) return\n\n      let dayInfo = formatTicker(tickers[0])\n      this.update({\n        dayInfo: dayInfo,\n      })\n    },\n    async incrementalUpdate(payload, { candleStick: {tvSubscribers} }) {\n      let { topic, data: ticker } = payload\n\n      // let [ market, timestamp, size, volume, open, high, low, close, count, bid, ask ] = ticker\n      // ticker = { market, timestamp, size, volume, open, high, low, close, count, bid, ask }\n      let dayInfo = formatTicker(ticker)\n      this.update({\n        dayInfo: dayInfo,\n      })\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport utils from 'utils'\n\nconst initState = {\n  markets: [],\n  stars: [],\n  tabs: [],\n  currentTab: null,\n  currentMarkets: [],\n  currentMarket: null,\n  cond: {\n    sort: 'market',\n    sortDirection: 'asc'\n  },\n  searchHistory: []\n}\n\nfunction formatTicker (ticker) {\n  let { market: marketName, open, close, size: size24h, volume: volume24h } = ticker\n\n  const [baseTokenSymbol, quoteTokenSymbol] = marketName.split('-')\n  size24h = utils.fromWEI(baseTokenSymbol, size24h)\n  volume24h = utils.fromWEI(quoteTokenSymbol, volume24h)\n\n  open = Number(open)\n  close = Number(close)\n  let differ = close - open\n  let variation = open ? differ / open : 0\n  return { ...ticker, differ, close, variation, size24h, volume24h }\n}\n\nexport default {\n  state: initState,\n  selectors: (slice, createSelector, hasProps) => ({\n    getMarketBySymbol () {\n      return (state, baseToken, quoteToken) => {\n        let { markets } = state.markets\n        return _.find(markets, market => (\n          (market.baseToken === baseToken && market.quoteToken === quoteToken) ||\n          (market.baseToken === quoteToken && market.quoteToken === baseToken)\n        )) || {}\n      }\n    }\n  }),\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let {cond, currentMarkets} = state\n      cond = { ...cond, ...payload }\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n      return {\n        ...state,\n        cond,\n        currentMarkets\n      }\n    },\n    updateMarketsTicker: (state, tickers) => {\n      let { currentMarkets, currentMarket, cond } = state\n      // “当前交易对”可能不在“当前交易对列表”。交易对列表和交易对都需要更新。这样处理可以避免所有交易对一起更新。\n      // 更新当前交易对列表\n      currentMarkets = currentMarkets.map(item => {\n        let ticker = _.find(tickers, {market: item.market})\n        if (!ticker) {\n          return item\n        }\n\n        let { differ, close, variation, size24h, volume24h } = ticker\n        let { pricePrecision } = item\n        item.differ = differ.toFixed(pricePrecision)\n        item.close = close.toFixed(pricePrecision)\n        item.variation = variation\n        item.size24h = size24h\n        item.volume24h = volume24h\n        return item\n      })\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n\n      // 更新当前交易对\n      if (currentMarket) {\n        let currentMatched = _.find(tickers, {market: currentMarket.market})\n        // 有可能响应回来的时候，current 已经改变了\n        if (currentMatched) {\n          let { close, variation } = currentMatched\n          let { pricePrecision } = currentMarket\n          currentMarket.close = close.toFixed(pricePrecision)\n          currentMarket.variation = variation\n        }\n      }\n      return {\n        ...state,\n        currentMarkets,\n        currentMarket,\n      }\n    },\n    addToHistory: (state, payload) => {\n      let { searchHistory } = state\n      searchHistory = payload !== '' ? _.take(_.union([payload], searchHistory), 20) : searchHistory\n      return {\n        ...state,\n        searchHistory\n      }\n    },\n    clearHistory: (state) => ({ ...state, searchHistory: [] })\n  },\n  effects: dispatch => ({\n    async fetchMarkets (payload, { router, persistData }) {\n      // 即使传了 'LRC-ETH'，获取到的仍是所有的列表。\n      // let markets = await config.getMarkets()\n      let { channelName, market } = persistData\n      let markets = await api.getExchanges({ channelName })\n      if (!markets) return\n\n      let [ defaultBaseSymbol, defaultQuoteSymbol ] = market.split('-')\n      let quoteTokens = _.chain(markets).map(market => market.quoteToken).uniq().value()\n      let defaultTab = defaultQuoteSymbol\n      let tabs = ['selfChoice', ...quoteTokens]\n      this.update({\n        markets,\n        tabs,\n      })\n      \n      // 设置 tab\n      dispatch.markets.setCurrentTab(defaultTab)\n      \n      // 设置默认当前市场为第一个\n      let currentMarkets = _.filter(markets, {quoteToken: defaultTab})\n      let currentMarket = _.find(currentMarkets, { baseToken: defaultBaseSymbol })\n      if (currentMarket) {\n        dispatch.markets.setCurrentMarket(currentMarket)\n      }\n    },\n    async setCurrentTab (tab, { markets }) {\n      let { cond } = markets\n\n      let currentMarkets = []\n      if (tab === 'selfChoice') {\n        currentMarkets = markets.stars\n      } else {\n        currentMarkets = _.filter(markets.markets, {quoteToken: tab})\n      }\n      currentMarkets = _.orderBy(currentMarkets, [cond.sort], [cond.sortDirection])\n\n      this.update({\n        currentTab: tab,\n        currentMarkets,\n      })\n\n      dispatch.markets.fetchCurrentMarkets()\n\n      // 不再默认触发 setCurrentMarket。两个动作分离开，更灵活。\n      // let currentMarket = currentMarkets[0]\n      // if (currentMarket) {\n      //   dispatch.markets.setCurrentMarket(currentMarket)\n      // }\n    },\n\n    async startFetchMarketInfo (payload, { markets }) {\n      let { currentMarket: { market } } = markets\n      console.info(`======开始获取市场 ${market} 信息======`)\n\n      dispatch.depth.setLevel(0)\n      dispatch.trade.fetchTrade()\n      dispatch.order.fetchOrders()\n      dispatch.ticker.fetchTicker()\n      // dispatch.socket.subscribe([\n      //   // `candlestick&${market}&1Hour`,\n      //   `depth&${market}&1`,\n      //   `trade&${market}`,\n      //   `ticker&${market}`\n      // ])\n    },\n    async setCurrentMarket (currentMarket, { markets, socket }) {\n      this.update({\n        currentMarket,\n      })\n      dispatch.placeOrder.initialize()\n      dispatch.persistData.update({ market: currentMarket.market })\n\n      if (!socket.ws || socket.ws.readyState !== 1) {\n        if (socket.ws && socket.ws.readyState === 3) {\n          // 当(必须处理，不能直接返回。否则会导致整个切交易对的时候， depth,trade,orders 都不再变化。)\n          // 且仅当(必须是建立过，并断了才触发。否则首次加载就会触发。死循环。) \n          // socket 关闭后，刷新网页。\n\n          // TODO 优化: socket断了，这里可以尝试重连。\n          // notification['success']({\n          //   duration: 0,\n          //   message: 'socket 已断开，重新载入',\n          //   description: '网络错误'\n          // })\n          location.reload()\n        }\n        return\n      }\n      dispatch.markets.startFetchMarketInfo()\n    },\n    async onSocketReady (payload, { markets, depth }) {\n      if (!markets.currentMarket) return\n      dispatch.markets.startFetchMarketInfo()\n    },\n\n    async starMarket (currentMarket, { markets, depth }) {\n      let stars = _.xorBy([currentMarket], markets.stars, 'market')\n      this.update({\n        stars,\n      })\n      // 如果当前处于自选tab, 刷新自选的列表\n      if (markets.currentTab === 'selfChoice') {\n        dispatch.markets.setCurrentTab('selfChoice')\n      }\n    },\n    async fetchCurrentMarkets (payload, { markets, dexAccount }) {\n      let { apiKey } = dexAccount\n      let { currentMarkets, currentMarket } = markets\n      if (!currentMarkets) return\n\n      let pairs = currentMarkets.map(item => item.market)\n      // 此处 currentMarket 可能不属于 currentMarkets，这里需要把 currentMarket 补在请求列表中。\n      // 更新：目前已经不需要了， tvchart 中 currentMarket的数据，全部从 ticker 的 socket 订阅中获取。但此处逻辑仍然保留。\n      if (currentMarket) {\n        pairs = _.uniq([...pairs, currentMarket.market])\n      }\n      if (!pairs.length) return\n\n      // market 列表中的信息，暂时使用的是 ticker。\n      // 重要：不增量订阅。每点击一次才刷新一次\n      let tickers = await api.getTickers({\n        markets: pairs,\n        apiKey\n      })\n      if (!tickers) return\n\n      // 必须在 reducer 中做，因为等拿到tickers的时候，可能currentMarkets已经切换了。\n      tickers = tickers.map(ticker => formatTicker(ticker))\n      this.updateMarketsTicker(tickers)\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\n\nconst initState = {\n  list: [],\n}\n\nexport default {\n  state: initState,\n  // https://rematch.github.io/rematch/#/plugins/select.md\n  // https://github.com/reduxjs/reselect\n  selectors: (slice, createSelector, hasProps) => ({\n    getTokenBySymbol () {\n      // createSelector的三个参数，都是函数。\n      // 最后一个是求值，前面 n-1 个代表如何提取最后一个的入参。\n      // 前 n-1 个的入参，都是调用getTokenBySymbol处传的入参。\n      // slice 是一个函数\n      // return createSelector(\n      //   slice, //slice 是一个函数,代表直接把自己对应的state 返回。\n      //   (rootState, symbol) => symbol,\n      //   (state, symbol) => {\n      //     let { list } = state\n      //     return _.find(list, token => token.symbol.toLowerCase() === symbol.toLowerCase()) || {}\n      //   }\n      // )\n\n      // createSelector 是为了组合多个 selector 的写法，前 n-1 个都是其他 selector。\n      // 上面的写法有点多此一举，相当于用两个 selector 分别返回两个入参。再在自己的 selector 逻辑中组合前n-1 个(实际上还是入参，未做任何transform)。\n      return (state, symbol) => {\n        let { list } = state.tokens\n        return _.find(list, token => token.symbol.toLowerCase() === symbol.toLowerCase()) || {}\n      }\n    }\n  }),\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n  },\n  effects: dispatch => ({\n    // async fetchTokens (payload, {  }) {\n    //   let tokens = await api.getContracts()\n    //   this.update({ tokens })\n    // }\n  })\n}","import _ from 'lodash'\nimport { Account, config, exchange } from 'librarys/lightcone_v3';\nimport utils from 'utils'\nimport api from 'api'\nconst BigNumber = require('bignumber.js');\n\nconst initState = {\n  buyPrice: null,\n  buyAmount: null,\n  buyTotal: null,\n\n  sellPrice: null,\n  sellAmount: null,\n  sellTotal: null,\n\n  // 市价买入的”交易额“\n  marketBuyTotal: null,\n  // 市价卖出的”数量“\n  marketSellAmount: null,\n}\n\nasync function placeAnOrder (dispatch, isBuy, tokenS, tokenB, amountS, amountB, dexAccount, channelName) {\n  console.info({tokenS, tokenB, amountS, amountB, dexAccount})\n  let owner = window.wallet.account\n  let { accountId, passwordHash, apiKey } = dexAccount\n\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  let { publicKeyX, publicKeyY, secretKey: tradingPrivKey } = keyPair\n\n  const tokenSConfig = config.getTokenBySymbol(tokenS)\n  const orderId = await api.getOrderId(accountId, tokenSConfig.id, apiKey);\n  \n  // Timestamp in second\n  const validSince = new Date().getTime() / 1000 - 3600;\n  const validUntil = new Date().getTime() / 1000 + 3600 * 24 * 30;\n\n  console.info(`下单:`, {amountB, amountS})\n\n  const signedEtheruemTx = exchange.submitOrder(window.wallet, {\n    owner,\n    accountId,\n    keyPair: {\n      publicKeyX,\n      publicKeyY,\n      secretKey: tradingPrivKey,\n    },\n    tokenS,\n    tokenB,\n    amountS,\n    amountB,\n    orderId,\n    validSince: Math.floor(validSince),\n    validUntil: Math.floor(validUntil),\n    buy: isBuy\n  })\n\n  if (channelName) {\n    signedEtheruemTx.channelId = `wedex::subchannel::${channelName}`\n  }\n\n  console.log('Order signed tx: ', signedEtheruemTx);\n  const response = await api.submitOrderToLightcone(signedEtheruemTx, apiKey);\n  console.log('Response of submitOrder: ', response);\n\n  if (!response) return\n  dispatch.appState.update({\n    notification: {\n      type: 'success',\n      duration: 1,\n      message: 'notify.placeOrder.success'\n    },\n  })\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    initialize: (state, payload) => initState,\n  },\n  effects: dispatch => ({\n    async placeBuyOrder (payload, { markets, dexAccount, placeOrder, persistData }) {\n      let { baseToken: tokenB, quoteToken: tokenS } = markets.currentMarket\n      let { buyAmount, buyPrice } = placeOrder\n      let { channelName } = persistData\n      if (!buyAmount || !buyPrice) return\n\n      buyAmount = new BigNumber(buyAmount);\n      let amountS = buyAmount.times(buyPrice).toFixed();\n      let amountB = buyAmount.toFixed();\n\n      let result = utils.withLoading(() => placeAnOrder(dispatch, true, tokenS, tokenB, amountS, amountB, dexAccount, channelName))\n      return result\n    },\n    async placeSellOrder (payload, { markets, dexAccount, placeOrder, persistData }) {\n      let { baseToken: tokenS, quoteToken: tokenB } = markets.currentMarket\n      let { sellAmount, sellPrice } = placeOrder\n      let { channelName } = persistData\n      if (!sellAmount || !sellPrice) return\n\n      sellAmount = new BigNumber(sellAmount);\n      let amountB = sellAmount.times(sellPrice).toFixed();\n      let amountS = sellAmount.toFixed();\n\n      let result = utils.withLoading(() => placeAnOrder(dispatch, false, tokenS, tokenB, amountS, amountB, dexAccount, channelName))\n      return result\n    },\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport utils from 'utils'\nconst BigNumber = require('bignumber.js');\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nconst initState = {\n  loading: false,\n  list: [],\n  page: 1,\n  pageSize: 10\n}\n\nfunction formatBalances (balances, tokens) {\n  return balances.map(balance => {\n    let { tokenId, totalAmount, frozenAmount } = balance\n    // 账户数据必须是中继支持的，否则丢弃。\n    let token = _.find(tokens.list, { relayTokenId: String(tokenId) })\n    if (!token) return\n\n    balance.token = token\n    let availAmount = BigNumber(totalAmount) - BigNumber(frozenAmount)\n    // 不能用 fromWEI, 因为 fromWEI用了 toFixed,会导致四舍五入。全部划转会超。\n    // 优化，这里应该是原始数据，只是界面上四舍五入。否则全部划转会少一部分。\n    balance.availAmount = BigNumber(availAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    balance.totalAmount = BigNumber(totalAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    balance.frozenAmount = BigNumber(frozenAmount).div(\"1e\" + token.digits).decimalPlaces(token.precision).toNumber()\n    return balance\n  }).filter(balance => !!balance)\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    initialize: (state, payload) => initState,\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchBalances (payload, { dexAccount, tokens }) {\n      let { accountId, apiKey } = dexAccount\n      if (!accountId || !apiKey) return\n      this.update({ loading: true })\n\n      let { skip, limit } = utils.formatPageParams(dexAccount)\n      let balances = await api.getBalances(accountId, apiKey, skip, limit)\n      if (!balances) {\n        this.update({ loading: false })\n        return\n      }\n\n      balances = formatBalances(balances, tokens)\n      this.update({\n        list: balances,\n        loading: false\n      })\n    },\n    // 账户发生变动时。登录，重置密码，需要重新订阅账户。\n    startFetchBalance (payload, { dexAccount }) {\n      let { accountId, state } = dexAccount\n      if (!accountId || !ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(state)) return\n      console.info(`======开始获取 账户 信息======`)\n\n      dispatch.balance.fetchBalances()\n      dispatch.socket.subscribe([\n        `account`,\n      ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'account',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'account',\n      // }])\n    },\n    async onSocketReady (payload, { markets, depth }) {\n      dispatch.balance.startFetchBalance()\n    },\n    async incrementalUpdate (payload, { balance, tokens }) {\n      let balances = balance.list\n\n      let [newBalance] = formatBalances([payload], tokens)\n      let list = _.unionBy([newBalance], balances, b => b.tokenId)\n      this.update({ list })\n    },\n  })\n}","import _ from 'lodash'\nimport utils from 'utils'\nimport api from 'api';\nimport { store } from 'store'\n\nconst initState = {\n  loading: false,\n  list: [],\n  page: 1,\n  pageSize: 10\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    initialize: (state, payload) => initState,\n    update: (state, payload) => ({ ...state, ...payload }),\n    appendBalance: (state, blance) => {\n      let list = _.unionBy([ blance ], state.list, 'symbol')\n      return {\n        ...state,\n        list: _.orderBy(list, 'symbol')\n      }\n    }\n  },\n  effects: dispatch => ({\n    async fetchBalance (token, { dexAccount }) {\n      this.update({ loading: true })\n\n      let { symbol, name } = token\n      let amount = 0\n      if (symbol.toUpperCase() === 'ETH') {\n        amount = await api.getEthBalance(dexAccount.address)\n      } else {\n        amount = await api.getTokenBalance(dexAccount.address, token.address)\n      }\n      if (!amount) {\n        this.update({ loading: false })\n        return\n      }\n\n      // amount = Number(\n      //   config.fromWEI(\n      //     tokenSymbol,\n      //     amount,\n      //     token.precision\n      //   )\n      // );\n      // 不能用 fromWEI, 因为 fromWEI用了 toFixed,会导致四舍五入。全部划转会超。\n      amount = utils.fromWEI(symbol, amount, null, true)\n\n      let blance = {\n        symbol,\n        name,\n        amount: amount,\n      }\n      // 必须如此使用，因为 fetchAllBalances 中的多个 fetchBalance 会并发，此处拿到的rootState是旧的（await 之前的）。\n      // 而 reducers 没有此问题，reducers是可重入的。\n      this.appendBalance(blance)\n      this.update({ loading: false })\n\n      // let { list } = rootState.walletBalance\n      // list = _.unionBy([ blance ], list, 'symbol')\n\n      // this.update({\n      //   list\n      // })\n    },\n    async fetchAllBalances (payload, { tokens }) {\n      // 我的资产页面，进来时批量拉取\n      // 转入页面，每选一个币种，单独 fetchBalance 一次。 此页面的select下拉框用本地 store。\n      tokens.list.forEach(token => {\n        // 暂时去掉 WETH\n        if (token.symbol === 'WETH') return\n        dispatch.walletBalance.fetchBalance(token)\n      })\n    },\n  })\n}","import _ from 'lodash'\nimport numeral from 'numeral'\nimport api from 'api';\nimport { Account } from 'librarys/lightcone_v3';\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nimport utils, { Toast } from 'utils'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nconst initState = {\n  loading: false,\n  list: [],\n  cond: {\n    page: 1,\n    pageSize: 50,\n    // 当前委托，历史委托\n    type: 'current', // ['current', 'history']\n    // 历史委托条件下，[所有状态(ALL), 已成交(PROCESSED), 已取消(CANCELLED)]\n    historyStatus: 'ALL',\n    allMarket: false\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    initialize: (state, payload) => initState,\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let cond = { ...state.cond, ...payload }\n      return {\n        ...state,\n        cond\n      }\n    },\n  },\n  effects: dispatch => ({\n    async fetchOrders (payload, { order, dexAccount, markets: { currentMarket } }) {\n      let { accountId, passwordHash, state, apiKey } = dexAccount\n      if (!accountId || !ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(state)) return\n\n      if (!currentMarket) return\n      let { market: marketPair, baseToken, quoteToken } = currentMarket\n      if (!marketPair) return\n\n      //  1. 每次全量获取完 order 后，重新订阅\n      dispatch.socket.subscribe([ `order&${marketPair}` ])\n      // dispatch.socket.unsubscribe([{\n      //   topic: 'order',\n      //   unsubscribeAll: true\n      // }])\n      // dispatch.socket.subscribe([{\n      //   topic: 'order',\n      //   market: marketPair,\n      // }])\n\n      // 2. 更新列表\n      this.update({\n        list: [],\n        loading: true,\n      })\n\n      let { offset, limit } = utils.formatPageParams(order.cond)\n      let { type, allMarket, historyStatus } = order.cond\n\n      // 规整 market 参数\n      let market\n      if (allMarket) {\n        market = undefined\n      } else {\n        market = marketPair\n      }\n\n      // 规整 status 参数\n      let statuses\n      if (type === 'current') {\n        statuses = [ENUM_ORDER_STATUS.PROCESSING.getValue()]\n      } else {\n        if (historyStatus === 'ALL') {\n          statuses = [ENUM_ORDER_STATUS.CANCELLED.getValue(), ENUM_ORDER_STATUS.PROCESSED.getValue()]\n        } else if (historyStatus === 'CANCELLED') {\n          statuses = [ENUM_ORDER_STATUS.CANCELLED.getValue()]\n        } else {\n          statuses = [ENUM_ORDER_STATUS.PROCESSED.getValue()]\n        }\n      }\n\n      let resp = await api.getOrders({accountId, apiKey, offset, limit, market, statuses});\n      let { totalNum, orders } = resp || {}\n      if (!orders) {\n        this.update({ loading: false })\n        return\n      }\n\n      this.update({\n        list: orders,\n        loading: false,\n      })\n    },\n    async incrementalUpdate (order, { order: orderState, markets }) {\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      let { list, cond } = orderState\n\n      // 1. 在“当前委托”，则做union处理。\n      // 2. 在历史委托，则丢弃。\n      if (cond.type === 'history') return\n\n      let updatedOrders = utils.formatOrders([order])\n      list = _.chain([...updatedOrders, ...list]).unionBy(o => o.hash).orderBy(['createdAt'], ['desc']).value()\n\n      this.update({\n        list,\n      })\n    },\n    async cancelAnOrders (order, { markets, dexAccount, placeOrder, order: orderStore }) {\n      let { accountId, passwordHash, apiKey } = dexAccount\n      let exchangeAccount = new Account(window.wallet);\n      const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n      let { publicKeyX, publicKeyY, secretKey } = keyPair\n\n      const signed = exchangeAccount.submitFlexCancel(\n        accountId,\n        publicKeyX,\n        publicKeyY,\n        secretKey,\n        order.hash,\n        order.clientOrderId\n      );\n      console.log('signed cancel order result: \\n', signed);\n\n      const response = await api.cancelOrders(\n        signed.account.accountId,\n        signed.orderHash,\n        signed.clientOrderId,\n        signed.signature,\n        apiKey\n      )\n      console.log('Response of submitOrder: ', response);\n\n      if (!response) return\n      // notification['success']({\n      //   duration: 1,\n      //   message: '取消成功'\n      // })\n\n      dispatch.order.fetchOrders()\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      return response\n    },\n    async cancelAllOrders (payload, { markets, dexAccount, placeOrder, order: orderStore }) {\n      let orders = _.chain(orderStore.list)\n                    .filter({ status: ENUM_ORDER_STATUS.PROCESSING.getValue() })\n                    .slice(0, 10)\n                    .value()\n      let promises = _.map(orders, order => dispatch.order.cancelAnOrders(order))\n      let resp = await Promise.all(promises)\n      dispatch.appState.update({\n        notification: {\n          type: 'success',\n          duration: 1,\n          message: 'notify.order.cancel.success'\n        },\n      })\n\n      dispatch.order.fetchOrders()\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n    }\n  })\n}\n","import _ from 'lodash'\nimport api from 'api'\nimport { Account } from 'librarys/lightcone_v3';\nimport utils from 'utils'\n\nconst initState = {\n  loading: false,\n  list: [],\n  cond: {\n    token: undefined,\n    page: 1,\n    pageSize: 100,\n    statuses: undefined,\n    types: undefined,\n    start: undefined,\n    end: undefined,\n  },\n}\n\nfunction formatTransfers (transfers) {\n  return transfers.map(transfer => {\n    let { realAmount, feeAmount, symbol } = transfer\n    transfer.realAmount = utils.toTokenPrecision(realAmount, symbol)\n    transfer.feeAmount = utils.toTokenPrecision(feeAmount, 'ETH')\n    return transfer\n  })\n}\n\nasync function checkAllowance (tokenSymbol, depositAmout) {\n  let owner = window.wallet.account\n  if (tokenSymbol.toUpperCase() === 'ETH') {\n    return 0\n  } else {\n    const allowance = await api.getAllowance(owner, tokenSymbol);\n    const amount = Number(\n      utils.fromWEI(\n        tokenSymbol,\n        allowance\n      )\n    );\n    if (Number(depositAmout) > amount) {\n      const txCount = amount === 0 ? 1 : 2;\n      return txCount\n    }\n  }\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    updateFilterCond: (state, payload) => {\n      let cond = { ...state.cond, ...payload }\n      return {\n        ...state,\n        cond\n      }\n    },\n  },\n  effects: dispatch => ({\n    async fetchTransactions (payload, { dexAccount, transfer }) {\n      let { accountId, apiKey } = dexAccount\n      if (!accountId || !apiKey) return\n      this.update({ loading: true })\n\n      let { offset, limit } = utils.formatPageParams(transfer.cond)\n\n      let transactions = await api.getTransactions({\n        accountId,\n        apiKey,\n        offset,\n        limit,\n        statuses: transfer.cond.statuses,\n        types: transfer.cond.types,\n        start: transfer.cond.start,\n        end: transfer.cond.end,\n        symbol: transfer.cond.token\n      });\n      if (!transactions) {\n        this.update({ loading: false })\n        return\n      }\n\n      // console.info(\"########\", {transactions})\n      transactions = formatTransfers(transactions)\n      this.update({\n        list: transactions,\n        loading: false\n      })\n    },\n    // approveTxCount(只是枚举类型): 0 代表授权额充足 1 代表授权额不足但是当前授权额是0， 2 代表授权额不足，并且授权额不为零\n    // 这个是因为ERC20规范，授权额不能直接增加，必须先改成0\n    async deposit ({ symbol, amount, gasPrice }, { dexAccount }) {\n      const approveTxCount = await checkAllowance(symbol, amount)\n\n      // Gas price\n      let nonce = await api.getNonce(window.wallet.account);\n      let exchangeAccount = new Account(window.wallet);\n\n      if (approveTxCount === 2) {\n        const signedEthereumTx = await exchangeAccount.approveZero(\n          symbol,\n          nonce,\n          gasPrice\n        );\n        console.log('Received approve to  signEthereumTx');\n        console.log(signedEthereumTx);\n        // await api.sendApprove(signedEthereumTx);\n        nonce += 1;\n      }\n\n      // Approve\n      if (approveTxCount !== 0) {\n        const signedEthereumTx = await exchangeAccount.approveMax(\n          symbol,\n          nonce,\n          gasPrice\n        );\n        console.log('Received approve to  signEthereumTx');\n        console.log(signedEthereumTx);\n        // await api.sendApprove(signedEthereumTx);\n        nonce += 1;\n      }\n\n      const signedEthereumTx = await exchangeAccount.depositTo(\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n      // console.log('Received deposit signEthereumTx');\n      // console.log(signedEthereumTx);\n      // const response = await api.sendDeposit(signedEthereumTx);\n      // const data = response['result'];\n      // console.log('Response of deposit: ', data);\n\n      // await this.props.fetchMyBalances(\n      //   this.props.dexAccount.account.accountId,\n      //   this.props.dexAccount.account.apiKey\n      // );\n\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      if (signedEthereumTx) {\n        dispatch.persistData.resetLastTransferTime()\n        dispatch.appState.update({\n          notification: {\n            type: 'success',\n            duration: 5,\n            message: 'notify.transfer.deposit.success'\n          },\n        })\n        return true\n      } else {\n        return false\n      }\n    },\n    async withdraw ({ symbol, amount, gasPrice }, { dexAccount }) {\n      const nonce = await api.getNonce(window.wallet.account);\n      let exchangeAccount = new Account(window.wallet);\n      const signedEthereumTx = await exchangeAccount.onchainWithdrawal(\n        symbol,\n        amount,\n        nonce,\n        gasPrice\n      );\n\n      console.log('Received withdraw signEthereumTx');\n      console.log(signedEthereumTx);\n      // const response = await api.sendWithdrawTransaction(signedEthereumTx);\n      // const data = response['result'];\n      // console.log('Response of withdraw: ', data);\n\n      // await this.props.fetchMyBalances(\n      //   this.props.dexAccount.account.accountId,\n      //   this.props.dexAccount.account.apiKey\n      // );\n\n      // TODO: test\n      // dispatch.balance.fetchBalances()\n\n      if (signedEthereumTx) {\n        dispatch.persistData.resetLastTransferTime()\n        dispatch.appState.update({\n          notification: {\n            type: 'success',\n            duration: 1,\n            message: 'notify.transfer.withdraw.success'\n          },\n        })\n        return true\n      } else {\n        return false\n      }\n    }\n  })\n}","import _ from 'lodash'\nimport moment from 'moment'\nimport numeral from 'numeral'\nimport api from 'api';\nimport { ENUM_ORDER_STATUS } from 'utils/enum'\nimport appConfig from 'config/appConfig'\nimport utils, { Toast } from 'utils'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nlet { pollingIntervalRatio, relay } = appConfig\n\nconst initState = {\n  ws: null,\n  lastPingTime: null,\n  pollingIntervals: []\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    initialize: (state, payload) => {\n      // 重要：清空 pollingIntervals 前，一定要清空此定时器列表。其他地方也要注意\n      _.forEach(state.pollingIntervals, inverval => clearInterval(inverval))\n      return initState\n    },\n  },\n  effects: dispatch => ({\n    async start (payload, { socket, history }) {\n      if (!(\"WebSocket\" in window)) {\n        // 浏览器不支持 WebSocket\n        alert(\"您的浏览器不支持 WebSocket!\");\n      }\n\n      // 建立新链接，要关闭旧的，防止内存泄露。\n      let { ws } = socket\n      if (ws) {\n        ws.close()\n      }\n\n      ws = new WebSocket(relay.wsUrl)\n      ws.onmessage = function(event) {\n        var data = event.data;\n        dispatch.socket.onMessage(data)\n      };\n      ws.onerror = () => {\n        console.info('web socket 异常')\n        ws.close();\n\n        this.initialize()\n        // 此处socket 异常，不用处理也行。因为心跳检查会兜底。此处只是为了及时处理。\n        // 会死循环。暂时去掉。WebSocket is closed before the connection is established.\n        // dispatch.socket.start()\n      };\n      ws.onopen = () => {\n        console.info('web socket 建立成功')\n        this.update({\n          lastPingTime: moment()\n        })\n        // 暂时用轮询的方式\n        dispatch.markets.onSocketReady()\n        dispatch.balance.onSocketReady()\n      }\n      this.update({ws})\n\n      dispatch.socket.polling()\n    },\n    async _onSubResult (payload) {\n      let { args, result } = payload\n      if (_.toUpper(result.status) === 'OK') return\n\n      console.info('######## 订阅/去订阅失败')\n      let { code, message } = result.error\n      // 中继的 socket 是跟 apikey 绑定的。如果切换了账号，socket 要弃用。\n      if (_.includes(message, 'Unmatched apikey')) {\n        dispatch.appState.update({\n          notification: {\n            type: 'error',\n            duration: 1,\n            message: 'notify.socket.subscribe.error.apikey',\n            description: JSON.stringify(result.error),\n          },\n        })\n        dispatch.dexAccount.logout()\n        return\n      }\n      dispatch.appState.update({\n        notification: {\n          type: 'error',\n          duration: 1,\n          message: 'notify.socket.subscribe.error',\n          description: JSON.stringify(result.error),\n        },\n      })\n\n      // 重新订阅可能死循环。\n      // dispatch.socket.subscribe(args)\n    },\n    async onMessage (payload, { socket, markets }) {\n\n      if (payload === 'ping') {\n        socket.ws.send('pong')\n        this.update({\n          lastPingTime: moment()\n        })\n        return\n      }\n\n      payload = JSON.parse(payload)\n      if (payload.op === 'sub' || payload.op === 'unSub') {\n        dispatch.socket._onSubResult(payload)\n        return\n      }\n      if (!payload.op === '') return\n\n      let { market: marketPair } = markets.currentMarket\n      if (!marketPair) return\n\n      // let { topic: topicType, market: TopicMarket } = payload.topic\n      let [topicType, TopicMarket] = _.split(payload.topic, '&')\n      if (topicType === 'account') {\n        dispatch.balance.incrementalUpdate(payload.data)\n      // } else if (topicType === 'orderbook') {\n      } else if (topicType === 'depth') {\n        // depth&lrc-eth&0\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.depth.incrementalUpdate(payload)\n      } else if (topicType === 'trade') {\n        // trade&lrc-eth\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.trade.incrementalUpdate(payload.data)\n      } else if (topicType === 'order') {\n        dispatch.order.incrementalUpdate(payload.data)\n      } else if (topicType === 'candlestick') {\n        // candlestick&LRC-ETH&1hr\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.candleStick.incrementalUpdate(payload)\n      } else if (topicType === 'ticker') {\n        // ticker&LRC-BTC\n        // 判断交易对是否是当前的\n        if (_.upperCase(TopicMarket) !== _.upperCase(marketPair)) return\n        dispatch.ticker.incrementalUpdate(payload)\n      }\n    },\n    // 优化：\n    // 切换账号后，换个apikey 订阅 account信息，就会报 apikey not match\n    // 这里应该不用重新建立一个 socket 吧，直接通过新的 apikey 解析出新的 account 即可。\n    // 亚东: 目前的设定是需要重新连接,之前认为直接更新订阅不是很安全,你们可以先close一下\n    async subscribe (payload, { socket, dexAccount }) {\n      if (!socket.ws || socket.ws.readyState !== 1) return\n\n      let subInfo = {\n        op: 'sub',\n        // topics: payload,\n        args: payload,\n        apiKey: ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(dexAccount.state) && dexAccount.apiKey || undefined\n      }\n      socket.ws.send(JSON.stringify(subInfo))\n    },\n    async unsubscribe (payload, { socket, dexAccount }) {\n      if (!socket.ws || socket.ws.readyState !== 1) return\n\n      let subInfo = {\n        op: 'unSub',\n        topics: payload,\n        apiKey: ENUM_ACCOUNT_STATUS.LOGGED_IN.equals(dexAccount.state) && dexAccount.apiKey || undefined\n      }\n      socket.ws.send(JSON.stringify(subInfo))\n    },\n    async polling (payload, { socket }) {\n      // utils.setImmediateInterval(() => {\n      //   dispatch.depth.fetchDepth()\n      //   dispatch.trade.fetchTrade()\n      //   dispatch.order.fetchOrders()\n      // }, pollingInterval);\n\n      // this.subscribe(['candlestick&LRC-BTC&1Hour'])\n      // utils.setImmediateInterval(() => dispatch.depth.fetchDepth(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.trade.fetchTrade(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.order.fetchOrders(), 1000 * pollingIntervalRatio);\n      // utils.setImmediateInterval(() => dispatch.balance.fetchBalances(), 3000 * pollingIntervalRatio);\n\n      let { pollingIntervals } = socket\n      _.forEach(pollingIntervals, inverval => clearInterval(inverval))\n      \n      let intervals = []\n      let interval = utils.setImmediateInterval(() => dispatch.rate.fetchRate(), 60 * 1000 * pollingIntervalRatio);\n      intervals.push(interval)\n      interval = utils.setImmediateInterval(() => dispatch.award.checkAward(), 10 * 1000 * pollingIntervalRatio);\n      intervals.push(interval)\n      // interval = utils.setImmediateInterval(() => dispatch.candleStick.fetchDayInfo(), 1000 * pollingIntervalRatio);\n      // intervals.push(interval)\n      // interval = utils.setImmediateInterval(() => dispatch.markets.fetchCurrentMarkets(), 3000 * pollingIntervalRatio);\n      // intervals.push(interval)\n      this.update({ pollingIntervals: intervals })\n    },\n    async checkHeartBeat (payload, { socket }) {\n      let { ws, lastPingTime } = socket\n\n      // 若socket还没创建，不检查。\n      if (!ws || !lastPingTime) return\n      // 距离上次心跳已经 3 分钟了，重新创建 socket。\n      let now = moment()\n      // 直接 lastPingTime.add 竟然会改掉 store !\n      let validUntil = lastPingTime.clone().add(1, 'minutes')\n      if (now.isBefore(validUntil)) return\n\n      this.initialize()\n      dispatch.socket.start()\n      // dispatch.appState.update({\n      //   notification: {\n      //     type: 'error',\n      //     duration: 3,\n      //     message: `notify.socket.heartbeat.error`,\n      //   },\n      // })\n    }\n  })\n}\n","import _ from 'lodash'\nimport numeral from 'numeral'\nimport api from 'api'\n\nconst initState = {\n  CNY: [],\n  USD: [],\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async fetchRate (payload, { dexAccount }) {\n      let { apiKey } = dexAccount\n\n      var CNYRates = await api.getPrice({\n        legal: 'CNY',\n        apiKey\n      })\n      let usdt = _.find(CNYRates, {symbol: 'USD'})\n      CNYRates.push({\n        ...usdt,\n        symbol: 'USDT'\n      })\n\n      var USDRates = await api.getPrice({\n        legal: 'USD',\n        apiKey\n      })\n      usdt = _.find(USDRates, {symbol: 'USD'})\n      CNYRates.push({\n        ...usdt,\n        symbol: 'USDT'\n      })\n\n      this.update({\n        CNY: CNYRates,\n        USD: USDRates,\n      })\n    }\n  })\n}","import _ from 'lodash'\nimport api from 'api'\nimport utils from 'utils'\nconst BigNumber = require('bignumber.js');\n\nconst initState = {\n}\n\nexport default {\n  state: initState,\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload })\n  },\n  effects: dispatch => ({\n    async checkAward (payload, { award, dexAccount, appState }) {\n      if (!dexAccount.address) return\n      if (appState.awardInfo.visible) return\n\n      let { latestAward } = award\n      let latestAwardBillSn = latestAward && latestAward.billSn\n\n      let resp = await api.getUserBillEggPrizeList({\n        // address: '0xa4ac2bb3885ff3bf82e99cc2b442a379e3627ef7',\n        address: dexAccount.address,\n        pageSize: 1,\n        page: 1,\n        sort: 'id',\n        sortDirection: 'asc',\n        read: false\n      })\n      let newAward = resp.data.rows[0]\n      if (!newAward) return\n      \n      let { id, billSn, money, unit, createdAt } = newAward\n\n      // TODO: 中奖\n      dispatch.appState.showEggAward({\n        id,\n        amount: money,\n        unit,\n        createdAt\n      })\n    },\n    async markRead (ids, { dexAccount }) {\n      if (!dexAccount.address) return\n\n      await api.postUserReadBillEggPrizeList({\n        // address: '0xa4ac2bb3885ff3bf82e99cc2b442a379e3627ef7',\n        address: dexAccount.address,\n        ids\n      })\n    }\n  })\n}","import _ from 'lodash'\nimport moment from 'moment'\nimport { matchPath } from \"react-router-dom\";\nimport utils from 'utils'\nimport { ENUM_LANGUAGE_TYPE } from 'utils/enum'\n\nexport default {\n  state: {\n    channelName: null,\n    locale: 'cn',\n    market: 'LRC-ETH',\n\n    lastTransferTime: moment().format('YYYY-MM-DD HH:mm:ss')\n  },\n  reducers: {\n    update: (state, payload) => ({ ...state, ...payload }),\n    resetLastTransferTime: (state, payload) => {\n      state.lastTransferTime = moment().format('YYYY-MM-DD HH:mm:ss')\n      return state\n    },\n  },\n  effects: dispatch => ({\n    async checkChannel (payload, { router }) {\n      const query = utils.getUrlParams(router.location.search)\n      const { channel } = query\n      if (channel) {\n        this.update({ channelName: channel })\n      }\n    },\n    async checkLocale (payload, { router }) {\n      let { pathname } = window.location\n      let locales = _.keys(ENUM_LANGUAGE_TYPE)\n      let locale = _.find(locales, locale => _.startsWith(pathname, `/${locale}/`))\n      console.info({pathname, locale})\n\n      // 如果 url 中带，则更新本地。\n      if (locale) {\n        this.update({ locale })\n      }\n      // 如果不带，默认的行为：第一次访问网站，则使用初始化的 cn；如果不是第一次，则使用缓存中的。\n    },\n    async checkMarket (payload, { router }) {\n      // 解析路由，获取默认交易对。\n      const match = matchPath(router.location.pathname, {\n        path: \"/:locale/trade/:market\",\n        exact: true,\n        strict: true\n      })\n\n      // 如果 url 中带，则更新本地。\n      // 重要：不能无脑使用本地缓存，否则人家精确使用 url，都没法直达对应的交易对。\n      if (match && match.params.market) {\n        this.update({ market: match.params.market })\n      }\n      // 如果不带，默认的行为：第一次访问网站，则使用初始化的 LRC-ETH；如果不是第一次，则使用缓存中的。\n    },\n  })\n}","import appState from './appState'\nimport metaMask from './metaMask'\nimport dexAccount from './dexAccount'\nimport depth from './depth'\nimport trade from './trade'\nimport candleStick from './candleStick'\nimport ticker from './ticker'\nimport markets from './markets'\nimport tokens from './tokens'\nimport placeOrder from './placeOrder'\nimport balance from './balance'\nimport walletBalance from './walletBalance'\nimport order from './order'\nimport transfer from './transfer'\nimport socket from './socket'\nimport rate from './rate'\nimport award from './award'\nimport persistData from './persistData'\n\nexport default {\n  appState,\n  metaMask,\n  dexAccount,\n  depth,\n  trade,\n  candleStick,\n  ticker,\n  markets,\n  tokens,\n  placeOrder,\n  balance,\n  walletBalance,\n  order,\n  transfer,\n  socket,\n  rate,\n  award,\n  persistData\n}","import React from 'react'\nimport { init } from '@rematch/core'\nimport createRematchPersist from '@rematch/persist'\nimport selectPlugin from '@rematch/select'\nimport { asyncLocalStorage } from \"redux-persist/storages\"\nimport { applyMiddleware, compose } from 'redux'\nimport { createLogger } from 'redux-logger'\nimport createSagaMiddleware from 'redux-saga'\nimport { routerMiddleware, connectRouter } from 'connected-react-router'\nimport { createBrowserHistory } from 'history'\nimport rootSaga from 'sagas'\nimport models from './models'\n\nexport { connect } from 'react-redux'\n\nexport const history = createBrowserHistory()\n\n// 将store提供给全局hook使用\nexport const StoreContext = React.createContext()\n\nconst initPlugin = () => {\n  const plugins = []\n\n  const persistPlugin = createRematchPersist({\n    whitelist: ['auth', 'dexAccount', 'markets', 'award', 'persistData'],\n    // throttle: 1000,\n    storage: asyncLocalStorage,\n    version: 1\n  })\n  plugins.push(persistPlugin)\n\n  const selectorPlugin = selectPlugin()\n  plugins.push(selectorPlugin)\n  return plugins\n}\n\nlet sagaMiddleware\nlet sagasManager\n\nconst initMiddleware = () => {\n  const middleware = []\n\n  const loggerMiddleware = createLogger({\n    level: 'info',\n    collapsed: true\n  })\n\n\n  sagaMiddleware = createSagaMiddleware({})\n  const historyMiddleware = routerMiddleware(history)\n\n  if (process.env.NODE_ENV !== 'test') {\n    middleware.push(loggerMiddleware)\n  }\n\n  middleware.push(sagaMiddleware)\n  middleware.push(historyMiddleware)\n  return middleware\n}\n\nconst middleware = initMiddleware()\nconst enhancers = []\nenhancers.push(applyMiddleware(...middleware))\n\nexport const reloadSaga = (newYieldedSagas) => {\n  sagasManager.cancel()\n  sagasManager.done.then(() => {\n    sagasManager = sagaMiddleware.run(newYieldedSagas)\n  })\n}\n\nexport const store = init({\n  models,\n  redux: {\n    reducers:{\n      router: connectRouter(history),\n    },\n    enhancers: enhancers\n  },\n  plugins: initPlugin()\n})\n\nexport const { dispatch } = store\n\nsagasManager = sagaMiddleware.run(rootSaga)","module.exports = __webpack_public_path__ + \"static/media/award.86f95a8e.png\";","export default {\n  SUCC: { code: 0, msg: \"success\" },\n  PARAM_INVALID: { code: 1001, msg: \"parameter invalid\" }\n};\n","module.exports = __webpack_public_path__ + \"static/media/index.149f8e76.less\";","const mainChain = true\nconst debug = false\nexport default {\n  relay: {\n    serverUrl: mainChain ? 'https://api.wedex.io/api/v1' : 'http://uat.loopring.io/api/v1',\n    wsUrl: mainChain ? 'wss://ws.wedex.io/v1/ws' : 'wss://ws.uat.loopring.io/v1/ws',\n    relayUrl: 'http://18.163.120.178:8080/lightcone_v3/',\n  },\n  chainId: mainChain ? 1 : 5,\n  pollingIntervalRatio: debug ? 10 : 1,\n  wedex: {\n    // 国内阿里云\n    // serverUrl: 'http://112.74.28.187:18081/api'\n    // 阿军亚马逊国际站美国服务器\n    // 管理端： http://18.163.13.39/:9527/\n    // serverUrl: 'http://18.163.13.39:8080/api'\n    // 阿里云国际站香港服务器\n    // 管理端： http://47.56.65.136:18082/\n    serverUrl: 'https://hd.wedex.io/api'\n  },\n  ratioRecommendedGasPrice: mainChain ? 0.5 : 1,\n  txSendByMetaMask: true\n}\n","export default class Response {\n  constructor(errorCode, errorMsg) {\n    this[\"id\"] = \"1\";\n    this[\"result\"] = null;\n    this[\"error\"] = {\n      code: errorCode,\n      message: errorMsg,\n      data: null\n    };\n  }\n}\n\n// common/config/config.json index.js\n// loopring/ethereum/abi.js token.js transaction.js util.js\n","// Schema Help： https://github.com/yiminghe/async-validator\n// required: value should be not empty eg: null, undefined, ''\n\nlet basicSchemas = {\n  STRING: {\n    type: \"string\",\n    required: true\n  },\n  OPTION_NUMBER: {\n    validator: (rule, value, cb) => {\n      if (value) {\n        if (typeof value === \"number\") {\n          cb();\n        } else {\n          cb(\"page number valid\");\n        }\n      } else {\n        cb();\n      }\n    }\n  },\n  URL: {\n    type: \"url\",\n    required: true\n  },\n  ADDRESS: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{40}$/g\n  },\n  HEX: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]*$/g\n  },\n  ETH_DATA: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{1,64}$/g\n  },\n  QUANTITY: {\n    type: \"string\",\n    required: true\n  },\n  PRIVATE_KEY: {\n    type: \"string\",\n    required: true,\n    len: 64\n  },\n  TX_HASH: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{64}$/g\n  },\n  ABI_METHOD: {\n    type: \"enum\",\n    required: true,\n    enum: [\n      \"cancelOrder\",\n      \"cancelAllOrders\",\n      \"cancelOrdersByTokenPairs\",\n      \"approve\",\n      \"deposit\",\n      \"withdraw\",\n      \"transfer\",\n      \"balanceOf\",\n      \"allowance\",\n      \"symbol\",\n      \"name\",\n      \"decimals\",\n      \"bind\",\n      \"unbind\",\n      \"getBindingAddress\"\n    ]\n  },\n  RPC_TAG: {\n    type: \"enum\",\n    required: true,\n    enum: [\"latest\", \"earliest\", \"pending\"]\n  },\n  TIMESTAMP: {\n    type: \"string\"\n  },\n  PROJECT_ID: {\n    type: \"number\",\n    required: true,\n    min: 1\n  },\n  LOOPRING_TOKEN: {\n    type: \"enum\",\n    required: true,\n    enum: [\"LRC\", \"LRN\", \"LRQ\"]\n  },\n  PRIVATE_KEY_BUFFER: {\n    validator: (rule, value, cb) => {\n      if (value instanceof Buffer && value.length === 32) {\n        cb();\n      } else {\n        cb(\"private_key must be buffer\");\n      }\n    }\n  },\n  CURRENCY: {\n    type: \"string\",\n    required: true,\n    enum: [\"USD\", \"CNY\"]\n  },\n  DEFAULT_BLOCK: {\n    type: \"string\",\n    required: true,\n    enum: [\"earliest\", \"latest\", \"pending\"]\n  },\n  CANCEL_ORDER_TYPE: {\n    type: \"enum\",\n    required: true,\n    enum: [1, 2, 3, 4]\n  }\n};\n\nexport default basicSchemas;\n","import { bigInt, bn128 } from \"snarkjs\";\n\nexport let Base8 = [\n  bigInt(\n    \"16540640123574156134436876038791482806971768689494387082833631921987005038935\"\n  ),\n  bigInt(\n    \"20819045374670962167435360035096875258406992893633759881276124905556507972311\"\n  )\n];\nexport let order = bigInt(\n  \"21888242871839275222246405745257275088614511777268538073601725287587578984328\"\n);\nexport let subOrder = order.shr(3);\nexport let p = bn128.r;\n\nexport function addPoint(a, b) {\n  const q = bn128.r;\n  const cta = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n  const res = [];\n\n  res[0] = bigInt(\n    bigInt(a[0])\n      .mul(b[1])\n      .add(bigInt(b[0]).mul(a[1]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").add(\n            d\n              .mul(a[0])\n              .mul(b[0])\n              .mul(a[1])\n              .mul(b[1])\n          )\n        ).inverse(q)\n      )\n  ).affine(q);\n  res[1] = bigInt(\n    bigInt(a[1])\n      .mul(b[1])\n      .sub(cta.mul(a[0]).mul(b[0]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").sub(\n            d\n              .mul(a[0])\n              .mul(b[0])\n              .mul(a[1])\n              .mul(b[1])\n          )\n        ).inverse(q)\n      )\n  ).affine(q);\n\n  return res;\n}\n\nexport function mulPointEscalar(base, e) {\n  let res = [bigInt(\"0\"), bigInt(\"1\")];\n  let rem = bigInt(e);\n  let exp = base;\n\n  while (!rem.isZero()) {\n    if (rem.isOdd()) {\n      res = addPoint(res, exp);\n    }\n    exp = addPoint(exp, exp);\n    rem = rem.shr(1);\n  }\n\n  return res;\n}\n\nexport function inSubgroup(P) {\n  if (!inCurve(P)) return false;\n  const res = mulPointEscalar(P, subOrder);\n  return res[0].equals(bigInt(0)) && res[1].equals(bigInt(1));\n}\n\nexport function inCurve(P) {\n  const F = bn128.Fr;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const x2 = F.square(P[0]);\n  const y2 = F.square(P[1]);\n\n  if (!F.equals(F.add(F.mul(a, x2), y2), F.add(F.one, F.mul(F.mul(x2, y2), d))))\n    return false;\n\n  return true;\n}\n\nexport function packPoint(P) {\n  const buff = bigInt.leInt2Buff(P[1], 32);\n  if (P[0].greater(p.shr(1))) {\n    buff[31] = buff[31] | 0x80;\n  }\n  return buff;\n}\n\nexport function unpackPoint(_buff) {\n  const F = bn128.Fr;\n\n  const buff = Buffer.from(_buff);\n  let sign = false;\n  const P = new Array(2);\n  if (buff[31] & 0x80) {\n    sign = true;\n    buff[31] = buff[31] & 0x7f;\n  }\n  P[1] = bigInt.leBuff2int(buff);\n  if (P[1].greaterOrEquals(p)) return null;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const y2 = F.square(P[1]);\n\n  let x = F.sqrt(F.div(F.sub(F.one, y2), F.sub(a, F.mul(d, y2))));\n\n  if (x == null) return null;\n\n  if (sign) x = F.neg(x);\n\n  P[0] = F.affine(x);\n\n  return P;\n}\n\nexport default {\n  addPoint,\n  mulPointEscalar,\n  inCurve,\n  inSubgroup,\n  packPoint,\n  unpackPoint,\n  Base8,\n  order,\n  subOrder,\n  p,\n}","// Taken and modified from\n// https://github.com/iden3/circomlib\nimport { Bitstream } from \"./bitstream\";\nimport { KeyPair, Signature } from \"../../model/types\";\n\nconst createBlakeHash = require(\"blake-hash\");\nconst bigInt = require(\"snarkjs\").bigInt;\nconst babyJub = require(\"./babyjub\");\nconst poseidon = require(\"./poseidon\");\n\nexport class EdDSA {\n  public static generateKeyPair(seed: string) {\n    let randomNumber = Bitstream.hashCode(seed);\n    let secretKey = bigInt(randomNumber.toString(10));\n    secretKey = secretKey.mod(babyJub.subOrder);\n    const publicKey = babyJub.mulPointEscalar(babyJub.Base8, secretKey);\n\n    const keyPair: KeyPair = {\n      publicKeyX: publicKey[0].toString(10),\n      publicKeyY: publicKey[1].toString(10),\n      secretKey: secretKey.toString(10)\n    };\n    return keyPair;\n  }\n\n  public static sign(strKey: string, msg: string) {\n    const key = bigInt(strKey);\n    const prv = bigInt.leInt2Buff(key, 32);\n\n    const h1 = createBlakeHash(\"blake512\")\n      .update(prv)\n      .digest();\n    const msgBuff = bigInt.leInt2Buff(bigInt(msg), 32);\n    const rBuff = createBlakeHash(\"blake512\")\n      .update(Buffer.concat([h1.slice(32, 64), msgBuff]))\n      .digest();\n    let r = bigInt.leBuff2int(rBuff);\n    r = r.mod(babyJub.subOrder);\n\n    const A = babyJub.mulPointEscalar(babyJub.Base8, key);\n    const R8 = babyJub.mulPointEscalar(babyJub.Base8, r);\n\n    const hasher = poseidon.createHash(6, 6, 52);\n    const hm = hasher([R8[0], R8[1], A[0], A[1], msg]);\n    const S = r.add(hm.mul(key)).mod(babyJub.subOrder);\n\n    const signature: Signature = {\n      Rx: R8[0].toString(),\n      Ry: R8[1].toString(),\n      s: S.toString()\n    };\n    return signature;\n  }\n\n  public static verify(msg: string, sig: Signature, pubKey: string[]) {\n    const A = [bigInt(pubKey[0]), bigInt(pubKey[1])];\n    const R = [bigInt(sig.Rx), bigInt(sig.Ry)];\n    const S = bigInt(sig.s);\n\n    // Check parameters\n    if (!babyJub.inCurve(R)) return false;\n    if (!babyJub.inCurve(A)) return false;\n    if (S >= babyJub.subOrder) return false;\n\n    const hasher = poseidon.createHash(6, 6, 52);\n    const hm = hasher([R[0], R[1], A[0], A[1], bigInt(msg)]);\n\n    const Pleft = babyJub.mulPointEscalar(babyJub.Base8, S);\n    let Pright = babyJub.mulPointEscalar(A, hm);\n    Pright = babyJub.addPoint(R, Pright);\n\n    if (!Pleft[0].equals(Pright[0])) return false;\n    if (!Pleft[1].equals(Pright[1])) return false;\n\n    return true;\n  }\n}\n","module.exports = \"data:image/png;base64,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\"","export default {\n  'enum.orderStatus.processing': 'Pending',\n  'enum.orderStatus.processed': 'Executed',\n  'enum.orderStatus.cancelling': 'Cancelling',\n  'enum.orderStatus.cancelled': 'Cancelled',\n  'enum.orderStatus.expired': 'Timed Out',\n  'enum.txStatus.received': 'Pending Transfer',\n  'enum.txStatus.processing': 'Transferring',\n  'enum.txStatus.processed': 'Done',\n  'enum.txStatus.failed': 'Fail',\n\n  'selfChoice': 'Favorites',\n  'search': 'Search',\n  'operations': 'Action',\n  'buy': 'Buy',\n  'sell': 'Sell',\n  'noData': 'Empty yet',\n  'deposit': 'Deposit',\n  'withdraw': 'Withdraw',\n  'startDate': 'Start Date',\n  'endDate': 'End Date',\n  'tokenName': 'Token',\n  'exchangePair': 'Pair',\n  'timestamp': 'Time',\n  'type': 'Type',\n  'price': 'Price',\n  'size': 'Amount',\n  'volumn': 'Volumn',\n  'fee': 'Fee',\n  'status': 'Status',\n  'amount': 'Amount',\n  'side': 'Side',\n  'query': 'Inquire',\n  'password': 'Password',\n  'newPassword': 'New Password',\n  'confirm': 'Confirm',\n  'copy': 'Copy',\n  'loading': 'Loading',\n  'account': 'Account',\n  'coin': 'Coin',\n  'date': 'Date',\n  'filter': 'Filter',\n  'cancel': 'Cancel',\n  'brief': 'Brief',\n  'indicator': 'Indicators',\n  'setting': 'Setting',\n\n  'filters.allPair': 'All Pair',\n  'filters.allToken': 'All Coins',\n  'filters.allType': \"All Type\",\n  'filters.allStatus': \"All Status\",\n\n  'notify.account.create.success': 'The password is submitted successfully, it takes about 15 seconds to take effect.',\n  'notify.account.modify.success': 'The new password is submitted successfully and takes about 10 minutes to take effect. Before the new password becomes effective, the order can be placed normally.',\n  'notify.account.modify.effective': 'The new password has taken effect now.',\n  'notify.signIn.error.mismatch': 'Wrong Password',\n  'notify.signIn.error.locked': 'Locked',\n  'notify.signIn.success': 'Log in Successfully',\n  'notify.metamask.needLogin': 'Log in by MetaMask first',\n  'notify.order.cancel.success': 'Operated Successfully',\n  'notify.placeOrder.success': 'Ordered Successfully',\n  'notify.socket.subscribe.error': 'Subscription failed, please resubscribe',\n  'notify.socket.subscribe.error.apikey': 'apikey错误，请重新登录',\n  'notify.socket.heartbeat.error': 'The network is connecting......',\n  'notify.transfer.deposit.success': 'Submitted successfully, deposit requires 30 blocks to confirm, and it takes about 10 minutes, please be patient.',\n  'notify.transfer.withdraw.success': 'Submitted successfully, confirming of assets on chain and zero-knowledge-proof generation, it takes about 20 to 30 minutes',\n  'notify.transfer.duaration': '请等待{second}秒，再进行划转。',\n\n  'navBar.signIn.creating': 'Creating',\n  'navBar.signIn.login': 'Log in by MetaMask',\n  'navBar.mine.balance': 'My Assets',\n  'navBar.mine.transfer': 'Deposit and Withdrawal Records',\n  'navBar.mine.order': 'Exchange Records',\n  'navBar.mine.apikey': 'API Key',\n  'navBar.mine.award':  'Winning Records',\n  'navBar.mine.resetPwd':  'Change Password',\n  'navBar.mine.clean':  'Clear Browser Cache',\n  'navBar.activity': 'Latest Activities',\n  'navBar.help': 'Support Center',\n  'navBar.help.notice': 'Latest Announcements',\n  'navBar.help.tutorial': 'Beginners’ Guide',\n  'navBar.help.faq': 'FAQs',\n  'navBar.help.about': 'About us',\n  'navBar.lang': 'English',\n\n  'tvchar.baseInfo.unit': 'Currency',\n  'tvchar.baseInfo.high': '24H High',\n  'tvchar.baseInfo.low': '24H Low',\n  'tvchar.baseInfo.volumn': '24H Volume',\n  'tvchar.resolutions.5min': '5M',\n  'tvchar.resolutions.15min': '15M',\n  'tvchar.resolutions.30min': '30M',\n  'tvchar.resolutions.1hr': '1H',\n  'tvchar.resolutions.2hr': '2H',\n  'tvchar.resolutions.4hr': '4H',\n  'tvchar.resolutions.12hr': '12H',\n  'tvchar.resolutions.1d': '1D',\n  'tvchar.resolutions.1w': '1W',\n  'tvchar.resolutions.1w': '1W',\n  'tvchar.button.depth': 'Depth',\n\n  'pair.list.header.latest': 'Last Price',\n  'pair.list.header.variation': '24H Change',\n  'pair.list.header.size': '24H Volume',\n\n  'tokenInfo.label.marketValue': 'Market Value',\n  'tokenInfo.label.rank': 'Rank',\n  'tokenInfo.label.homepage': 'Official Website',\n  'tokenInfo.label.whitePaper': 'White Paper',\n  'tokenInfo.label.publishDate': 'Issue Time',\n  'tokenInfo.label.publishAmount': 'Total Issuance',\n  'tokenInfo.label.flowAmount': 'Current Circulation',\n  'tokenInfo.label.publishPrice': 'Issuance Price',\n  'tokenInfo.label.desc': 'Brief Introduction',\n\n  'myOrder.tabs.current': 'Open Orders',\n  'myOrder.tabs.history': 'Order History',\n  'myOrder.filters.all': 'Status',\n  'myOrder.filters.processed': 'Executed',\n  'myOrder.filters.cancelled': 'Cancelled',\n  'myOrder.list.header.filledVolume': 'Total',\n  'myOrder.list.header.filledSize': 'Executed',\n  'myOrder.operations.cancel': 'Cancel',\n  'myOrder.operations.showAll': 'Show All Coins',\n  'myOrder.operations.cancelLatest': 'Cancel the Latest 10 Orders',\n  'myOrder.notify.cancelSuccess': 'Cancelled Successfully',\n\n  'depth.title': 'Depth',\n  'depth.operations.level': 'Decimals',\n  'depth.list.header.volume': 'Sum',\n  'depth.chart.geom.price': 'Price',\n  'depth.chart.geom.sum': 'Sum',\n\n  'trade.title': 'Market Trades',\n\n  'placeOrder.tabs.limitPrice': 'Limit',\n  'placeOrder.tabs.marketPrice': 'Market',\n  'placeOrder.title.available': 'Available',\n  'placeOrder.operations.transfer': 'Transfer',\n  'placeOrder.hint.loginAndTrade': `Trade after Login`,\n  'placeOrder.hint.buyLessThanMin': `The transaction volume cannot be less than{min}{quoteToken}`,\n  'placeOrder.hint.saleLessThanMin': `The transaction amount cannot be less than{min}{baseToken}`,\n  'placeOrder.hint.moreThanAvalable': `Insufficient Available Balance({available} {token})`,\n  'placeOrder.input.label.buyPrice': 'Price',\n  'placeOrder.input.label.buySize': 'Amount',\n  'placeOrder.input.label.sellPrice': 'Price',\n  'placeOrder.input.label.sellSize': 'Amount',\n  'placeOrder.input.label.total': 'Total',\n  'placeOrder.notify.needLogin': 'Please Log in First',\n\n  'mine.nav.balance': 'My Assets',\n  'mine.nav.transfer': 'Deposit and Withdrawal Records',\n  'mine.nav.order': 'Transaction Records',\n  'mine.nav.apikey': 'API Key',\n  'mine.nav.award': 'Winning Records',\n  'mine.nav.password': 'Change Transaction Password',\n\n  'mine.balance.overview.addr': 'Address',\n  'mine.balance.overview.total': 'Estimated Total Value',\n  'mine.balance.overview.walletTotal': 'Estimated Value of Wallet',\n  'mine.balance.overview.exchangeTotal': 'Estimated Value of Exchange Account',\n  'mine.balance.tab.wallet': 'Wallet',\n  'mine.balance.tab.exchange': 'Exchange Account',\n  'mine.balance.operations.hideSmall': 'Hide Small Coins',\n  'mine.balance.operations.allToken': 'All Coins',\n  'mine.balance.operations.record': 'Transfer History',\n  'mine.balance.operations.transfer': 'Transfer',\n  'mine.balance.operations.trade': 'Trade',\n  'mine.balance.wallet.list.header.amount': 'Balance',\n  'mine.balance.exchange.list.header.availAmount': 'Available Balance',\n  'mine.balance.exchange.list.header.frozenAmount': 'In Order',\n  'mine.balance.exchange.list.header.totalAmount': 'Total Balance',\n  'mine.transfer.list.header.hash': 'Transfer hash',\n  'mine.order.list.header.volume': 'Total',\n  'mine.apikey.label.accountId': 'Account ID',\n  'mine.apikey.label.addr': 'Address',\n  'mine.apikey.label.apiSk': 'API Private Key',\n  'mine.apikey.label.pkX': 'Public Key X',\n  'mine.apikey.label.pkY': 'Public Key Y',\n  'mine.apikey.label.sk': 'Private Key',\n  'mine.apikey.label.sk': 'Private Key',\n  'mine.award.egg.tab.my': 'My Winning Details',\n  'mine.award.egg.list.header.winner': 'Winner',\n  'mine.award.egg.list.header.billEggName': 'Activity Name',\n  'mine.award.egg.list.header.amount': 'Amount',\n\n  'activity.list.time': 'Activity Time',\n  'activity.status.initiate': 'About to Start',\n  'activity.status.underway': 'Under Way',\n  'activity.status.finished': 'Ended',\n\n  'modal.upsertPwd.title.create': 'Set a Transaction Password',\n  'modal.upsertPwd.title.modify': 'Change Transaction Password',\n  'modal.upsertPwd.label.pwd.create': 'Password',\n  'modal.upsertPwd.label.pwd.modify': 'New Password',\n  'modal.upsertPwd.label.confirmPwd.create': 'Confirm Password',\n  'modal.upsertPwd.label.confirmPwd.modify': 'Confirm New Password',\n  'modal.upsertPwd.label.registerFee': 'Registration fee',\n  'modal.upsertPwd.label.minerFee': 'Gas fee',\n  'modal.upsertPwd.errorInfo.required': 'Required Password',\n  'modal.upsertPwd.errorInfo.upperCase': 'Capital Letters',\n  'modal.upsertPwd.errorInfo.lowerCase': 'Small Letters',\n  'modal.upsertPwd.errorInfo.number': 'Arabic Number',\n  'modal.upsertPwd.errorInfo.min': 'At least 8 characters',\n  'modal.upsertPwd.errorInfo.pwdSame': 'Enter the consistent password',\n  'modal.upsertPwd.hint.minerFeeMax': 'Gas fee cannot exceed the available balance in the wallet {ethAvail}ETH',\n  'modal.upsertPwd.create.minerFee.hint1': '● The speed of registration depends entirely on how much Gas fees you pay. When the Ethereum network is not congested, it usually takes 3-5 minutes.',\n  'modal.upsertPwd.create.minerFee.hint2': '● Registration fee: 0.005 ETH.',\n  'modal.upsertPwd.modify.minerFee.hint1': '● The speed of changing password depends entirely on how much Gas fees you pay. When the Ethereum network is not congested, it usually takes 3-5 minutes.',\n  'modal.upsertPwd.modify.minerFee.hint2': '● There is no charge for changing the password.',\n\n  'modal.transfer.label.coin': 'Coin',\n  'modal.transfer.label.available': 'Available',\n  'modal.transfer.all': 'All',\n  'modal.transfer.hint.notAvailable': 'Insufficient Available Balance',\n  'modal.transfer.deposit.minerFee.hint1': 'WeDEX is a non-custodial decentralized exchange, this is the essential difference between us and the central exchange. Through Loopring Protocol and zero-knowledge-proof technology, you have complete control of your own exchange account, you can deposit at anytime, we cannot possess or freeze any of your assets.',\n  'modal.transfer.deposit.minerFee.hint2': '● The speed of deposit depends entirely on how much Gas fees you pay. When the Ethereum network is not congested, it usually takes 3-5 minutes. ',\n  'modal.transfer.deposit.minerFee.hint3': '● There is no charge for deposit.',\n  'modal.transfer.withdraw.minerFee.hint1': '● You can initiate a withdrawal request at any time, and the decentralized exchanges cannot prevent your withdrawal operation.',\n  'modal.transfer.withdraw.minerFee.hint2': '● The withdrawal process is divided into two steps: submitting a withdrawal request and zero-knowledge-proof operation.',\n  'modal.transfer.withdraw.minerFee.hint3': '● The speed of withdrawal request on chain depends entirely on how much Gas fees you pay. When the Ethereum network is not congested, it usually takes 3-5 minutes.',\n  'modal.transfer.withdraw.minerFee.hint4': '● Zero-knowledge-proof operation is a necessary step to ensure the safety of your assets. WeDEX completes the process of on-chain and usually takes 10-20 minutes.',\n  'modal.transfer.withdraw.minerFee.hint5': '● Withdrawal fee: 0.002ETH.',\n\n  'modal.signin.title.create': 'Set a Transaction Password',\n  'modal.signin.title.verify': 'Verify Transaction Password',\n  'modal.signin.label.forget': 'Forgot Password',\n\n  'modal.errorInfo.label': 'The password must contain the following:',\n\n  'modal.billPreCheck.browser.line1': 'Your current browser does not support the MetaMask plug-in. In order not to affect your transaction, use a browser that supports MetaMask.',\n  'modal.billPreCheck.browser.line2': 'Recommended browser:Firefox, Google, 360 browser',\n  'modal.billPreCheck.browser.line3': 'View Tutorial',\n  'modal.billPreCheck.metamask.line1': 'MetaMask needs to be installed to perform this operation.',\n  'modal.billPreCheck.metamask.line2': 'Go to install MetaMask',\n  'modal.billPreCheck.metamask.line3': 'View Tutorial',\n  'modal.billPreCheck.network': 'Please make sure that MetaMask is turned on and switched to the main Ethereum network.',\n  'modal.billPreCheck.address': 'Unable to obtain MetaMask address, please try again',\n\n  'modal.eggAward.congratulation': 'Congratulations on your egg',\n  'modal.eggAward.duaration': 'The bonus will be transferred to your wallet within 24 hours',\n  'modal.eggAward.createdAt': 'Winning Time',\n}\n","export default {\n  'enum.orderStatus.processing': '待成交',\n  'enum.orderStatus.processed': '已成交',\n  'enum.orderStatus.cancelling': '撤销中',\n  'enum.orderStatus.cancelled': '已撤销',\n  'enum.orderStatus.expired': '已超时',\n  'enum.txStatus.received': '待划转',\n  'enum.txStatus.processing': '划转中',\n  'enum.txStatus.processed': '已完成',\n  'enum.txStatus.failed': '失败',\n\n  'selfChoice': '自选',\n  'search': '搜索',\n  'operations': '操作',\n  'buy': '买入',\n  'sell': '卖出',\n  'noData': '暂无数据',\n  'deposit': '充值',\n  'withdraw': '提现',\n  'startDate': '开始日期',\n  'endDate': '结束日期',\n  'tokenName': '代币名称',\n  'exchangePair': '交易对',\n  'timestamp': '时间',\n  'type': '类型',\n  'price': '价格',\n  'size': '数量',\n  'volumn': '金额',\n  'fee': '手续费',\n  'status': '状态',\n  'amount': '数量',\n  'side': '方向',\n  'query': '查询',\n  'password': '密码',\n  'newPassword': '新密码',\n  'confirm': '确定',\n  'copy': '复制',\n  'loading': '加载中',\n  'account': '账户',\n  'coin': '币种',\n  'date': '日期',\n  'filter': '筛选',\n  'cancel': '取消',\n  'brief': '简介',\n  'indicator': '指标',\n  'setting': '设置',\n  \n  'filters.allPair': '全部交易对',\n  'filters.allToken': '全部币种',\n  'filters.allType': \"全部类型\",\n  'filters.allStatus': \"全部状态\",\n\n  'notify.account.create.success': '密码提交成功，生效需15秒左右。',\n  'notify.account.modify.success': '新密码提交成功，生效需10分钟左右。新密码生效前，可以正常下单。',\n  'notify.account.modify.effective': '新密码已生效。',\n  'notify.signIn.error.mismatch': '密码错误',\n  'notify.signIn.error.locked': '已锁定',\n  'notify.signIn.success': '登录成功',\n  'notify.metamask.needLogin': '请先登录metamask',\n  'notify.order.cancel.success': '操作成功',\n  'notify.placeOrder.success': '下单成功',\n  'notify.socket.subscribe.error': '订阅失败，重新订阅',\n  'notify.socket.subscribe.error.apikey': 'apikey错误，请重新登录',\n  'notify.socket.heartbeat.error': '网络连接中......',\n  'notify.transfer.deposit.success': '提交成功，需要30个区块确认，大约需要10分钟，请耐心等待。',\n  'notify.transfer.withdraw.success': '提交成功，资产上链及零知识证明生成确认中，大约需要20-30分钟。',\n  'notify.transfer.duaration': '请等待{second}秒，再进行划转。',\n\n  'navBar.signIn.creating': '创建中',\n  'navBar.signIn.login': 'MetaMask登录',\n  'navBar.mine.balance': '我的资产',\n  'navBar.mine.transfer': '充值提现记录',\n  'navBar.mine.order': '币币交易记录',\n  'navBar.mine.apikey': 'API Key',\n  'navBar.mine.award':  '中奖记录',\n  'navBar.mine.resetPwd':  '修改交易密码',\n  'navBar.mine.clean':  '清空浏览器缓存',\n  'navBar.activity': '最新活动',\n  'navBar.help': '帮助中心',\n  'navBar.help.notice': '最新公告',\n  'navBar.help.tutorial': '新手教程',\n  'navBar.help.faq': '常见问题',\n  'navBar.help.about': '关于我们',\n  'navBar.lang': '简体中文',\n\n  'tvchar.baseInfo.unit': '计价单位',\n  'tvchar.baseInfo.high': '24H最高价',\n  'tvchar.baseInfo.low': '24H最低价',\n  'tvchar.baseInfo.volumn': '24H交易量',\n  'tvchar.resolutions.5min': '5分钟',\n  'tvchar.resolutions.15min': '15分钟',\n  'tvchar.resolutions.30min': '30分钟',\n  'tvchar.resolutions.1hr': '1小时',\n  'tvchar.resolutions.2hr': '2小时',\n  'tvchar.resolutions.4hr': '4小时',\n  'tvchar.resolutions.12hr': '12小时',\n  'tvchar.resolutions.1d': '1日',\n  'tvchar.resolutions.1w': '1周',\n  'tvchar.resolutions.1w': '1周',\n  'tvchar.button.depth': '深度图',\n\n  'pair.list.header.latest': '最新价格',\n  'pair.list.header.variation': '24H涨跌',\n  'pair.list.header.size': '24H成交量',\n\n  'tokenInfo.label.marketValue': '市值',\n  'tokenInfo.label.rank': '排名',\n  'tokenInfo.label.homepage': '官网',\n  'tokenInfo.label.whitePaper': '白皮书',\n  'tokenInfo.label.publishDate': '发行时间',\n  'tokenInfo.label.publishAmount': '发行总量',\n  'tokenInfo.label.flowAmount': '流通总量',\n  'tokenInfo.label.publishPrice': '发行价格',\n  'tokenInfo.label.desc': '简介',\n\n  'myOrder.tabs.current': '当前委托',\n  'myOrder.tabs.history': '历史委托',\n  'myOrder.filters.all': '所有状态',\n  'myOrder.filters.processed': '已成交',\n  'myOrder.filters.cancelled': '已撤销',\n  'myOrder.list.header.filledVolume': '成交金额',\n  'myOrder.list.header.filledSize': '已成交',\n  'myOrder.operations.cancel': '撤销',\n  'myOrder.operations.showAll': '显示所有币种',\n  'myOrder.operations.cancelLatest': '撤销最新10条',\n  'myOrder.notify.cancelSuccess': '取消成功',\n\n  'depth.title': '交易深度',\n  'depth.operations.level': '位小数',\n  'depth.list.header.volume': '累计',\n  'depth.chart.geom.price': '委托价',\n  'depth.chart.geom.sum': '累计',\n\n  'trade.title': '实时成交',\n\n  'placeOrder.tabs.limitPrice': '限价',\n  'placeOrder.tabs.marketPrice': '市价',\n  'placeOrder.title.available': '可用',\n  'placeOrder.operations.transfer': '划转资金',\n  'placeOrder.hint.loginAndTrade': `登录后交易`,\n  'placeOrder.hint.buyLessThanMin': `交易额不能小于{min}{quoteToken}`,\n  'placeOrder.hint.saleLessThanMin': `交易数量不能小于{min}{baseToken}`,\n  'placeOrder.hint.moreThanAvalable': `可用余额({available} {token})不足`,\n  'placeOrder.input.label.buyPrice': '买入价',\n  'placeOrder.input.label.buySize': '买入量',\n  'placeOrder.input.label.sellPrice': '卖出价',\n  'placeOrder.input.label.sellSize': '卖出量',\n  'placeOrder.input.label.total': '交易额',\n  'placeOrder.notify.needLogin': '请先登录',\n\n  'mine.nav.balance': '我的资产',\n  'mine.nav.transfer': '充值提现记录',\n  'mine.nav.order': '交易记录',\n  'mine.nav.apikey': 'API Key',\n  'mine.nav.award': '中奖记录',\n  'mine.nav.password': '修改交易密码',\n\n  'mine.balance.overview.addr': '钱包地址',\n  'mine.balance.overview.total': '总资产估值',\n  'mine.balance.overview.walletTotal': '我的钱包资产估值',\n  'mine.balance.overview.exchangeTotal': '交易账户资产估值',\n  'mine.balance.tab.wallet': '我的钱包',\n  'mine.balance.tab.exchange': '交易账户',\n  'mine.balance.operations.hideSmall': '隐藏小额代币',\n  'mine.balance.operations.allToken': '全部币种',\n  'mine.balance.operations.record': '资金记录',\n  'mine.balance.operations.transfer': '充值提现',\n  'mine.balance.operations.trade': '交易',\n  'mine.balance.wallet.list.header.amount': '余额',\n  'mine.balance.exchange.list.header.availAmount': '可用余额',\n  'mine.balance.exchange.list.header.frozenAmount': '挂单金额',\n  'mine.balance.exchange.list.header.totalAmount': '总计(可用+挂单)',\n  'mine.transfer.list.header.hash': '转账hash',\n  'mine.order.list.header.volume': '已成交',\n  'mine.apikey.label.accountId': '账户ID',\n  'mine.apikey.label.addr': '钱包地址',\n  'mine.apikey.label.apiSk': 'API密钥',\n  'mine.apikey.label.pkX': '公钥X',\n  'mine.apikey.label.pkY': '公钥Y',\n  'mine.apikey.label.sk': '密钥',\n  'mine.apikey.label.sk': '密钥',\n  'mine.award.egg.tab.my': '我的中奖详情',\n  'mine.award.egg.list.header.winner': '中奖人',\n  'mine.award.egg.list.header.billEggName': '活动名称',\n  'mine.award.egg.list.header.amount': '金额',\n\n  'activity.list.time': '活动时间',\n  'activity.status.initiate': '即将开始',\n  'activity.status.underway': '火热进行中',\n  'activity.status.finished': '已结束',\n\n  'modal.upsertPwd.title.create': '设置交易密码',\n  'modal.upsertPwd.title.modify': '修改交易密码',\n  'modal.upsertPwd.label.pwd.create': '密码',\n  'modal.upsertPwd.label.pwd.modify': '新密码',\n  'modal.upsertPwd.label.confirmPwd.create': '确认密码',\n  'modal.upsertPwd.label.confirmPwd.modify': '确认新密码',\n  'modal.upsertPwd.label.registerFee': '注册费',\n  'modal.upsertPwd.label.minerFee': '矿工费',\n  'modal.upsertPwd.errorInfo.required': '必填密码',\n  'modal.upsertPwd.errorInfo.upperCase': '大写字母',\n  'modal.upsertPwd.errorInfo.lowerCase': '小写字母',\n  'modal.upsertPwd.errorInfo.number': '数字',\n  'modal.upsertPwd.errorInfo.min': '至少8个字符',\n  'modal.upsertPwd.errorInfo.pwdSame': '输入的密码一致',\n  'modal.upsertPwd.hint.minerFeeMax': '矿工费不能超过钱包中的可用余额 {ethAvail}ETH',\n  'modal.upsertPwd.create.minerFee.hint1': '● 注册的快慢完全取决于您支付的矿工费多少。在以太坊网络不拥堵的情况下，通常需要3-5分钟。',\n  'modal.upsertPwd.create.minerFee.hint2': '● 注册手续费：0.005ETH。',\n  'modal.upsertPwd.modify.minerFee.hint1': '● 修改密码的快慢完全取决于您支付的矿工费多少。在以太坊网络不拥堵的情况下，通常需要3-5分钟。',\n  'modal.upsertPwd.modify.minerFee.hint2': '● 修改密码不收取手续费。',\n\n  'modal.transfer.label.coin': '币种',\n  'modal.transfer.label.available': '可划转数量',\n  'modal.transfer.all': '全部划转',\n  'modal.transfer.hint.notAvailable': '余额不够,无法完成划转!',\n  'modal.transfer.deposit.minerFee.hint1': 'WeDEX是非托管的去中心化交易所,这是我们与中心化交易所的本质区别。通过路印协议和零知识证明技术，币币账户由您自己全权掌握,随时提现，我们无法占有、冻结您的任何资产。',\n  'modal.transfer.deposit.minerFee.hint2': '● 充值的快慢完全取决于您支出的矿工费多少。在以太坊网络不拥堵的情况下， 通常需要3-10分钟。 ',\n  'modal.transfer.deposit.minerFee.hint3': '● 充值不收取手续费。',\n  'modal.transfer.withdraw.minerFee.hint1': '● 您可以随时发起提现请求，去中心化交易所无法阻止您的提现操作。',\n  'modal.transfer.withdraw.minerFee.hint2': '● 提现流程分为提交提现请求和零知识证明运算两个步骤。',\n  'modal.transfer.withdraw.minerFee.hint3': '● 提现请求上链的快慢完全取决于您支付的矿工费多少。在以太坊网络不拥堵的情况下，通常需要3-10分钟。',\n  'modal.transfer.withdraw.minerFee.hint4': '● 零知识证明运算是保障您资产安全的必要步骤，由WeDEX完成上链，通常需要10-20分钟。',\n  'modal.transfer.withdraw.minerFee.hint5': '● 提现手续费：0.002ETH。',\n\n  'modal.signin.title.create': '设置交易密码',\n  'modal.signin.title.verify': '验证交易密码',\n  'modal.signin.label.forget': '忘记密码',\n\n  'modal.errorInfo.label': '密码必须包含以下内容:',\n\n  'modal.billPreCheck.browser.line1': '您当前的浏览器不支持MetaMask插件，为了不影响您的交易，请使用支持MetaMask的浏览器。',\n  'modal.billPreCheck.browser.line2': '推荐使用：火狐浏览器、谷歌浏览器、360浏览器',\n  'modal.billPreCheck.browser.line3': '查看教程',\n  'modal.billPreCheck.metamask.line1': '需要安装MetaMask，才能执行该操作。',\n  'modal.billPreCheck.metamask.line2': '前往安装MetaMask',\n  'modal.billPreCheck.metamask.line3': '查看教程',\n  'modal.billPreCheck.network': '请确保已打开MetaMask，并切换到以太坊主网络。',\n  'modal.billPreCheck.address': '无法获取地址，请重试',\n\n  'modal.eggAward.congratulation': '恭喜您获得彩蛋',\n  'modal.eggAward.duaration': '奖金将在24小时内转入您的钱包',\n  'modal.eggAward.createdAt': '获奖时间',\n}\n","import en_US from \"./en_US\"\nimport ja_JP from \"./ja_JP\"\nimport ko_KR from \"./ko_KR\"\nimport ru_RU from \"./ru_RU\"\nimport zh_CN from \"./zh_CN\"\n\nexport let messages = {\n  us: {...zh_CN, ...en_US},\n  jp: {...zh_CN, ...ja_JP},\n  kr: {...zh_CN, ...ko_KR},\n  ru: {...zh_CN, ...ru_RU},\n  cn: zh_CN,\n}\n\nexport default {\n  messages\n}\n","export default {\n  'navBar.activity': '最新活动',\n  'navBar.lang': '日本語',\n}\n","export default {\n  'navBar.activity': '最新活动',\n  'navBar.lang': '한국어',\n}\n","export default {\n  'navBar.activity': 'activity',\n  'navBar.lang': 'русский',\n}\n","import _ from 'lodash'\nimport React, { Component } from 'react'\nimport { withRouter } from \"react-router-dom\"\nimport { connect } from 'react-redux'\n\nconst Widget = ({\n  login\n}) => {\n  return (\n    <div>\n      登录\n      <div onClick={() => login({\n        token: 123123213,\n        profile: {name: 1231}\n      })}>登录</div>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n  }\n}\n\nconst mapDispatchToProps = ({auth}) => ({\n  login: auth.login\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Widget)\n\n","\nimport React from 'react'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { css } from '@emotion/core'\n\n\nexport default ({\n  children,\n  ...props\n}) => (\n  <Box sx={{\n    bg: 'background',\n    color: 'c1',\n    fontSize: 'f1',\n    lineHeight: 'lh1',\n    // height: '100vh',\n    minHeight: '100vh',\n  }} {...props}>\n    {children}\n  </Box>\n)","\nimport React from 'react'\n\nexport default ({\n  color,\n  icon,\n  width,\n  height,\n  size,\n  style,\n  ...props\n}) => (\n  <svg className=\"icon\" aria-hidden=\"true\" style={{\n    width: width || size || '.12rem',\n    height: height || size || '.12rem',\n    ...style\n  }} {...props}>\n    <use xlinkHref={`#${icon}`} style={{ color }}></use>\n  </svg>\n)","\nimport React from 'react'\nimport { ActivityIndicator } from 'antd-mobile';\n\nexport default ({\n  fontSize = 30,\n  color = 'white',\n  spinning,\n  children,\n  ...props\n}) => {\n  return (\n    <>\n      <div style={{ display: spinning ? 'unset' : 'none' }} {...props}>\n        <ActivityIndicator animating />\n      </div>\n      <div style={{opacity: spinning ? 0 : 1}}>{ children }</div>\n    </>\n  )\n}","import _ from 'lodash'\nimport React, { Component } from 'react'\nimport { SearchBar, ListView, List, PullToRefresh } from 'antd-mobile'\nimport { injectIntl, FormattedMessage  } from 'react-intl'\n\nconst { Item } = List;\n\nfunction MyBody(props) {\n  return (\n    <div className=\"am-list-body my-body\">\n      <span style={{ display: 'none' }}>you can custom body wrap element</span>\n      {props.children}\n    </div>\n  )\n}\n\nclass InfiniteScroll extends Component {\n  constructor (props) {\n    super(props)\n    \n    // const getRowData = (dataBlob, rowID) => dataBlob[rowID];\n\n    const dataSource = new ListView.DataSource({\n      // getRowData,\n      rowHasChanged: (row1, row2) => {\n        return row1 !== row2\n      }\n    })\n\n    this.state = {\n      dataSource,\n      isLoading: true,\n      hasMore: true,\n      error: false,\n      refreshing: true\n    }\n    this.pager = {\n      // 1. 首页必须足够多，否则首页成不满外部容器，就再也无法触发滚动触底事件。还要注意另一处\n      pageSize: 20,\n      page: 1\n    }\n    // 不做分页处理开关\n    this.disablePage = false\n    this.dataBlobs = []\n  }\n\n  async componentDidMount () {\n    this.disablePage = this.props.disablePage\n\n    if (!this.props.disableAutoLoad) {\n      this.reset()\n    }\n  }\n\n  componentWillUnmount() {\n  }\n\n  _parseRetList (res) {\n    if (this.props.parseRetList) {\n      return this.props.parseRetList(res)\n    }\n    const {listKey} = this.props\n    return res.data.List || res.data[listKey]\n  }\n\n  reset = async () => {\n    await this.setState({\n      isLoading: true,\n      hasMore: true,\n      error: false\n    })\n    this.pager = {\n      pageSize: 20,\n      page: 1\n    }\n    try {\n      let res = await this._fetchDataByPage()\n      this.dataBlobs = []\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRows(this.dataBlobs)\n      })\n      this._fetchSuccess(this._parseRetList(res))\n    } catch (err) {\n      this._fetchFailed()\n    }\n  }\n\n  onEndReached = async (event) => {\n    if (this.state.isLoading || !this.state.hasMore || this.disablePage) {\n      return\n    }\n    this.setState({ isLoading: true });\n    try {\n      let res = await this._fetchDataByPage()\n      this._fetchSuccess(this._parseRetList(res))\n    } catch (err) {\n      this._fetchFailed()\n    }\n  }\n\n  _fetchDataByPage = async () => {\n    return this.props.fetchData(this.pager)\n  }\n\n  _fetchSuccess = (list) => {\n    if (_.isArray(list) && list.length > 0) {\n      this.dataBlobs = this.dataBlobs.concat(list)\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRows(this.dataBlobs),\n        isLoading: false,\n      })\n      this.pager.page++\n    }\n    else {\n      this.setState({isLoading: false, hasMore: false})\n    }\n  }\n\n  _fetchFailed = (payload) => {\n    this.setState({isLoading: false, error: true})\n  }\n\n  // 手动触发渲染一行。ListView组件本来只是用来渲染的，如果想带交互，需要自己手动触发渲染。\n  refreshItem (index) {\n    // listview 操作数组（如翻页的拼接）时，this.dataBlobs这个 array 不能有mutable的操作。 因此只能用 concat，不能用 push。此处也只能使用[...]的操作。\n    // 原因：DataSource实际上是 （dataBlobs+一些访问操作）。ds 中没有重新 copy 一份 db，而是直接用的引用。更改了 db，会导致 ds 中的也变化，最终逐行 rowHasChanged 就会受影响。\n    // 具体分析: cloneWithRows 函数中会进行 _calculateDirtyArrays 的操作，来决定需不需要渲染。如果此处 mutable 了旧的 ds，会导致_calculateDirtyArrays时拿到的”旧ds“可能已经被改为跟”新 ds“一样。那么最终调用rowHasChanged时，就不会触发渲染。\n    // 调试技巧：在renderItem加打印，可以判断不同的 item 是否进行了渲染。\n    // 参考 https://github.com/facebook/react-native/blob/12a0045412644c2467efce8e83a86a6810a866d4/Libraries/CustomComponents/ListView/ListViewDataSource.js\n    let newDataBlobs = [...this.dataBlobs]\n    let newItem = _.cloneDeep(this.dataBlobs[index])\n    newDataBlobs[index] = newItem\n    this.setState({\n      dataSource: this.state.dataSource.cloneWithRows(newDataBlobs),\n    })\n  }\n\n  render () {\n    const styles = {\n      overflow: 'auto',\n      width: '100%'\n    }\n\n    if (this.props.autoHeight) {\n      styles.flex = 1\n    } else {\n      styles.height = this.props.height || 1000\n    }\n\n    let {renderEmptyList, renderItem, enableRefresh, onRefresh, intl, ...otherProps} = this.props\n\n    let pullToRefresh = false\n    if (enableRefresh) {\n      pullToRefresh = (\n        <PullToRefresh\n          // refreshing={this.state.refreshing}\n          onRefresh={onRefresh || this.reset}\n        />\n      )\n    }\n    return (\n      <ListView\n        ref={el => this.lv = el}\n        dataSource={this.state.dataSource}\n        pullToRefresh={pullToRefresh}\n        renderFooter={function () {\n          let hint\n          if (this.state.isLoading) {\n            return <div style={{ padding: 0, textAlign: 'center' }}>{intl.formatMessage({id: 'loading'})}</div>\n          } else if (this.state.dataSource._cachedRowCount === 0) {\n            if (renderEmptyList) {\n              return renderEmptyList()\n            } else {\n              return <div style={{ padding: 0, textAlign: 'center' }}>{intl.formatMessage({id: 'noData'})}</div>\n            }\n          } else {\n            // return <div style={{ padding: 0, textAlign: 'center' }}>加载完毕</div>\n          }\n        }.bind(this)}\n        renderBodyComponent={() => <MyBody />}\n        renderRow={renderItem}\n        style={styles}\n        pageSize={4}\n        scrollRenderAheadDistance={1000}\n        onEndReached={this.onEndReached}\n        onEndReachedThreshold={10}\n        // 2. 首页必须足够多，否则首页成不满外部容器，就再也无法触发滚动触底事件。还要注意另一处\n        initialListSize={20}\n        {...otherProps}\n      />\n    )\n  }\n}\n\n// injectIntl 的 forwardRef的写法\nexport default injectIntl(InfiniteScroll, { forwardRef: true })","\nimport React from 'react'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Svg } from 'components';\n\nexport default ({\n  width = '.55rem',\n  max = Number.POSITIVE_INFINITY,\n  min = 0,\n  precision,\n  value,\n  onKeyPress,\n  onChange,\n  onBlur,\n  onFocus\n}) => {\n  max = Number(max)\n  min = Number(min)\n  \n  let formatValue = (value) => {\n    value = _.max([min, value])\n    value = _.min([max, value])\n    value = _.round(value, precision)\n    return value\n  }\n\n  let adjust = (steps) => {\n    value = Number(value)\n    if (!_.isNumber(value)) {\n      value = 0\n    }\n    let step = Math.pow(10, -precision).toFixed(precision)\n    let changed = formatValue(value + step * steps)\n    onChange(changed)\n  }\n\n  return (\n    <Flex sx={{\n      justifyContent: 'space-between',\n      width: '100%',\n      height: '.35rem',\n      lineHeight: '.35rem',\n      border: '1px solid #F0F0F0',\n      borderRadius: '3px',\n    }}>\n      <Box width='.3rem' lineHeight='.35rem' textAlign='center' onClick={() => adjust(-1)}>\n        <Svg color=\"#0078FF\" icon=\"icon-minus\" size=\".12rem\"></Svg>\n      </Box>\n      <input style={{\n          width,\n          border: 0,\n          textAlign: 'left'\n        }}\n        type=\"number\"\n        pattern=\"[0-9]*\"\n        value={value || ''}\n        onKeyPress={onKeyPress}\n        onChange={e => {\n          onChange(e.target.value)\n        }}\n        onBlur={param => onBlur(param)}\n        onFocus={param => onFocus(param)}\n      ></input>\n      <Box width='.3rem' lineHeight='.35rem' textAlign='center' onClick={() => adjust(1)}>\n        <Svg color=\"#0078FF\" icon=\"icon-plus\" size=\".12rem\"></Svg>\n      </Box>\n    </Flex>\n  )\n}","import moment from 'moment';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Spin } from 'components'\n\n@injectIntl\nclass Trade extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    let { trade, markets, intl } = this.props\n\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    return (\n      <Box px=\"mainPadding\">\n        <Flex height=\".3rem\" alignItems=\"center\" justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n          <Box width=\"1.15rem\">{intl.formatMessage({id: 'timestamp'})}</Box>\n          <Box width=\".3rem\">{intl.formatMessage({id: 'side'})}</Box>\n          <Box width=\"1.15rem\" textAlign=\"right\">{intl.formatMessage({id: 'price'})}({currentMarket.quoteToken})</Box>\n          <Box width=\"1.15rem\" textAlign=\"right\">{intl.formatMessage({id: 'size'})}({currentMarket.baseToken})</Box>\n        </Flex>\n        <Spin spinning={trade.loading}>\n          {\n            _.map(trade.list, item => {\n              let { index, timestamp, side, price, size } = item\n              return (\n                <Flex key={index} height=\".3rem\" alignItems=\"center\" justifyContent=\"space-between\">\n                  <Box width=\"1.15rem\">{moment(timestamp).format('MM-DD HH:mm')}</Box>\n                  <Box width=\".3rem\">{intl.formatMessage({id: side.toLowerCase()})}</Box>\n                  <Box width=\"1.15rem\" textAlign=\"right\" color={item.side === 'BUY' ? \"c3\" : \"c4\"}>{price}</Box>\n                  <Box width=\"1.15rem\" textAlign=\"right\">{size}</Box>\n                </Flex>\n              )\n            })\n          }\n        </Spin>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ trade, markets }) => {\n  return {\n    trade,\n    markets\n  };\n};\n\nconst mapDispatchToProps = ({ trade }) => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Trade);","import moment from 'moment';\nimport api from 'api';\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport { dispatch, store } from 'store'\nimport utils from 'utils'\n\nconst maxCandlestickLength = 120\n// resolution 相关文档参考 https://zlq4863947.gitbook.io/tradingview/fu-lu/resolution\nlet supportedResolutions = ENUM_INTERVAL_TYPE.getOptions().map(option => option.value)\n// 改变分辨率的回调。\n// setInterval(async () => {\n//   // 每 10s 拉取过去一分钟的蜡烛\n//   for (let key in _subscribers) {\n//     let sub = _subscribers[key]\n//     let { symbolInfo, listener } = sub\n//     let market = symbolInfo['name'];\n\n//     // var candles = await getCandlestick(market, '1min', 1);\n//     var candles = await getCandlestick(market, '1min');\n//     if (candles.length === 0) return\n\n//     console.info('_subscribers', {candles})\n//     candles.reverse();\n\n//     let startTimestamp;\n//     let endTimestamp;\n//     let quoteToken;\n\n//     var newCandles = {};\n//     for (var i = 0; i < candles.length; i = i + 1) {\n//       const candle = candles[i];\n//       const tokens = market.split('-');\n//       quoteToken = tokens[1];\n\n//       if (startTimestamp === undefined) {\n//         startTimestamp = candle['start'];\n//       } else {\n//         endTimestamp = candle['start'];\n//       }\n\n//       const start = candle['start'];\n\n//       let parsedCandle = {\n//         time: start,\n//         low: Number(candle['low']),\n//         high: Number(candle['high']),\n//         open: Number(candle['open']),\n//         close: Number(candle['close']),\n//         volume: lightcone_v3_config.fromWEI(quoteToken, candle['volume'], 8)\n//       };\n//       newCandles[start] = parsedCandle;\n//     }\n\n//     var newMoreCandles = [];\n//     var lastCandle = newCandles[startTimestamp];\n//     for (var i = startTimestamp; i <= endTimestamp; i = i + 60 * 1000) {\n//       if (newCandles[i] === undefined) {\n//         lastCandle['time'] = i;\n//         newMoreCandles.push(Object.assign({}, lastCandle));\n//       } else {\n//         const candle = newCandles[i];\n//         newMoreCandles.push(candle);\n//         lastCandle = {\n//           time: candle['start'],\n//           low: Number(candle['close']),\n//           high: Number(candle['close']),\n//           open: Number(candle['close']),\n//           close: Number(candle['close']),\n//           volume: 0\n//         };\n//       }\n//     }\n\n//     console.info('#########latastCandel', newMoreCandles[newMoreCandles.length - 1])\n//     listener(newMoreCandles[newMoreCandles.length - 1]);\n//   }\n// }, 10 * 1000)\n\nexport default {\n  onReady: cb => {\n    console.log('=====onReady running: ');\n    console.info(supportedResolutions)\n    setTimeout(() => cb({\n      supported_resolutions: supportedResolutions\n    }), 0);\n  },\n  searchSymbols: (userInput, exchange, symbolType, onResultReadyCallback) => {\n    console.log('====Search Symbols running');\n  },\n  resolveSymbol: (\n    symbolName,\n    onSymbolResolvedCallback,\n    onResolveErrorCallback\n  ) => {\n    // expects a symbolInfo object in response\n    console.log('解析 Symbol', symbolName);\n    // console.log('resolveSymbol:',{symbolName})\n    let quoteSymbol = symbolName.split('-')[1]\n    let quoteToken = store.select.tokens.getTokenBySymbol(store.getState(), quoteSymbol)\n\n    var symbol_stub = {\n      name: symbolName,\n      description: '',\n      type: 'crypto',\n      session: '24x7',\n      timezone: 'Asia/Shanghai',\n      exchange: '',\n      minmov: 1,\n      pricescale: Math.pow(10, quoteToken.precision),\n      // 如果has_intraday为true，则日内周期可用。\n      has_intraday: true,\n      // 重要: 如果 has_intraday 为 true，则 intraday_multipliers 必须设置，否则“可选分辨率”为空。只能最新'1D'，连“默认分辨率”都自动变为'1D'。\n      intraday_multipliers: supportedResolutions.filter(interval => utils.formatResolution(interval) < 24 * 60),\n      supported_resolution: supportedResolutions,\n      volume_precision: quoteToken.precision,\n      data_status: 'streaming',\n      has_intraday: true,\n      has_seconds: true,\n      has_daily: true,\n      has_weekly_and_monthly: true,\n      // 重要: 是否自动填充无交易的 bar。不能填充，否则 MV 变形。\n      // has_empty_bars: true\n    };\n\n    /*\n    var split_data = symbolName.split(/[:/]/);\n\t\tif (split_data[2].match(/USD|EUR|JPY|AUD|GBP|KRW|CNY/)) {\n\t\t\tsymbol_stub.pricescale = 100\n    }\n    */\n    setTimeout(function() {\n      onSymbolResolvedCallback(symbol_stub);\n      console.log('Resolving that symbol....', symbol_stub);\n    }, 0);\n\n    // onResolveErrorCallback('Not feeling it today')\n  },\n  getBars: function(\n    symbolInfo,\n    resolution,\n    from,\n    to,\n    onHistoryCallback,\n    onErrorCallback,\n    firstDataRequest\n  ) {\n    console.log(\n      `获取K线 ${new Date(from * 1000).toLocaleString()} --- ${new Date(to * 1000).toLocaleString()} --- resolution: ${resolution}`\n    );\n\n    let market = symbolInfo['name'];\n\n    (async () => {\n      var candles = await api.getCandlestickCombine({\n        limit: maxCandlestickLength,\n        market,\n        interval: ENUM_INTERVAL_TYPE.toText(resolution),\n        start: from * 1000,\n        end: to * 1000,\n      })\n      candles.reverse()\n      console.log('candles解析前:', candles);\n\n      if (candles.length === 0) {\n        onHistoryCallback([], { noData: true });\n        return\n      }\n\n      let quoteSymbol = market.split('-')[1]\n\n      let startTimestamp = candles[0].start\n      let endTimestamp = _.last(candles).start\n\n      console.info('tradingview start ---> ' + moment(from * 1000).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('tradingview end   ---> ' + moment(to * 1000).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('relay start       ---> ' + moment(startTimestamp).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('relay end         ---> ' + moment(endTimestamp).format('YYYY-MM-DD HH:mm:ss'))\n\n      // // 重要：这里不能自己填充，否则 MA 的线会宽度变形。应该通过 has_empty_bars 让 tradingview 自己填充。\n      // // 补充: has_empty_bars 也不行，自动填充上，MA 也会变形。\n      // let parsedCandles = _.chain(candles)\n      //   // 重要: 这里必须过滤。因为中继有问题，实际返回的范围可能大于请求的范围。\n      //   // 比如请求8~10点，可能获取到8~10:09，那么 10~10:09的上一次已经有了，就会重合。\n      //   // 导致tradingview 增量更新冲突，刷新并重头开始获取。重新获取后冲突，再次重新获取。\n      //   // 中继之所以出现此问题，是因为中继的页数是从前往后的。而且 limit 没用，就取多了。\n      //   .filter(candle => candle.start >= from * 1000 && candle.start <= to * 1000)\n      //   .map(candle => {\n      //     return {\n      //       time: candle.start,\n      //       high: Number(candle['high']),\n      //       low: Number(candle['low']),\n      //       open: Number(candle['open']),\n      //       close: Number(candle['close']),\n      //       volume: lightcone_v3_config.fromWEI(quoteToken.symbol, candle['volume'], quoteToken.precision)\n      //     }\n      //   })\n      //   .value()\n\n      // range是前闭后开。所以想包含endTimestamp，需要+1.\n      let period = utils.formatResolution(resolution) * 60 * 1000\n      // 需要取整，否则会出现：若 1hr 的 k 线，批量塞给 tradingview 的最后一个是 8：36，但是中继推送的是 8：00（因为定制的一小时 k线，肯定是推整点的），会被一直丢弃知道下一个小时。\n      let formatedFrom = Math.floor((from) * 1000 / period) * period\n      let formatedTo = Math.ceil((to) * 1000 / period) * period\n      let timestaps = _.range(formatedFrom, formatedTo, period)\n      // 重要：MA 和 volume 变形，跟此处数据没关系。当有大片无数据横盘时，缓慢左移（横盘即将到头马上要重绘加载数据时，一定要慢），就没问题。\n      // 如果快速左移，或者直接缩放，就会变形。\n      // 即使出现问题，切换分辨率可恢复。\n      let parsedCandles = _.map(timestaps, ts => {\n        // 由于取整了，所以此处实际上可以直接用等号判断了，但是此处为了保险，仍然用如下范围判断的方式。\n        let candle = _.find(candles, c => c.start >= ts && c.start < ts + period)\n\n        if (!candle) {\n          let price = 0\n          // 先往前找最后一个\n          let LeftCandle = _.findLast(candles, c => c.start <= ts)\n          let rightCandle\n          // 如果找不到，往后找第一个。\n          // 不可能前后都找不到，因为数组不可能为空。真找不到，那 price 就是 0\n          if (LeftCandle) {\n            // 前面能找到柱子，则当天所有价格为这天收盘价\n            price = LeftCandle.close\n          } else {\n            rightCandle = _.find(candles, c => c.start >= ts)\n            if (rightCandle) {\n              // 后面能找到柱子，则当天所有价格为这天开盘价\n              price = rightCandle.open\n            }\n          }\n\n          candle = {\n            high: price,\n            low: price,\n            open: price,\n            close: price,\n            volume: 0,\n          }\n        }\n        return {\n          time: Number(ts),\n          high: Number(candle['high']),\n          low: Number(candle['low']),\n          open: Number(candle['open']),\n          close: Number(candle['close']),\n          volume: Number(utils.fromWEI(quoteSymbol, candle['volume']))\n        }\n      })\n      console.info('parsed start       ---> ' + moment(parsedCandles[0].time).format('YYYY-MM-DD HH:mm:ss'))\n      console.info('parsed end         ---> ' + moment(parsedCandles[parsedCandles.length-1].time).format('YYYY-MM-DD HH:mm:ss'))\n       \n      console.log('candles解析后:', parsedCandles);\n      // if (firstDataRequest) {\n      //   var lastBar = bars[bars.length - 1]\n      //   history[symbolInfo.name] = {lastBar: lastBar}\n      // }\n      if (parsedCandles.length) {\n        onHistoryCallback(parsedCandles, { noData: false });\n      } else {\n        onHistoryCallback(parsedCandles, { noData: true });\n      }\n    })();\n  },\n  subscribeBars: (\n    symbolInfo,\n    resolution,\n    onRealtimeCallback,\n    subscribeUID,\n    onResetCacheNeededCallback\n  ) => {\n    console.log('订阅k线socket', {subscribeUID, onRealtimeCallback, resolution, symbolInfo});\n    dispatch.candleStick.subscribeBars({subscribeUID, onRealtimeCallback, resolution, symbolInfo})\n  },\n  unsubscribeBars: subscriberUID => {\n    console.log('去除订阅k线socket');\n    dispatch.candleStick.unsubscribeBars(subscriberUID)\n  },\n  calculateHistoryDepth: (resolution, resolutionBack, intervalBack) => {\n    // https://github.com/tradingview/charting_library/wiki/JS-Api#calculatehistorydepthresolution-resolutionback-intervalback\n    //optional\n    // console.log(\n    //   '=====calculateHistoryDepth running: ',\n    //   resolution,\n    //   resolutionBack,\n    //   intervalBack\n    // );\n    // // while optional, this makes sure we request 24 hours of minute data at a time\n    // // CryptoCompare's minute data endpoint will throw an error if we request data beyond 7 days in the past, and return no data\n    // return resolution < 60\n    //   ? { resolutionBack: 'D', intervalBack: '14' }\n    //   : undefined;\n\n    // 重要: 更改获取的时间范围。maxCandlestickLength 条在此处定制。\n    resolution = utils.formatResolution(resolution)\n    console.log('#### calculateHistoryDepth ####', _.floor(resolution * maxCandlestickLength / 60 / 24, 2))\n    return {\n      resolutionBack: 'D',\n      intervalBack: _.floor(resolution * maxCandlestickLength / 60 / 24, 2)\n    }\n  },\n  // getMarks: (symbolInfo, startDate, endDate, onDataCallback, resolution) => {\n  //   //optional\n  //   console.log('=====getMarks running');\n  // },\n  // getTimeScaleMarks: (\n  //   symbolInfo,\n  //   startDate,\n  //   endDate,\n  //   onDataCallback,\n  //   resolution\n  // ) => {\n  //   //optional\n  //   console.log('=====getTimeScaleMarks running');\n  // },\n  // getServerTime: cb => {\n  //   console.log('=====getServerTime running: ', cb);\n  // }\n};\n","import _ from 'lodash';\nimport * as React from 'react';\nimport './index.less';\nimport { widget } from 'charting_library/charting_library.min';\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\nimport utils from 'utils'\nimport Datafeed from './api/';\nimport {\n  Flex,\n  Box,\n  Text\n} from 'rebass'\n\nconst TV_CANDLE_SERIES = 1;\nconst TV_LINE_SERIES = 2;\nconst TV_CONTAINER_ID = 'tv_chart_container_9527';\n\nfunction getLanguageFromURL() {\n  const regex = new RegExp('[\\\\?&]lang=([^&#]*)');\n  const results = regex.exec(window.location.search);\n  return results === null\n    ? null\n    : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n// Tutorial: https://medium.com/@jonchurch/tradingview-charting-library-js-api-setup-for-crypto-part-1-57e37f5b3d5a\nexport class TVChartContainer extends React.Component {\n  static defaultProps = {\n    locale: 'zh',\n    fullScreen: false,\n    type: 'Candle',\n    // 重要: 默认的分辨率\n    interval: ENUM_INTERVAL_TYPE.HOUR_1.getValue(),\n    // interval: ENUM_INTERVAL_TYPE.MIN_1.getValue(),\n    showIndicatorsDialog: false,\n    showSettingDialog: false,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    containerId: TV_CONTAINER_ID,\n    datafeedUrl: 'https://demo_feed.tradingview.com',\n    libraryPath: '/charting_library/',\n    chartsStorageUrl: 'https://saveload.tradingview.com',\n    chartsStorageApiVersion: '1.1',\n    clientId: 'tradingview.com',\n    userId: 'public_user_id',\n    fullscreen: false,\n    autosize: true,\n    studiesOverrides: {}\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    }\n    this.tvWidget = null;\n  }\n  \n  componentDidUpdate({\n    locale: prevLocale,\n    symbol: prevSymbol,\n    lineType: prevLineType,\n    theme: prevTheme,\n    interval: prevInterval,\n    showIndicatorsDialog: prevShowIndicatorsDialog,\n    showSettingDialog: prevShowSettingDialog\n  }) {\n    const {\n      locale,\n      symbol,\n      interval,\n      lineType,\n      theme,\n      visible,\n      showIndicatorsDialog,\n      showSettingDialog,\n    } = this.props;\n    this.lineType = lineType;\n    if (!window.TradingView) return\n    if (!this.tvWidget) return\n\n    // resolution changed?\n    if (interval !== prevInterval && this.tvWidget.activeChart().resolution() !== interval) {\n      this.setState({ loading: true });\n      this.tvWidget.activeChart().setResolution(String(interval));\n      // locale, symbol or theme changed?\n    } else if (locale !== prevLocale || symbol !== prevSymbol || theme !== prevTheme) {\n      // language changed?\n      // symbol changed?\n      // or theme changed?\n      // trigger a re-init of tradingview.\n      try {\n        this.tvWidget && this.tvWidget.remove();\n      } catch (err) {\n      }\n      this.tvWidget = null;\n    }\n\n    // line type activated?\n    if (lineType !== prevLineType) {\n      this.setState({ loading: true });\n      this.lineType = lineType;\n      if (lineType === 'Line') {\n        // line\n        if (prevLineType !== 'Line') {\n          // switch to Candle form Line\n          this.loadStudies(lineType, symbol, interval);\n        }\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_LINE_SERIES });\n      } else {\n        // candles\n        if (prevLineType === 'Line') {\n          // switch to Line form Candle\n          this.loadStudies(lineType, symbol, interval);\n        }\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_CANDLE_SERIES });\n      }\n    }\n\n    if (showSettingDialog !== prevShowSettingDialog) {\n      this._showSettingDialog(showSettingDialog);\n    }\n    if (showIndicatorsDialog !== prevShowIndicatorsDialog) {\n      this._showIndicatorsDialog();\n    }\n\n    // init tradingview?\n    if (visible) this.init();\n  }\n\n  componentDidMount() {\n    this.init()\n  }\n\n  componentWillUnmount() {\n    if (this.tvWidget !== null) {\n      this.tvWidget.remove();\n      this.tvWidget = null;\n    }\n  }\n\n  // componentWillReceiveProps(newProps) {\n  //   if (\n  //     this.props.market !== newProps.market\n  //   ) {\n  //     if (!this.tvWidget.chart() || !newProps.market) return\n  //     console.info(`#######更改 market：${newProps.market}`)\n\n  //     // let market = newProps.market.replace('-', '/')\n  //     this.tvWidget.chart().setSymbol(newProps.market, (...params) => {\n  //       console.info(\"########  setSymbol callback\", {params})\n  //     })\n  //     // changeSymbol(newProps.market)\n  //   }\n  // }\n\n  generateTradingViewConfig ({\n    symbol,\n    interval,\n    locale,\n    theme,\n  }) {\n    let timezone = 'Asia/Shanghai';\n    // try to use local timezone, if api is available\n    try {\n      timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    } catch (err) {\n      // fallback to EXCHANGE_TIMEZONE\n    }\n\n    // 重要：参考配置：\n    // https://cloud.tencent.com/developer/article/1405723\n    const widgetOptions = {\n      debug: false,\n      symbol,\n      // BEWARE: no trailing slash is expected in feed URL\n      datafeed: Datafeed,\n\n      // https://github.com/tradingview/charting_library/wiki/Resolution\n      // 重要: 均线变形的问题，切换一次分辨率后就会消失。那么可以给定一个不是当前 interval 的分辨率，然后等 init 的时候再改成当前 interval。\n      // 但是这样处理，会看到界面加载两次，network 也会发两次请求，这个方案不太好。\n      // interval: '1',\n      interval,\n\n      timezone,\n      container_id: TV_CONTAINER_ID,\n      library_path: this.props.libraryPath,\n      frameborder: 0,\n      // toolbar_bg: '#0a0e1e',\n      toolbar_bg: '#fff',\n      custom_css_url : \"tradingview.css\",\n      overrides: {\n        \"mainSeriesProperties.style\": 1,\n        \"symbolWatermarkProperties.color\" : \"#944\",\n        \"volumePaneSize\": \"tiny\",\n        // 'paneProperties.background': \"#0a0e1e\",\n        //坐标轴和刻度标签颜色\n        \"scalesProperties.lineColor\": \"#5a6881\",\n        \"scalesProperties.textColor\": \"#5a6881\",\n        // \"mainSeriesProperties.areaStyle.color1\": \"#5E8BBF\",\n        // \"mainSeriesProperties.areaStyle.color2\": \"#D9E8F9\",\n        // \"mainSeriesProperties.areaStyle.linecolor\": \"#5E8BBF\",\n        //网格线\n        \"paneProperties.vertGridProperties.color\": \"#1c2130\",\n        // \"paneProperties.vertGridProperties.style\" : 0,\n        \"paneProperties.horzGridProperties.color\": \"#1c2130\",\n        // \"paneProperties.horzGridProperties.style\" : 0,\n      },\n\n      // https://github.com/tradingview/charting_library/wiki/Localization\n      locale,\n\n      customFormatters: {\n        timeFormatter: {\n          format: function(date) { var _format_str = '%h:%m'; return _format_str.replace('%h', date.getUTCHours(), 2). replace('%m', date.getUTCMinutes(), 2). replace('%s', date.getUTCSeconds(), 2); }\n        },\n        dateFormatter: {\n          format: function(date) { return date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1) + '-' + date.getUTCDate(); }\n        }\n      },\n      \n      // https://github.com/tradingview/charting_library/wiki/Featuresets\n      disabled_features: [\n        'use_localstorage_for_settings',\n        'header_widget',\n        'left_toolbar',\n        'create_volume_indicator_by_default',\n        'go_to_date',\n        'source_selection_markers',\n        'main_series_scale_menu',\n        'source_selection_markers',\n        'timeframes_toolbar',\n        'header_symbol_search',\n      ],\n      enabled_features: ['move_logo_to_main_pane'],\n      charts_storage_url: this.props.chartsStorageUrl,\n      charts_storage_api_version: this.props.chartsStorageApiVersion,\n      client_id: this.props.clientId,\n      user_id: this.props.userId,\n      fullscreen: this.props.fullscreen,\n      autosize: this.props.autosize,\n      studies_overrides: this.props.studiesOverrides,\n      // theme: 'Dark',\n\n      // 重要: 初始的 timeframe，改为 1h 则calculateHistoryDepth中的时间范围会生效。但是默认的 time_frames 并没有 1h 这个选项。\n      // 改为 1d 则跨度范围为 1 天。\n      // timeframe: '1d',\n      timeframe: '1h',\n      // 默认的 time_frames\n      // time_frames: [{ text: \"5y\", resolution: \"W\" }, { text: \"1y\", resolution: \"W\" }, { text: \"6m\", resolution: \"120\" }, { text: \"3m\", resolution: \"60\" }, { text: \"1m\", resolution: \"30\" }, { text: \"5d\", resolution: \"5\" }, { text: \"1d\", resolution: \"1\" }],\n      time_frames: [\n        // {\n        //   text: '1min',\n        //   resolution: '1',\n        //   description: '1 minute',\n        //   title: '1min'\n        // },\n        // { text: '5min', resolution: '5', description: '5 Minutes', title: '5Min' },\n        // { text: '30min', resolution: '30', description: '30 Minutes', title: '30Min' },\n        // { text: '1hr', resolution: '60', description: '1 Hour', title: '1H' }\n        // { text: \"50y\", resolution: \"6M\" },\n        { text: \"1d\", resolution: \"1\" },\n        { text: \"1h\", resolution: \"1\" },\n      ],\n      symbols_types: ['LRC-ETH', 'LRC-USDT'],\n\n      studies_overrides: {\n        'volume.show ma': false,\n        // \"volume.volume ma.linewidth\": 5,\n        // 'volume.volume.color.0': '#222',\n        // 'volume.volume.color.1': '#441',\n        // 'Moving Average.precision': 8,\n        // 'Moving Average Exponential.precision': 8,\n        \n        // 'volume.volume ma.linewidth': 1,\n        // 'volume.volume ma.color': '#141', // orange\n        // 'volume.volume ma.plottype': 'area', // orange\n        // 'volume.volume.transparency': 70,\n      },\n    };\n    return widgetOptions\n  }\n\n  loadStudies(lineType, symbol, tvInterval) {\n    // const strCofig = localStorage['myTradingView' + mode + lineType];\n    // if (strCofig) {\n    //   const config = JSON.parse(strCofig);\n    //   try {\n    //     for (let i = 0; i < config.charts[0].panes.length; i++) {\n    //       config.charts[0].panes[i].sources[0].state.symbol = symbol;\n    //       config.charts[0].panes[i].sources[0].state.interval = interval;\n    //     }\n    //   } catch (ex) {\n    //     if (__DEV__) bog.error(ex);\n    //   }\n    //   this._tv.load(config); // bug https://github.com/tradingview/charting_library/issues/3610\n    //   this._tv.chart().executeActionById('chartReset');\n    // } else if (lineType !== 'Line') {\n    if (lineType !== 'Line') {\n      this._candleDefault();\n    } else if (lineType === 'Line') {\n      this._lineDefault();\n    }\n  }\n\n  _candleDefault = () => {\n    // const { theme } = this.props;\n    // this._tv.chart().createStudy('Moving Average', false, false, [7], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma1,\n    // });\n    // this._tv.chart().createStudy('Moving Average', false, false, [25], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma2,\n    // });\n    // this._tv.chart().createStudy('Moving Average', false, false, [99], null, {\n    //   'Plot.linewidth': 1,\n    //   'Plot.color': theme.tradingViewStyle.ma3,\n    // });\n\n    this.tvWidget.chart().removeAllStudies();\n    // 创建均线\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [5, 'close', 0], null, {\n      'Plot.color': '#34a9ff',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [10, 'close', 0], null, {\n      'Plot.color': '#ffb620',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Moving Average', false, false, [30, 'close', 0], null, {\n      'Plot.color': '#ff688f',\n      'Plot.linewidth': 1\n    })\n    this.tvWidget.chart().createStudy('Volume', false, false, [9], null, null);\n  \n    // 创建最新价水平线\n    // this.tvWidget.chart().createShape({\n    //     time: self.timestamp,\n    //     channel:close\n    // },{\n    //     shape: 'horizontal_line'\n    // })\n  \n    // 这里可以定制不同分辨率的 timeframe，但是范围明显不对，会变得特别小。\n    // this.tvWidget.chart()\n    //   .onIntervalChanged()\n    //   .subscribe(null, function(interval, obj) {\n    //     // if (interval === '1') {\n    //     //   obj.timeframe = `1h`\n    //     // }\n    //     let timeframe = `${_.floor(interval * 200 / 60 / 24, 2)}D`\n    //     console.info(`====== tv interval改变后，改 timeframe为: ${timeframe} ======`)\n    //     obj.timeframe = timeframe\n    //   })\n  };\n\n  _lineDefault = () => {\n    const { theme } = this.props;\n    this.tvWidget.chart().removeAllStudies();\n    this.tvWidget.chart().createStudy('Volume', false, false, [99], null, {\n      'volume.show ma': false,\n    });\n  };\n\n  _showSettingDialog = (checked) => {\n    if (!this.tvWidget) return\n\n    // let checked = this.tvWidget.chart().getCheckableActionState('scalesProperties')\n    // if (checked) {\n    //   this.tvWidget.chart().closePopupsAndDialogs();\n    // } else {\n    //   this.tvWidget.chart().executeActionById('compareOrAdd');\n    // }\n    this.tvWidget.chart().executeActionById('scalesProperties');\n  };\n\n  _showIndicatorsDialog = () => {\n    this.tvWidget && this.tvWidget.chart().executeActionById('insertIndicator');\n  };\n\n  init () {\n    if (this.tvWidget) return\n\n    const {\n      symbol,\n      locale,\n      interval,\n      lineType,\n      theme,\n    } = this.props;\n\n    let widgetOptions = this.generateTradingViewConfig({\n      symbol,\n      interval,\n      locale,\n      theme,\n    })\n    this.tvWidget = new widget(widgetOptions);\n\n    this.tvWidget.onChartReady(() => {\n      this.loadStudies(lineType, symbol, interval)\n      setTimeout(() => {\n        // this.tvWidget.activeChart().setResolution(interval)\n        this.tvWidget && this.tvWidget.setSymbol(symbol, interval);\n      }, 0)\n      // this.tvWidget.applyOverrides(theme.tradingViewOverrides || {});\n      if (lineType === 'Line') {\n        this.tvWidget.applyOverrides({ 'mainSeriesProperties.style': TV_LINE_SERIES });\n      }\n      this.tvWidget\n        .chart()\n        .onDataLoaded()\n        .subscribe(null, () => {\n          setTimeout(() => {\n            this.setState({ loading: false });\n          }, 0)\n        });\n\n      // this.tvWidget.subscribe('onAutoSaveNeeded', () => {\n      //   this.tvWidget.save(chartData => {\n      //     localStorage['myTradingView' + this.props.theme.mode + this.lineType] = JSON.stringify(\n      //       chartData\n      //     );\n      //   });\n      // });\n    });\n  }\n\n  render() {\n    return (\n      <Box id={this.props.containerId}\n        className={'TVChartContainer'}\n        sx={{\n          height: this.props.fullScreen ? 'calc(100% - 30px)' : this.props.style.height\n        }}\n      />\n    )\n  }\n}\n\n\n/* 币安的配置 */\n// webpack://utils/tradingview.js\n\n// import getConfig from 'next/config';\n// import Fetch from 'fetch-ponyfill';\n\n// import WebSocket from '../network/WebSocket';\n// import { getTradingViewLocale } from './locales';\n// import makeApiRequest from './makeApiRequest';\n// import { wssUri as _getKlinesWsUri } from '../network/handleInitTask';\n\n// const { fetch } = Fetch();\n\n// const {\n//   publicRuntimeConfig: {\n//     site: SITE,\n//     siteApiHost,\n//   },\n// } = getConfig();\n\n// const WS_PATH = '/stream?streams=';\n// const REST_BASE_URI = siteApiHost;\n// const EXCHANGE_TIMEZONE = 'Asia/Shanghai';\n// const SERVERTIME_API_PATH = '/api/v1/time';\n\n// const TV_RESOLUTIONS_TO_BINANCE = {\n//   '1': '1m',\n//   '3': '3m',\n//   '5': '5m',\n//   '15': '15m',\n//   '30': '30m',\n//   '60': '1h',\n//   '120': '2h',\n//   '240': '4h',\n//   '360': '6h',\n//   '720': '12h',\n//   'D': '1d',\n//   '1W': '1w',\n//   '1M': '1M',\n// };\n\n// const getKlinesWsUri = async (symbolName, interval) => {\n//   const streamUrl = _getKlinesWsUri();\n//   return (\n//     `${streamUrl.replace(/\\/ws$/, WS_PATH)}` +\n//     `${symbolName.toLowerCase()}@kline_${interval}`\n//   );\n// };\n\n// const convertKlineArrToBar = (arr) => {\n//   arr = arr.map(num => +num);\n//   const [time, open, high, low, close, volume] = arr;\n//   return {\n//     time,\n//     close,\n//     open,\n//     high,\n//     low,\n//     volume,\n//   };\n// };\n\n// const convertKlineObjToBar = ({ k: kline }) => {\n//   const {\n//     t, l, c, h, o, v,\n//   } = kline;\n//   return {\n//     time: t, close: +c, open: +o, high: +h, low: +l, volume: +v,\n//   };\n// };\n\n// export const translateResolutionForBinance = (resolution) => TV_RESOLUTIONS_TO_BINANCE[resolution];\n\n// export const translateResolutionForTV = (secs) => {\n//   const intervalMins = (secs / 60).toString();\n//   let tvInterval = intervalMins;\n//   if (intervalMins === '1440') { // 1d\n//     tvInterval = 'D';\n//   } else if (intervalMins === '10080') { // 1w\n//     tvInterval = '1W';\n//   } else if (intervalMins === '43200') { // 1w\n//     tvInterval = '1M';\n//   }\n//   return tvInterval;\n// };\n\n// export class DataFeed {\n//   constructor(symbols = [], baseUri = REST_BASE_URI) {\n//     this.symbols = symbols;\n//     this.baseUri = baseUri;\n//     this.sockets = new Map();\n//   }\n\n//   // ### onReady(callback)\n//   // `callback`: function(configurationData)\n//   //     `configurationData`: object (see below)\n//   //          exchanges\n//   //          symbols_types\n//   //          supported_resolutions\n//   //          supports_marks\n//   //          supports_timescale_marks\n//   //          supports_time\n//   //          futures_regex\n//   onReady = (callback) => {\n//     setTimeout(() => {\n//       callback({\n//         exchanges: [],\n//         symbols_types: [],\n//         supported_resolutions: Object.keys(TV_RESOLUTIONS_TO_BINANCE),\n//         supports_marks: false, // TODO: maybe\n//         supports_timescale_marks: false, // TODO: maybe\n//         supports_time: true,\n//       });\n//     }, 0);\n//   };\n\n//   // ### searchSymbols(userInput, exchange, symbolType, onResultReadyCallback)\n//   // `userInput`: string. It is text entered by user in the symbol search field.\n//   // `exchange`: string. The requested exchange (chosen by user).\n//   //     Empty value means no filter was specified.\n//   // `symbolType`: string. The requested symbol type: `index`, `stock`, `forex`, etc.\n//   //     Empty value means no filter was specified.\n//   // `onResultReadyCallback`: function(result)\n//   //     `result`: array (see below)\n//   //        \"symbol\": \"<short symbol name>\",\n//   //        \"full_name\": \"<full symbol name>\", // e.g. BTCE:BTCUSD\n//   //        \"description\": \"<symbol description>\",\n//   //        \"exchange\": \"<symbol exchange name>\",\n//   //        \"ticker\": \"<symbol ticker name, optional>\",\n//   //        \"type\": \"stock\" // or \"futures\" or \"crypto\" or \"forex\" or \"index\"\n//   searchSymbols = (input, exchange, symbolType, callback) => {\n//     if (__DEV__) {\n//       console.log('searchSymbols called with:', input);\n//     }\n//     const matches = this.symbols.filter(({ symbol }) => symbol.includes(input));\n//     const mapped = matches.map(match => ({\n//       symbol: match.symbol,\n//       full_name: match.symbol,\n//       description: match.symbol,\n//       exchange: 'BINANCE',\n//       type: 'crypto',\n//     }));\n//     if (__DEV__) {\n//       console.log('TradingView symbol matches', mapped);\n//     }\n//     callback(mapped);\n//   };\n\n//   // ### resolveSymbol(symbolName, onSymbolResolvedCallback, onResolveErrorCallback)\n//   // `symbolName`: string. Symbol name or `ticker` if provided.\n//   // `onSymbolResolvedCallback`: function([SymbolInfo](Symbology#symbolinfo-structure))\n//   // `onResolveErrorCallback`: function(reason)\n//   // Charting Library calls this fn when it needs [SymbolInfo](Symbology#symbolinfo-structure)\n//   // by symbol name.\n//   resolveSymbol = (symbol, callback, errorCallback) => {\n//     if (__DEV__) {\n//       console.log('resolveSymbol called with:', symbol);\n//     }\n//     symbol = symbol.replace('BINANCE:', '');\n//     const matches = this.symbols.filter(({ symbol: symb }) => symb === symbol);\n//     if (!matches.length) {\n//       errorCallback('not found');\n//       return;\n//     }\n//     const match = matches[0];\n//     const symbolFilter = match.filters.find((filter) => filter.tickSize || filter.stepSize);\n//     const tickSize = symbolFilter.stepSize || symbolFilter.tickSize;\n//     const resolved = {\n//       description: match.symbol,\n//       fractional: false, // `fractional` for common prices is `false` or it can be skipped.\n//       has_intraday: true,\n//       minmov: 1, // `minmov` is a number of units that make up one tick.\n//       minmove2: 0, // `minmove2` for common prices is `0` or it can be skipped.\n//       name: match.symbol,\n//       // `pricescale` defines number of decimal places.\n//       // Actually it is `10^number-of-decimal-places`.\n//       pricescale: 10 ** Math.abs(Math.log10(tickSize)),\n//       session: '24x7',\n//       timezone: EXCHANGE_TIMEZONE,\n//       type: 'crypto',\n//       // volume_precision: 2,\n//     };\n//     if (__DEV__) {\n//       console.log('resolved symbol:', resolved);\n//     }\n//     // TODO: fill this out properly\n//     setTimeout(() => {\n//       callback(resolved);\n//     }, 0);\n//   };\n\n//   // ### getBars(symbolInfo, resolution, from, to, onHistoryCallback,\n//   //              onErrorCallback, firstDataRequest)\n//   // `symbolInfo`: [SymbolInfo](Symbology#symbolinfo-structure) object\n//   // `resolution`: string\n//   // `from`: unix timestamp, leftmost required bar time\n//   // `to`: unix timestamp, rightmost required bar time\n//   // `onHistoryCallback`: function(array of `bar`s, `meta` = `{ noData = false }`)\n//   //     `bar`: object `{time, close, open, high, low, volume}`\n//   //     `meta`: object `{noData = true | false, nextTime - unix time}`\n//   // `onErrorCallback`: function(reason)\n//   // `firstDataRequest`: boolean to identify the first call of this method for the\n//   //     particular symbol resolution.\n//   //     When it is set to `true` you can ignore `to` (which depends on browser's `Date.now()`)\n//   //     and return bars up to the latest bar.\n//   getBars = async ({ name: symbol }, resolution, from, to, callback, onError) => {\n//     const interval = translateResolutionForBinance(resolution);\n//     // this api is hard limited to return 1000 bars max, regardless of `limit`\n//     const limit = 1000; // never more than 1000!\n//     const getUri = (startTime) => `${this.baseUri}` +\n//       '/api/v1/klines' +\n//       `?symbol=${symbol}` +\n//       `&interval=${interval}` +\n//       `&limit=${limit}` +\n//       `&startTime=${startTime}` +\n//       `&endTime=${to * 1000}`;\n//     let lastCount = -1;\n//     let lastTime = from * 1000;\n//     let errored = false;\n//     const bars = [];\n//     // deal with the 1000 hard limit by making multiple requests\n//     while (lastCount === -1 || lastCount === limit) {\n//       try {\n//         const isFirst = lastCount === -1;\n//         // +1 to not get duplicate bars\n//         const res = await fetch(getUri(isFirst ? lastTime : lastTime + 1));\n//         const batch = await res.json();\n//         if (!batch || !batch.length) break;\n//         const [time] = batch[batch.length - 1];\n//         lastTime = time;\n//         lastCount = batch.length;\n//         bars.push(...batch.map(convertKlineArrToBar));\n//       } catch (err) {\n//         errored = true;\n//         onError(err);\n//         break;\n//       }\n//     }\n//     if (!errored) {\n//       callback(bars, { noData: !bars.length });\n//     }\n//   };\n\n//   // ### subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID,\n//   //                    onResetCacheNeededCallback)\n//   // Charting Library calls this function when it wants to receive real-time updates for a symbol.\n//   // The Library assumes that you will call `onRealtimeCallback` every time you want to update\n//   // the most recent bar or to add a new one.\n//   // `symbolInfo`: [SymbolInfo](Symbology#symbolinfo-structure) object\n//   // `resolution`: string\n//   // `onRealtimeCallback`: function(bar)\n//   //     `bar`: object `{time, close, open, high, low, volume}`\n//   // `subscriberUID`: object\n//   // `onResetCacheNeededCallback` *(since version 1.7)*: function() to be executed\n//   //    when bar data has changed\n//   subscribeBars = async ({ name: symbol }, resolution, onMessage, uid, onResetNeeded) => {\n//     if (this._lastBarsSymbol &&\n//         this._lastBarsSymbol !== symbol) {\n//       onResetNeeded();\n//       return;\n//     }\n//     this._lastBarsSymbol = symbol;\n//     const interval = translateResolutionForBinance(resolution);\n//     const klinesWsUri = await getKlinesWsUri(symbol, interval);\n//     this.sockets.set(uid, new WebSocket(klinesWsUri, {\n//       onopen: () => {},\n//       onmessage: ({ data: json }) => {\n//         if (!json || !json.length) {\n//           console.warn('TradingView feed: received kline without data!', json);\n//           return;\n//         }\n//         const { data } = JSON.parse(json);\n//         onMessage(convertKlineObjToBar(data));\n//       },\n//       onreconnect: () => { onResetNeeded(); },\n//       onmaximum: () => {},\n//       onclose: () => {\n//         console.warn('TradingView feed: WebSocket data closed.');\n//       },\n//       onerror: err => {\n//         console.error('TradingView feed: WebSocket error:', err);\n//       },\n//     }));\n//   };\n\n//   // ### unsubscribeBars(subscriberUID)\n//   // `subscriberUID`: object\n//   // Charting Library calls this function when it doesn't want to receive updates for\n//   // this subscriber any more. `subscriberUID` will be the same object that Library passed\n//   // to `subscribeBars` before.\n//   unsubscribeBars = (uid) => {\n//     const socket = this.sockets.get(uid);\n//     if (!socket) {\n//       console.warn('TradingView feed: unsubscribeBars called but socket not found.');\n//       return;\n//     }\n//     socket.close(1e3, 'Requested by TradingView');\n//   };\n\n//   // ### calculateHistoryDepth(resolution, resolutionBack, intervalBack)\n//   // *Optional.*\n//   // `resolution`: requested symbol resolution\n//   // `resolutionBack`: time period types. Supported values are: `D` | `M`\n//   // `intervalBack`: amount of `resolutionBack` periods that the Charting Library is\n//   // going to request\n//   // calculateHistoryDepth = (resolution, resolutionBack, intervalBack) => ({\n//   //   resolutionBack,\n//   //   // 1000 bars hard limit on the API.\n//   //   intervalBack: intervalBack > 1000 ? 999 : intervalBack,\n//   // });\n\n//   // ### getServerTime(callback)\n//   // This function is called if the configuration flag `supports_time` is set to `true` when\n//   // the Charting Library needs to know the server time.\n//   // `callback`: function(unixTime)\n//   getServerTime = async (callback) => {\n//     const uri = `${this.baseUri}${SERVERTIME_API_PATH}`;\n//     try {\n//       const res = await makeApiRequest(uri);\n//       const unixTime = res.serverTime;\n//       const secs = Math.floor(parseInt(unixTime, 10) / 1000);\n//       callback(secs);\n//     } catch (err) {\n//       callback(Date.now());\n//       console.error('TradingView feed: getServerTime called but there was an error!');\n//     }\n//   };\n\n//   // ### calculateHistoryDepth(resolution, resolutionBack, intervalBack)\n//   // *Optional.*\n//   // ...\n\n//   // ### getMarks(symbolInfo, startDate, endDate, onDataCallback, resolution)\n//   // *Optional.*\n\n//   // ### getTimescaleMarks(symbolInfo, startDate, endDate, onDataCallback, resolution)\n//   // *Optional.*\n// }\n\n// export const generateTradingViewConfig = ({\n//   containerId,\n//   symbol,\n//   symbols,\n//   interval,\n//   locale,\n//   theme,\n// }) => {\n//   let timezone = EXCHANGE_TIMEZONE;\n//   // try to use local timezone, if api is available\n//   try {\n//     timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n//   } catch (err) {\n//     // fallback to EXCHANGE_TIMEZONE\n//   }\n//   return ({ // eslint-disable-line\n//     timezone, // user's browser timezone\n//     autosize: true,\n//     container_id: containerId,\n//     datafeed: new DataFeed(symbols),\n//     debug: !!__DEV__,\n//     enabled_features: [\n//       'dont_show_boolean_study_arguments',\n//       'hide_last_na_study_output',\n//     ],\n//     disabled_features: [\n//       'header_widget',\n//       'header_symbol_search',\n//       'symbol_info',\n//       'header_compare',\n//       // 'use_localstorage_for_settings',\n//       // 'save_chart_properties_to_local_storage',\n//       'header_chart_type',\n//       'display_market_status',\n//       'symbol_search_hot_key',\n//       'compare_symbol',\n//       'border_around_the_chart',\n//       'remove_library_container_border',\n//       'symbol_info',\n//       'header_interval_dialog_button',\n//       'show_interval_dialog_on_key_press',\n//       'volume_force_overlay',\n//     ],\n//     interval,\n//     library_path: `/static/tradingview/${SITE === 'cn' ? 'cn/' : ''}charting_library/`,\n//     custom_css_url: theme.tradingViewCssPath,\n//     locale: getTradingViewLocale(locale) || 'en',\n//     overrides: theme.tradingViewOverrides || {}, // doesn't always work, see below\n//     studies_overrides: {\n//       // 'volume.show ma': false,\n//       'volume.volume.color.0': theme.tradingViewStyle.shortFill,\n//       'volume.volume.color.1': theme.tradingViewStyle.longFill,\n//       'Moving Average.precision': 8,\n//       'Moving Average Exponential.precision': 8,\n      \n//       // 'volume.volume ma.linewidth': 1,\n//       // 'volume.volume ma.color': theme.tradingViewStyle.maLine, // orange\n//       // 'volume.volume ma.plottype': 'area', // orange\n//       // 'volume.volume.transparency': 70,\n//     },\n\n//     style: '1',\n//     symbol,\n//     theme: 'Light',\n//     toolbar_bg: 'rgba(255, 255, 255, 1)', // white\n//     time_frames: [],\n//   });\n// };\n\n// export default {\n//   translateResolutionForBinance,\n//   translateResolutionForTV,\n//   DataFeed,\n// };\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport numeral from 'numeral'\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport { ActionSheet } from 'antd-mobile'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport styled from '@emotion/styled'\nimport { TVChartContainer } from './TVChartContainer';\n// import { DepthChartContainer } from './DepthChartContainer';\nimport { Page, Svg } from 'components'\nimport { CurrentPair } from 'widgets'\nimport utils, { renderIf } from 'utils'\nimport api from 'api'\nimport { ENUM_INTERVAL_TYPE } from 'utils/enum'\n\nconst units = ['USD', 'CNY']\nconst views = {\n  DEPTH_VIEW: 0,\n  TRADING_VIEW: 1\n}\nconst tvLocalMapping = {\n  cn: 'zh',\n  us: 'en',\n  kr: 'ko',\n  ru: 'ru',\n  jp: 'ja',\n}\n\n// https://emotion.sh/docs/styled#object-styles\nconst ViewTypeButton = styled(Text)(\n  {\n    border: '1px solid',\n    cursor: 'pointer',\n  },\n  props => ({\n    background: `${props.active ? '#1890ff' : ''}`,\n    color: `${props.active ? 'white' : '#1890ff'}`,\n    borderColor: `${props.active ? '#1890ff' : '#1890ff'}`,\n    borderTopLeftRadius: `${props.left ? 2 : 0}px`,\n    borderBottomLeftRadius: `${props.left ? 2 : 0}px`,\n    borderTopRightRadius: `${props.right ? 2 : 0}px`,\n    borderBottomRightRadius: `${props.right ? 2 : 0}px`,\n    borderLeftWidth: `${props.right ? 0 : 1}px`,\n    borderRightWidth: `${props.left ? 0 : 1}px`,\n  })\n)\n\nconst IntervalButton = styled(Text)(\n  {\n    width: '44px',\n    height: '18px',\n    marginRight: '3px',\n    fontSize: '12px',\n    lineHeight: '18px',\n    background: 'rgba(255,255,255,0.08)',\n    cursor: 'pointer',\n    borderRadius: '1px',\n    textAlign: 'center'\n  },\n  props => ({\n    color: `${props.active ? '#0064FF' : '#78788C'}`,\n  })\n)\n\n@injectIntl\nclass TVChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      unit: 'USD',\n      pairVisible: false,\n      tokenInfoVisible: false,\n      tokenInfo: {},\n      selectedView: views.TRADING_VIEW,\n\n      lineType: 'Candle',\n      interval: ENUM_INTERVAL_TYPE.HOUR_1.getValue(),\n      fullScreen: false,\n      showIndicators: false,\n      showSetting: false,\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  renderTvOps () {\n    let { selectedView, fullScreen, showIndicators, showSetting, interval } = this.state\n    const { intl } = this.props\n\n    let invetvalMapping = [\n      // { label: '1分钟', value: ENUM_INTERVAL_TYPE.MIN_1, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.5min'}), value: ENUM_INTERVAL_TYPE.MIN_5, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.15min'}), value: ENUM_INTERVAL_TYPE.MIN_15, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.30min'}), value: ENUM_INTERVAL_TYPE.MIN_30, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.1hr'}), value: ENUM_INTERVAL_TYPE.HOUR_1, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.2hr'}), value: ENUM_INTERVAL_TYPE.HOUR_2, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.4hr'}), value: ENUM_INTERVAL_TYPE.HOUR_4, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.12hr'}), value: ENUM_INTERVAL_TYPE.HOUR_12, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.1d'}), value: ENUM_INTERVAL_TYPE.DAY_1, },\n      { label: intl.formatMessage({id: 'tvchar.resolutions.1w'}), value: ENUM_INTERVAL_TYPE.WEEK_1, },\n    ]\n    let selected = _.find(invetvalMapping, item => item.value.getValue() === interval)\n    return (\n      <Flex height={30} px={12} bg='border' color='c1' alignItems=\"center\" justifyContent=\"space-between\">\n        <Box mr={2} lineHeight={'12px'} className=\"tvchart-ops with-corner\"\n          onClick={() => {\n            let options = invetvalMapping.map(item => item.label)\n            ActionSheet.showActionSheetWithOptions(\n              {\n                options: [...options, intl.formatMessage({id: 'cancel'})],\n                cancelButtonIndex: options.length,\n                maskClosable: true,\n              },\n              index => {\n                let item = invetvalMapping[index]\n                if (!item) return\n                const interval = item.value.getValue()\n                this.setState({\n                  interval,\n                  lineType: 'Candle'\n                }, () => {\n                  // if (!window.localStorage) return;\n                  // window.localStorage.setItem('bn.lineType', type);\n                  // window.localStorage.setItem('bn.interval', interval);\n                  // window.localStorage.setItem('bn.intervalName', intervalName);\n                });\n              }\n            )\n          }}\n        >\n          {selected.label}\n        </Box>\n        <Box mr={2} lineHeight={'12px'} className=\"tvchart-ops with-corner\"\n          onClick={() => this.setState({ showIndicators: !showIndicators })}\n        >\n          <FormattedMessage id='indicator' />\n        </Box>\n        <Box mr={2} lineHeight={'12px'} className=\"tvchart-ops with-corner\"\n          onClick={() => this.setState({ showSetting: !showSetting })}\n        >\n          <FormattedMessage id='setting' />\n        </Box>\n        <Box mr={2} lineHeight={'12px'} className=\"tvchart-ops\"\n          onClick={() => this.setState({ fullScreen: !fullScreen })}\n        >\n          <Svg color=\"\" icon=\"iconquanping\" size=\".12rem\"></Svg>\n        </Box>\n      </Flex>\n    )\n  }\n\n  render() {\n    let { markets: { currentMarket }, ticker: { dayInfo }, persistData } = this.props\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, market, pricePrecision } = currentMarket\n    let { high, low, volume, differ, close, variation } = dayInfo\n\n    return (\n      <Box {...this.props}>\n        <Flex justifyContent=\"space-between\" padding=\"mainPadding\" sx={{\n          borderBottom: '1px solid',\n          borderBottomColor: 'border',\n        }}>\n          <Box>\n            <CurrentPair />\n            <Flex mt={'s1'} color={variation >= 0 ? 'c4' : 'c3'} alignItems=\"center\" fontWeight=\"medium\">\n              <Text fontSize={14}>{close.toFixed(pricePrecision)}</Text>\n              <Svg icon={variation >= 0 ? 'icon-arrow-up' : 'icon-arrow-down'} size=\".2rem\"></Svg>\n              <Text ml={'s2'} color=\"c2\">≈$ {utils.asLegalMoney(close, quoteToken, this.state.unit)}</Text>\n            </Flex>\n            <Flex mt={'s1'}>\n              <Text minWidth=\".4rem\" px=\"s1\" textAlign='center' bg={variation >= 0 ? 'c4' : 'c3'} color=\"white\" sx={{borderRadius: \".02rem\"}}>{differ.toFixed(pricePrecision)}</Text>\n              {/* <Text ml={'s1'} color={variation >= 0 ? 'c4' : 'c3'}>{numeral(variation).format('+0.00%')}</Text> */}\n            </Flex>\n          </Box>\n          <Box>\n            <Flex>\n              <Text color='c2' mt={'3px'} mr={'5px'}><FormattedMessage id='tvchar.baseInfo.high' /></Text>\n              <Text mt={'2px'}>{high}</Text>\n            </Flex>\n            <Flex>\n              <Text color='c2' mt={'3px'} mr={'5px'}><FormattedMessage id='tvchar.baseInfo.low' /></Text>\n              <Text mt={'2px'}>{low}</Text>\n            </Flex>\n            <Flex>\n              <Text color='c2' mt={'3px'} mr={'5px'}><FormattedMessage id='tvchar.baseInfo.volumn' /></Text>\n              <Text mt={'2px'}>{volume} {quoteToken}</Text>\n            </Flex>\n          </Box>\n        </Flex>\n        { this.renderTvOps() }\n        <TVChartContainer style={{height: `3.4rem`}}\n          locale={tvLocalMapping[persistData.locale]}\n          symbol={market}\n          lineType={this.state.lineType}\n          interval={this.state.interval}\n          showIndicatorsDialog={this.state.showIndicators}\n          showSettingDialog={this.state.showSetting}\n          visible={this.state.selectedView === views.TRADING_VIEW}\n          fullScreen={this.state.fullScreen}\n        />\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ markets, trade, ticker, persistData }) => {\n  return {\n    markets,\n    trade,\n    ticker,\n    persistData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TVChart);","import _ from 'lodash'\nimport numeral from 'numeral';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { withRouter } from \"react-router-dom\"\nimport { ActionSheet, List, Toast } from 'antd-mobile'\nimport { Svg } from 'components'\nimport { CoinInput, BillPreCheck } from 'widgets'\nimport utils from 'utils'\nconst BigNumber = require('bignumber.js');\n\nconst percentPositins = [ 0.25, 0.5, 0.75, 1 ]\n@injectIntl\nclass PlaceOrder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      side: 'BUY',\n      activeType: 'limitPrice'\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  onSelectType () {\n    let { intl } = this.props\n\n    const types = [\n      { text: intl.formatMessage({id: 'placeOrder.tabs.limitPrice'}), value: 'limitPrice' },\n      // { text: intl.formatMessage({id: 'placeOrder.tabs.marketPrice'}), value: 'marketPrice' },\n    ]\n    let options = types.map(t => t.text)\n    ActionSheet.showActionSheetWithOptions(\n      {\n        options: [...options, intl.formatMessage({id: 'cancel'})],\n        cancelButtonIndex: options.length,\n        maskClosable: true,\n      },\n      index => {\n        let type = types[index]\n        if (!type) return\n        this.setState({ activeType: type.value })\n      }\n    )\n  }\n\n  renderLimitBuyArea (min, available) {\n    let { markets, persistData: { locale }, history, intl } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n    let { placeOrder: { buyPrice, buyAmount, buyTotal }, updatePlaceOrder, placeBuyOrder } = this.props\n    let signined = utils.checkLogined()\n\n    let error = null\n    if (buyTotal) {\n      min = Number(min)\n      available = Number(available)\n      // 不能给buyTotal直接赋值，会导致无法再输入小数点。\n      // buyTotal = Number(buyTotal)\n      let total = Number(buyTotal)\n      if (total < min) {\n        error = intl.formatMessage({id: 'placeOrder.hint.buyLessThanMin'}, { min, quoteToken })\n      } else if (total > available) {\n        error = intl.formatMessage({id: 'placeOrder.hint.moreThanAvalable'}, { available, token: quoteToken })\n      }\n    }\n\n    return (\n      <>\n        <CoinInput\n          label={intl.formatMessage({id: \"placeOrder.input.label.buyPrice\"})}\n          unit={quoteToken}\n          precision={pricePrecision}\n          value={buyPrice}\n          onChange={value => {\n            let price = value\n            let buyTotal = (new BigNumber(buyAmount || 0)).times(new BigNumber(price || 0))\n            updatePlaceOrder({\n              // 不能用 price，会导致输入框的 0 不能删除。\n              buyPrice: price,\n              buyTotal: buyTotal.toFixed(totalPrecision)\n            })\n          }}\n        >\n        </CoinInput>\n        <Text mt=\"s1\" color=\"c2\">{`≈$${utils.asLegalMoney(buyPrice, quoteToken, 'USD')}`}</Text>\n        <CoinInput\n          mt=\"s2\"\n          label={intl.formatMessage({id: \"placeOrder.input.label.buySize\"})}\n          precision={amountPrecision}\n          value={buyAmount}\n          onChange={value => {\n            let amount = value\n            let total = (new BigNumber(amount || 0)).times(new BigNumber(buyPrice || 0))\n            updatePlaceOrder({\n              // 不能用 value，会导致输入框的 0 不能删除。\n              buyAmount: amount,\n              buyTotal: total.toFixed(totalPrecision),\n            })\n          }}\n          unit={baseToken}\n        >\n        </CoinInput>\n        <CoinInput\n          mt=\"s3\"\n          // 总额不能编辑，否则 UI 上要改为 stepper\n          disabled\n          label={intl.formatMessage({id: \"placeOrder.input.label.total\"})}\n          precision={totalPrecision}\n          max={available}\n          min={min}\n          unit={quoteToken}\n          value={buyTotal}\n          onChange={value => {\n            let total = value\n            let amount = buyPrice ? (new BigNumber(total || 0) / new BigNumber(buyPrice)) : 0\n            updatePlaceOrder({\n              buyAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n              // 不能用 total，会导致输入框的 0 不能删除。\n              buyTotal: total\n            })\n          }}\n        >\n        </CoinInput>\n        <Flex mt=\"s1\" variant=\"flexYCenter\">\n          <Text className=\"text-ellipsis\" color=\"c2\"><FormattedMessage id=\"placeOrder.title.available\" />{quoteToken}: 11111111111111111{available}</Text>\n          <Text flexShrink={0} color=\"c5\" onClick={() => {\n            history.push({ pathname: `/${locale}/transfer/create`, data: {\n              initialSymbol: quoteToken,\n              initialType: 'deposit',\n            }})\n          }}>\n            <FormattedMessage id=\"placeOrder.operations.transfer\" />\n          </Text>\n        </Flex>\n        <Flex variant=\"flexYCenter\" mt=\"s3\" >\n        {\n          percentPositins.map(percent => (\n            <Text key={percent} height=\"s3\" lineHeight={'lh3'} bg=\"#f5f5f5\" color=\"c2\"\n              sx={{\n                width: '.43rem',\n                borderRadius: \".01rem\",\n                textAlign: 'center'\n              }}\n              onClick={() => {\n                let total = available * percent\n                let amount = buyPrice ? (new BigNumber(total || 0) / new BigNumber(buyPrice)) : 0\n                updatePlaceOrder({\n                  // 如果余额够，则向上取整，因为有可能不到最低购买额度。否则（实际上只会有total === available的场景）则向下取整，防止取整后超过可用额度。\n                  buyAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n                  // 不能用 total，会导致输入框的 0 不能删除。\n                  buyTotal: total >= available ? _.floor(total, totalPrecision) : _.ceil(total, totalPrecision),\n                })\n              }}\n            >\n              {numeral(percent).format('0%')}\n            </Text>\n          ))\n        }\n        </Flex>\n        <BillPreCheck onSuccess={() => {\n          if (buyTotal && !!error) {\n            Toast.fail(error)\n            return\n          }\n          placeBuyOrder()\n        }}>\n          <Flex variant=\"flexCenter\" height=\".35rem\" mt=\"s3\" sx={{\n              flex: 1,\n              borderRadius: \".02rem\",\n              bg: \"c4\",\n              color: 'white'\n            }}>\n            {signined ? `${intl.formatMessage({id: 'buy'})}${baseToken}` : `${intl.formatMessage({id: 'placeOrder.hint.loginAndTrade'})}`}\n          </Flex>\n        </BillPreCheck>\n      </>\n    )\n  }\n\n  renderLimitSaleArea (min, available) {\n    let { markets, persistData: { locale }, history, intl } = this.props\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken, pricePrecision, amountPrecision, totalPrecision } = currentMarket\n    let { placeOrder: { sellPrice, sellAmount, sellTotal }, updatePlaceOrder, placeSellOrder } = this.props\n    let signined = utils.checkLogined()\n\n    let error = null\n    if (sellAmount) {\n      min = Number(min)\n      available = Number(available)\n      // 不能给 sellAmount 直接赋值，会导致无法再输入小数点。\n      // sellAmount = Number(sellAmount)\n      let amount = Number(sellAmount)\n      if (amount < min) {\n        error = intl.formatMessage({id: 'placeOrder.hint.saleLessThanMin'}, { min, baseToken })\n      } else if (amount > available) {\n        error = intl.formatMessage({id: 'placeOrder.hint.moreThanAvalable'}, { available, token: baseToken })\n      }\n    }\n\n    return (\n      <>\n        <CoinInput\n          label={intl.formatMessage({id: \"placeOrder.input.label.sellPrice\"})}\n          unit={quoteToken}\n          precision={pricePrecision}\n          value={sellPrice}\n          onChange={value => {\n            let price = value\n            let sellTotal = (new BigNumber(sellAmount || 0)).times(new BigNumber(price || 0))\n            updatePlaceOrder({\n              // 不能用 price，会导致输入框的 0 不能删除。\n              sellPrice: price,\n              sellTotal: sellTotal.toFixed(totalPrecision)\n            })\n          }}\n        >\n        </CoinInput>\n        <Text mt=\"s1\" color=\"c2\">{`≈$${utils.asLegalMoney(sellPrice, quoteToken, 'USD')}`}</Text>\n        <CoinInput\n          mt=\"s2\"\n          label={intl.formatMessage({id: \"placeOrder.input.label.sellSize\"})}\n          precision={amountPrecision}\n          value={sellAmount}\n          onChange={value => {\n            let amount = value\n            let total = (new BigNumber(amount || 0)).times(new BigNumber(sellPrice || 0))\n            updatePlaceOrder({\n              // 不能用 amount，会导致输入框的 0 不能删除。\n              sellAmount: amount,\n              sellTotal: total.toFixed(totalPrecision),\n            })\n          }}\n          unit={baseToken}\n        >\n        </CoinInput>\n        <CoinInput\n          mt=\"s3\"\n          disabled\n          label={intl.formatMessage({id: \"placeOrder.input.label.total\"})}\n          precision={totalPrecision}\n          max={available}\n          min={min}\n          unit={quoteToken}\n          value={sellTotal}\n          onChange={value => {\n            let total = value\n            let amount = sellPrice ? (new BigNumber(total || 0) / new BigNumber(sellPrice)) : 0\n            updatePlaceOrder({\n              sellAmount: total >= available ? _.floor(amount, amountPrecision) : _.ceil(amount, amountPrecision),\n              // 不能用 total，会导致输入框的 0 不能删除。\n              sellTotal: total\n            })\n          }}\n        >\n        </CoinInput>\n        <Flex mt=\"s1\" variant=\"flexYCenter\">\n          <Text className=\"text-ellipsis\" color=\"c2\"><FormattedMessage id=\"placeOrder.title.available\" />{baseToken}: {available}</Text>\n          <Text flexShrink={0} color=\"c5\" onClick={() => {\n            history.push({ pathname: `/${locale}/transfer/create`, data: {\n              initialSymbol: baseToken,\n              initialType: 'deposit',\n            }})\n          }}>\n            <FormattedMessage id=\"placeOrder.operations.transfer\" />\n          </Text>\n        </Flex>\n        <Flex variant=\"flexYCenter\" mt=\"s3\" >\n        {\n          percentPositins.map(percent => (\n            <Text key={percent} height=\"s3\" lineHeight={'lh3'} bg=\"#f5f5f5\" color=\"c2\"\n              sx={{\n                width: '.43rem',\n                borderRadius: \".01rem\",\n                textAlign: 'center'\n              }}\n              onClick={() => {\n                let amount = available * percent\n                let total = (new BigNumber(amount || 0)).times(new BigNumber(sellPrice || 0))\n                updatePlaceOrder({\n                  // 不能用 amount，会导致输入框的 0 不能删除。\n                  sellAmount: _.floor(amount, amountPrecision),\n                  sellTotal: total.toFixed(totalPrecision),\n                })\n              }}\n            >\n              {numeral(percent).format('0%')}\n            </Text>\n          ))\n        }\n        </Flex>\n        <BillPreCheck onSuccess={() => {\n          if (sellAmount && !!error) {\n            Toast.fail(error)\n            return\n          }\n          placeSellOrder()\n        }}>\n          <Flex variant=\"flexCenter\" height=\".35rem\" mt=\"s3\" sx={{\n              flex: 1,\n              borderRadius: \".02rem\",\n              bg: 'c3',\n              color: 'white'\n            }}>\n            {signined ? `${intl.formatMessage({id: 'sell'})}${baseToken}` : `${intl.formatMessage({id: 'placeOrder.hint.loginAndTrade'})}`}\n          </Flex>\n        </BillPreCheck>\n      </>\n    )\n  }\n\n  getMinTradeValue (symbol) {\n    let mapping = {\n      'USDT': 2,\n      'LRC': 100,\n      'ETH': 0.01,\n      'DKEY': 10,\n    }\n    return mapping[symbol] || 0\n  }\n\n  render() {\n    let { side } = this.state\n    let { markets: { currentMarket }, balance: { list: balances }, intl } = this.props\n    if (!currentMarket) return <></>\n\n    let { baseToken, quoteToken } = currentMarket\n    let baseBalance = _.find(balances, balance => balance.token.symbol === baseToken)\n    let quoteBalance = _.find(balances, balance => balance.token.symbol === quoteToken)\n    let availBase = baseBalance ? baseBalance.availAmount : 0\n    let availQuote = quoteBalance ? quoteBalance.availAmount : 0\n\n    return (\n      <Box {...this.props}>\n        <Flex fontSize=\"f2\" width=\"100%\">\n          <Flex variant=\"flexCenter\" height=\".3rem\" sx={{\n            flex: 1,\n            borderRadius: \".02rem\",\n            bg: side === 'BUY' ? 'c4' : \"#F0F0F0\",\n            color: side === 'BUY' ? 'white' : \"c1\",\n          }} onClick={() => this.setState({side: 'BUY'})}>\n            <FormattedMessage id=\"buy\" />\n          </Flex>\n          <Flex variant=\"flexCenter\" height=\".3rem\" sx={{\n            flex: 1,\n            borderRadius: \".02rem\",\n            bg: side === 'SELL' ? 'c3' : \"#F0F0F0\",\n            color: side === 'SELL' ? 'white' : \"c1\",\n          }} onClick={() => this.setState({side: 'SELL'})}>\n            <FormattedMessage id=\"sell\" />\n          </Flex>\n        </Flex>\n\n        <Flex color=\"c1\" py=\"mainPadding\" width=\"fit-content\" onClick={() => this.onSelectType()}>\n          <Text>{intl.formatMessage({id: `placeOrder.tabs.${this.state.activeType}`})}{side === 'BUY' ? '买入' : '卖出'}</Text>\n          <Svg color=\"\" icon=\"icon-xiala-copy\" size=\".16rem\"></Svg>\n        </Flex>\n        {\n          side === 'BUY' ?\n            this.renderLimitBuyArea(this.getMinTradeValue(quoteToken), availQuote)\n            :\n            this.renderLimitSaleArea(this.getMinTradeValue(baseToken), availBase)\n        }\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ placeOrder, markets, balance, dexAccount, rate, persistData }) => {\n  return {\n    placeOrder,\n    markets,\n    balance,\n    dexAccount,\n    rate,\n    persistData\n  };\n};\n\nconst mapDispatchToProps = ({ placeOrder }) => {\n  return {\n    placeBuyOrder: placeOrder.placeBuyOrder,\n    placeSellOrder: placeOrder.placeSellOrder,\n    updatePlaceOrder: placeOrder.update\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PlaceOrder))","import React, { forwardRef, useEffect, useState, useImperativeHandle, useRef } from 'react'\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { QhStepper } from 'components';\nimport utils, { renderIf } from 'utils';\nimport { ActionSheet, List, Stepper } from 'antd-mobile'\n\nconst CoinInput = ({\n  label,\n  min = 0,\n  max = Math.Infinity,\n  precision = 6,\n  value,\n  onChange,\n  disabled,\n  unit,\n  ...restProps\n}) => {\n  const [focused, setFocused] = useState(false)\n  let hideLabel = focused || value\n\n  return (\n    <Flex {...restProps} sx={{ position: \"relative\" }}>\n      <Text sx={{\n        position: \"absolute\",\n        left: disabled ? '.03rem' : \".3rem\",\n        top: '.08rem',\n        // pr: 's1',\n        [`p${disabled ? 'r' : 'l'}`]: 's1',\n        fontWeight: 'medium',\n        lineHeight: '.2rem',\n        height: '.2rem',\n        color: 'c2',\n        // borderLeft: '1px solid #F0F0F0'\n        [`border${disabled ? 'Right' : 'Left'}`]: '1px solid #F0F0F0'\n      }}>{(hideLabel && !disabled) ? '' : label}</Text>\n\n      {renderIf(disabled)(\n        <Text sx={{\n          border: '1px solid #F0F0F0',\n          borderRadius: '3px',\n          width: '100%',\n          height: '.35rem',\n          lineHeight: '.35rem',\n          textAlign: \"center\",\n          boxSizing: 'content-box'\n        }}>{value}</Text>\n      )}\n      {renderIf(!disabled)(\n        <QhStepper\n          width={hideLabel ? '1.1rem' : '.55rem'}\n          className=\"place-order-stepper\"\n          showNumber\n          max={max}\n          min={min}\n          precision={precision}\n          value={value}\n          onKeyPress={(e)=>{\n            // if (e.key === 'Backspace' || e.key === 'Delete') return\n            if (!/^[0-9a-zA-Z]+$/.test(e.key)) return\n\n            let value = e.target.value || ''\n            let { selectionStart, selectionEnd } = e.currentTarget\n            if (selectionStart !== selectionEnd) {\n              // 实际上不用 else 分支，如下操作包含selectionStart和selectionEnd相等的情况。此处只是便于阅读。\n              value = value.slice(0, selectionStart) + e.key + value.slice(selectionEnd)\n            } else {\n              // 需要查到光标位置。如果直接拼在最后面的话，会影响 precision 的判断.\n              value = value.slice(0, selectionStart) + e.key + value.slice(selectionStart)\n            }\n\n            let valueAsNumber = Number(value)\n            if (!_.isNumber(valueAsNumber) || isNaN(valueAsNumber)) {\n              e.preventDefault()\n              return\n            }\n\n            // fix: 这里必须直接拿字符串判断，不能转换成 Number 后判断。否则 0.0100000000，转成数字后，后面的 0 会被舍弃，用户就可以一直输入。\n            if (utils.getPrecision(value) > precision) {\n              e.preventDefault()\n              return\n            }\n          }}\n          onChange={onChange}\n          onBlur={() => setFocused(false)}\n          onFocus={() => setFocused(true)}\n        />\n      )}\n\n      <Text sx={{\n        position: \"absolute\",\n        right: disabled ? '.03rem' : \".3rem\",\n        top: '.08rem',\n        [`p${disabled ? 'l' : 'r'}`]: 's1',\n        fontWeight: 'medium',\n        lineHeight: '.2rem',\n        color: 'c2',\n        borderRight: `${disabled ? 0 : 1}px solid #F0F0F0`\n      }}>{unit}</Text>\n    </Flex>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CoinInput);","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: {}\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      activeTab: this.props.tabs[0]\n    })\n  }\n\n  // componentWillReceiveProps (newProps) {\n  //   if (this.props.tabs !== newProps.tabs) {\n  //     this.setState({\n  //       activeTab: newProps.tabs[0]\n  //     })\n  //   }\n  // }\n\n  async setActive (tab) {\n    await this.props.onChange(tab)\n    this.setState({\n      activeTab: tab\n    })\n  }\n\n  render() {\n    let { tabs, ...restProps } = this.props\n    let activeTabValue = this.state.activeTab && this.state.activeTab.value\n    return (\n      <Flex {...restProps} height=\".4rem\" alignItems='center' justifyContent='space-between' >\n        {\n          tabs.map(tab => (\n            <Flex flex={1} key={tab.text} height=\"100%\" alignItems='center' justifyContent='center'\n              sx={{\n                borderTop: '1px solid',\n                borderTopColor: 'border',\n                borderBottom: '1px solid',\n                borderBottomColor: tab.value === activeTabValue ? 'c5': 'border',\n                cursor: 'pointer'\n              }} onClick={() => this.setActive(tab)}>\n              <Text fontSize=\"f1\">{tab.text}</Text>\n            </Flex>\n          ))\n        }\n        { this.props.children }\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  null,\n  {forwardRef: true}\n)(Widget);","import React from 'react';\nimport { connect } from 'react-redux';\nimport numeral from 'numeral'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { withRouter } from \"react-router-dom\"\nimport { Svg } from 'components'\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    let { history, markets: marketsStore, ticker: { dayInfo }, starMarket, tabs, contentSx = {}, fetchCurrentMarkets, updateAppState, ...restProps } = this.props\n    let { currentMarket } = marketsStore\n    let { variation } = dayInfo\n\n    if (!currentMarket) return <></>\n    let haveStar = _.find(marketsStore.stars, {market: currentMarket.market})\n    return (\n        <Flex alignItems=\"center\" >\n          <Flex alignItems=\"center\" color=\"#505050\">\n            <Svg color=\"#505050\" icon=\"iconliebiaozhankai\" size=\".18rem\"></Svg>\n            <Text ml=\".04rem\" fontSize=\"f3\" lineHeight=\"lh3\" fontWeight=\"semibold\" onClick={() => {\n              fetchCurrentMarkets()\n              updateAppState({showMarketDrawer: true})\n            }}>{currentMarket.baseToken}/{currentMarket.quoteToken}</Text>\n            <Text ml={'s1'} px={'s2'} fontSize=\"f1\" lineHeight=\"lh1\"\n              color={variation >= 0 ? 'c4' : 'c3'} bg={variation >= 0 ? 'rgba(80, 190, 140, 0.15)' : 'rgba(240, 80, 90, 0.15)'}\n              sx={{borderRadius: '.03rem'}}>\n              {numeral(variation).format('+0.00%')}\n            </Text>\n          </Flex>\n          <Flex ml=\"s2\" alignItems=\"center\" onClick={() => {\n            starMarket(currentMarket)\n          }}>\n            {/* <Svg color={haveStar ? '#0078FF' : '#c8c8c8'} icon=\"icon-Starlargegray\" size=\".17rem\" /> */}\n          </Flex>\n        </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = ({markets, ticker}) => {\n  return {\n    markets, ticker\n  };\n};\n\nconst mapDispatchToProps = ({markets, appState}) => {\n  return {\n    starMarket: markets.starMarket,\n    updateAppState: appState.update,\n    fetchCurrentMarkets: markets.fetchCurrentMarkets\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Widget))","import _ from 'lodash'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { store } from 'store'\nimport { Provider } from 'react-redux'\nimport { IntlProvider } from 'react-intl'\nimport { messages } from 'locales'\n\n/*\n * 这里创建的窗体是在App容器包裹之外的，无法使用redux，所以需要使用provider包裹\n*/\nexport default function funcfy (Component, props) {\n  var div = document.createElement('div')\n  \n  function destroy () {\n    var unmountResult = ReactDOM.unmountComponentAtNode(div)\n    if (unmountResult && div.parentNode) {\n        div.parentNode.removeChild(div)\n    }\n  }\n\n  function render () {\n    let rootState = store.getState()\n    let { persistData: { locale } } = rootState\n\n    ReactDOM.render(\n      <IntlProvider locale={locale} key={locale} messages={messages[locale]}>\n        <Provider store={store}>\n          <Component {...props} onDestory={() => destroy()}>\n          </Component>\n        </Provider>\n      </IntlProvider>\n    , div)\n  }\n\n  render()\n}\n","import moment from \"moment\"\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport { Modal, List, InputItem, Toast, Checkbox, Button, WhiteSpace } from 'antd-mobile'\nimport { createForm } from 'rc-form';\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport funcfy from './funcfyDialog'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport utils from 'utils'\nimport { FormErrorInfo } from 'widgets/Common'\nimport { UpsertPasswordModal } from '../Dialog'\nimport api from 'api'\nconst prompt = Modal.prompt\nconst AgreeItem = Checkbox.AgreeItem;\n\n@injectIntl\nclass Widget extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      visible: false,\n      errors: []\n    }\n\n    let { intl } = props\n    this.errorInfos = [\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.upperCase'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.lowerCase'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.number'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.min'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.pwdSame'})\n    ]\n  }\n\n  componentDidMount () {\n    this.setState({ visible: true })\n    this.checkInput()\n  }\n\n  async checkInput () {\n    // 必须稍微等下，因为被接管后的表单虽然可以继续使用onChange事件，但是onChange触发时，表单的校验结果可能还没做完。\n    await utils.waitFor(50)\n\n    // 修改表单校验的规则：如果没有输入任何东西，默认全部错误。而表单校验本身的规则是，不输入，则无错误。\n    let password = this.props.form.getFieldProps('password').value\n    if (!password) {\n      this.setState({errors: this.errorInfos})\n      return \n    }\n\n    let errors = this.props.form.getFieldsError()\n    errors = _.chain(errors)\n      .values()\n      .flatten()\n      .filter(error => error)\n      .value()\n    this.setState({errors})\n  }\n\n  async submit () {\n    let { dexAccount, intl } = this.props\n\n    let validateFields = utils.promisefy(this.props.form.validateFields)\n\n    let values\n    try {\n      values = await validateFields()\n    } catch(err) {\n      console.info(err)\n      return\n    }\n    let { password, remember } = values\n\n    const passwordHash = utils.genPasswordHash(dexAccount.address, password);\n    const relayAccount = await api.lightconeGetAccount(dexAccount.address);\n    console.info(password)\n    let valid = utils.checkPassword(passwordHash, relayAccount)\n    if (!valid) {\n      Toast.fail(intl.formatMessage({id: \"notify.signIn.error.mismatch\"}))\n      return\n    }\n\n    let accountId = relayAccount.accountId\n    let apiKey = await utils.genApiKey(accountId, passwordHash)\n    await this.props.updateAccount({\n      accountId,\n      passwordHash,\n      apiKey,\n      rememberMeStartTime: moment().format('YYYY-MM-DD HH:mm:ss'),\n      rememberMeMinutes: (remember ? 24 : 1) * 60,\n    })\n\n    if (relayAccount.isFreeze) {\n      this.props.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOCKED.getValue()})\n      Toast.success(intl.formatMessage({id: \"notify.signIn.error.locked\"}))\n\n    } else {\n      this.props.updateAccount({ state: ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()})\n      this.props.startFetchBalance()\n      this.props.fetchOrders()\n\n      Toast.success(intl.formatMessage({id: \"notify.signIn.success\"}))\n    }\n    this.loginSunccess()\n  }\n\n  async loginSunccess () {\n    this.setState({visible: false})\n    this.props.onSucess()\n    this.props.onDestory()\n  }\n\n  render () {\n    let { dexAccount: { state }, intl } = this.props\n    let modalTitle = ENUM_ACCOUNT_STATUS.UNCREATED.equals(state) ? \n      intl.formatMessage({id: `modal.signin.title.create`}) : \n      intl.formatMessage({id: `modal.signin.title.verify`})\n\n    const { getFieldDecorator, getFieldsValue } = this.props.form;\n    let { remember } = getFieldsValue()\n    \n    return (\n      <Modal \n        className=\"signin-modal\"\n        // bodyStyle={{backgroundColor: '#363636', color: '#d0d0d0'}}\n        title={modalTitle}\n        // transparent\n        visible={this.state.visible}\n        maskClosable={true}\n        footer={[\n          {text: intl.formatMessage({id: \"confirm\"}), onPress: () => utils.withLoading(() => this.submit())},\n          {text: intl.formatMessage({id: \"cancel\"}), onPress: () => {\n            this.setState({visible: false})\n            this.props.onFail()\n            this.props.onDestory()\n          }},\n          {text: intl.formatMessage({id: \"modal.signin.label.forget\"}), onPress: () => {\n            this.props.onFail()\n            this.props.onDestory()\n            UpsertPasswordModal()\n          }}\n        ]}\n      >\n        <List>\n          {getFieldDecorator('password', {\n            rules: [\n              { required: true, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.required'}) },\n              { pattern: /[A-Z]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.upperCase'}) },\n              { pattern: /[a-z]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.lowerCase'}) },\n              { pattern: /[0-9]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.number'}) },\n              { min: 8, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.min'}) },\n            ],\n          })(\n            <InputItem\n              type=\"password\"\n              placeholder=\"***\"\n              error={this.state.errors[0]}\n              onErrorClick={() => Toast.info(this.state.errors[0], 1)}\n              onChange={() => this.checkInput()}\n            >\n              {intl.formatMessage({id: \"password\"})}\n            </InputItem>\n          )}\n        </List>\n        <Box px=\"15px\" mt={20}>\n          <FormErrorInfo errors={this.state.errors} items={this.errorInfos} />\n        </Box>\n      </Modal>\n    )\n  }\n}\nconst WrappedForm = createForm({ withRef: true, name: 'sign_in_form'  })(Widget);\n\nconst mapStateToProps = ({ metaMask, dexAccount }) => {\n  return {\n    metaMask,\n    dexAccount\n  };\n};\nconst mapDispatchToProps = ({ dexAccount, balance, order }) => {\n  return {\n    updateAccount: dexAccount.updateAccount,\n    startFetchBalance: balance.startFetchBalance,\n    fetchOrders: order.fetchOrders,\n  };\n};\nlet connectedWidget = connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(WrappedForm)\n\nexport default function promisefy (props) {\n  return new Promise((resolve, reject) => {\n    funcfy(connectedWidget, {\n      ...props,\n      onSucess: resolve,\n      onFail: reject,\n    })\n  })\n}","import _ from 'lodash'\nimport moment from \"moment\"\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport { Modal, List, InputItem, Toast, Checkbox, Slider, WhiteSpace } from 'antd-mobile'\nimport { createForm } from 'rc-form';\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport { Account, config, common, Utils } from 'librarys/lightcone_v3';\nimport funcfy from './funcfyDialog'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport utils, { renderIf } from 'utils'\nimport api from 'api'\nimport { FormErrorInfo } from 'widgets/Common'\nimport BigNumber from \"bignumber.js\"\nconst AgreeItem = Checkbox.AgreeItem;\n\nconst gasLimitInWEI = BigNumber(config.getGasLimitByType(\"create\").gasInWEI)\nconst createAccountFee = BigNumber(utils.fromWEI('ETH', config.getFeeByType('create').feeInWEI))\n\n@injectIntl\nclass Widget extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      errors: [],\n      visible: false,\n      recommendedGasEth: [0, 0, 0],\n    }\n\n    let { intl } = props\n    this.errorInfos = [\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.upperCase'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.lowerCase'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.number'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.min'}),\n      intl.formatMessage({id: 'modal.upsertPwd.errorInfo.pwdSame'})\n    ]\n  }\n\n  componentDidMount () {\n    this.setState({ visible: true })\n    this.checkInput()\n    this.props.fetchWalletBalances()\n\n    api.getRecommendedGasPrice().then(resp => {\n      let [min, normal, max] = resp\n      let minGas = config.fromWEI('ETH', BigNumber(min).times(gasLimitInWEI), 6)\n      let normalGas = config.fromWEI('ETH', BigNumber(normal).times(gasLimitInWEI), 6)\n      let maxGas = config.fromWEI('ETH', BigNumber(max).times(gasLimitInWEI), 6)\n\n      this.setState({recommendedGasEth: [Number(minGas), Number(normalGas), Number(maxGas)]})\n    })\n  }\n\n  async checkInput () {\n    let { intl } = this.props\n\n    // 必须稍微等下，因为被接管后的表单虽然可以继续使用onChange事件，但是onChange触发时，表单的校验结果可能还没做完。\n    await utils.waitFor(50)\n\n    // 修改表单校验的规则：如果没有输入任何东西，默认全部错误。而表单校验本身的规则是，不输入，则无错误。\n    let password = this.props.form.getFieldProps('password').value\n    if (!password) {\n      this.setState({errors: this.errorInfos})\n      return \n    }\n    \n    let errors = this.props.form.getFieldsError()\n    console.info(errors)\n    errors = _.chain(errors)\n    .values()\n    .flatten()\n    .filter(error => error)\n    .value()\n    \n    let confirmPassword = this.props.form.getFieldProps('confirmPassword').value\n    if (password !== confirmPassword) errors.push(intl.formatMessage({id: 'modal.upsertPwd.errorInfo.pwdSame'}))\n    this.setState({errors})\n  }\n\n  async submit () {\n    let { intl } = this.props\n\n    let validateFields = utils.promisefy(this.props.form.validateFields)\n    let values\n    try {\n      values = await validateFields()\n    } catch(err) {\n      return\n    }\n    // let { password, remember, gasEth = 0 } = values\n    // gasEth 本来从”表单校验对象“中取，现在写死。\n    let { password, remember } = values\n    let gasEth = this.state.recommendedGasEth[1]\n    let ethAvail = this.getEthAvail()\n    console.info({gasEth, ethAvail})\n    // if (gasEth >= ethAvail) return\n  \n    let { type = 'modify', dexAccount, updateAccount, checkAccountCreated } = this.props\n    const passwordHash = utils.genPasswordHash(dexAccount.address, password);\n    const nonce = await api.getNonce(window.wallet.account);\n    const exchangeAccount = new Account(window.wallet);\n\n    let gasEthInWEI = utils.toWEI('ETH', gasEth)\n    let gasPriceInWEI = BigNumber(gasEthInWEI).dividedBy(gasLimitInWEI)\n    const resp = await exchangeAccount.createOrUpdateAccount(\n      passwordHash,\n      nonce,\n      common.formatter.toGWEI(gasPriceInWEI)\n    );\n    \n    const signedEthereumTx = resp['signedTx'];\n    const keyPair = resp['keyPair'];\n    \n    if (keyPair.secretKey === undefined) {\n      throw new Error(\n        'Failed to parse the response of account creation.'\n      );\n    }\n    \n    // console.log('signedEthereumTx: ', signedEthereumTx);\n    // const response = await api.sendDeposit(signedEthereumTx);\n    // if (!response) return\n    // const data = response['result'];\n    // // TODO: Remove response\n    // console.log('Response of createOrUpdateAccount: ', data);\n\n    Toast.success(intl.formatMessage({id: `notify.account.${type}.success`}))\n\n    updateAccount({\n      // TODO: 直接换浏览器，重置密码。那accountId如何存入 store?\n      // accountId: relayAccount.accountId,\n      state: ENUM_ACCOUNT_STATUS.CREATING.getValue(),\n      passwordHash,\n      rememberMeStartTime: moment().format('YYYY-MM-DD HH:mm:ss'),\n      rememberMeMinutes: (remember ? 24 : 1) * 60,\n    })\n    checkAccountCreated()\n\n    this.loginSunccess()\n  }\n\n  async loginSunccess () {\n    this.setState({visible: false})\n    this.props.onSucess()\n    this.props.onDestory()\n  }\n\n  getEthAvail () {\n    let { type = 'modify', walletBalance } = this.props\n    let ethBalance = _.find(walletBalance.list, b => b.symbol === 'ETH')\n    let ethAmount = ethBalance ? ethBalance.amount : 0\n    if (type === 'create') {\n      return _.max(ethAmount - createAccountFee, 0)\n    } else {\n      return ethAmount\n    }\n  }\n\n  render () {\n    let { type = 'modify', intl } = this.props\n    const { getFieldDecorator, getFieldsValue } = this.props.form;\n    let { remember, gasEth } = getFieldsValue()\n    let { recommendedGasEth } = this.state\n    let gasEthForShow = gasEth || recommendedGasEth[1]\n    let ethAvail = this.getEthAvail()\n\n    let errMessage = gasEth >= ethAvail ? `矿工费不能超过钱包中的可用余额 ${ethAvail}ETH` : ''\n    return (\n      <Modal\n        className=\"upsert-password-modal\"\n        // bodyStyle={{backgroundColor: '#363636', color: '#d0d0d0'}}\n        title={intl.formatMessage({id: `modal.upsertPwd.title.${type}`})}\n        // transparent\n        visible={this.state.visible}\n        maskClosable={true}\n        footer={[\n          {text: intl.formatMessage({id: `confirm`}), onPress: () => utils.withLoading(() => this.submit())},\n          {text: intl.formatMessage({id: `cancel`}), onPress: () => {\n            this.setState({visible: false})\n            this.props.onFail()\n            this.props.onDestory()\n          }},\n        ]}\n      >\n        <List>\n          {getFieldDecorator('password', {\n            rules: [\n              { required: true, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.required'}) },\n              { pattern: /[A-Z]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.upperCase'}) },\n              { pattern: /[a-z]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.lowerCase'}) },\n              { pattern: /[0-9]+/, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.number'}) },\n              { min: 8, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.min'}) },\n            ],\n          })(\n            <InputItem\n              type=\"password\"\n              placeholder=\"***\"\n              error={this.state.errors[0]}\n              onErrorClick={() => Toast.info(this.state.errors[0], 1)}\n              onChange={() => this.checkInput()}\n            >\n              {intl.formatMessage({id: `modal.upsertPwd.label.pwd.${type}`})}\n            </InputItem>\n          )}\n          {getFieldDecorator('confirmPassword', {\n            rules: [\n              { required: true, message: intl.formatMessage({id: 'modal.upsertPwd.errorInfo.required'}) },\n              {\n                validator: (rule, value, callback) => {\n                  const { form } = this.props;\n                  if (value && value !== form.getFieldValue('password')) {\n                    callback(intl.formatMessage({id: 'modal.upsertPwd.errorInfo.pwdSame'}));\n                  } else {\n                    callback();\n                  }\n                }\n              }\n            ],\n          })(\n            <InputItem\n              type=\"password\"\n              placeholder=\"***\"\n              error={this.state.errors[0]}\n              onErrorClick={() => Toast.info(this.state.errors[0], 1)}\n              onChange={() => this.checkInput()}\n            >\n              {intl.formatMessage({id: `modal.upsertPwd.label.confirmPwd.${type}`})}\n            </InputItem>\n          )}\n          {renderIf(type === 'create')(\n            <InputItem\n              disabled\n              placeholder=\"0.00\"\n              value={0.005}\n              extra={`ETH`}\n            >\n              {intl.formatMessage({id: `modal.upsertPwd.label.registerFee`})}\n            </InputItem>\n          )}\n          {/* <InputItem\n            placeholder=\"0.00\"\n            value={gasEthForShow}\n            extra={`ETH`}\n            error={errMessage}\n            onErrorClick={() => Toast.info(errMessage, 1)}\n          >\n            {intl.formatMessage({id: `modal.upsertPwd.label.minerFee`})}\n          </InputItem>\n          <List.Item align=\"top\">\n            <Box px=\"12px\" pt=\"10px\" height=\"50px\">\n              {getFieldDecorator('gasEth', {\n                initialValue: recommendedGasEth[1]\n              })(\n                <Slider size=\"small\" prefixCls=\"gas-slider am-slider\"\n                  handleStyle={{\n                    height: '18px',\n                    width: '18px',\n                    marginLeft: '-9px',\n                    marginTop: '-7px',\n                  }}\n                  min={recommendedGasEth[0]} max={recommendedGasEth[2]} marks={{\n                  [recommendedGasEth[0]]: '慢',\n                  // [recommendedGasEth[1]]: '一般',\n                  [recommendedGasEth[2]]: '快',\n                }} step={0.000001} />\n              )}\n            </Box>\n          </List.Item> */}\n          {/* <List.Item>\n            {getFieldDecorator('remember', {})(\n              <AgreeItem>记住密码</AgreeItem>\n            )}\n            { remember && (<Text lineHeight={'30px'} fontSize={14} color=\"#969696\" ml={'6px'}>24 小时内交易无需输入密码</Text>) }\n          </List.Item> */}\n        </List>\n        <Box px=\"15px\" mt={20}>\n          <FormErrorInfo errors={this.state.errors} items={this.errorInfos} />\n        </Box>\n        <Flex px=\"15px\" flexDirection=\"column\" alignItems=\"flex-start\" textAlign=\"left\">\n          {\n            renderIf(type === 'create')(\n              <Flex flexDirection=\"column\" alignItems=\"flex-start\">\n                <Text mt={30} color={\"#969696\"} fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.upsertPwd.create.minerFee.hint1'})}</Text>\n                <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.upsertPwd.create.minerFee.hint2'})}</Text>\n              </Flex>\n            )\n          }\n          {\n            renderIf(type === 'modify')(\n              <Flex flexDirection=\"column\" alignItems=\"flex-start\">\n                <Text mt={30} color={\"#969696\"} fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.upsertPwd.modify.minerFee.hint1'})}</Text>\n                <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.upsertPwd.modify.minerFee.hint2'})}</Text>\n              </Flex>\n            )\n          }\n        </Flex>\n        {/* <Box pt={60} pb={68} justifyContent=\"center\">\n          <Box width={480} mx=\"auto\">\n            <Form className=\"upsert-password-form\" onSubmit={(e) => {\n              utils.withLoading(() => this.submit(e))\n            }}>\n\n\n              <Box mt={20}>\n                <Form.Item {...formItemLayout} label='矿工费'>\n                  <Input size=\"large\" disabled value={`${gasEthForShow} ETH ≈ $${utils.asLegalMoney(gasEthForShow, 'ETH', 'USD')}`} />\n                </Form.Item>\n              </Box>\n              {renderIf(gasEth >= ethAvail)(\n                <Box mt={15}>\n                  <Form.Item {...noLabelLayout}>\n                    <Text color=\"#F0505A\" lineHeight=\"14px\">{`矿工费不能超过钱包中的可用余额 ${ethAvail}ETH`}</Text>\n                  </Form.Item>\n                </Box>\n              )}\n              <Form.Item {...noLabelLayout}>\n                {getFieldDecorator('gasEth', {\n                  initialValue: recommendedGasEth\n                })(\n                  <Slider min={recommendedGasEth / 3} max={recommendedGasEth * 3} marks={{\n                    [recommendedGasEth / 3]: '慢',\n                    // [recommendedGasEth]: '中',\n                    [recommendedGasEth * 3]: '快',\n                  }} step={0.000001} />\n                )}\n              </Form.Item>\n              <Form.Item {...noLabelLayout}>\n                <Flex mt={10} justifyContent=\"space-between\">\n                  {getFieldDecorator('remember', {\n                    initialValue: false\n                  })(\n                    <Checkbox style={{color: '#1890ff', fontSize: '14px'}}>记住密码</Checkbox>\n                  )}\n                </Flex>\n                { remember && (<Text lineHeight={'30px'} fontSize={14} color=\"#969696\" ml={'6px'}>24 小时内交易无需输入密码</Text>) }\n              </Form.Item>\n              <Box mt={20}>\n                <Form.Item {...noLabelLayout}>\n                  <Button size=\"large\" style={{width: '100%'}} type=\"primary\" htmlType=\"submit\" >确定</Button>\n                </Form.Item>\n              </Box>\n            </Form>\n          </Box>\n        </Box> */}\n      </Modal>\n    )\n  }\n}\n\nconst WrappedForm = createForm({ withRef: true, name: 'upsert_password_form'  })(Widget);\n\nconst mapStateToProps = ({ metaMask, dexAccount, rate, walletBalance }) => {\n  return {\n    metaMask,\n    dexAccount,\n    rate,\n    walletBalance\n  };\n};\nconst mapDispatchToProps = ({ dexAccount, walletBalance }) => {\n  return {\n    updateAccount: dexAccount.updateAccount,\n    checkAccountCreated: dexAccount.checkAccountCreated,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n  };\n};\nlet connectedWidget = connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(WrappedForm)\n\nexport default function promisefy (props) {\n  console.info({props})\n  return new Promise((resolve, reject) => {\n    funcfy(connectedWidget, {\n      ...props,\n      onSucess: resolve,\n      onFail: reject,\n    })\n  })\n}","import _ from 'lodash';\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { SignInModal, UpsertPasswordModal } from '../Dialog'\nimport {\n  Box,\n  Flex,\n  Text\n} from 'rebass'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport { Modal } from 'antd-mobile'\nconst alert = Modal.alert\nimport { store } from 'store'\nimport utils from 'utils';\n\nconst Widget = forwardRef(({\n  disabled,\n  onSuccess = () => {},\n  children,\n  metaMask,\n  dexAccount,\n  signIn,\n  initAccountFromMetaMask\n}, ref) => {\n  const intl = useIntl()\n\n  const checkMetaMaskInstalled = () => {\n    let valid = metaMask.installed\n    if (valid) return true\n\n    return new Promise((resolve, reject) => {\n      alert(intl.formatMessage({id: \"modal.billPreCheck.metamask.line1\"}), intl.formatMessage({id: \"modal.billPreCheck.metamask.line2\"}), [\n        // { text: '取消', onPress: () => resolve(false)},\n        { text: intl.formatMessage({id: \"confirm\"}), onPress: () => resolve(false)},\n      ])\n    })\n  }\n\n  const checkNetwork = () => {\n    let { isDesiredNetwork } = metaMask\n\n    let invalidText = ''\n\n    if (!isDesiredNetwork) {\n      // invalidText = '您的MetaMask当前登录的是以太坊测试网，请切换到以太坊主网络。'\n      invalidText = intl.formatMessage({id: \"modal.billPreCheck.network\"})\n    }\n\n    if (!invalidText) return true\n\n    return new Promise((resolve, reject) => {\n      alert('提示', invalidText, [\n        // { text: '取消', onPress: () => resolve(false) },\n        { text: '确定', onPress: () => resolve(false) },\n      ])\n    })\n  }\n\n  const checkAddress = () => {\n    // 拉取完地址后，虽然 address 更新了，但是此次是 hook 的写法，当次内 address 仍然是 null。会报“无法获取MetaMask地址，请重试”\n    let rootState = store.getState()\n    let { address } = rootState.dexAccount\n\n    let invalidText = ''\n\n    if (!address) {\n      invalidText = intl.formatMessage({id: \"modal.billPreCheck.address\"})\n    }\n\n    if (!invalidText) return true\n\n    return new Promise((resolve, reject) => {\n      alert('提示', invalidText, [\n        // { text: '取消', onPress: () => resolve(false) },\n        { text: '确定', onPress: () => resolve(false) },\n      ])\n    })\n  }\n\n  const loadMetamask = async () => {\n    // 这里必须无条件调用 initAccountFromMetaMask。\n    // 因为有一种场景：关闭浏览器，切换地址，然后再打卡。那么这里是有 address 的，但是是老的。\n    // Metamask之前测试没问题，是因为 accountsChanged 和 networkChanged 有事在网页初始化时，就会自动被调用一次。\n    // 其实 DKEY 默认就是这种场景，所以必须不能判断。\n    // let { address } = dexAccount\n    // if (!address) {\n      // await initAccountFromMetaMask()\n    // }\n\n    let { enable } = metaMask\n    // enable表示已经获取到了地址。如果此处为空，说明用户拒绝了授权。\n    // 注意此处不是用 dexAccount的address，而是用的metaMask 的 enable。因为前者可能是缓存的，后者才能代表是否metamask 是否已获取到了地址。。\n    if (!enable) {\n      await initAccountFromMetaMask()\n    }\n    return true\n  }\n\n  const checkSignedIn = async () => {\n    // loadMetamask会获取地址，并获取账户的状态。而此次可能状态已经更新。\n    // 比如 account 在中继存在，需要登录，但此处dexAccount还没更新，所以要从dexAccount拿\n    let rootState = store.getState()\n    let { state } = rootState.dexAccount\n    let signined = utils.checkLogined()\n    if (signined) return true\n    \n    if (state === ENUM_ACCOUNT_STATUS.UNCREATED.getValue()) {\n      try {\n        await UpsertPasswordModal({type: 'create'})\n        return true\n      } catch (e) {\n        return false\n      }\n    } else if (state === ENUM_ACCOUNT_STATUS.UNSIGNED.getValue()) {\n      try {\n        await SignInModal()\n        return true\n      } catch (e) {\n        return false\n      }\n    }\n  }\n\n  useImperativeHandle(ref, () => ({\n    checkSignedIn,\n    check\n  }))\n\n  const check = async () => {\n    let passed = false\n    // 是否登录 metamask\n    passed = await checkMetaMaskInstalled()\n    if (!passed) return false\n\n    // 如果 metamask 还未获取到地址，则通过 MetaMask 获取地址，并初始化。（获取 MetaMask 地址，需要用户授权）\n    passed = await loadMetamask()\n    if (!passed) return false\n\n    // 检查网络\n    passed = await checkNetwork()\n    if (!passed) return false\n\n    // metamask 中是否已获取到正确的地址\n    passed = await checkAddress()\n    if (!passed) return false\n\n    // 地址是否已授权，且跟中继保存的公钥匹配\n    passed = await checkSignedIn()\n    if (!passed) return false\n\n    return true\n  }\n\n  return (\n    <div onClick={async () => {\n      if (disabled) return\n\n      let isValid = await check()\n      if (isValid) {\n        onSuccess()\n      }\n    }}>\n      {children}\n    </div>\n  )\n})\n\n\nconst mapStateToProps = ({ metaMask, dexAccount }) => {\n  return {\n    metaMask,\n    dexAccount\n  };\n};\n\nconst mapDispatchToProps = ({ dexAccount, metaMask }) => {\n  return {\n    initAccountFromMetaMask: metaMask.initAccountFromMetaMask,\n    signIn: dexAccount.signIn\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(Widget)","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { Svg } from 'components'\nimport utils from 'utils';\n\nconst Widget = ({errors, items}) => {\n  const intl = useIntl()\n\n  return (\n    <Box textAlign=\"left\">\n      <Text color=\"#969696\" fontSize={'.12rem'}>\n        {intl.formatMessage({id: \"modal.errorInfo.label\"})}\n      </Text>\n      {\n        _.map(items, item => {\n          let error = !!_.includes(errors, item)\n          return (\n            <Flex key={item} alignItems=\"center\">\n              <Text bg={error ? '#F0505A' : '#50BE8C'} sx={{\n                width: '.1rem',\n                height: '.1rem',\n                borderRadius: '50%'\n              }}></Text>\n              <Text lineHeight={'.2rem'} fontSize={'.12rem'} line color=\"#969696\" ml={'6px'}>{item}</Text>\n            </Flex>\n          )\n        })\n      }\n    </Box>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget);","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { InputItem } from 'antd-mobile'\nimport { Svg } from 'components'\nimport { renderIf } from 'utils'\n\nconst InputWidget = ({label, value, onChange = () => {}, placeholder, onClick = () => {}, type = 'input', disabled = true}) => {\n  return (\n    <Flex mt=\"s4\" variant=\"flexYCenter\" sx={{\n      padding: \"s2\",\n      border: `1px solid #F0F0F0`,\n      width: '100%',\n      height: '.46rem',\n      borderRadius: \"3px\",\n    }} onClick={onClick}>\n      <Box color=\"c2\" width=\".55rem\" pr=\".08rem\" sx={{\n        borderRight: `1px solid #F0F0F0`,\n        textAlign: 'center',\n      }}>{label}</Box>\n\n      {\n        disabled ? \n          <Box px=\"s2\" flex={1}>{value}</Box>\n        :\n          <InputItem\n            style={{fontSize: '.14rem', lineHeight: '.2rem', color: '#646464'}}\n            type=\"digit\"\n            size=\"small\"\n            value={value}\n            onChange={onChange}\n          ></InputItem>\n      }\n      \n      {\n        renderIf(type === 'select')(\n          <Svg color=\"#c8c8c8\" icon=\"icon-xiala-copy\" size=\".25rem\"></Svg>\n        )\n      }\n    </Flex>\n  )\n}\n\nexport default InputWidget","import styled from '@emotion/styled'\nimport numeral from 'numeral';\nimport {\n  Flex,\n  Box,\n} from 'rebass'\nconst DepthBg = styled(Box)(\n  {\n    position: \"absolute\",\n    opacity: 0.15,\n  },\n  ({percentage, gap, align = 'right'}) => ({\n    width: numeral(percentage).format('0%'),\n    top: gap ? '1px' : 0,\n    bottom: gap ? '1px' : 0,\n    left: (align === 'left') && '1px',\n    right: (align === 'right') && '1px',\n  })\n)\nexport default DepthBg;","import {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport styled from '@emotion/styled'\n\nconst TextEllipsis = styled(Text)`\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`\n\nexport {\n  TextEllipsis\n}\n","import _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { ActionSheet, Switch, WhiteSpace } from 'antd-mobile'\nimport utils, { renderIf, Toast } from 'utils';\nimport { TabNav } from './Common'\nimport { Svg, Spin } from 'components'\n\n@injectIntl\nclass MyOrder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {}\n  }\n\n  componentDidMount() {\n  }\n\n  onTabChange (tab) {\n    this.props.updateFilterCond({\n      type: tab.value,\n      page: 1,\n      pageSize: 50\n    })\n    this.props.fetchOrders()\n  }\n\n  onChangeShowAll (checked) {\n    this.props.updateFilterCond({\n      allMarket: checked,\n      page: 1,\n      pageSize: 50\n    })\n    this.props.fetchOrders()\n  }\n\n  renderOrder = function (row) {\n    let { intl, order, cancelAnOrders, fetchOrders } = this.props\n    \n    let { createdAt, hash, market, side, price, size, filledVolume, filledSize, filled, status } = row\n    let [baseSymbol, quoteSymbol] = market.split('-')\n    return (\n      <Box key={hash} mx=\"mainPadding\" py=\".06rem\" sx={{\n        borderTop: '1px solid',\n        borderTopColor: 'border',\n      }}>\n        <Flex justifyContent=\"space-between\">\n          <Box>{moment(createdAt).format('MM-DD HH:mm:ss')}</Box>\n          {\n            renderIf(order.cond.type === 'current')(\n              <Box color={row.filled === '100%' ? 'c2' : 'c5'} onClick={async () => {\n                if (row.filled === '100%') return\n                await cancelAnOrders(row)\n                Toast.success(intl.formatMessage({id: 'myOrder.notify.cancelSuccess'}))\n                fetchOrders()\n              }}>\n                <FormattedMessage id=\"myOrder.operations.cancel\" />\n              </Box>\n            )\n          }\n        </Flex>\n        <Flex justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n          <Box width=\".5rem\">{intl.formatMessage({id: 'exchangePair'})}</Box>\n          <Box width=\".25rem\">{intl.formatMessage({id: 'side'})}</Box>\n          <Box width=\".7rem\" textAlign=\"right\">{intl.formatMessage({id: 'price'})}</Box>\n          <Box width=\".7rem\" textAlign=\"right\">{intl.formatMessage({id: 'amount'})}</Box>\n          <Box width=\".4rem\" textAlign=\"right\">{intl.formatMessage({id: 'mine.order.list.header.volume'})}</Box>\n        </Flex>\n        <Flex justifyContent=\"space-between\" lineHeight=\"s1\">\n          <Flex width=\".5rem\">{baseSymbol}<Text color=\"c2\">/{quoteSymbol}</Text></Flex>\n          <Text width=\".25rem\" color={side === 'BUY' ? \"c4\" : \"c3\"}>{intl.formatMessage({id: _.toLower(side)})}</Text>\n          <Box width=\".7rem\" textAlign=\"right\">{price}</Box>\n          <Box width=\".7rem\" textAlign=\"right\">{size}</Box>\n          <Box width=\".4rem\" textAlign=\"right\">{filled}</Box>\n        </Flex>\n      </Box>\n    )\n  }.bind(this)\n\n  render() {\n    let { intl, order, cancelAllOrders } = this.props\n\n    const tabs = [\n      { text: intl.formatMessage({id: 'myOrder.tabs.current'}), value: 'current' },\n      { text: intl.formatMessage({id: 'myOrder.tabs.history'}), value: 'history' },\n    ]\n\n    const filters = [\n      { text: intl.formatMessage({id: 'myOrder.filters.all'}), value: 'ALL' },\n      { text: intl.formatMessage({id: 'myOrder.filters.processed'}), value: 'PROCESSED' },\n      { text: intl.formatMessage({id: 'myOrder.filters.cancelled'}), value: 'CANCELLED' },\n    ]\n\n    return (\n      <Flex {...this.props} flexDirection=\"column\">\n        <TabNav tabs={tabs} onChange={tab => this.onTabChange(tab)} />\n        <Flex variant=\"flexYCenter\" px=\"mainPadding\" height=\".4rem\">\n          <Box sx={{\n            transform: `scalex(${0.7 * window.ratioToIphone6}) scaley(${0.7 * window.ratioToIphone6})`,\n            width: 'fit-content'\n          }}>\n            <Switch platform=\"ios\" size=\"small\" checked={order.cond.allMarket} color=\"#0078FF\" onChange={checked => this.onChangeShowAll(checked)}></Switch>\n          </Box>\n          <Text color=\"c2\" fontWeight=\"medium\" flex={1}>{intl.formatMessage({id: 'myOrder.operations.showAll'})}</Text>\n          {\n            renderIf(order.cond.type === 'current')(\n              <Text color=\"c5\" onClick={() => cancelAllOrders()}\n                sx={{ cursor: 'pointer' }}\n              >\n                {intl.formatMessage({id: 'myOrder.operations.cancelLatest'})}\n              </Text>\n            )\n          }\n          {\n            renderIf(order.cond.type === 'history')(\n              <Flex color=\"c1\" onClick={() => {\n                let options = filters.map(t => t.text)\n                ActionSheet.showActionSheetWithOptions(\n                  {\n                    options: [...options, intl.formatMessage({id: 'cancel'})],\n                    cancelButtonIndex: options.length,\n                    maskClosable: true,\n                  },\n                  index => {\n                    let condType = filters[index]\n                    if (!condType) return\n\n                    let historyStatus = condType.value\n                    this.props.updateFilterCond({\n                      historyStatus,\n                      page: 1,\n                      pageSize: 50\n                    })\n                    this.props.fetchOrders()\n                  }\n                )\n              }}>\n                <Text>{_.find(filters, {value: order.cond.historyStatus}).text}</Text>\n                <Svg color=\"\" icon=\"icon-xiala-copy\" size=\".16rem\"></Svg>\n              </Flex>\n            )\n          }\n        </Flex>\n        {/* <InfiniteScroll ref={ref => this.infinite = ref}\n          autoHeight={true}\n          renderItem={this.renderOrder} \n          fetchData={this.fetchOrders}\n          // parseRetList={ret => ret.data.data.dataList}\n          // renderEmptyList={() => (\n          //   <div style={{ padding: 0, textAlign: 'center' }}>尚未布置作业</div>\n          // )}\n        ></InfiniteScroll> */}\n        <Flex flexDirection=\"column\">\n          <Spin spinning={order.loading}>\n            {\n              _.map(order.list, order => this.renderOrder(order))\n            }\n          </Spin>\n        </Flex>\n      </Flex>\n    )\n  }\n}\n\nconst mapStateToProps = ({ order }) => {\n  return {\n    order,\n  };\n};\n\nconst mapDispatchToProps = ({ order }) => {\n  return {\n    updateFilterCond: order.updateFilterCond,\n    fetchOrders: order.fetchOrders,\n    cancelAnOrders: order.cancelAnOrders,\n    cancelAllOrders: () => utils.withLoading(() => order.cancelAllOrders())\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyOrder);","import _ from 'lodash'\nimport numeral from 'numeral';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { ActionSheet, List, WhiteSpace } from 'antd-mobile'\nimport { Svg, Spin } from 'components'\nimport { DepthBg } from 'widgets/Common'\nimport utils from 'utils'\n\nconst depthTypes = [\n  { key: 'all', text: '全部订单' },\n  { key: 'sell', text: '卖单' },\n  { key: 'buy', text: '买单' },\n]\n\nconst lineHeight = .19\nconst maxLines = 14\n@injectIntl\nclass Depth extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeType: depthTypes[0]\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  renderPrecisions () {\n    let precisions = this.props.precisions()\n    return (\n      <Menu onClick={({key}) => {\n        let { markets, setLevel } = this.props\n        let precision = Number(key)\n        let level = markets.currentMarket.pricePrecision - precision\n        setLevel(level)\n      }}>\n      {\n        precisions.map((precision) => (\n          <Menu.Item key={precision}>\n            <Text fontSize={[0, 0, 0]} color='hint'>{ precision }<FormattedMessage id=\"depth.operations.level\"/></Text>\n          </Menu.Item>\n        ))\n      }\n      </Menu>\n    )\n  }\n\n  onSelectType () {\n    let { intl } = this.props\n    let options = depthTypes.map(t => t.text)\n    ActionSheet.showActionSheetWithOptions(\n      {\n        options: [...options, intl.formatMessage({id: \"cancel\"})],\n        cancelButtonIndex: options.length,\n        maskClosable: true,\n      },\n      index => {\n        let activeType = depthTypes[index]\n        if (!activeType) return\n        this.setState({ activeType })\n      }\n    )\n  }\n\n  onSelectPrecision () {\n    let { markets, setLevel, intl } = this.props\n    let precisions = this.props.precisions()\n    let options = precisions.map(t => `${t}${intl.formatMessage({id: \"depth.operations.level\"})}`)\n    ActionSheet.showActionSheetWithOptions(\n      {\n        options: [...options, intl.formatMessage({id: \"cancel\"})],\n        cancelButtonIndex: options.length,\n        maskClosable: true,\n      },\n      index => {\n        let precision = precisions[index]\n        if (!precision) return\n        let level = markets.currentMarket.pricePrecision - precision\n        setLevel(level)\n      }\n    )\n  }\n\n  onSetPrice (price) {\n    this.props.updatePlaceOrder({\n      buyPrice: price,\n      buyAmount: null,\n      buyTotal: null,\n      marketBuyTotal: null,\n    })\n    this.props.updatePlaceOrder({\n      sellPrice: price,\n      sellAmount: null,\n      sellTotal: null,\n      marketSellAmount: null,\n    })\n  }\n\n  render() {\n    let { markets, depth, trade: { latestPrice, variation }, currentPrecision, intl } = this.props\n    let { activeType } = this.state\n\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let depthLines = activeType.key === 'all' ? maxLines / 2 : maxLines\n    let {asks, bids} = depth\n    asks = _.takeRight(asks, depthLines)\n    bids = _.take(bids, depthLines)\n    let max = _.maxBy([...asks, ...bids], item => Number(item.size))\n    let maxSize = max ? max.size : 100\n\n    return (\n      <Box {...this.props}>\n        <Flex variant=\"flexYCenter\">\n          <Flex color=\"c1\" onClick={() => this.onSelectType()}>\n            <Text>{activeType.text}</Text>\n            <Svg color=\"\" icon=\"icon-xiala-copy\" size=\".16rem\"></Svg>\n          </Flex>\n          <Flex color=\"c1\" onClick={() => this.onSelectPrecision()}>\n            <Text>{currentPrecision()}<FormattedMessage id=\"depth.operations.level\"/></Text>\n            <Svg color=\"\" icon=\"icon-xiala-copy\" size=\".16rem\"></Svg>\n          </Flex>\n        </Flex>\n\n        <Flex color=\"c2\" variant=\"flexYCenter\" lineHeight={`${lineHeight}rem`}>\n          <Box>{`${intl.formatMessage({id: 'price'})}(${currentMarket.quoteToken})`}</Box>\n          <Box>{`${intl.formatMessage({id: 'size'})}(${currentMarket.baseToken})`}</Box>\n        </Flex>\n\n        <Spin spinning={depth.loading}>\n          {\n            utils.renderIf(activeType.key === 'all' || activeType.key === 'sell')(\n              <Flex height={`${(depthLines) * lineHeight}rem`} sx={{\n                alignItems: 'flex-end'\n              }}>\n                <Flex className=\"depth-sell-table\" maxHeight={`${(depthLines) * lineHeight}rem`} sx={{\n                  overflowY: 'auto',\n                  width: '100%',\n                  flexDirection: 'column',\n                }}>\n                  {asks.map(ask => (\n                    <Flex key={ask.price} onClick={() => this.onSetPrice(ask.price)} lineHeight={`${lineHeight}rem`} sx={{\n                        position: \"relative\",\n                      }}\n                      variant=\"flexYCenter\"\n                    >\n                      <Text color=\"c3\">{ask.price}</Text>\n                      <Text>{ask.size}</Text>\n                      <DepthBg bg=\"c6\" percentage={ask.size / maxSize}></DepthBg>\n                    </Flex>\n                  ))}\n                </Flex>\n              </Flex>\n            )\n          }\n          <Flex color={variation >= 0 ? 'c4' : 'c3'} alignItems=\"center\" justifyContent=\"flex-start\" sx={{\n            borderTop: '1px solid #F0F0F0',\n            borderBottom: '1px solid #F0F0F0',\n            lineHeight: `${lineHeight * 1.5}rem`\n          }}>\n            <Text fontSize='f2' fontWeight=\"semibold\">{Number(latestPrice).toFixed(currentMarket.pricePrecision - depth.level)}</Text>\n            <Text fontSize='f2' ml=\"s1\">${utils.asLegalMoney(latestPrice, currentMarket.quoteToken, 'USD')}</Text>\n          </Flex>\n          {\n            utils.renderIf(activeType.key === 'all' || activeType.key === 'buy')(\n              <Box height={`${(depthLines) * lineHeight}rem`} sx={{\n                overflowY: 'auto'\n              }}>\n                {bids.map(bid => (\n                  <Flex key={bid.price} variant=\"flexYCenter\" lineHeight={`${lineHeight}rem`} sx={{\n                      position: \"relative\",\n                    }}\n                    onClick={() => this.onSetPrice(bid.price)}\n                  >\n                    <Text color=\"c4\">{bid.price}</Text>\n                    <Text>{bid.size}</Text>\n                    <DepthBg bg=\"c7\" percentage={bid.size / maxSize}></DepthBg>\n                  </Flex>\n                ))}\n              </Box>\n            )\n          }\n        </Spin>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ markets, depth, trade, rate }) => {\n  return {\n    markets,\n    depth,\n    trade,\n    rate,\n    precisions: () => {\n      let market = markets.currentMarket\n      if (!market) return []\n\n      let { pricePrecision, maxLevel } = market\n      return _.range(pricePrecision, pricePrecision - maxLevel)\n    },\n    currentPrecision: () => {\n      if (!markets.currentMarket) return 0\n      return markets.currentMarket.pricePrecision - depth.level\n    }\n  };\n};\n\nconst mapDispatchToProps = ({ depth, placeOrder }) => {\n  return {\n    setLevel: depth.setLevel,\n    scrollSellTable: depth.scrollSellTable,\n    updatePlaceOrder: placeOrder.update\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Depth);","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { ActionSheet, List, WhiteSpace } from 'antd-mobile'\nimport { Svg } from 'components'\nimport { DepthBg } from 'widgets/Common'\nimport utils, { renderIf } from 'utils'\n\nconst lineHeight = .27\nclass Depth extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    let { markets, depth, trade: { latestPrice, variation }, currentPrecision, rate } = this.props\n\n    let currentMarket = markets.currentMarket\n    if (!currentMarket) return <></>\n\n    let {asks, bids} = depth\n    asks = _.takeRight(asks, 5).reverse()\n    bids = _.take(bids, 5)\n\n    let max = _.maxBy([...asks, ...bids], item => Number(item.size))\n    let maxSize = max ? max.size : 100\n    return (\n      <Box px=\"mainPadding\">\n        <Flex color=\"c2\" height=\".3rem\" variant=\"flexYCenter\" lineHeight={`${lineHeight}rem`}>\n          <Box>数量{currentMarket.baseToken}</Box>\n          <Box>价格{currentMarket.quoteToken}</Box>\n          <Box>数量{currentMarket.baseToken}</Box>\n        </Flex>\n\n        <Box minHeight={`${5*lineHeight}rem`}>\n          {\n            _.range(5).map(index => {\n              let ask = asks[index]\n              let bid = bids[index]\n              return (\n                <Flex key={index} height=\".3rem\" onClick={() => {}} variant=\"flexYCenter\" lineHeight={`${lineHeight}rem`}>\n                  {\n                    bid ?\n                      <Flex variant=\"flexYCenter\" justifyContent=\"space-between\" flex={1} sx={{\n                        position: \"relative\",\n                        height: '100%',\n                      }}>\n                        <Text sx={{ zIndex:1 }}>{bid.size}</Text>\n                        <Text sx={{ zIndex:1 }} color=\"c4\" pr=\"s1\">{bid.price}</Text>\n                        <DepthBg gap bg=\"c7\" percentage={bid.size / maxSize}></DepthBg>\n                      </Flex>\n                    : <Box flex={1}></Box>\n                  }\n                  {\n                    ask ?\n                      <Flex variant=\"flexYCenter\" justifyContent=\"space-between\" flex={1} sx={{\n                        position: \"relative\",\n                        height: '100%'\n                      }}>\n                        <Text sx={{ zIndex:1 }} color=\"c3\" pl=\"s1\">{ask.price}</Text>\n                        <Text sx={{ zIndex:1 }}>{ask.size}</Text>\n                        <DepthBg align=\"left\" gap bg=\"c6\" percentage={bid.size / maxSize}></DepthBg>\n                      </Flex>\n                    : <Box flex={1}></Box>\n                  }\n                </Flex>\n              )\n            })\n          }\n        </Box>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ markets, depth, trade, rate }) => {\n  return {\n    markets,\n    depth,\n    trade,\n    rate,\n    precisions: () => {\n      let market = markets.currentMarket\n      if (!market) return []\n\n      let { pricePrecision, maxLevel } = market\n      return _.range(pricePrecision, pricePrecision - maxLevel)\n    },\n    currentPrecision: () => {\n      if (!markets.currentMarket) return 0\n      return markets.currentMarket.pricePrecision - depth.level\n    }\n  };\n};\n\nconst mapDispatchToProps = ({ depth, placeOrder }) => {\n  return {\n    setLevel: depth.setLevel,\n    scrollSellTable: depth.scrollSellTable,\n    updatePlaceOrder: placeOrder.update\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Depth);","import moment from 'moment'\nimport _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport awardIcon from 'icons/award.png';\n// import wedexLogoVertical from 'icons/wedexLogoVertical.svg';\nimport { Icon } from 'antd-mobile';\n\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n    })\n  }\n\n  render() {\n    let { appState: {awardInfo}, dexAccount, closeAward, markRead } = this.props\n    if (!awardInfo.visible) return <></>\n    return (\n      <>\n        <Flex variant=\"flexCenter\" sx={{\n          position: 'fixed',\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          margin: 'auto',\n          backgroundImage: `url(${awardIcon})`,\n          backgroundSize: 'contain',\n          backgroundPosition: 'center',\n          width: `${375 * 0.01}rem`,\n          height: `${515 * 0.01}rem`,\n          flexDirection: 'column',\n          justifyContent: 'flex-start',\n          zIndex: 999\n        }} >\n          {/* <Image src={awardIcon} width={300} /> */}\n          {/* <Image mt={262} src={wedexLogoVertical} size={45} /> */}\n          <Text fontSize=\"f2\" mt={'2rem'} color=\"black\" fontWeight='bold'>恭喜您获得彩蛋</Text>\n          <Text fontSize=\"f5\" mt={'s2'} color=\"red\" fontWeight='bold'>{awardInfo.amount}{awardInfo.unit}</Text>\n          <Flex variant=\"flexCenter\" color=\"hint\" sx={{\n            // borderTop: '1px dashed #646478',\n            flexDirection: 'column'\n          }}>\n            <Text fontSize=\"f1\" mt={'s2'}>获奖时间:</Text>\n            <Text fontSize=\"f1\" mt={0}>{moment(awardInfo.createdAt).format('YYYY-MM-DD HH:mm:ss')}</Text>\n            <Text mt={'1.4rem'}  color=\"border\">奖金将在24小时内转入您的钱包</Text>\n            <Text mt={0}  color=\"border\">{`${_.take(dexAccount.address, 10).join('')}......${_.takeRight(dexAccount.address, 10).join('')}`}</Text>\n          </Flex>\n          <Box sx={{\n              position: 'absolute',\n              right: `0.8rem`,\n              top: `0.8rem`,\n              // border: '1px solid #646478',\n              borderRadius: '50%',\n              size: 30,\n              // padding: '3px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              cursor: 'pointer'\n            }} onClick={async () => {\n              await markRead([awardInfo.id])\n              closeAward()\n            }}>\n            {/* <Icon type=\"close\" style={{ fontSize: '15px', width: '15px', height: '15px'}}/> */}\n            {/* <Svg style={{color: \"#646478\"}} size=\".2rem\" icon=\"icon-shanchu\" /> */}\n            <Icon type='cross-circle' />\n          </Box>\n        </Flex>\n        <Box sx={{\n          position: 'fixed',\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          margin: 'auto',\n          backgroundColor: `rgba(0, 0, 0, 0.88)`,\n          zIndex: 998\n        }} ></Box>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = ({appState, dexAccount}) => {\n  return {\n    appState: appState,\n    dexAccount: dexAccount,\n  };\n};\n\nconst mapDispatchToProps = ({appState, award}) => {\n  return {\n    closeAward: appState.closeAward,\n    markRead: award.markRead\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget);","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport numeral from 'numeral'\nimport moment from 'moment'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport styled from '@emotion/styled'\nimport { TextEllipsis } from 'widgets/Common'\nimport { ENUM_LANGUAGE_TYPE } from 'utils/enum'\n\nconst Line = styled(Flex)`\n  justify-content: space-between;\n  padding-top: .16rem;\n`\nconst Label = styled(Text)`\n  width: .6rem;\n  color: #D2D2D2;\n`\nconst Value = styled(TextEllipsis)`\n  width: 2.8rem;\n  text-align: right;\n`\nclass TokenInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    let { tokenInfo, persistData: { locale } } = this.props\n    if (!tokenInfo.id) return <></>\n\n    let lang = ENUM_LANGUAGE_TYPE[locale].getValue()\n    let { name, fullname, marketValue, publishDate, rank, publishAmount, homepage, flowAmount, whitePaper, publishPrice, desc } = tokenInfo\n    let descInLocale = desc && desc[lang] || ''\n\n    return (\n      <Box {...this.props} px={12} pt={14} color=\"#505050\" variant='noScrollbar' bg=\"backgroundTint\" overflowY='auto'>\n        <Flex fontSize=\"f2\">\n          <Text>{name}</Text>\n          <Text>（{fullname}）</Text>\n        </Flex>\n        <Flex fontSize={\"f1\"}>\n          <Flex flexDirection=\"column\">\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.marketValue\" /></Label>\n              <Value>${numeral(marketValue).format('0,0')}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.rank\" /></Label>\n              <Value>{rank}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.homepage\" /></Label>\n              <Value color=\"#0064FF\" sx={{cursor: 'pointer'}} onClick={() => window.open(homepage, '_blank')}>{homepage}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.whitePaper\" /></Label>\n              <Value color=\"#0064FF\" sx={{cursor: 'pointer'}} onClick={() => window.open(whitePaper, '_blank')}>{whitePaper}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.publishDate\" /></Label>\n              <Value>{moment(publishDate).format('YYYY-MM-DD')}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.publishAmount\" /></Label>\n              <Value>{numeral(publishAmount).format('0,0')}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.flowAmount\" /></Label>\n              <Value>{numeral(flowAmount).format('0,0')}</Value>\n            </Line>\n            <Line>\n              <Label><FormattedMessage id=\"tokenInfo.label.publishPrice\" /></Label>\n              <Value>{numeral(publishPrice).format('0,0')}</Value>\n            </Line>\n          </Flex>\n        </Flex>\n        <Flex pt={16} fontSize={\"f1\"} flexDirection=\"column\">\n          <Text color=\"#D2D2D2\"><FormattedMessage id=\"tokenInfo.label.desc\" /></Text>\n          <Text my={16} lineHeight={'.2rem'}>{descInLocale}</Text>\n        </Flex>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({persistData}) => {\n  return { persistData }\n};\n\nconst mapDispatchToProps = ({markets}) => {\n  return {\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TokenInfo));","import _ from 'lodash'\nimport React, { Component } from 'react'\nimport { withRouter } from \"react-router-dom\"\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Button,\n  Text\n} from 'rebass'\nimport { connect } from 'react-redux'\nimport { Svg } from 'components'\nimport { Depth, PlaceOrder, MyOrder, CurrentPair } from 'widgets'\n\nconst Widget = ({\n  history,\n  locale\n}) => {\n  return (\n    <Flex height=\"100%\" flexDirection=\"column\">\n      <Flex px=\"mainPadding\" height=\".40rem\" minHeight=\".40rem\" sx={{\n        borderBottom: '1px solid #F0F0F0',\n        alignItems: \"center\"\n      }}>\n        <CurrentPair />\n        <Box flex={1}></Box>\n        <Svg icon=\"icon-Kxian\" size=\".2rem\" onClick={() => {\n          history.push(`/${locale}/market`)\n        }}></Svg>\n      </Flex>\n      <Flex px=\"mainPadding\" py=\"mainPadding\">\n        <Depth mr=\"mainPadding\" width=\"1.6rem\" />\n        <PlaceOrder ml=\"mainPadding\" flex={1} />\n      </Flex>\n      <MyOrder flex={1} />\n    </Flex>\n  )\n}\n\nconst mapStateToProps = ({ persistData }) => {\n  return {\n    locale: persistData.locale\n  }\n}\n\nconst mapDispatchToProps = ({auth}) => ({\n})\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Widget))","import _ from 'lodash'\nimport React, { Component } from 'react'\nimport { withRouter } from \"react-router-dom\"\nimport { connect } from 'react-redux'\n\nconst Widget = ({\n}) => {\n  return (\n    <div>\n      发现\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n  }\n}\n\nconst mapDispatchToProps = ({auth}) => ({\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Widget)\n\n","import _ from 'lodash'\nimport moment from 'moment';\nimport clipboard from 'clipboard';\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, Fragment } from 'react';\nimport { withRouter } from \"react-router-dom\"\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Button,\n  Text\n} from 'rebass'\nimport { connect } from 'react-redux'\nimport { Page, Svg } from 'components'\nimport { TabNav } from 'widgets'\nimport utils, { renderIf } from 'utils';\n\nconst shadowWhite = 'rgba(255, 255, 255, 0.4)'\nconst buttonStyle = {\n  fontSize: \"f1\",\n  fontWeight: \"semibold\",\n  border: `1px solid ${shadowWhite}`,\n  width: '.75rem',\n  height: '.26rem',\n  borderRadius: \"3px\",\n  textAlign: 'center'\n}\n\nlet OverViewWidget = ({\n  history,\n  dexAccount,\n  balance,\n  walletBalance,\n  persistData: { locale }\n}) => {\n\n  const intl = useIntl()\n  let [visible, setVisible] = useState(true)\n  useEffect(() => {\n    new clipboard('.copyAddress')\n  }, [])\n\n  let balanceTotal = _.reduce(balance.list, (total, item) => {\n    let usd = utils.asLegalMoney(Number(item.totalAmount), item.token.symbol, 'USD')\n    return total + Number(usd)\n  }, 0)\n  let walletBalanceTotal = _.reduce(walletBalance.list, (total, item) => {\n    let usd = utils.asLegalMoney(Number(item.amount), item.symbol, 'USD')\n    return total + Number(usd)\n  }, 0)\n  let total = balanceTotal + walletBalanceTotal\n\n  return (\n    <Flex px=\"mainPadding\" py=\"s3\" color=\"white\" bg=\"c5\" flexDirection=\"column\">\n      <Flex>\n        <Text fontSize=\"f2\" lineHeight=\"lh2\" mr=\"s2\" fontWeight=\"bold\">\n          <FormattedMessage id='mine.balance.overview.total' />\n        </Text>\n        <Svg onClick={() => setVisible(!visible)} icon={visible ? \"icon-xianshikejian\" : \"icon-yincangbukejian\"} size=\".2rem\"></Svg>\n        <Box flex={1}></Box>\n        <Svg onClick={() => history.push(`/${locale}/setting`)} icon=\"icon-shezhi\" size=\".16rem\"></Svg>\n      </Flex>\n      <Flex variant=\"flexYCenter\" justifyContent=\"flex-start\" mt=\"s2\">\n        {\n          renderIf(visible)(\n            <>\n              <Text fontSize=\"f5\" lineHeight=\"lh5\" fontWeight=\"bold\">{utils.toTokenPrecision(total, 'USDT')}</Text>\n              <Text fontSize=\"f5\" lineHeight=\"lh5\" fontWeight=\"bold\" ml=\"s2\">USD</Text>\n              <Text fontSize=\"f2\" lineHeight=\"lh2\" ml=\"s3\" color={shadowWhite}>￥ {utils.asLegalMoney(total, 'USD', 'CNY')}</Text>\n            </>\n          )\n        }\n        {\n          renderIf(!visible)(\n            <Text fontSize=\"f3\" lineHeight=\"lh3\" fontWeight=\"bold\">************</Text>\n          )\n        }\n      </Flex>\n      <Flex mt=\"s4\">\n        <Flex variant=\"flexCenter\" sx={buttonStyle} onClick={() => history.push(`/${locale}/transfer/create`)}>\n          <FormattedMessage id=\"mine.balance.operations.transfer\" />\n        </Flex>\n        <Flex variant=\"flexCenter\" ml=\"s3\" sx={buttonStyle} onClick={() => history.push(`/${locale}/transfer/list`)}>\n          <FormattedMessage id=\"mine.balance.operations.record\" />\n        </Flex>\n      </Flex>\n      <Flex color={shadowWhite} mt=\"s3\" variant=\"flexYCenter\">\n        <Flex lineHeight=\"lh2\" mr=\"s2\">\n          <Text mr={\".08rem\"}>{intl.formatMessage({id: 'mine.balance.overview.addr'})}: </Text>\n          {_.take(dexAccount.address, 10).join('')}......{_.takeRight(dexAccount.address, 10).join('')}\n        </Flex>\n        <Text className=\"copyAddress\" data-clipboard-text={dexAccount.address} style={{whiteSpace: \"nowrap\"}}>\n          <FormattedMessage id=\"copy\" />\n        </Text>\n      </Flex>\n    </Flex>\n  )\n}\nconst OverView = withRouter(connect(({ dexAccount, balance, walletBalance, persistData }) => {\n  return {\n    dexAccount,\n    balance,\n    walletBalance,\n    persistData,\n  }\n}, () => {\n  return {}\n})(OverViewWidget))\n\nconst ExchangeBalaneWidget = ({\n  balance\n}) => {\n  const intl = useIntl()\n  let balances = balance.list\n\n  return (\n    <Box px=\"mainPadding\">\n      <Flex height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n        <Box width=\"1.1rem\">{intl.formatMessage({id: 'tokenName'})}</Box>\n        <Box width=\"1.1rem\" textAlign=\"right\">{intl.formatMessage({id: 'mine.balance.exchange.list.header.frozenAmount'})}</Box>\n        <Box width=\"1.1rem\" textAlign=\"right\">{intl.formatMessage({id: 'mine.balance.exchange.list.header.availAmount'})}</Box>\n      </Flex>\n      {\n        _.map(balances, item => {\n          let { tokenId, token, availAmount, frozenAmount, totalAmount } = item\n\n          return (\n            <Flex key={tokenId} height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" sx={{\n              borderTop: '1px solid',\n              borderTopColor: 'border',\n            }}>\n              <Flex width=\"1.1rem\">{token.symbol}<Text ml=\"s1\" color=\"c2\">{token.name}</Text></Flex>\n              <Box width=\"1.1rem\" textAlign=\"right\">{utils.toTokenPrecision(frozenAmount, token.symbol)}</Box>\n              <Box width=\"1.1rem\" textAlign=\"right\">{utils.toTokenPrecision(availAmount, token.symbol)}</Box>\n            </Flex>\n          )\n        })\n      }\n    </Box>\n  )\n}\nconst ExchangeBalane = withRouter(connect(({ balance }) => {\n  return {\n    balance\n  }\n}, () => {\n  return {}\n})(ExchangeBalaneWidget))\n\nconst WalletBalaneWidget = ({\n  walletBalance\n}) => {\n  const intl = useIntl()\n  let walletBalances = walletBalance.list\n\n  return (\n    <Box px=\"mainPadding\">\n      <Flex height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n        <Box width=\"1.1rem\">{intl.formatMessage({id: 'tokenName'})}</Box>\n        <Box width=\"1.1rem\" textAlign=\"right\">{intl.formatMessage({id: 'mine.balance.wallet.list.header.amount'})}</Box>\n      </Flex>\n      {\n        _.map(walletBalances, item => {\n          let { symbol, name, amount } = item\n\n          return (\n            <Flex key={symbol} height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" sx={{\n              borderTop: '1px solid',\n              borderTopColor: 'border',\n            }}>\n              <Flex width=\"1.1rem\">{symbol}<Text ml=\"s1\" color=\"c2\">{name}</Text></Flex>\n              <Box width=\"1.1rem\" textAlign=\"right\">{utils.toTokenPrecision(amount, symbol)}</Box>\n            </Flex>\n          )\n        })\n      }\n    </Box>\n  )\n}\nconst WalletBalane = withRouter(connect(({ walletBalance }) => {\n  return {\n    walletBalance\n  }\n}, () => {\n  return {}\n})(WalletBalaneWidget))\n\nconst Widget = ({\n  fetchBalances,\n  fetchWalletBalances\n}) => {\n  const intl = useIntl()\n\n  const tabs = [\n    { text: intl.formatMessage({id: 'mine.balance.tab.wallet'}), value: 'walletBalance' },\n    { text: intl.formatMessage({id: 'mine.balance.tab.exchange'}), value: 'exchangeBalance' },\n  ]\n  \n  let [activeTab, setActiveTab] = useState(tabs[0].value)\n  useEffect(() => {\n    fetchBalances()\n    fetchWalletBalances()\n  }, [])\n\n  return (\n    <Page className=\"home-page\">\n      <Flex flexDirection=\"column\">\n        <OverView />\n        <TabNav tabs={tabs} onChange={({value}) => {\n          setActiveTab(value)\n          if (value === 'exchangeBalance') {\n            fetchBalances()\n          } else {\n            fetchWalletBalances()\n          }\n        }} />\n        {\n          renderIf(activeTab === 'exchangeBalance')(<ExchangeBalane/>)\n        }\n        {\n          renderIf(activeTab === 'walletBalance')(<WalletBalane/>)\n        }\n      </Flex>\n    </Page>\n  )\n}\nconst mapStateToProps = ({ dexAccount, balance, walletBalance, rate, markets }) => {\n  return {\n    dexAccount,\n    balance,\n    walletBalance,\n    rate,\n    markets\n  };\n};\nconst mapDispatchToProps = ({ balance, walletBalance, transfer, markets }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n    setCurrentTab: markets.setCurrentTab,\n    setCurrentMarket: markets.setCurrentMarket,\n  };\n};\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Widget))\n\n","import _ from 'lodash'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, useRef, Fragment } from 'react';\nimport { useHistory } from \"react-router-dom\"\nimport { connect } from 'react-redux'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Button,\n  Text\n} from 'rebass'\nimport { TabBar, Toast } from 'antd-mobile'\nimport { Page, Svg } from 'components'\nimport { BillPreCheck, EggAward } from 'widgets'\nimport Exchange from './Exchange'\nimport Finder from './Finder'\nimport Balance from './Balance'\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\n\nconst tabs = [\n  { key: 'market', title: '交易', icon: 'icon-bitebi', component: <Exchange/> },\n  // { key: 'finder', title: '发现', icon: 'icon-faxian', component: <Finder/> },\n  { key: 'balance', title: '资产', icon: 'icon-qianbao', component: <Balance/> },\n]\n\nconst Widget = ({\n  dexAccount,\n  selectedTab,\n  setSelectedTab\n}) => {\n  const billPreCheck = useRef(null)\n\n  return (\n    <Page className=\"home-page\">\n      <TabBar\n        tintColor=\"#0078FF\"\n        unselectedTintColor='#9696A0'\n        barTintColor=\"white\"\n        prerenderingSiblingsNumber={0}\n        prefixCls=\"am-tab-bar\"\n      >\n        {tabs.map(tab => (\n          <TabBar.Item\n            key={tab.key}\n            title={tab.title}\n            icon={\n              <Svg color=\"#9696A0\" icon={tab.icon} size=\".25rem\"></Svg>\n            }\n            selectedIcon={\n              <Svg color=\"#0078FF\" icon={tab.icon} size=\".25rem\"></Svg>\n            }\n            onPress={async () => {\n              if (tab.key === 'balance' && dexAccount.state !== ENUM_ACCOUNT_STATUS.LOGGED_IN.getValue()) {\n                let success = await billPreCheck.current.check()\n                if (!success) return\n              }\n              setSelectedTab(tab.key)\n            }}\n            selected={selectedTab === tab.key}\n          >\n            { tab.component }\n          </TabBar.Item>\n        ))}\n      </TabBar>\n      <BillPreCheck ref={billPreCheck}></BillPreCheck>\n      <EggAward />\n    </Page>\n  )\n}\n\nconst mapStateToProps = ({ dexAccount, appState }) => {\n  return {\n    dexAccount,\n    selectedTab: appState.selectedTab\n  }\n}\n\nconst mapDispatchToProps = ({ appState }) => {\n  return {\n    setSelectedTab: tab => appState.update({selectedTab: tab}),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Widget)","import _ from 'lodash'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport numeral from 'numeral'\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Text,\n} from 'rebass'\nimport { SearchBar } from 'antd-mobile'\nimport { Page, Svg } from 'components'\nimport { TabNav } from 'widgets'\nimport utils, { renderIf } from 'utils';\n\n@injectIntl\nclass Pair extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fuzzy: '',\n    }\n  }\n\n  componentDidMount() {\n    // 必须等一会再设置，因为fetchMarkets还没完。如果 market 改为从服务端获取，此处延迟应该更多。\n    setTimeout(() => {\n      let { markets, setCurrentTab } = this.props\n      setCurrentTab(markets.tabs[0])\n    }, 300)\n  }\n  \n  render() {\n    let { history, persistData: { locale }, markets, setCurrentTab, setCurrentMarket, starMarket, addToHistory, clearHistory, updateAppState, intl } = this.props\n    let { currentMarkets, searchHistory } = markets\n    let { fuzzy } = this.state\n    let pairs = _.chain(currentMarkets)\n                  .filter(({market}) => _.includes(_.upperCase(market), _.upperCase(fuzzy)))\n                  .value()\n\n    return (\n      <Page className=\"home-page\">\n        <Box px=\"mainPadding\"  sx={{\n          borderBottom: '1px solid #F0F0F0',\n          pb: 's3'\n        }}>\n          <Box className=\"pair-searchbar\">\n            <SearchBar placeholder={intl.formatMessage({id: 'search'})} maxLength={8} onSubmit={value => {\n              addToHistory(value)\n              this.setState({ fuzzy: value })\n            }} />\n          </Box>\n          <Flex alignItems=\"center\" justifyContent=\"space-between\">\n            <Text py=\"s2\" fontSize=\"f2\">历史记录</Text>\n            <Box onClick={() => clearHistory()}><Svg color=\"#0078FF\" icon=\"icon-shanchu\" size=\".2rem\"></Svg></Box>\n          </Flex>\n          <Flex mx=\"-.04rem\" flexWrap=\"wrap\">\n          {\n            _.map(searchHistory, item => (\n              <Box flexBasis=\"25%\" onClick={() => {\n                this.setState({ fuzzy: item })\n              }}>\n                <Flex mx=\"s1\" my=\"s1\" bg=\"c5\" height=\".3rem\" color=\"white\" variant=\"flexCenter\">{item}</Flex>\n              </Box>\n            ))\n          }\n          </Flex>\n        </Box>\n\n        {/* 防止 markets.tabs 没加载好的时候，默认的 active 为空，渲染好后没下划线选中状态。 */}\n        {renderIf(markets.tabs.length > 0)(\n          <TabNav ref={el => this.tabNav = el}\n            tabs={markets.tabs.map(t => ({\n              // text: t,\n              text: intl.formatMessage({id: t}),\n              value:t\n            }))}\n            onChange={selected => {\n              let tab = _.find(markets.tabs, t => t === selected.value)\n              setCurrentTab(tab)\n            }}\n          />\n        )}\n\n        <Box px=\"mainPadding\">\n          <Flex height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n            <Box width=\"1rem\">{intl.formatMessage({id: 'exchangePair'})}</Box>\n            <Box width=\"1.2rem\" textAlign=\"right\">{intl.formatMessage({id: 'pair.list.header.latest'})}</Box>\n            <Box width=\"1.2rem\" textAlign=\"right\">{intl.formatMessage({id: 'pair.list.header.variation'})}</Box>\n          </Flex>\n          {\n            _.map(pairs, record => {\n              let { market, close, variation } = record\n              let [baseSymbol, quoteSymbol] = market.split('-')\n              let haveStar = _.find(markets.stars, {market: record.market})\n\n              return (\n                <Flex key={market} height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" sx={{\n                    borderTop: '1px solid',\n                    borderTopColor: 'border',\n                  }}\n                  onClick={event => {\n                    setCurrentMarket(record)\n                    updateAppState({showMarketDrawer: false})\n                    // 设置交易对时，同时更新地址栏\n                    history.push(`/${locale}/trade/${record.market}`)\n                  }}\n                >\n                  <Flex width=\"1rem\">\n                    <Box mr=\"s2\" onClick={event => {\n                      event.stopPropagation()\n                      starMarket(record)\n                    }}>\n                      <Svg color={haveStar ? '#0078FF' : '#c8c8c8'} icon=\"icon-Starlargegray\" size=\".12rem\"></Svg>\n                    </Box>\n                    <Text>{baseSymbol}</Text>\n                    <Text color=\"c2\">/{quoteSymbol}</Text>\n                  </Flex>\n                  <Box width=\"1.2rem\" textAlign=\"right\">{close}</Box>\n                  <Box width=\"1.2rem\" textAlign=\"right\" color={variation >= 0 ? \"c3\" : \"c4\"}>{numeral(variation).format('+0.00%')}</Box>\n                </Flex>\n              )\n            })\n          }\n        </Box>\n      </Page>\n    )\n  }\n}\n\nconst mapStateToProps = ({markets, persistData}) => {\n  return { markets, persistData };\n};\n\nconst mapDispatchToProps = ({markets, appState}) => {\n  return {\n    setCurrentTab: markets.setCurrentTab,\n    setCurrentMarket: markets.setCurrentMarket,\n    starMarket: markets.starMarket,\n    updateFilterCond: markets.updateFilterCond,\n    addToHistory: markets.addToHistory,\n    clearHistory: markets.clearHistory,\n    updateAppState: appState.update,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Pair))","import _ from 'lodash'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, Fragment } from 'react';\nimport { withRouter } from \"react-router-dom\"\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport {\n  Flex,\n  Box,\n  Card,\n  Image,\n  Heading,\n  Button,\n  Text\n} from 'rebass'\nimport { connect } from 'react-redux'\nimport { Page, Svg } from 'components'\nimport { Trade, DepthHorizontal, TVChart, TabNav, TokenInfo } from 'widgets'\nimport { renderIf } from 'utils';\nimport api from 'api'\n\n\nconst Widget = ({\n  history,\n  markets\n}) => {\n  \n  const intl = useIntl()\n  let [activeTab, setActiveTab] = useState('depth')\n  let [tokenInfo, setTokenInfo] = useState({})\n  const tabs = [\n    { text: intl.formatMessage({id: 'depth.title'}), value: 'depth' },\n    { text: intl.formatMessage({id: 'trade.title'}), value: 'trade' },\n    { text: intl.formatMessage({id: 'brief'}), value: 'intro' },\n  ]\n  useEffect (() => {\n    let { currentMarket } = markets\n    api.getContract(currentMarket.baseContractId).then(resp => {\n      setTokenInfo(resp.data)\n    })\n  }, [])\n\n  return (\n    <Page height=\"unset\">\n      <TVChart />\n      {/* <Flex px=\"mainPadding\" py=\"mainPadding\">\n        <Depth mr=\"mainPadding\" width=\"1.6rem\" />\n        <PlaceOrder ml=\"mainPadding\" flex={1} />\n      </Flex>\n      <MyOrder flex={1} /> */}\n      <TabNav tabs={tabs} onChange={tab => setActiveTab(tab.value)} />\n      <Box pb=\".35rem\">\n        {\n          renderIf(activeTab === 'depth')(<DepthHorizontal/>)\n        }\n        {\n          renderIf(activeTab === 'trade')(<Trade/>)\n        }\n        {\n          renderIf(activeTab === 'intro')(<TokenInfo tokenInfo={tokenInfo} />)\n        }\n      </Box>\n      <Flex sx={{\n        position: 'fixed',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        color: 'white',\n        height: \".35rem\",\n        zIndex: 1\n      }}>\n        <Flex variant=\"flexCenter\" flex={1} bg=\"c4\" onClick={() => history.push({ pathname: `/`, data: { initialSide: 'BUY' } })}>\n          <FormattedMessage id=\"buy\" />\n        </Flex>\n        {/* 这里跨页面传递初始的 side 参数有点困难，需要吧 side 改到 store 中。 */}\n        <Flex variant=\"flexCenter\" flex={1} bg=\"c3\" onClick={() => history.push({ pathname: `/`, data: { initialSide: 'SELL' } })}>\n          <FormattedMessage id=\"sell\" />\n        </Flex>\n      </Flex>\n    </Page>\n  )\n}\n\nconst mapStateToProps = ({ markets }) => {\n  return { markets }\n}\n\nconst mapDispatchToProps = ({auth}) => ({\n})\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Widget))","import numeral from 'numeral';\nimport _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Svg, Spin } from 'components';\nimport { List, Picker, Calendar, Drawer } from 'antd-mobile';\nimport { ENUM_TX_STATUS } from 'utils/enum'\nimport { config } from 'librarys/lightcone_v3';\nimport utils, { renderIf } from 'utils';\n\n@injectIntl\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filters: {\n        symbol: undefined,\n        side: undefined,\n        status: undefined\n      },\n      showDrawer: false,\n      showDataRanger: false\n    }\n  }\n\n  async componentDidMount() {\n    this.props.fetchTransactions()\n  }\n\n  async onSymbolChanged (symbol) {\n    this.setState(({ filters }) => {\n      filters.symbol = symbol\n      return { filters }\n    })\n    await this.props.updateFilterCond({ token: symbol })\n  }\n\n  async onSideChanged (side) {\n    this.setState(({ filters }) => {\n      filters.side = side\n      return { filters }\n    })\n\n    let types = side && (side === 'WITHDRAW' ? ['onchainWithdrawal'] : ['deposit'])\n    await this.props.updateFilterCond({ types })\n  }\n\n  async onStatusChanged (status) {\n    this.setState(({ filters }) => {\n      filters.status = status\n      return { filters }\n    })\n    await this.props.updateFilterCond({ statuses: [status] })\n  }\n\n  renderFilters () {\n    let { tokens: { list }, intl, transfer, updateFilterCond, fetchTransactions } = this.props\n    let { filters: { symbol, side, status } } = this.state\n    \n    const symbols = list.map(token => token.symbol)\n    let { start, end } = transfer.cond\n    const sideOptions = [\n      { label: intl.formatMessage({id: 'deposit'}), value: 'DEPOSIT' },\n      { label: intl.formatMessage({id: 'withdraw'}), value: 'WITHDRAW' },\n    ]\n    let sideOption = _.find(sideOptions, {value: side})\n    return (\n      <>\n        <List>\n          <Picker data={symbols.map(s => ({label: s, value: s}))}\n            cols={1}\n            // value={symbol}\n            onChange={async ([symbol]) => {\n              this.onSymbolChanged(symbol)\n            }}\n          >\n            <List.Item arrow=\"horizontal\">\n              <FormattedMessage id='coin' />\n              {symbol && <List.Item.Brief>{symbol}</List.Item.Brief>}\n            </List.Item>\n          </Picker>\n\n          <Picker data={sideOptions}\n            cols={1}\n            // value={side}\n            extra=\"\"\n            onChange={async ([side]) => {\n              this.onSideChanged(side)\n            }}\n          >\n            <List.Item arrow=\"horizontal\" multipleLine >\n              <FormattedMessage id='side' />\n              {sideOption && <List.Item.Brief>{sideOption.label}</List.Item.Brief>}\n            </List.Item>\n          </Picker>\n\n          <Picker data={ENUM_TX_STATUS.getOptions()}\n            cols={1}\n            // value={status}\n            onChange={async ([status]) => {\n              this.onStatusChanged(status)\n            }}\n          >\n            <List.Item arrow=\"horizontal\">\n              <FormattedMessage id='status' />\n              {status && <List.Item.Brief>{intl.formatMessage({id: `enum.txStatus.${status}`})}</List.Item.Brief>}\n            </List.Item>\n          </Picker>\n\n          <List.Item arrow=\"horizontal\"\n            onClick={() => this.setState({showDataRanger: true})}\n            extra=\"请选择\"\n            multipleLine\n          >\n            <FormattedMessage id='date' />\n            {\n              renderIf(start)(\n                <List.Item.Brief>{`${moment(start).format('MM-DD HH:mm')} ~ ${moment(end).format('MM-DD HH:mm')}`}</List.Item.Brief>\n              )\n            }\n          </List.Item>\n          <Calendar\n            visible={this.state.showDataRanger}\n            onCancel={() => this.setState({showDataRanger: false})}\n            onConfirm={async (start, end) => {\n              this.setState({showDataRanger: false})\n              start = start && moment(start).startOf('day').toDate().valueOf()\n              end = end && moment(end).endOf('day').toDate().valueOf()\n\n              console.info({start, end})\n              await updateFilterCond({\n                start,\n                end\n              })\n            }}\n            defaultDate={new Date()}\n            pickTime={true}\n            showShortcut={true} \n          />\n        </List>\n        <Box flex={1}></Box>\n        <Flex height=\".5rem\">\n          <Flex variant=\"flexCenter\" fontSize=\"f4\" flex={1} bg=\"border\" onClick={() => {\n            this.setState(({ filters }) => {\n              filters.symbol = undefined\n              filters.side = undefined\n              filters.status = undefined\n              return { filters }\n            })\n\n            updateFilterCond({\n              symbol: undefined,\n              statuses: undefined,\n              types: undefined,\n              start: undefined,\n              end: undefined,\n            })\n          }}>重置</Flex>\n          <Flex variant=\"flexCenter\" fontSize=\"f4\" flex={1} bg=\"c5\" color=\"white\" onClick={() => {\n            fetchTransactions()\n            this.setState({showDrawer: false})\n          }}>完成</Flex>\n        </Flex>\n      </>\n    )\n  }\n\n  render() {\n    let { transfer, intl } = this.props\n    // TODO: 此处 render 为啥老被刷新？\n    \n    let transfers = transfer.list.map(transfer => {\n      let { symbol, amount, realAmount, feeAmount } = transfer\n      return {\n        ...transfer,\n        amount: utils.fromWEI(symbol, amount),\n        realAmount: utils.fromWEI(symbol, realAmount),\n        feeAmount: utils.fromWEI('ETH', feeAmount)\n      }\n    })\n\n    return (\n      <Drawer\n        className=\"transfer-list-drawer\"\n        position='left'\n        sidebarStyle={{\n          width: '80%',\n          height: document.documentElement.clientHeight, background: 'white',\n          display: 'flex',\n          flexDirection: 'column'\n        }}\n        sidebar={this.renderFilters()}\n        open={this.state.showDrawer}\n        onOpenChange={open => this.setState({showDrawer: open})}\n      >\n        <Flex justifyContent=\"space-between\" px=\"s3\" py=\"s3\" fontSize=\"f3\" sx={{\n          borderBottom: '1px solid',\n          borderBottomColor: 'border',\n        }}>\n          <Box>{intl.formatMessage({id: 'mine.balance.operations.record'})}</Box>\n          <Flex alignItems=\"center\" onClick={() => this.setState({showDrawer: true})}>\n            <Svg color=\"#0078FF\" icon=\"icon-shaixuan\" size=\".18rem\"></Svg>\n            <Text ml=\"s2\" color=\"c5\">{intl.formatMessage({id: 'filter'})}</Text>\n          </Flex>\n        </Flex>\n\n        <Spin spinning={transfer.loading}>\n          {transfers.map(transfer => {\n            let { timestamp, symbol, realAmount, feeAmount, txType, status } = transfer\n            feeAmount = txType === 'deposit' ? feeAmount : -feeAmount\n            return (\n              <Flex mx=\"s3\" py=\"s3\" key={timestamp} flexDirection=\"column\" sx={{\n                borderBottom: '1px solid',\n                borderBottomColor: 'border',\n              }}>\n                <Flex justifyContent=\"space-between\" fontSize=\"f3\">\n                  <Text>{symbol}</Text>\n                  <Text color={realAmount >= 0 ? 'c4' : 'c3'}>{numeral(realAmount).format('0,0.[00000000]')}</Text>\n                </Flex>\n                <Flex justifyContent=\"space-between\" mt=\"s2\">\n                  <Text>{moment(timestamp).format('YYYY-MM-DD HH:mm:ss')}</Text>\n                  <Text>{intl.formatMessage({id: 'fee'})} {numeral(feeAmount).format('0,0.[00000000]')} ETH</Text>\n                </Flex>\n                <Flex justifyContent=\"space-between\" mt=\"s2\">\n                  <Text>{intl.formatMessage({id: txType === 'deposit' ? 'deposit' : 'withdraw'})}</Text>\n                  <Text>{intl.formatMessage({id: `enum.txStatus.${status}`})}</Text>\n                </Flex>\n              </Flex>\n            )\n          })}\n        </Spin>\n      </Drawer>\n    )\n  }\n}\n\nconst mapStateToProps = ({ transfer, markets, tokens }) => {\n  return {\n    transfer,\n    markets,\n    tokens\n  };\n};\n\nconst mapDispatchToProps = ({ transfer }) => {\n  return {\n    fetchTransactions: transfer.fetchTransactions,\n    updateFilterCond: transfer.updateFilterCond,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import _ from 'lodash'\nimport moment from 'moment'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, useRef } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, useIntl } from 'react-intl';\nimport {\n  Box,\n  Flex,\n  Text,\n  Image\n} from 'rebass'\nimport { ActionSheet, Toast, Slider, List } from 'antd-mobile'\nimport utils, { renderIf } from 'utils'\nimport { config, common } from 'librarys/lightcone_v3';\nimport { Page, Svg } from 'components'\nimport { Input, DepthHorizontal, TVChart, TabNav } from 'widgets'\nimport api from 'api'\nimport switchSideIcon from 'icons/switchSide.png'\n\nconst gasLimitInWEI = Number(config.getGasLimitByType(\"create\").gasInWEI)\nconst withdrawFeeInWEI = config.getFeeByType('withdraw').feeInWEI\n\nconst Widget = ({\n  onDestory,\n  balance: balanceStore,\n  walletBalance: walletBalanceStore,\n  rate,\n  persistData,\n  fetchBalances,\n  fetchWalletBalances,\n  transfer,\n  history\n}) => {\n  const intl = useIntl()\n  let { initialSymbol, initialType = 'deposit' } = history.location.data || {}\n  const [symbol, setSymbol] = useState(initialSymbol)\n  const [type, setType] = useState(initialType)\n  const [transferAmount, setTransferAmount] = useState(0)\n  const [recommendedGasEth, setRecommendedGasEth] = useState([0, 0, 0])\n  const [gasEth, setGasEth] = useState(0)\n\n  useEffect(() => {\n    // fetchBalances()\n    fetchWalletBalances()\n\n    api.getRecommendedGasPrice().then(resp => {\n      let [min, normal, max] = resp\n      \n      let minGas = utils.fromWEI('ETH', min * gasLimitInWEI)\n      let normalGas = utils.fromWEI('ETH', normal * gasLimitInWEI)\n      let maxGas = utils.fromWEI('ETH', max * gasLimitInWEI)\n\n      setRecommendedGasEth([Number(minGas), Number(normalGas), Number(maxGas)])\n      setGasEth(normalGas)\n    })\n  }, [])\n\n  const getAvailable = () => {\n    let available = 0\n    if (symbol) {\n      if (type === 'deposit') {\n        let balance = _.find(walletBalanceStore.list, b => b.symbol === symbol)\n        available = balance ? balance.amount : 0\n      } else {\n        let balance = _.find(balanceStore.list, b => b.token.symbol === symbol)\n        available = balance ? balance.availAmount : 0\n      }\n      available = Number(available)\n      available = _.floor(available, 6)\n    }\n    return available\n  }\n\n  const getWalletEthAvail = () => {\n    let ethBalance = _.find(walletBalanceStore.list, b => b.symbol === 'ETH')\n    return ethBalance ? ethBalance.amount : 0\n  }\n\n  let balances = balanceStore.list\n  let balancesSymbols = balances.map(b => b.token.symbol)\n  let walletBalances = walletBalanceStore.list\n  let walletBalancesSymbols = walletBalances.map(b => b.symbol)\n  let symbolOptions = _.union(balancesSymbols, walletBalancesSymbols)\n\n  // 初始化 symbol 为symbolOptions的第一个元素\n  console.info({symbol})\n  if (!symbol) {\n    if (symbolOptions[0]) {\n      console.info('设置 symbol', symbolOptions[0])\n      setSymbol(symbolOptions[0])\n    }\n    return <></>\n  }\n\n  // getFeeByType\n  // 充值：用户手动选择矿工费。\n  // 提现：从光锥的配置读，是固定的。\n  // 充值且充ETH，可转账余额需要减去矿工费，但是最少是 0\n  let walletEthAvail = getWalletEthAvail()\n  let withdrawFee = utils.fromWEI('ETH', withdrawFeeInWEI)\n  \n  // 可用金额\n  let available = getAvailable()\n  // 仅充值，且充值的是 ETH 时，才跟可充值总额联动。\n  if (symbol === 'ETH' && type === 'deposit') {\n    let ethAvailable = _.floor(available - gasEth, 6)\n    available = _.max([ethAvailable, 0])\n  }\n\n  const submit = async () => {\n    let { lastTransferTime } = persistData\n    let duaration = moment().diff(moment(lastTransferTime), 'seconds')\n    if (duaration < 30) {\n      Toast.info(intl.formatMessage({ id: `notify.transfer.duaration`}, { second: 30 - duaration }))\n      return\n    }\n\n    if (type === 'withdraw') {\n      if (walletEthAvail < withdrawFee) {\n        return\n      }\n    } else if (type === 'deposit') {\n      if (gasEth >= walletEthAvail) {\n        return\n      }\n    }\n    if (transferAmount <= 0) return\n\n    if (transferAmount > available) {\n      Toast.info('划转余额不足')\n      return\n    }\n\n    console.info({type, symbol, transferAmount, gasEth})\n    let result = await transfer(type, symbol, transferAmount, gasEth)\n    if (result) {\n      // Toast.info('划转成功')\n      history.goBack(-1)\n    }\n  }\n\n  console.info('TransferCreate render')\n  return (\n    <Page fontSize=\"f2\">\n      <Flex flexDirection=\"column\" alignItems=\"center\" padding=\"s4\" position=\"relative\">\n        <Input label={intl.formatMessage({id: 'modal.transfer.label.coin'})} value={symbol} type=\"select\" onClick={() => {\n          let options = symbolOptions\n          ActionSheet.showActionSheetWithOptions(\n            {\n              options: [...options, intl.formatMessage({id: 'cancel'})],\n              cancelButtonIndex: options.length,\n              maskClosable: true,\n            },\n            index => {\n              let symbol = options[index]\n              if (!symbol) return\n              setSymbol(symbol)\n              setTransferAmount(0)\n            }\n          )\n        }} />\n\n        <Input label={intl.formatMessage({id: 'type'})} value={intl.formatMessage({id: type})} type=\"select\" onClick={() => {\n          ActionSheet.showActionSheetWithOptions(\n            {\n              options: [\n                intl.formatMessage({id: 'deposit'}),\n                intl.formatMessage({id: 'withdraw'}),\n                intl.formatMessage({id: 'cancel'})\n              ],\n              cancelButtonIndex: 2,\n              maskClosable: true,\n            },\n            index => {\n              let options = [ 'deposit', 'withdraw' ]\n              let type = options[index]\n              if (!type) return\n              console.info(type)\n              setType(type)\n              setTransferAmount(0)\n            }\n          )\n        }} />\n\n        {/* 要接入 stepper 的话，把这一块全部换成 inpititem 相关，ui 全部改了 */}\n        <Input label={intl.formatMessage({id: 'amount'})} disabled={false} value={transferAmount} onChange={value => setTransferAmount(value)} />\n\n        <Flex mt=\"s3\" width=\"100%\" justifyContent=\"space-between\">\n          <Text color=\"c2\">{intl.formatMessage({id: 'modal.transfer.label.available'})} {available}</Text>\n          <Text  color=\"c5\"\n            onClick={() => setTransferAmount(available)}\n          >\n            {intl.formatMessage({id: 'modal.transfer.all'})}\n          </Text>\n        </Flex>\n        {\n          renderIf(available - transferAmount < 0)(\n            <Text mt=\"s3\" color=\"#F0505A\">{intl.formatMessage({id: 'modal.transfer.hint.notAvailable'})}</Text>\n          )\n        }\n        {/* {\n          renderIf(type === 'deposit')(\n            <>\n              <Input label=\"矿工费\" value={`${gasEth} ETH ≈$${utils.asLegalMoney(gasEth, 'ETH', 'USD')}`} />\n\n              {renderIf(gasEth >= walletEthAvail)(\n                <Text mt=\"s3\" color=\"#F0505A\">{`矿工费不能超过钱包中的可用余额 ${walletEthAvail} ETH`}</Text>\n              )}\n              <Box mt=\"s4\" height=\"50px\" width=\"100%\">\n                <List.Item align=\"top\">\n                  <Box px=\"12px\" pt=\"10px\" height=\"50px\">\n                    <Slider size=\"small\" prefixCls=\"gas-slider am-slider\"\n                      handleStyle={{\n                        height: '18px',\n                        width: '18px',\n                        marginLeft: '-9px',\n                        marginTop: '-7px',\n                      }}\n                      min={recommendedGasEth[0]} max={recommendedGasEth[2]} marks={{\n                        [recommendedGasEth[0]]: '慢',\n                        // [recommendedGasEth[1]]: '一般',\n                        [recommendedGasEth[2]]: '快',\n                      }} step={0.000001} value={gasEth} onChange={value => setGasEth(value)} />\n                  </Box>\n                </List.Item>\n              </Box>\n            </>\n          )\n        } */}\n        {/* {\n          renderIf(type === 'withdraw')(\n            <Box>\n              <Input label=\"手续费\" value={'0.002ETH'} />\n              {\n                renderIf(walletEthAvail < withdrawFee)(\n                  <Text mt=\"s3\" color=\"#F0505A\">{`手续费 ${withdrawFee} ETH， 钱包余额 ${walletEthAvail}ETH 不足`}</Text>\n                )\n              }\n              {\n                renderIf(walletEthAvail >= withdrawFee)(\n                  <Text mt=\"s3\" color=\"#F0505A\">{`提现手续费主要用于支付GAS费用，该费用将从您的钱包余额ETH中支付。`}</Text>\n                )\n              }\n            </Box>\n          )\n        } */}\n        <Text mt=\"s4\" bg=\"c5\" color=\"white\" fontSize=\"f3\" fontWeight=\"medium\" sx={{\n            borderRadius: '3px',\n            width: \"100%\",\n            height: \".46rem\",\n            lineHeight: \"lh7\",\n            textAlign: 'center'\n          }}\n          onClick={() => submit()}\n        >{intl.formatMessage({id: 'confirm'})}</Text>\n        {\n          renderIf(type === 'deposit')(\n            <Box>\n              <Text mt={30} color={\"#969696\"} fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.deposit.minerFee.hint1'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.deposit.minerFee.hint2'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.deposit.minerFee.hint3'})}</Text>\n            </Box>\n          )\n        }\n        {\n          renderIf(type === 'withdraw')(\n            <Box>\n              <Text mt={30} color={\"#969696\"} fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.withdraw.minerFee.hint1'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.withdraw.minerFee.hint2'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.withdraw.minerFee.hint3'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.withdraw.minerFee.hint4'})}</Text>\n              <Text mt={15} color=\"#969696\" fontSize={12} lineHeight=\"20px\">{intl.formatMessage({id: 'modal.transfer.withdraw.minerFee.hint5'})}</Text>\n            </Box>\n          )\n        }\n      </Flex>\n    </Page>\n  )\n}\n\nconst mapStateToProps = ({ balance, walletBalance, rate, persistData }) => {\n  return {\n    balance,\n    walletBalance,\n    rate,\n    persistData\n  };\n};\n\nconst mapDispatchToProps = ({ balance, transfer, walletBalance }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n    transfer: (type, symbol, amount, gasEth) => {\n      let gasPriceInWEI = config.toWEI('ETH', gasEth) / gasLimitInWEI\n      let gasPrice = common.formatter.toGWEI(gasPriceInWEI)\n      return utils.withLoading(() => transfer[type]({symbol, amount, gasPrice}))\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps, null, {forwardRef: true})(Widget))","import _ from 'lodash'\nimport React, { forwardRef, useEffect, useState, useImperativeHandle, useRef, Fragment } from 'react';\nimport { withRouter } from \"react-router-dom\"\nimport { connect } from 'react-redux'\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { ActionSheet, List } from 'antd-mobile';\nimport { BillPreCheck } from 'widgets/Common'\nimport { UpsertPasswordModal } from 'widgets/Dialog'\n\nconst Item = List.Item;\nconst Brief = Item.Brief;\n\nconst Widget = (props) => {\n  const billPreCheck = useRef(null)\n  const intl = useIntl()\n\n  const settings = [\n    {\n      title: '',\n      items: [\n        {\n          title: intl.formatMessage({id: 'navBar.lang'}), handler: ({ updatePersistData }) => {\n            let languages = [\n              { title: '🇨🇳简体中文', value: 'cn' },\n              { title: '🇺🇸English', value: 'us' },\n              { title: '🇰🇷한국어', value: 'kr' },\n              { title: '🇷🇺русский', value: 'ru' },\n              { title: '🇯🇵日本語', value: 'jp' },\n            ]\n            let options = _.map(languages, language => language.title)\n            ActionSheet.showActionSheetWithOptions(\n              {\n                options: [...options, intl.formatMessage({id: 'cancel'})],\n                cancelButtonIndex: options.length,\n                maskClosable: true,\n              },\n              index => {\n                let language = languages[index]\n                if (!language) return\n                updatePersistData({locale: language.value})\n              }\n            )\n          }\n        },\n      ]\n    },\n    {\n      title: intl.formatMessage({id: 'navBar.help'}),\n      items: [\n        { title: intl.formatMessage({id: 'navBar.help.notice'}), handler: () => {} },\n        { title: intl.formatMessage({id: 'navBar.help.tutorial'}), handler: () => {} },\n        { title: intl.formatMessage({id: 'navBar.help.faq'}), handler: () => {} },\n        // { title: '上币申请', handler: () => {} },\n        { title: intl.formatMessage({id: 'navBar.help.about'}), handler: () => {} },\n      ]\n    },\n    {\n      title: '',\n      items: [\n        { title: intl.formatMessage({id: 'navBar.mine.award'}), handler: ({ history, locale }) => history.push(`/${locale}/setting/awardRecord`) },\n      ]\n    },\n    {\n      title: '',\n      items: [\n        { title: intl.formatMessage({id: 'navBar.mine.apikey'}), handler: ({ history, locale }) => history.push(`/${locale}/setting/apikey`) },\n      ]\n    },\n    {\n      title: '',\n      items: [\n        { title: intl.formatMessage({id: 'navBar.mine.clean'}), handler: ({history, logout}) => {\n          logout()\n        }},\n        { title: intl.formatMessage({id: 'navBar.mine.resetPwd'}), handler: ({billPreCheck}) => {\n          billPreCheck.current.checkSignedIn()\n          UpsertPasswordModal()\n        }},\n      ]\n    },\n  ]\n\n  return (\n    <div>\n      {\n        _.map(settings, list => (\n          <List renderHeader={() => {list.title}}>\n            {\n              _.map(list.items, (item, index) => (\n                <Item\n                  key={item.title}\n                  arrow=\"horizontal\"\n                  onClick={() => item.handler({...props, billPreCheck})}\n                >{item.title}</Item>\n              ))\n            }\n          </List>\n        ))\n      }\n      <BillPreCheck ref={billPreCheck}></BillPreCheck>\n    </div>\n\n  )\n}\n\nconst mapStateToProps = ({ persistData }) => {\n  return {\n    locale: persistData.locale,\n  }\n}\n\nconst mapDispatchToProps = ({ dexAccount, persistData }) => {\n  return {\n    logout: dexAccount.logout,\n    updatePersistData: persistData.update\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Widget))\n\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport clipboard from 'clipboard';\nimport { Account } from 'librarys/lightcone_v3'\nimport { List } from 'antd-mobile';\n\nconst Item = List.Item;\nconst Brief = List.Brief;\n\n@injectIntl\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n    new clipboard('.copyAddress')\n  }\n\n  render() {\n    let { dexAccount, metaMask, intl } = this.props\n    let { installed, enable, startConnecting } = metaMask\n    let { address, accountId, apiKey, passwordHash } = dexAccount\n\n    if (startConnecting || !installed || !enable || !address || !passwordHash) return <></>\n\n    // TODO: 优化。window.wallet可能没有初始化。初始化的时机是用户登录时(在 initAccountFromMetaMask 函数，也可考虑从此函数中分拆出来，无论如何让window.wallet初始化)，而没登录直接在缓存中加载，会有此问题。\n    // if (!window.wallet) {\n    //   window.wallet = ethereum.account.fromMetaMask(\n    //     window.web3,\n    //     address,\n    //     address\n    //   )\n    // }\n    let exchangeAccount = new Account(window.wallet)\n    const keyPair = exchangeAccount.generateKeyPair(passwordHash)\n\n    let infos = [\n      { label: intl.formatMessage({id: 'mine.apikey.label.accountId'}), value: accountId },\n      { label: intl.formatMessage({id: 'mine.apikey.label.addr'}), value: address },\n      { label: intl.formatMessage({id: 'mine.apikey.label.apiSk'}), value: apiKey },\n      { label: intl.formatMessage({id: 'mine.apikey.label.pkX'}), value: keyPair.publicKeyX },\n      { label: intl.formatMessage({id: 'mine.apikey.label.pkY'}), value: keyPair.publicKeyY },\n      { label: intl.formatMessage({id: 'mine.apikey.label.sk'}), value: keyPair.secretKey },\n    ]\n\n    return (\n      <Box {...this.props}>\n        <List>\n        {\n          infos.map(info => (\n            <Flex px=\"s3\" py=\"s3\" justifyContent=\"space-between\" key={info.label} sx={{\n              borderBottom: '1px solid',\n              borderBottomColor: 'border',\n            }}>\n              <Box>\n                <Text>{info.label}:</Text>\n                <Flex mt=\"s2\">\n                  <Box width=\"3.1rem\" flexWrap=\"wrap\" lineHeight={\"lh3\"} sx={{\n                    wordBreak: 'break-word',\n                  }}>{info.value}</Box>\n                </Flex>\n              </Box>\n              <Flex color=\"c5\" variant=\"flexYCenter\">\n                <Text className=\"copyAddress\" data-clipboard-text={info.value} style={{padding: 0, color: '#0078FF'}}>\n                  {intl.formatMessage({id: 'copy'})}\n                </Text>\n              </Flex>\n            </Flex>\n          ))\n        }\n        </List>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, metaMask }) => {\n  return {\n    dexAccount,\n    metaMask\n  };\n};\n\nconst mapDispatchToProps = ({ metaMask }) => {\n  return {\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import _ from 'lodash'\nimport moment from 'moment'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\"\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport {\n  Box,\n  Flex,\n  Image,\n  Heading,\n  Text\n} from 'rebass'\nimport { Page, InfiniteScroll } from 'components'\nimport api from 'api'\n\n@injectIntl\nclass Widget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      list: [],\n      listHeight: document.documentElement.clientHeight - 40\n    }\n  }\n\n  componentDidMount() {\n    // 包在一个父里面，获取到父距离顶部的距离，然后用窗口大小减去此距离。\n    // 缺点：如果滚动列表下面又有东西要展示，需要再减去这个高度。但是一般不会出现这种情况。\n    const listHeight = document.documentElement.clientHeight - ReactDOM.findDOMNode(this.infinite).parentNode.offsetTop\n    console.info(ReactDOM.findDOMNode(this.infinite))\n    this.setState({listHeight})\n  }\n\n  onChangeTab (key) {\n    if (key === 'mine') {\n    } else {\n    }\n  }\n\n  fetchData = async function (pageParams) {\n    this.setState({ loading: true })\n\n    let { dexAccount } = this.props\n    let resp = await api.getUserBillEggPrizeList({\n      // address: '0x631562b916ab39d1753a61a5c55dc546528da790',\n      address: dexAccount.address,\n      ...pageParams,\n      sort: 'billTime',\n      sortDirection: 'desc',\n      // TODO: delete\n      startDate: '2020-01-02 18:00:00'\n    })\n    this.setState({ loading: false })\n    return resp\n  }.bind(this)\n  \n  renderItem = function (item) {\n    let { id, billTime, winnerWalletAddr, money, unit } = item\n\n    return (\n      <Flex key={id} height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" sx={{\n        borderTop: '1px solid',\n        borderTopColor: 'border',\n      }}>\n        <Flex width=\"1.5rem\"><Text ml=\"s1\" color=\"c2\">{moment(billTime).format('YYYY-MM-DD HH:mm:ss')}</Text></Flex>\n        {/* <Box width=\"1.1rem\" textAlign=\"right\">{winnerWalletAddr}</Box> */}\n        <Box width=\"0.5rem\" textAlign=\"center\">{money}</Box>\n        <Box width=\"0.5rem\" textAlign=\"center\">{unit}</Box>\n      </Flex>\n      \n    )\n  }.bind(this)\n\n  render() {\n    let { intl } = this.props\n    \n    return (\n      <Page>\n        <Box px=\"s2\" height=\"100%\" flexDirection=\"column\">\n          <Flex height=\".4rem\" alignItems=\"center\" justifyContent=\"space-between\" color=\"c2\" lineHeight=\"s1\">\n            <Box width=\"1.5rem\">{intl.formatMessage({id: 'timestamp'})}</Box>\n            {/* <Box width=\"1.1rem\" textAlign=\"right\">中奖人</Box> */}\n            <Box width=\"0.5rem\" textAlign=\"center\">{intl.formatMessage({id: 'mine.award.egg.list.header.amount'})}</Box>\n            <Box width=\"0.5rem\" textAlign=\"center\">{intl.formatMessage({id: 'tokenName'})}</Box>\n          </Flex>\n          <Flex height={this.state.listHeight}>\n            <InfiniteScroll ref={ref => this.infinite = ref}\n              listKey=\"rows\"\n              autoHeight={true}\n              // height={this.state.listHeight}\n              // height={410}\n              renderItem={this.renderItem} \n              fetchData={this.fetchData}\n              // parseRetList={ret => ret.data.data.dataList}\n              enableRefresh={true}\n              onRefresh={async () => {\n                await this.infinite.reset()\n                // await this.refreshDatas()\n              }}\n              // renderEmptyList={() => (\n              //   <div style={{ padding: 0, textAlign: 'center' }}>尚未中奖</div>\n              // )}\n              // initialListSize={20}\n              // useBodyScroll={true}\n            ></InfiniteScroll>\n          </Flex>\n        </Box>\n      </Page>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dexAccount, balance, walletBalance }) => {\n  return {\n    dexAccount,\n    balance,\n    walletBalance\n  };\n};\n\nconst mapDispatchToProps = ({ balance, walletBalance, transfer }) => {\n  return {\n    fetchBalances: balance.fetchBalances,\n    fetchWalletBalances: walletBalance.fetchAllBalances,\n  };\n};\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Widget))","import React, { Component, useEffect, useState } from 'react'\nimport { connect, Provider } from 'react-redux'\nimport { Switch, Route, Redirect } from \"react-router-dom\"\nimport { ActivityIndicator, Drawer } from 'antd-mobile';\nimport { injectIntl, FormattedMessage  } from 'react-intl'\nimport Login from 'views/Login'\nimport Home from 'views/Home'\nimport Pair from 'views/Pair'\nimport Market from 'views/Market'\nimport TransferList from 'views/transfer/TransferList'\nimport TransferCreate from 'views/transfer/TransferCreate'\nimport Setting from 'views/setting/Setting'\nimport Apikey from 'views/setting/Apikey'\nimport AwardRecord from 'views/setting/AwardRecord'\nimport { Toast } from 'utils'\n\nconst mapState = ({ persistData, appState }) => {\n  return {\n    locale: persistData.locale,\n    market: persistData.market,\n    notification: appState.notification,\n    showMarketDrawer: appState.showMarketDrawer,\n  }\n}\nconst mapDispatch = ({ appState }) => {\n  return {\n    updateAppState: appState.update,\n  }\n}\n\n@connect(mapState, mapDispatch)\n@injectIntl\nexport default class Widget extends React.Component {\n\n  componentWillReceiveProps(newProps) {\n    let { intl } = this.props\n    if (\n      // 不能加此判断，会导致进行两次相同的操作，第二次无效\n      // newProps.notification.message !== this.props.notification.message && \n      newProps.notification.message\n    ) {\n      let { type, message, duration = 1 } = newProps.notification\n      let typeMapping = {\n        error: 'fail',\n        warning: 'fail',\n      }\n      let toastType = typeMapping[type] || type\n      // 国际化只能在组件中。虽然有如下的方式，但是有内存泄露的风险。\n      // https://github.com/formatjs/react-intl/blob/master/docs/API.md#createintl\n      Toast[toastType](intl.formatMessage({id: message}), duration)\n    }\n  }\n\n  render() {\n    let { locale, market, showMarketDrawer, updateAppState } = this.props\n    return (\n      // drawer得放在最外层，否则有如下问题：\n      // 1. 由于 drawer 的 position 是 fixed，导致这里的 Drawer的 children 脱离了文档。css 处理有些麻烦。\n      // 2. drawer 及其 children 整个会盖在网页上，导致其他层级的点击都失效。但drawer套在整个根元素外层，则每这问题，如下面处理。\n      <Drawer\n        position='left'\n        sidebarStyle={{\n          width: '80%',\n          height: document.documentElement.clientHeight, background: 'white',\n          display: 'flex',\n          flexDirection: 'column'\n        }}\n        sidebar={<Pair />}\n        open={showMarketDrawer}\n        onOpenChange={open => updateAppState({showMarketDrawer: open})}\n      >\n        <Switch basename={locale}>\n          <Route exact path=\"/\" render={() => <Redirect to={`/cn/trade/${market}`} />} />\n          <Route exact path=\"/trade\" render={() => <Redirect to={`/cn/trade/${market}`} />} />\n\n          <Route exact path=\"/:locale/trade/:market\" component={Home} />\n          <Route exact path=\"/:locale/login\" component={Login} ></Route>\n          <Route exact path=\"/:locale/pair\" component={Pair} ></Route>\n          <Route exact path=\"/:locale/market\" component={Market} ></Route>\n          <Route exact path=\"/:locale/transfer/list\" component={TransferList} ></Route>\n          <Route exact path=\"/:locale/transfer/create\" component={TransferCreate} ></Route>\n          <Route exact path=\"/:locale/setting\" component={Setting} ></Route>\n          <Route exact path=\"/:locale/setting/apikey\" component={Apikey} ></Route>\n          <Route exact path=\"/:locale/setting/awardRecord\" component={AwardRecord} ></Route>\n        </Switch>\n      </Drawer>\n    )\n  }\n}\n","export default {\n  colors: {\n    text: '#000',\n    background: '#fff',\n    primary: '#07c',\n    secondary: '#30c',\n    muted: '#f6f6f9',\n    gray: '#c8c8c8',\n    highlight: 'hsla(205, 100%, 40%, 0.125)',\n    border: '#F0F0F0',\n    c1: '#646464',\n    c2: '#c8c8c8',\n    c3: '#FF3246',\n    c4: '#00A05A',\n    c5: '#0078FF',\n\n    c6: '#F0505A',\n    c7: '#50BE8C',\n  },\n  fonts: {\n    body: 'system-ui, sans-serif',\n    heading: 'inherit',\n    monospace: 'Menlo, monospace'\n  },\n  fontSizes: {\n    f1: '.12rem',\n    f2: '.14rem',\n    f3: '.16rem',\n    f4: '.2rem',\n    f5: '.24rem',\n    f6: '.3rem',\n    f7: '.38rem',\n    f8: '.46rem'\n  },\n  lineHeights: {\n    lh1: '.2rem',\n    lh2: '.22rem',\n    lh3: '.24rem',\n    lh4: '.28rem',\n    lh5: '.32rem',\n    lh6: '.38rem',\n    lh7: '.46rem',\n    lh8: '.54rem'\n  },\n  fontWeights: {\n    medium: 500,\n    semibold: 600,\n    bold: 700,\n    body: 400,\n    heading: 700,\n  },\n  space: {\n    s1: '.04rem',\n    s2: '.08rem',\n    s3: '.16rem',\n    s4: '.32rem',\n    s5: '.64rem',\n    s6: '1.28rem',\n    s7: '2.56rem',\n    mainPadding: '.08rem'\n  },\n  sizes: {\n    avatar: 48\n  },\n  radii: {\n    \"default\": 10,\n    circle: 99999\n  },\n  shadows: {\n    card: '0 0 4px rgba(0, 0, 0, .125)'\n  },\n  // rebass variants\n  text: {\n    heading: {\n      fontFamily: 'heading',\n      lineHeight: 'heading',\n      fontWeight: 'heading'\n    },\n    display: {\n      fontFamily: 'heading',\n      fontWeight: 'heading',\n      lineHeight: 'heading',\n      fontSize: [5, 6, 7]\n    },\n    caps: {\n      textTransform: 'uppercase',\n      letterSpacing: '0.1em'\n    }\n  },\n  variants: {\n    avatar: {\n      width: 'avatar',\n      height: 'avatar',\n      borderRadius: 'circle'\n    },\n    card: {\n      p: 2,\n      bg: 'background',\n      boxShadow: 'card'\n    },\n    link: {\n      color: 'primary'\n    },\n    nav: {\n      fontSize: 1,\n      fontWeight: 'bold',\n      display: 'inline-block',\n      p: 2,\n      color: 'inherit',\n      textDecoration: 'none',\n      ':hover,:focus,.active': {\n        color: 'primary'\n      }\n    },\n    flexCenter: {\n      justifyContent: \"space-around\",\n      alignItems: \"center\"\n    },\n    flexYCenter: {\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    },\n  },\n  buttons: {\n    primary: {\n      fontSize: 1,\n      color: 'background',\n      bg: 'black',\n      borderRadius: 'default'\n    },\n    outline: {\n      variant: 'buttons.primary',\n      color: 'primary',\n      bg: 'transparent',\n      boxShadow: 'inset 0 0 2px'\n    },\n    secondary: {\n      variant: 'buttons.primary',\n      color: 'background',\n      bg: 'secondary'\n    }\n  },\n  styles: {\n    root: {\n      fontFamily: 'body',\n      fontWeight: 'body',\n      lineHeight: 'body'\n    }\n  }\n}","import React, { Component, useEffect, useState } from 'react'\nimport { connect, Provider } from 'react-redux'\nimport { ConnectedRouter } from 'connected-react-router'\nimport { IntlProvider } from 'react-intl'\nimport { messages } from './locales'\nimport { ThemeProvider } from 'emotion-theming'\nimport Routes from './router';\nimport theme from 'theme'\nimport { ActivityIndicator } from 'antd-mobile';\n\nconst RouterWidget = ({\n  store, history, ready, loading, locale,\n  startup\n}) => {\n  const renderLoading = () => {\n    // 此时css文件尚未加载，需要使用内联style\n    return (\n      <ActivityIndicator\n        toast\n        text=\"加载中\"\n        animating={true}\n      />\n    )\n  }\n\n  return (\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <IntlProvider locale={locale} key={locale} messages={messages[locale]}>\n          <ConnectedRouter history={history}>\n            {!ready ? renderLoading() : <Routes />}\n          </ConnectedRouter>\n          <ActivityIndicator\n            toast\n            text=\"请稍后\"\n            animating={loading}\n          />\n        </IntlProvider>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n\nconst mapStateToProps = ({appState, persistData}) => {\n  return {\n    ready: appState.ready,\n    loading: appState.loading,\n    locale: persistData.locale,\n  }\n}\n\nconst mapDispatchToProps = ({appState}) => ({\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RouterWidget)\n","import axios from 'axios'\nimport qs from 'qs'\nimport _ from 'lodash'\n// import { Toast } from 'utils'\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL\nlet store = null\nconsole.log(process.env, SERVER_URL)\n\nlet authApi = axios.create({\n  // timeout: 10000,\n  baseURL: `${SERVER_URL}/Token`,\n  headers: {'Content-Type': 'application/x-www-form-urlencoded'}\n})\n\nauthApi.interceptors.response.use(function (response) {\n  return response\n}, function (error) {\n  return Promise.reject(error)\n})\n\nlet api = axios.create({\n  // timeout: 10000,\n  baseURL: `${SERVER_URL}`,\n  // headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n  // transformRequest: [function (data, headers) {\n  //   return qs.stringify(data)\n  // }]\n})\n\nlet notifyProcessUnauth = _.throttle(() => {\n  console.log('throttle')\n}, 10000, {'trailing': false})\n\napi.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  config.headers.common['Authorization'] = `Bearer ${store.auth.token}`\n  return config\n})\n\napi.interceptors.response.use(function (response) {\n  if (response.config.notHandleError) {\n    return response\n  }\n  // Do something with response data\n  if (response.data.success === false) {\n    // Toast.info(response.data.message, 1)\n    return Promise.reject(response)\n  }\n  return response\n}, function (error) {\n  // if (error.response.status === 401) {\n  //   console.log(error.response.status)\n  //   notifyProcessUnauth()\n  // }\n  return Promise.reject(error)\n})\n\nfunction init (globalStore) {\n  store = globalStore\n}\n\nfunction getUserInfo () {\n  return {\n    data: {\n      name: 'test'\n    }\n  }\n}\n\n// let's return back our create method as the default.\nexport default {\n  init,\n  getUserInfo\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport {render} from 'react-dom';\nimport { AppContainer } from 'react-hot-loader'\nimport './index.scss';\nimport App from './App';\nimport api from 'services/api';\nimport {history, store, reloadSaga} from 'store'\nimport moment from 'moment'\nimport _ from 'lodash'\nimport * as serviceWorker from './serviceWorker';\n\nmoment.locale('zh-CN')\n\nJSON.safeParse = function (data, defaultValue = []) {\n  return _.isEmpty(data) ? defaultValue : JSON.parse(data)\n}\n\napi.init(store) // 将store注入给api\n\nrender(\n  <AppContainer>\n    <App store={store} history={history} />\n  </AppContainer>,\n  document.getElementById('root')\n);\n\n\nif (module.hot) {\n  module.hot.accept('./router', () => {\n    const NextRoot = require('./router'); // eslint-disable-line global-require\n    console.log('###### hot load #######')\n    render(\n      <AppContainer>\n        <NextRoot store={store} history={history} />\n      </AppContainer>,\n      document.getElementById('root')\n    );\n  });\n\n  module.hot.accept(() => {\n    const newYieldedSagas = require('./sagas').default\n    reloadSaga(newYieldedSagas)\n  })\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();","import _ from 'lodash'\nimport { Account, Utils as lightConeUtils } from 'librarys/lightcone_v3'\nimport { dispatch, store } from 'store'\nimport api from 'api';\nimport { ENUM_ACCOUNT_STATUS } from 'utils/enum'\nimport { Toast as AntToast } from 'antd-mobile'\nimport BigNumber from 'bignumber.js';\n\nexport function getUrlParams(search) {\n  const hashes = search.slice(search.indexOf('?') + 1).split('&')\n  const params = {}\n  hashes.map(hash => {\n    const [key, val] = hash.split('=')\n    params[key] = decodeURIComponent(val)\n  })\n  return params\n}\n\nexport function makeCancelable (promise) {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then(\n      val => hasCanceled_ ? reject({isCanceled: true}) : resolve(val),\n      error => hasCanceled_ ? reject({isCanceled: true}) : reject(error)\n    );\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    },\n  };\n};\n\n// const isFunction = input => typeof input === 'function';\n// export default predicate => elemOrThunk =>\n//   predicate ? (isFunction(elemOrThunk) ? elemOrThunk() : elemOrThunk) : null;\nexport function renderIf (predicate) {\n  return elemOrThunk =>\n    predicate ? (_.isFunction(elemOrThunk) ? elemOrThunk() : elemOrThunk) : null;\n}\n\nexport function compareAppVersion(remoteVersion, localVersion){ \n  function toNum(a) {\n    a = a.toString();\n    //也可以这样写 var c=a.split(/\\./);\n    var c=a.split('.');\n    var num_place=[\"\",\"0\",\"00\",\"000\",\"0000\"],r=num_place.reverse();\n    for (var i=0;i<c.length;i++){ \n        var len=c[i].length;       \n        c[i]=r[len]+c[i];  \n    } \n    var res= c.join(''); \n    return res; \n  } \n\n  let rvNum = toNum(remoteVersion)\n  let lvNum = toNum(localVersion)\n  if (rvNum > lvNum) {\n    return 1\n  } else if (rvNum === lvNum) {\n    return 0\n  } else {\n    return -1\n  }\n}\n\n// 被 promisefy 的异步函数，需满足以下2点要求\n// 1. 最后一个参数是函数\n// 2. 回调函数的参数为 (err, result)，前面是可能的错误，后面是正常的结果\nfunction promisefy (asyncFunc) {\n  function promiseFunc (...args) {\n    // args 为实际调用时，传的前 n-1 个参数。\n    return new Promise((resolve, reject) => {\n      let preArgs = _.slice(args, 0, args.length)\n      asyncFunc(...preArgs, function (err, result) {\n        if (err) {\n          reject(new Error(err))\n        } else {\n          resolve(result)\n        }\n      })\n    })\n  }\n  return promiseFunc\n}\n\n// 回调函数的参数为 (result)\nfunction promisefyNoError (asyncFunc) {\n  function promiseFunc (...args) {\n    // args 为实际调用时，传的前 n-1 个参数。\n    return new Promise((resolve, reject) => {\n      let preArgs = _.slice(args, 0, args.length)\n      asyncFunc(...preArgs, function (result) {\n        resolve(result)\n      })\n    })\n  }\n  return promiseFunc\n}\n\nexport async function playVoice (audio, audioPath) {\n  return new Promise((resolve, reject) => {\n    audio.src = audioPath\n    audio.play()\n    console.info(audio.src, audio.duration)\n    audio.onended = function() {\n      resolve()\n    }\n  })\n}\n\nexport function parseUlrParams (name) {\n  let reg = new RegExp('(^|&|\\\\?|%3F)' + name + '(=|%3D)([^&]*)(&|$)')\n  let r = window.location.search.substr(1).match(reg)\n  return r && r[3]\n}\n\nexport function waitFor (ms) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve()\n    }, ms)\n  })\n}\n\nexport function shadeSn(sn) {\n  if (!sn) return\n  let chars = sn.split('')\n  chars = _.fill(chars, '*', 2, chars.length - 6)\n  return chars.join('')\n}\n\nexport function shadePhone(phone) {\n  if (!phone) return\n  let chars = phone.split('')\n  chars = _.fill(chars, '*', 3, chars.length - 4)\n  return chars.join('')\n}\n\nexport function checkPassword (passwordHash, relayAccount) {\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  console.info(passwordHash, keyPair.publicKeyX, relayAccount.publicKeyX)\n  return (\n    keyPair.secretKey &&\n    keyPair.publicKeyX === relayAccount.publicKeyX &&\n    keyPair.publicKeyY === relayAccount.publicKeyY\n  )\n}\n\nexport async function genApiKey (accountId, passwordHash) {\n  let exchangeAccount = new Account(window.wallet);\n  const keyPair = exchangeAccount.generateKeyPair(passwordHash);\n  let { publicKeyX, publicKeyY, secretKey } = keyPair\n\n  const signed = exchangeAccount.getApiKey(\n    accountId,\n    publicKeyX,\n    publicKeyY,\n    secretKey\n  );\n  const data = {\n    accountId: accountId,\n    publicKeyX: publicKeyX,\n    publicKeyY: publicKeyY\n  };\n  // 服务端生成\n  let resp = await api.getApiKey(data, signed.signature);\n  return resp.account\n}\n\nexport function genPasswordHash (address, password) {\n  return lightConeUtils.keccakHash(\"LOOPRING\" + address.toLowerCase() + lightConeUtils.keccakHash(password))\n}\n\nexport function formatPageParams ({ page, pageSize }) {\n  return {\n    offset: (page - 1) * pageSize,\n    limit: pageSize\n  }\n}\n\nexport async function withLoading (handler) {\n  dispatch.appState.update({ loading: true })\n  try {\n    let result = await handler()\n    dispatch.appState.update({ loading: false })\n    return result\n  } catch (e) {\n    console.info(\"!!!!!!withLoading error\", e)\n    dispatch.appState.update({ loading: false })\n  }\n}\n\nexport function setImmediateInterval (callback, interval) {\n  callback()\n  return setInterval(() => callback(), interval)\n}\n\nexport function getPrecision (num) {\n  let parts = num.toString().split('.')\n  return parts[1] ? parts[1].length : 0\n}\n\nexport function asLegalMoney (value, from, to = 'USD') {\n  let rootState = store.getState()\n  let { rate } = rootState\n\n  let list = rate[to]\n  let item = _.find(list, {symbol: from})\n  if (!item) return 0\n\n  let amount = value * item.price || 0\n  return toTokenPrecision(amount, to)\n}\n\nexport function toTokenPrecision (value = 0, symbol = 'LRC') {\n  if (symbol === 'USD') {\n    // USD的precision，借用USDT的\n    symbol = 'USDT'\n  }\n  let rootState = store.getState()\n  let { list } = rootState.tokens\n  let token = _.find(list, { symbol })\n\n  let precision = token && token.precision || 2\n  // toFixed自带四舍五入\n  // _.round有缺陷。比如_.round(1.2, 2)为 1.2，而不是 1.20\n  return Number(value).toFixed(precision)\n}\n\nexport function formatOrders (orders) {\n  return orders.map(order => {\n    let updatedOrder = { ...order }\n    const [baseTokenSymbol, quoteTokenSymbol] = updatedOrder.market.split('-')\n    let market = store.select.markets.getMarketBySymbol(store.getState(), baseTokenSymbol, quoteTokenSymbol)\n    let { pricePrecision, amountPrecision, totalPrecision } = market\n\n    let filledFee\n    let side = order['side'].toUpperCase()\n    if (side === 'BUY') {\n      filledFee = fromWEI(baseTokenSymbol, Number(order['filledFee']))\n    } else {\n      filledFee = fromWEI(quoteTokenSymbol, Number(order['filledFee']))\n    }\n    \n    const price = Number(order['price']).toFixed(pricePrecision)\n    const size = fromWEI(baseTokenSymbol, Number(order['size']), amountPrecision);\n    const filledSize = fromWEI(baseTokenSymbol, Number(order['filledSize']), amountPrecision);\n    const volume = fromWEI(quoteTokenSymbol, Number(order['volume']), totalPrecision);\n    const filledVolume = fromWEI(quoteTokenSymbol, Number(order['filledVolume']), totalPrecision);\n  \n    // let filledInNumber = order['side'].toUpperCase() === 'SELL' ? filledSize / size : filledVolume / volume\n    let filledInNumber = filledSize / size\n    filledInNumber = Math.floor(filledInNumber * 100);\n    const filled = `${filledInNumber}%`;\n  \n    updatedOrder['price'] = price;\n    updatedOrder['filledFee'] = filledFee;\n    updatedOrder['size'] = size;\n    updatedOrder['filledSize'] = filledSize;\n    updatedOrder['volume'] = volume;\n    updatedOrder['filledVolume'] = filledVolume;\n    updatedOrder['filled'] = filled;\n    return updatedOrder\n  })\n}\n\nexport function checkLogined () {\n  let rootState = store.getState()\n  let { dexAccount: { address, state }, metaMask: { enable  } } = rootState\n\n  // 1. enable 才代表metamask已经获取到了地址，adderss 有可能是缓存的。\n  if (!enable ) return false\n\n  // 2. dexAccount中必须有地址。\n  if (!address) return false\n\n  // 3. 账号状态必须正常。\n  // 不仅仅是LOGGED_IN才算登录态。输入过密码并验证通过了，都不显示登录按钮。\n  let signinedStatus = [\n    ENUM_ACCOUNT_STATUS.CREATED,\n    ENUM_ACCOUNT_STATUS.LOGGED_IN,\n    ENUM_ACCOUNT_STATUS.CREATING,\n    ENUM_ACCOUNT_STATUS.LOCKED,\n  ].map(status => status.getValue())\n  let logined = _.includes(signinedStatus, state)\n  return logined\n}\n\nconst notifyDebounceTime = 5000\nexport const Toast = {\n  success: _.debounce(AntToast.success, notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  info: _.debounce(AntToast.info, notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  fail: _.debounce(AntToast.fail, notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  loading: _.debounce(AntToast.loading, notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n  offline: _.debounce(AntToast.offline, notifyDebounceTime, {\n    'leading': true,\n    'trailing': false\n  }),\n}\n\nexport function getTradingViewLocale (locale) {\n  // 把系统的语言包换成 tradingview 的格式。\n  return 'zh'\n}\n\nexport function formatResolution (str) {\n  if (str === 'D') {\n    return 24 * 60\n  } else if (str === 'W') {\n    return 7 * 24 * 60\n  } else {\n    return Number(str)\n  }\n}\n\nfunction fromWEI (symbol, valueInWEI, precision, ceil = false) {\n  let token = store.select.tokens.getTokenBySymbol(store.getState(), symbol)\n\n  if (!token) {\n    return 0\n  }\n  const value = BigNumber(valueInWEI).div(\"1e\" + token.digits)\n  precision = precision || token.precision\n\n  if (ceil) {\n    return value.decimalPlaces(token.precision).toNumber()\n  } else {\n    return value.toNumber().toFixed(precision)\n  }\n}\n\nfunction toWEI (symbol, value) {\n  let token = store.select.tokens.getTokenBySymbol(store.getState(), symbol)\n\n  if (!token) {\n    return 0;\n  }\n  const valueInBN = BigNumber(value).times(\"1e\" + token.digits)\n  return valueInBN.toString(10)\n}\n\nexport default {\n  getUrlParams,\n  checkPassword,\n  genApiKey,\n  genPasswordHash,\n  formatPageParams,\n  waitFor,\n  renderIf,\n  promisefy,\n  withLoading,\n  setImmediateInterval,\n  getPrecision,\n  asLegalMoney,\n  toTokenPrecision,\n  formatOrders,\n  checkLogined,\n  Toast,\n  getTradingViewLocale,\n  formatResolution,\n  fromWEI,\n  toWEI\n}"],"sourceRoot":""}